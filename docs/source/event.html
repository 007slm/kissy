<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>The source code</title>
  <link href="../resources/prettify/prettify.css" type="text/css" rel="stylesheet" />
  <script type="text/javascript" src="../resources/prettify/prettify.js"></script>
  <style type="text/css">
    .highlight { display: block; background-color: #ddd; }
  </style>
  <script type="text/javascript">
    function highlight() {
      document.getElementById(location.hash.replace(/#/, "")).className = "highlight";
    }
  </script>
</head>
<body onload="prettyPrint(); highlight();">
  <pre class="prettyprint lang-js"><span id='global-property-'>/**
</span> * @ignore
 * @fileOverview KISSY Scalable Event Framework
 * @author yiminghe@gmail.com
 */
KISSY.add('event', function (S, _data, KeyCodes, Event, Target, Object) {
    S.mix(Event,
<span id='KISSY-Event-EventMod'>        /**
</span>         * @override KISSY.Event
         * @class KISSY.Event.EventMod
         * @singleton
         */
        {
            KeyCodes:KeyCodes,
            Target:Target,
            Object:Object,
<span id='KISSY-Event-method-on'>            /**
</span>             * Same with {@link KISSY.Event#add}
             * @method
             * @member KISSY.Event
             */
            on:Event.add,
<span id='KISSY-Event-method-detach'>            /**
</span>             * Same with {@link KISSY.Event#remove}
             * @method
             * @member KISSY.Event
             */
            detach:Event.remove,
<span id='KISSY-Event-method-delegate'>            /**
</span>             * Delegate event.
             * @param targets KISSY selector             *
             * @param {String|Function} selector filter selector string or function to find right element
             * @param {String} [eventType] The type of event to delegate.
             * use space to separate multiple event types.
             * @param {Function} [fn] The event handler/listener.
             * @param {Object} [scope] The scope (this reference) in which the handler function is executed.
             * @member KISSY.Event
             */
            delegate:function (targets, eventType, selector, fn, scope) {
                return Event.add(targets, eventType, {
                    fn:fn,
                    scope:scope,
                    selector:selector
                });
            },
<span id='KISSY-Event-method-undelegate'>            /**
</span>             * undelegate event.
             * @param targets KISSY selector
             * @param {String} [eventType] The type of event to undelegate.
             * use space to separate multiple event types.
             * @param {String|Function} [selector] filter selector string or function to find right element
             * @param {Function} [fn] The event handler/listener.
             * @param {Object} [scope] The scope (this reference) in which the handler function is executed.
             * @member KISSY.Event
             */
            undelegate:function (targets, eventType, selector, fn, scope) {
                return Event.remove(targets, eventType, {
                    fn:fn,
                    scope:scope,
                    selector:selector
                });
            }
        });

    // for debugger
    S.mix(Event, _data);

    S.mix(S, {
        Event:Event,
        EventTarget:Event.Target,
        EventObject:Event.Object
    });

    return Event;
}, {
    requires:[
        'event/data',
        'event/key-codes',
        'event/base',
        'event/target',
        'event/object',
        'event/focusin',
        'event/hashchange',
        'event/valuechange',
        'event/mouseenter',
        'event/submit',
        'event/change',
        'event/mousewheel',
        'event/add',
        'event/remove'
    ]
});

/*
   2012-02-12 yiminghe@gmail.com note:
    - 普通 remove() 不管 selector 都会查，如果 fn scope 相等就移除
    - undelegate() selector 为 ''，那么去除所有委托绑定的 handler
 */</pre>
</body>
</html>
