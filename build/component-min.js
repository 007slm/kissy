/*
Copyright 2012, KISSY UI Library v1.30dev
MIT Licensed
build time: May 14 16:04
*/
KISSY.add("component",function(f,e,c,a,b,h,k,j){f={Render:c,Container:a,UIStore:b,DelegateChildren:h,DecorateChild:j,DecorateChildren:k};f.Controller=e;return f},{requires:"component/controller,component/render,component/container,component/uistore,component/delegateChildren,component/decorateChildren,component/decorateChild".split(",")});KISSY.add("component/container",function(f,e,c,a,b,h){return e.create(c,[b,h],{})},{requires:["uibase","./controller","./uistore","./delegateChildren","./decorateChildren"]});
KISSY.add("component/controller",function(f,e,c,a,b,h){function k(d){return function(g){var g=g.newVal,a=this.get("view");a&&a.set(d,g)}}function j(d){return function(g){var a=this.get("view");return g===h?a&&a.get(d):g}}function l(d,g,a){d.create();var b=d.getContentElement();g.__set("parent",d);g.set("render",b);g.set("elBefore",a);d.get("rendered")?g.render():g.create()}function m(d,a){var b=d.relatedTarget;return b&&(b===a[0]||a.contains(b))}var n=c.create([c.Box],{getCssClassWithPrefix:a.getCssClassWithPrefix,
initializer:function(){var d=this.__attrs||{},a;for(a in d)if(d.hasOwnProperty(a)){var b=d[a];b.view&&(this.on("after"+f.ucfirst(a)+"Change",k(a)),b.getter=j(a))}},createDom:function(){var d;if(!(d=this.get("view"))){var b=this.constructor;d={};for(var i;b&&!i;)i=b.DefaultRender,b=b.superclass&&b.superclass.constructor;if(i){var b=this.__attrs||{},c;for(c in b)if(b.hasOwnProperty(c)){var e;if(b[c].view&&(e=this.get(c))!==h)d[c]=e}d=new i(d)}else d=0}i=d;c=this.constructor;for(e=[];c&&c!=n;)(d=a.getCssClassByUIConstructor(c))&&
e.push(d),c=c.superclass&&c.superclass.constructor;i.__componentClasses=e.join(" ");i.create();c=i.getKeyEventTarget();this.get("focusable")?c.attr("tabIndex",0):c.unselectable(h);this.__set("view",i)},renderUI:function(){var d,a;this.get("view").render();var b=this.get("children");for(d=0;d<b.length;d++)a=b[d],l(this,a),a.render()},bindUI:function(){var d=this.get("focusable"),a=this.get("handleMouseEvents"),b=this.getKeyEventTarget();if(d)b.on("focus",this.handleFocus,this).on("blur",this.handleBlur,
this).on("keydown",this.handleKeydown,this);a&&(b=this.get("el"),b.on("mouseenter",this.handleMouseEnter,this).on("mouseleave",this.handleMouseLeave,this).on("mousedown",this.handleMouseDown,this).on("mouseup",this.handleMouseUp,this).on("dblclick",this.handleDblClick,this))},getContentElement:function(){var d=this.get("view");return d&&d.getContentElement()},getKeyEventTarget:function(){var d=this.get("view");return d&&d.getKeyEventTarget()},addChild:function(d,a){var b=this.get("children"),c=null;
a!==h?(c=b[a].get("el")||null,b.splice(a,0,d)):b.push(d);l(this,d,c)},removeChild:function(a,b){var c=this.get("children"),h=f.indexOf(a,c);-1!=h&&c.splice(h,1);b&&a.destroy();return a},removeChildren:function(a){var b,c=[].concat(this.get("children"));for(b=0;b<c.length;b++)this.removeChild(c[b],a);this.__set("children",[])},getChildAt:function(a){return this.get("children")[a]||null},handleDblClick:function(a){if(this.get("disabled"))return!0;this.performActionInternal(a)},handleMouseOver:function(a){var b=
this.get("el");if(this.get("disabled"))return!0;m(a,b)||this.handleMouseEnter(a)},handleMouseOut:function(a){var b=this.get("el");if(this.get("disabled"))return!0;m(a,b)||this.handleMouseLeave(a)},handleMouseEnter:function(a){if(this.get("disabled"))return!0;this.set("highlighted",!!a)},handleMouseLeave:function(a){if(this.get("disabled"))return!0;this.set("active",!1);this.set("highlighted",!a)},handleMouseDown:function(a){var b=1==a.which;if(this.get("disabled"))return!0;b&&(b=this.getKeyEventTarget(),
this.get("activeable")&&this.set("active",!0),this.get("focusable")?(b[0].focus(),this.set("focused",!0)):(b=(b=a.target.nodeName)&&b.toLowerCase(),"input"!=b&&"textarea"!=b&&a.preventDefault()))},handleMouseUp:function(a){if(this.get("disabled"))return!0;this.get("active")&&1==a.which&&(this.performActionInternal(a),this.set("active",!1))},handleFocus:function(a){this.set("focused",!!a)},handleBlur:function(a){this.set("focused",!a)},handleKeyEventInternal:function(a){if(a.keyCode==e.KeyCodes.ENTER)return this.performActionInternal(a)},
handleKeydown:function(a){if(this.get("disabled"))return!0;this.handleKeyEventInternal(a)&&a.halt()},performActionInternal:function(){},destructor:function(){var a,b=this.get("children");for(a=0;a<b.length;a++)b[a].destroy();(a=this.get("view"))&&a.destroy()}},{ATTRS:{handleMouseEvents:{value:!0},focusable:{view:!0,value:!0},activeable:{value:!0},focused:{view:!0},active:{view:!0},highlighted:{view:!0},children:{value:[]},prefixCls:{view:!0,value:"ks-"},parent:{},view:{},disabled:{view:!0}},DefaultRender:b},
"Component_Controller");return n},{requires:["event","uibase","./uistore","./render"]});KISSY.add("component/decorateChild",function(f,e){function c(){}f.augment(c,e,{decorateInternal:function(a){this.set("el",a);var b=this.get("decorateChildCls");if(a=a.one("."+this.getCssClassWithPrefix(b)))(b=this.findUIConstructorByNode(a))?this.decorateChildrenInternal(b,a):this.decorateChildren(a)}});return c},{requires:["./decorateChildren"]});
KISSY.add("component/decorateChildren",function(f,e){function c(){}f.augment(c,{decorateInternal:function(a){this.set("el",a);this.decorateChildren(a)},findUIConstructorByNode:function(a){var a=a.attr("class")||"",b=this.get("prefixCls"),a=a.replace(RegExp("\\b"+b,"ig"),"");return e.getUIConstructorByCssClass(a)},decorateChildrenInternal:function(a,b){this.addChild(new a({srcNode:b,prefixCls:this.get("prefixCls")}))},decorateChildren:function(a){var b=this;a.children().each(function(a){var c=b.findUIConstructorByNode(a);
b.decorateChildrenInternal(c,a)})}});return c},{requires:["./uistore"]});
KISSY.add("component/delegateChildren",function(f){function e(){}function c(a){var b=this.getOwnerControl(a.target);if(b)switch(a.type){case "mousedown":b.handleMouseDown(a);break;case "mouseup":b.handleMouseUp(a);break;case "mouseover":b.handleMouseOver(a);break;case "mouseout":b.handleMouseOut(a);break;case "dblclick":b.handleDblClick(a)}}f.augment(e,{__bindUI:function(){this.get("el").on("mousedown mouseup mouseover mouseout dblclick",c,this)},getOwnerControl:function(a){for(var b=this.get("children"),
c=b.length,e=this.get("el")[0];a&&a!==e;){for(var f=0;f<c;f++)if(b[f].get("el")[0]===a)return b[f];a=a.parentNode}return null}});return e});
KISSY.add("component/render",function(f,e,c){return e.create([e.Box.Render],{getComponentCssClassWithState:function(a){var b=this.__componentClasses,a=a||"";return this.getCssClassWithPrefix(b.split(/\s+/).join(a+" ")+a)},getCssClassWithPrefix:c.getCssClassWithPrefix,createDom:function(){this.get("el").addClass(this.getComponentCssClassWithState())},getKeyEventTarget:function(){return this.get("el")},getContentElement:function(){return this.get("contentEl")||this.get("el")},_uiSetHighlighted:function(a){var b=
this.getComponentCssClassWithState("-hover");this.get("el")[a?"addClass":"removeClass"](b)},_uiSetDisabled:function(a){var b=this.getComponentCssClassWithState("-disabled");this.get("el")[a?"addClass":"removeClass"](b).attr("aria-disabled",a);this.get("focusable")&&this.getKeyEventTarget().attr("tabIndex",a?-1:0)},_uiSetActive:function(a){var b=this.getComponentCssClassWithState("-active");this.get("el")[a?"addClass":"removeClass"](b).attr("aria-pressed",!!a)},_uiSetFocused:function(a){var b=this.get("el"),
c=this.getComponentCssClassWithState("-focused");b[a?"addClass":"removeClass"](c)}},{ATTRS:{prefixCls:{},focusable:{},focused:{},active:{},disabled:{},highlighted:{}}},"Component_Render")},{requires:["uibase","./uistore"]});
KISSY.add("component/uistore",function(f){function e(a){for(var a=f.trim(a).split(/\s+/),c=0;c<a.length;c++)a[c]&&(a[c]=this.get("prefixCls")+a[c]);return a.join(" ")}var c={},a={getCssClassWithPrefix:e,getCssClassByUIConstructor:function(a){for(var e in c)if(c[e].ui==a)return e;return 0},getUIConstructorByCssClass:function(a){for(var a=a.split(/\s+/),e=null,f=0;f<a.length;f++){var j=c[a[f]];j&&-1<j.priority&&(e=j.ui)}return e},setUIConstructorByCssClass:function(a,e){c[a]=e},PRIORITY:{LEVEL1:10,
LEVEL2:20,LEVEL3:30,LEVEL4:40,LEVEL5:50,LEVEL6:60}};a.getCssClassWithPrefix=e;return a});
