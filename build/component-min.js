/*
Copyright 2012, KISSY UI Library v1.30dev
MIT Licensed
build time: May 25 12:28
*/
KISSY.add("component",function(g,f,d,a,b,h,j,i){g={Render:d,Container:a,UIStore:b,DelegateChildren:h,DecorateChild:i,DecorateChildren:j};g.Controller=f;return g},{requires:"component/controller,component/render,component/container,component/uistore,component/delegateChildren,component/decorateChildren,component/decorateChild".split(",")});KISSY.add("component/container",function(g,f,d,a,b,h){return f.create(d,[b,h],{})},{requires:["uibase","./controller","./uistore","./delegateChildren","./decorateChildren"]});
KISSY.add("component/controller",function(g,f,d,a,b,h){function j(c){return function(e){var e=e.newVal,a=this.get("view");a&&a.set(c,e)}}function i(c){return function(e){var a=this.get("view");return e===h?a&&a.get(c):e}}function l(c,e){c instanceof k||(e&&!c.prefixCls&&(c.prefixCls=e.get("prefixCls")),c=new (a.getUIConstructorByCssClass(c.xclass))(c));return c}function m(c,e,a){c.create();var b=c.getContentElement(),e=l(e,c);e.__set("parent",c);e.set("render",b);e.set("elBefore",a);c.get("rendered")?
e.render():e.create();return e}function n(c,e){var a=c.relatedTarget;return a&&(a===e[0]||e.contains(a))}var k=d.create([d.Box],{getCssClassWithPrefix:a.getCssClassWithPrefix,initializer:function(){var c=this.__attrs||{},e;for(e in c)if(c.hasOwnProperty(e)){var a=c[e];a.view&&(this.on("after"+g.ucfirst(e)+"Change",j(e)),a.getter=i(e))}},createDom:function(){var c;if(!(c=this.get("view"))){var e=this.constructor;c={};for(var b;e&&!b;)b=e.DefaultRender,e=e.superclass&&e.superclass.constructor;if(b){var e=
this.__attrs||{},d;for(d in e)if(e.hasOwnProperty(d)){var f;if(e[d].view&&(f=this.get(d))!==h)c[d]=f}c=new b(c)}else c=0}b=c;d=this.constructor;for(f=[];d&&d!=k;)(c=a.getCssClassByUIConstructor(d))&&f.push(c),d=d.superclass&&d.superclass.constructor;b.__componentClasses=f.join(" ");b.create();d=b.getKeyEventTarget();this.get("focusable")?d.attr("tabIndex",0):d.unselectable(h);this.__set("view",b)},renderUI:function(){var c,e;this.get("view").render();var a=this.get("children");for(c=0;c<a.length;c++)e=
a[c],e=m(this,e),a[c]=e,e.render()},bindUI:function(){var c=this.get("focusable"),a=this.get("handleMouseEvents"),b=this.getKeyEventTarget();if(c)b.on("focus",this.handleFocus,this).on("blur",this.handleBlur,this).on("keydown",this.handleKeydown,this);a&&(b=this.get("el"),b.on("mouseenter",this.handleMouseEnter,this).on("mouseleave",this.handleMouseLeave,this).on("mousedown",this.handleMouseDown,this).on("mouseup",this.handleMouseUp,this).on("dblclick",this.handleDblClick,this))},getContentElement:function(){var c=
this.get("view");return c&&c.getContentElement()},getKeyEventTarget:function(){var c=this.get("view");return c&&c.getKeyEventTarget()},addChild:function(c,a){var b=this.get("children"),d;a===h&&(a=b.length);d=b[a]&&b[a].get("el")||null;c=m(this,c,d);b.splice(a,0,c)},removeChild:function(c,a){var b=this.get("children"),d=g.indexOf(c,b);-1!=d&&b.splice(d,1);a&&c.destroy();return c},removeChildren:function(c){var a,b=[].concat(this.get("children"));for(a=0;a<b.length;a++)this.removeChild(b[a],c);this.__set("children",
[])},getChildAt:function(c){return this.get("children")[c]||null},handleDblClick:function(c){if(this.get("disabled"))return!0;this.performActionInternal(c)},handleMouseOver:function(c){var a=this.get("el");if(this.get("disabled"))return!0;n(c,a)||this.handleMouseEnter(c)},handleMouseOut:function(a){var b=this.get("el");if(this.get("disabled"))return!0;n(a,b)||this.handleMouseLeave(a)},handleMouseEnter:function(a){if(this.get("disabled"))return!0;this.set("highlighted",!!a)},handleMouseLeave:function(a){if(this.get("disabled"))return!0;
this.set("active",!1);this.set("highlighted",!a)},handleMouseDown:function(a){var b=1==a.which;if(this.get("disabled"))return!0;b&&(b=this.getKeyEventTarget(),this.get("activeable")&&this.set("active",!0),this.get("focusable")?(b[0].focus(),this.set("focused",!0)):(b=(b=a.target.nodeName)&&b.toLowerCase(),"input"!=b&&"textarea"!=b&&a.preventDefault()))},handleMouseUp:function(a){if(this.get("disabled"))return!0;this.get("active")&&1==a.which&&(this.performActionInternal(a),this.set("active",!1))},
handleFocus:function(a){this.set("focused",!!a)},handleBlur:function(a){this.set("focused",!a)},handleKeyEventInternal:function(a){if(a.keyCode==f.KeyCodes.ENTER)return this.performActionInternal(a)},handleKeydown:function(a){if(this.get("disabled"))return!0;this.handleKeyEventInternal(a)&&a.halt()},performActionInternal:function(){},destructor:function(){var a,b=this.get("children");for(a=0;a<b.length;a++)b[a].destroy();(a=this.get("view"))&&a.destroy()}},{ATTRS:{handleMouseEvents:{value:!0},focusable:{view:!0,
value:!0},activeable:{value:!0},focused:{view:!0},active:{view:!0},highlighted:{view:!0},children:{value:[]},prefixCls:{view:!0,value:"ks-"},parent:{},view:{},disabled:{view:!0}},create:l,DefaultRender:b},"Component_Controller");return k},{requires:["event","uibase","./uistore","./render"]});
KISSY.add("component/decorateChild",function(g,f){function d(){}g.augment(d,f,{decorateInternal:function(a){this.set("el",a);var b=this.get("decorateChildCls");if(a=a.one("."+this.getCssClassWithPrefix(b)))(b=this.findUIConstructorByNode(a))?this.decorateChildrenInternal(b,a):this.decorateChildren(a)}});return d},{requires:["./decorateChildren"]});
KISSY.add("component/decorateChildren",function(g,f){function d(){}g.augment(d,{decorateInternal:function(a){this.set("el",a);this.decorateChildren(a)},findUIConstructorByNode:function(a){var a=a.attr("class")||"",b=this.get("prefixCls"),a=a.replace(RegExp("\\b"+b,"ig"),"");return f.getUIConstructorByCssClass(a)},decorateChildrenInternal:function(a,b){this.addChild(new a({srcNode:b,prefixCls:this.get("prefixCls")}))},decorateChildren:function(a){var b=this;a.children().each(function(a){var d=b.findUIConstructorByNode(a);
b.decorateChildrenInternal(d,a)})}});return d},{requires:["./uistore"]});
KISSY.add("component/delegateChildren",function(g){function f(){}function d(a){var b=this.getOwnerControl(a.target);if(b)switch(a.type){case "mousedown":b.handleMouseDown(a);break;case "mouseup":b.handleMouseUp(a);break;case "mouseover":b.handleMouseOver(a);break;case "mouseout":b.handleMouseOut(a);break;case "dblclick":b.handleDblClick(a)}}g.augment(f,{__bindUI:function(){this.get("el").on("mousedown mouseup mouseover mouseout dblclick",d,this)},getOwnerControl:function(a){for(var b=this.get("children"),
d=b.length,f=this.get("el")[0];a&&a!==f;){for(var g=0;g<d;g++)if(b[g].get("el")[0]===a)return b[g];a=a.parentNode}return null}});return f});
KISSY.add("component/render",function(g,f,d){return f.create([f.Box.Render],{getComponentCssClassWithState:function(a){var b=this.__componentClasses,a=a||"";return this.getCssClassWithPrefix(b.split(/\s+/).join(a+" ")+a)},getCssClassWithPrefix:d.getCssClassWithPrefix,createDom:function(){this.get("el").addClass(this.getComponentCssClassWithState())},getKeyEventTarget:function(){return this.get("el")},getContentElement:function(){return this.get("contentEl")||this.get("el")},_uiSetHighlighted:function(a){var b=
this.getComponentCssClassWithState("-hover");this.get("el")[a?"addClass":"removeClass"](b)},_uiSetDisabled:function(a){var b=this.getComponentCssClassWithState("-disabled");this.get("el")[a?"addClass":"removeClass"](b).attr("aria-disabled",a);this.get("focusable")&&this.getKeyEventTarget().attr("tabIndex",a?-1:0)},_uiSetActive:function(a){var b=this.getComponentCssClassWithState("-active");this.get("el")[a?"addClass":"removeClass"](b).attr("aria-pressed",!!a)},_uiSetFocused:function(a){var b=this.get("el"),
d=this.getComponentCssClassWithState("-focused");b[a?"addClass":"removeClass"](d)}},{ATTRS:{prefixCls:{},focusable:{},focused:{},active:{},disabled:{},highlighted:{}}},"Component_Render")},{requires:["uibase","./uistore"]});
KISSY.add("component/uistore",function(g){function f(a){for(var a=g.trim(a).split(/\s+/),d=0;d<a.length;d++)a[d]&&(a[d]=this.get("prefixCls")+a[d]);return a.join(" ")}var d={},a={getCssClassWithPrefix:f,getCssClassByUIConstructor:function(a){for(var f in d)if(d[f].ui==a)return f;return 0},getUIConstructorByCssClass:function(a){for(var a=a.split(/\s+/),f=null,g=0;g<a.length;g++){var i=d[a[g]];i&&-1<i.priority&&(f=i.ui)}return f},setUIConstructorByCssClass:function(a,f){d[a]=f},PRIORITY:{LEVEL1:10,
LEVEL2:20,LEVEL3:30,LEVEL4:40,LEVEL5:50,LEVEL6:60}};a.getCssClassWithPrefix=f;return a});
