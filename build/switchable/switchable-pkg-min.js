/*
Copyright 2011, KISSY UI Library v1.1.8dev
MIT Licensed
build time: ${build.time}
*/
KISSY.add("switchable",function(b){function h(d,a){a=a||{};if(!("markupType"in a))if(a.panelCls)a.markupType=1;else if(a.panels)a.markupType=2;for(var e=this.constructor;e;){a=b.merge(e.Config,a);e=e.superclass?e.superclass.constructor:null}this.container=k.get(d);this.config=a;this.activeIndex=this.completedIndex=a.activeIndex;if(!(this.activeIndex>-1))if(typeof a.switchTo!="number")this.completedIndex=this.activeIndex=0;this._init();this._initPlugins();this.fire(u);this.activeIndex>-1||typeof a.switchTo==
"number"&&this.switchTo(a.switchTo)}var k=b.DOM,p=b.Event,n=b.EventTarget,u="init";h.Config={markupType:0,navCls:"ks-switchable-nav",contentCls:"ks-switchable-content",triggerCls:"ks-switchable-trigger",panelCls:"ks-switchable-panel",triggers:[],panels:[],hasTriggers:true,triggerType:"mouse",delay:0.1,activeIndex:-1,activeTriggerCls:"ks-active",steps:1,viewSize:[]};h.Plugins=[];b.augment(h,n,{_initPlugins:function(){for(var d=this,a=d.constructor;a;){b.each(a.Plugins,function(e){e.init&&e.init(d)});
a=a.superclass?a.superclass.constructor:null}},_init:function(){var d=this.config;this._parseMarkup();d.hasTriggers&&this._bindTriggers()},_parseMarkup:function(){var d=this.container,a=this.config,e,j,g=[],m=[];switch(a.markupType){case 0:if(e=k.get("."+a.navCls,d))g=k.children(e);j=k.get("."+a.contentCls,d);m=k.children(j);break;case 1:g=k.query("."+a.triggerCls,d);m=k.query("."+a.panelCls,d);break;case 2:g=a.triggers;m=a.panels}d=m.length;this.length=d/a.steps;if(a.hasTriggers&&d>0&&g.length===
0)g=this._generateTriggersMarkup(this.length);this.triggers=b.makeArray(g);this.panels=b.makeArray(m);this.content=j||m[0].parentNode;this.nav=e||a.hasTriggers&&g[0].parentNode},_generateTriggersMarkup:function(d){var a=this.config,e=k.create("<ul>"),j,g;e.className=a.navCls;for(g=0;g<d;g++){j=k.create("<li>");if(g===this.activeIndex)j.className=a.activeTriggerCls;j.innerHTML=g+1;e.appendChild(j)}this.container.appendChild(e);return k.children(e)},_bindTriggers:function(){var d=this,a=d.config,e=
d.triggers,j,g,m=e.length;for(g=0;g<m;g++)(function(o){j=e[o];p.on(j,"click",function(q){d._onFocusTrigger(o,q)});if(a.triggerType==="mouse"){p.on(j,"mouseenter",function(q){d._onMouseEnterTrigger(o,q)});p.on(j,"mouseleave",function(){d._onMouseLeaveTrigger(o)})}})(g)},_onFocusTrigger:function(d,a){if(this._triggerIsValid(d)){this._cancelSwitchTimer();this.switchTo(d,undefined,{originalEvent:a.originalEvent})}},_onMouseEnterTrigger:function(d,a){var e=this;if(e._triggerIsValid(d))e.switchTimer=b.later(function(){e.switchTo(d,
undefined,{originalEvent:a.originalEvent})},e.config.delay*1E3)},_onMouseLeaveTrigger:function(){this._cancelSwitchTimer()},_triggerIsValid:function(d){return this.activeIndex!==d},_cancelSwitchTimer:function(){if(this.switchTimer){this.switchTimer.cancel();this.switchTimer=undefined}},switchTo:function(d,a,e,j){var g=this,m=g.config,o=g.triggers,q=g.panels,v=g.activeIndex,y=m.steps,s=v*y,r=d*y;if(!g._triggerIsValid(d))return g;if(g.fire("beforeSwitch",{toIndex:d})===false)return g;if(m.hasTriggers)g._switchTrigger(v>
-1?o[v]:null,o[d]);if(a===undefined)a=d>v?"forward":"backward";g._switchView(v>-1?q.slice(s,s+y):null,q.slice(r,r+y),d,a,e,function(){j&&j.call(g,d);g.completedIndex=d});g.activeIndex=d;return g},_switchTrigger:function(d,a){var e=this.config.activeTriggerCls;d&&k.removeClass(d,e);k.addClass(a,e)},_switchView:function(d,a,e,j,g,m){d&&k.css(d,"display","none");k.css(a,"display","block");this._fireOnSwitch(e,g);m&&m.call(this)},_fireOnSwitch:function(d,a){this.fire("switch",b.mix(a||{},{currentIndex:d}))},
prev:function(d){var a=this.activeIndex;this.switchTo(a>0?a-1:this.length-1,"backward",d)},next:function(d){var a=this.activeIndex;this.switchTo(a<this.length-1?a+1:0,"forward",d)}});return b.Switchable=h});
KISSY.add("switchable/aria",function(b,h,k,p){function n(){this.stop&&this.stop()}function u(){this.start&&this.start()}h=b.DOM;k=b.Event;p=b.Switchable;var d=!document.documentElement.hasAttribute?function(e,j){j=j.toLowerCase();var g=h.get(e).getAttributeNode(j);return!!(g&&g.specified)}:function(e,j){j=j.toLowerCase();return h.get(e).hasAttribute(j)};p.Plugins.push({name:"aria",init:function(e){if(e.config.aria){var j=e.container;k.on(j,"focusin",n,e);k.on(j,"focusout",u,e)}}});var a=["a","input",
"button","object"];p.Aria={setTabIndex:function(e,j){e.tabIndex=j;h.query("*",e).each(function(g){var m=g.nodeName.toLowerCase();if(b.inArray(m,a)){d(g,"oriTabIndex")||h.attr(g,"oriTabIndex",g.tabIndex);g.tabIndex=j!=-1?h.attr(g,"oriTabIndex"):j}})}}});
KISSY.add("switchable/accordion/base",function(b,h,k){function p(n,u){if(!(this instanceof p))return new p(n,u);p.superclass.constructor.apply(this,arguments);return 0}k=b.Switchable;h=b.DOM;b.extend(p,k,{_switchTrigger:function(n,u){var d=this.config;d.multiple?h.toggleClass(u,d.activeTriggerCls):p.superclass._switchTrigger.apply(this,arguments)},_triggerIsValid:function(n){return p.superclass._triggerIsValid.call(this,n)||this.config.multiple},_switchView:function(n,u,d,a,e,j){var g=u[0];if(this.config.multiple){h.toggle(g);
this._fireOnSwitch(d,e);j.call(this)}else p.superclass._switchView.apply(this,arguments)}});p.Plugins=[];p.Config={markupType:1,triggerType:"click",multiple:false};return b.Accordion=p});
KISSY.add("switchable/accordion/aria",function(b,h,k){function p(i){var w;b.each(this.triggers,function(B){if(B==i||o.contains(B,i))w=B});return w}function n(i){switch(i.keyCode){case q:case v:i.ctrlKey&&!i.altKey&&!i.shiftKey&&i.halt();break;case f:i.ctrlKey&&!i.altKey&&i.halt()}}function u(i){var w=i.target,B=this.triggers,C=!i.ctrlKey&&!i.shiftKey&&!i.altKey,E=i.ctrlKey&&!i.shiftKey&&!i.altKey;switch(i.keyCode){case z:case t:if(p.call(this,w)&&C){this.switchTo(this.focusIndex);i.halt()}break;case r:case A:if(p.call(this,
w)){a.call(this);i.halt()}break;case c:case l:if(p.call(this,w)){e.call(this);i.halt()}break;case v:if(E){i.halt();e.call(this)}break;case q:if(E){i.halt();a.call(this)}break;case s:if(C){w=this.focusIndex;this.focusIndex=0;d.call(this,w,0,true);i.halt()}break;case y:if(C){w=B.length-1;B=this.focusIndex;this.focusIndex=w;d.call(this,B,w,true);i.halt()}break;case f:if(i.ctrlKey&&!i.altKey){i.halt();i.shiftKey?a.call(this):e.call(this)}}}function d(i,w,B){var C=this.triggers;if(typeof i=="number")var E=
C[i];i=C[w];if(E){x(E,"-1");o.removeClass(E,g);E.setAttribute("aria-selected","false")}B&&i.focus();x(i,"0");o.addClass(i,g);i.setAttribute("aria-selected","true")}function a(){var i=this.triggers,w=this.focusIndex;i=this.focusIndex=w==0?i.length-1:w-1;d.call(this,w,i,true)}function e(){var i=this.focusIndex,w=this.focusIndex=i==this.triggers.length-1?0:i+1;d.call(this,i,w,true)}function j(i){var w=!!(i.originalEvent.target||i.originalEvent.srcElement),B=this.config.multiple,C=this.completedIndex;
i=i.currentIndex;var E=this.triggers[i],F=this.panels[i];if(C>-1){var D=this.triggers[C];C=this.panels[C];x(D,"-1");w&&E.focus();if(!B){C.setAttribute("aria-hidden","true");D.setAttribute("aria-expanded","false")}}x(E,"0");w=F.getAttribute("aria-hidden");F.setAttribute("aria-hidden",w=="false"?"true":"false");E.setAttribute("aria-expanded",w=="false"?"false":"true");d.call(this,this.focusIndex,i);this.focusIndex=i}h=b.Switchable.Aria;k=b.Accordion;var g="ks-switchable-select",m=b.Event,o=b.DOM,q=
33,v=34,y=35,s=36,r=37,A=38,c=39,l=40,f=9,t=32,z=13;b.mix(k.Config,{aria:false});k.Plugins.push({name:"aria",init:function(i){if(i.config.aria){var w=i.container,B=i.activeIndex;o.attr(w,"aria-multiselectable",i.config.multiple?"true":"false");o.attr(w,"role","tablist");var C=i.triggers,E=i.panels,F=0;b.each(E,function(D){if(!D.id)D.id=b.guid("ks-switchable-tab-panel")});b.each(C,function(D){if(!D.id)D.id=b.guid("ks-switchable-tab")});b.each(C,function(D){D.setAttribute("role","tab");D.setAttribute("aria-expanded",
B==F?"true":"false");D.setAttribute("aria-selected",B==F?"true":"false");D.setAttribute("aria-controls",E[F].id);x(D,B==F?"0":"-1");F++});F=0;b.each(E,function(D){var G=C[F];D.setAttribute("role","tabpanel");D.setAttribute("aria-hidden",B==F?"false":"true");D.setAttribute("aria-labelledby",G.id);F++});i.on("switch",j,i);if(B>-1)i.focusIndex=B;m.on(w,"keydown",u,i);m.on(w,"keypress",n,i)}}});var x=h.setTabIndex});
KISSY.add("switchable/autoplay",function(b,h,k,p){h=b.Event;k=b.Switchable;b.mix(k.Config,{autoplay:false,interval:5,pauseOnHover:true});k.Plugins.push({name:"autoplay",init:function(n){function u(){e=b.later(function(){n.paused||n.switchTo(n.activeIndex<n.length-1?n.activeIndex+1:0,"forward")},a,true)}var d=n.config,a=d.interval*1E3,e;if(d.autoplay){if(d.pauseOnHover){h.on(n.container,"mouseenter",function(){n.stop()});h.on(n.container,"mouseleave",function(){n.start()})}u();n.stop=function(){if(e){e.cancel();
e=p}n.paused=true};n.start=function(){if(e){e.cancel();e=p}n.paused=false;u()}}}});return k});KISSY.add("switchable/autorender",function(b,h,k,p){h=b.DOM;k=b.JSON;p=b.Switchable;p.autoRender=function(n,u){n="."+(n||"KS_Widget");h.query(n,u).each(function(d){var a=d.getAttribute("data-widget-type"),e;if(a&&"Switchable Tabs Slide Carousel Accordion".indexOf(a)>-1)try{if(e=d.getAttribute("data-widget-config"))e=e.replace(/'/g,'"');new b[a](d,k.parse(e))}catch(j){}})}});
KISSY.add("switchable/carousel/base",function(b,h,k,p,n){function u(a,e){if(!(this instanceof u))return new u(a,e);u.superclass.constructor.apply(this,arguments)}p=b.Switchable;h=b.DOM;k=b.Event;var d={originalEvent:{target:1}};u.Config={circular:true,prevBtnCls:"ks-switchable-prev-btn",nextBtnCls:"ks-switchable-next-btn",disableBtnCls:"ks-switchable-disable-btn"};u.Plugins=[];b.extend(u,p,{_init:function(){var a=this;u.superclass._init.call(a);var e=a.config,j=e.disableBtnCls,g=false;b.each(["prev",
"next"],function(m){var o=a[m+"Btn"]=h.get("."+e[m+"BtnCls"],a.container);o&&k.on(o,"click",function(q){q.preventDefault();g||h.hasClass(o,j)||a[m](d)})});if(!e.circular){a.on("beforeSwitch",function(){g=true});a.on("switch",function(m){m=m.currentIndex;m=m===0?a.prevBtn:m===a.length-1?a.nextBtn:n;h.removeClass([a.prevBtn,a.nextBtn],j);m&&h.addClass(m,j);g=false})}k.on(a.panels,"click",function(){a.fire("itemSelected",{item:this})})}});return b.Carousel=u});
KISSY.add("switchable/carousel/aria",function(b,h,k,p,n){function u(c){var l=c.currentIndex,f=this.completedIndex,t=this.panels,z=t[l*this.config.steps],x=this.triggers;l=x[l];if((c=!!(c.originalEvent.target||c.originalEvent.srcElement))||f==-1){b.each(x,function(i){r(i,-1)});b.each(t,function(i){r(i,-1)});l&&r(l,0);r(z,0);c&&z.focus()}}function d(c){var l;b.each(this.triggers,function(f){if(f==c||h.contains(f,c)){l=f;return false}});return l}function a(c){var l=c.target;switch(c.keyCode){case v:case q:if(l=
d.call(this,l)){l=l;var f=h.next(l),t=this.triggers;f||(f=t[0]);r(l,-1);if(f){r(f,0);f.focus()}c.halt()}break;case o:case m:if(l=d.call(this,l)){l=l;f=h.prev(l);t=this.triggers;f||(f=t[t.length-1]);r(l,-1);if(f){r(f,0);f.focus()}c.halt()}break;case s:case y:if(l=d.call(this,l)){this.switchTo(b.indexOf(l,this.triggers),undefined,A);c.halt()}}}function e(c){var l;b.each(this.panels,function(f){if(f==c||h.contains(f,c)){l=f;return false}});return l}function j(c){var l=b.indexOf(c,this.panels),f=this.config.steps,
t=Math.floor(l/f);if(t==this.activeIndex)return 1;if(l%f==0||l%f==f-1){this.switchTo(t,undefined,undefined,function(){c.focus()});return 0}return 1}function g(c){var l=c.target;switch(c.keyCode){case v:case q:if(l=e.call(this,l)){l=l;var f=h.next(l),t=this.panels;f||(f=t[0]);r(l,-1);r(f,0);j.call(this,f)&&f.focus();c.halt()}break;case o:case m:if(l=e.call(this,l)){l=l;f=h.prev(l);t=this.panels;f||(f=t[t.length-1]);r(l,-1);r(f,0);j.call(this,f)&&f.focus();c.halt()}break;case s:case y:if(l=e.call(this,
l)){this.fire("itemSelected",{item:l});c.halt()}}}h=b.DOM;k=b.Event;p=b.Switchable.Aria;n=b.Carousel;var m=37,o=38,q=39,v=40,y=32,s=13,r=p.setTabIndex,A={originalEvent:{target:1}};b.mix(n.Config,{aria:false});n.Plugins.push({name:"aria",init:function(c){if(c.config.aria){var l=c.triggers,f=c.panels,t=c.content,z=c.activeIndex;if(!t.id)t.id=b.guid("ks-switchbale-content");t.setAttribute("role","listbox");b.each(l,function(x){r(x,z==0?"0":"-1");x.setAttribute("role","button");x.setAttribute("aria-controls",
t.id)});b.each(f,function(x){r(x,-1);x.setAttribute("role","option")});c.on("switch",u,c);(l=c.nav)&&k.on(l,"keydown",a,c);k.on(t,"keydown",g,c);l=c.prevBtn;f=c.nextBtn;if(l){r(l,0);l.setAttribute("role","button");k.on(l,"keydown",function(x){if(x.keyCode==s||x.keyCode==y){c.prev(A);x.preventDefault()}})}if(f){r(f,0);f.setAttribute("role","button");k.on(f,"keydown",function(x){if(x.keyCode==s||x.keyCode==y){c.next(A);x.preventDefault()}})}}}})});
KISSY.add("switchable/effect",function(b,h,k,p,n,u){h=b.DOM;p=b.Anim;n=b.Switchable;var d;b.mix(n.Config,{effect:"none",duration:0.5,easing:"easeNone",nativeAnim:true});n.Effects={none:function(a,e,j){a&&h.css(a,"display","none");h.css(e,"display","block");j()},fade:function(a,e,j){a&&a.length!==1&&b.error("fade effect only supports steps == 1.");var g=this,m=g.config,o=a?a[0]:null,q=e[0];if(g.anim){g.anim.stop();h.css(g.anim.fromEl,{zIndex:1,opacity:0});h.css(g.anim.toEl,{zIndex:9})}h.css(q,"opacity",
1);if(o){g.anim=(new p(o,{opacity:0},m.duration,m.easing,function(){g.anim=u;h.css(q,"z-index",9);h.css(o,"z-index",1);j&&j()},m.nativeAnim)).run();g.anim.toEl=q;g.anim.fromEl=o}else{h.css(q,"z-index",9);j&&j()}},scroll:function(a,e,j,g){var m=this;e=m.config;var o=e.effect==="scrollx",q={};q[o?"left":"top"]=-(m.viewSize[o?0:1]*g)+"px";m.anim&&m.anim.stop();if(a)m.anim=(new p(m.content,q,e.duration,e.easing,function(){m.anim=u;j&&j()},e.nativeAnim)).run();else{h.css(m.content,q);j&&j()}}};d=n.Effects;
d.scrollx=d.scrolly=d.scroll;n.Plugins.push({name:"effect",init:function(a){var e=a.config,j=e.effect,g=a.panels,m=a.content,o=e.steps,q=a.activeIndex,v=g.length;a.viewSize=[e.viewSize[0]||g[0].offsetWidth*o,e.viewSize[1]||g[0].offsetHeight*o];if(j!=="none"){b.each(g,function(A){h.css(A,"display","block")});switch(j){case "scrollx":case "scrolly":h.css(m,"position","absolute");h.css(m.parentNode,"position","relative");if(j==="scrollx"){h.css(g,"float","left");h.width(m,a.viewSize[0]*(v/o))}break;
case "fade":var y=q*o,s=y+o-1,r;b.each(g,function(A,c){r=c>=y&&c<=s;h.css(A,{opacity:r?1:0,position:"absolute",zIndex:r?9:1})})}}}});b.augment(n,{_switchView:function(a,e,j,g,m,o){var q=this,v=q.config.effect;(b.isFunction(v)?v:d[v]).call(q,a,e,function(){q._fireOnSwitch(j,m);o&&o.call(q)},j,g)}});return n});
KISSY.add("switchable/circular",function(b,h,k,p){function n(s,r,A,c,l){var f=this;s=f.config;r=f.length;var t=f.activeIndex,z=s.scrollType===y,x=z?j:g,i=f.viewSize[z?0:1];z=-i*c;var w={},B,C=l===v;if(B=C&&t===0&&c===r-1||l===q&&t===r-1&&c===0)z=u.call(f,f.panels,c,C,x,i);w[x]=z+o;f.anim&&f.anim.stop();f.anim=(new k(f.content,w,s.duration,s.easing,function(){B&&d.call(f,f.panels,c,C,x,i);f.anim=undefined;A()},s.nativeAnim)).run()}function u(s,r,A,c,l){var f=this.config.steps;r=this.length;var t=A?
r-1:0,z=(t+1)*f;for(f=t*f;f<z;f++){h.css(s[f],a,e);h.css(s[f],c,(A?-1:1)*l*r)}return A?l:-l*r}function d(s,r,A,c,l){var f=this.config.steps;r=this.length;var t=A?r-1:0,z=(t+1)*f;for(f=t*f;f<z;f++){h.css(s[f],a,m);h.css(s[f],c,m)}h.css(this.content,c,A?-l*(r-1):m)}h=b.DOM;k=b.Anim;p=b.Switchable;var a="position",e="relative",j="left",g="top",m="",o="px",q="forward",v="backward",y="scrollx";b.mix(p.Config,{circular:false});p.Plugins.push({name:"circular",init:function(s){s=s.config;if(s.circular&&(s.effect===
y||s.effect==="scrolly")){s.scrollType=s.effect;s.effect=n}}})});
KISSY.add("switchable/countdown",function(b,h,k,p,n,u){h=b.DOM;k=b.Event;p=b.Anim;n=b.Switchable;b.mix(n.Config,{countdown:false,countdownFromStyle:"",countdownToStyle:"width: 0"});n.Plugins.push({name:"countdown",init:function(d){function a(s){e();y=(new p(o[s],v,m-1)).run()}function e(){if(g){clearTimeout(g);g=null}if(y){y.stop();y=u}}var j=d.config,g,m=j.interval,o=[],q=j.countdownFromStyle,v=j.countdownToStyle,y;if(!(!j.autoplay||!j.hasTriggers||!j.countdown)){b.each(d.triggers,function(s,r){s.innerHTML=
'<div class="ks-switchable-trigger-mask"></div><div class="ks-switchable-trigger-content">'+s.innerHTML+"</div>";o[r]=s.firstChild});if(j.pauseOnHover){k.on(d.container,"mouseenter",function(){e();var s=o[d.activeIndex];if(q)y=(new p(s,q,0.2,"easeOut")).run();else h.removeAttr(s,"style")});k.on(d.container,"mouseleave",function(){e();var s=d.activeIndex;h.removeAttr(o[s],"style");g=setTimeout(function(){a(s)},200)})}d.on("beforeSwitch",function(){e();if(d.activeIndex>-1)h.attr(o[d.activeIndex],"style",
q||"")});d.on("switch",function(s){d.paused||a(s.currentIndex)})}}});return n});
KISSY.add("switchable/lazyload",function(b,h,k){h=b.DOM;k=b.Switchable;var p="beforeSwitch",n="img-src",u="area-data",d={};d[n]="data-ks-lazyload-custom";d[u]="ks-datalazyload-custom";b.mix(k.Config,{lazyDataType:u});k.Plugins.push({name:"lazyload",init:function(a){function e(q){var v=g.steps;q=q.toIndex*v;j.loadCustomLazyData(a.panels.slice(q,q+v),m);a:{var y,s;if(q=(v=m===n)?"img":m===u?"textarea":""){q=h.query(q,a.container);y=0;for(s=q.length;y<s;y++)if(v?h.attr(q[y],o):h.hasClass(q[y],o)){v=
false;break a}}v=true}v&&a.detach(p,e)}var j=b.DataLazyload,g=a.config,m=g.lazyDataType,o=d[m];!j||!m||!o||a.on(p,e)}});return k});KISSY.add("switchable/slide/base",function(b,h){function k(p,n){if(!(this instanceof k))return new k(p,n);k.superclass.constructor.apply(this,arguments);return 0}h=b.Switchable;k.Config={autoplay:true,circular:true};k.Plugins=[];b.extend(k,h);return b.Slide=k});
KISSY.add("switchable/slide/aria",function(b,h,k,p,n){function u(o){switch(o.keyCode){case j:case e:this.next(g);o.halt();break;case a:case d:this.prev(g);o.halt()}}p=b.Switchable;h=b.DOM;k=b.Event;p=p.Aria;n=b.Slide;var d=37,a=38,e=39,j=40;b.mix(n.Config,{aria:true});var g={originalEvent:{target:1}},m=p.setTabIndex;n.Plugins.push({name:"aria",init:function(o){if(o.config.aria){var q=o.panels,v=0,y=o.activeIndex;b.each(o.triggers,function(r){m(r,"-1");v++});v=0;b.each(q,function(r){m(r,y==v?"0":"-1");
h.attr(r,"role","option");v++});var s=o.content;h.attr(s,"role","listbox");k.on(s,"keydown",u,o);m(q[0],0);o.on("switch",function(r){var A=!!(r.originalEvent.target||r.originalEvent.srcElement);r=r.currentIndex;var c=o.completedIndex;c>-1&&m(q[c],-1);m(q[r],0);A&&q[r].focus()})}}})});
KISSY.add("switchable/tabs/base",function(b,h){function k(p,n){if(!(this instanceof k))return new k(p,n);k.superclass.constructor.call(this,p,n);return 0}h=b.Switchable;b.extend(k,h);k.Config={};k.Plugins=[];return b.Tabs=k});
KISSY.add("switchable/tabs/aria",function(b,h,k){function p(c){var l;b.each(this.triggers,function(f){if(f==c||e.contains(f,c))l=f});return l}function n(c){switch(c.keyCode){case j:case g:c.ctrlKey&&!c.altKey&&!c.shiftKey&&c.halt();break;case r:c.ctrlKey&&!c.altKey&&c.halt()}}function u(c){var l=c.target,f=this.triggers,t=!c.ctrlKey&&!c.shiftKey&&!c.altKey,z=c.ctrlKey&&!c.shiftKey&&!c.altKey;switch(c.keyCode){case q:case v:if(p.call(this,l)){this.prev({originalEvent:c.originalEvent});c.halt()}break;
case y:case s:if(p.call(this,l)){this.next({originalEvent:c.originalEvent});c.halt()}break;case g:if(z){c.halt();this.next({originalEvent:c.originalEvent})}break;case j:if(z){c.halt();this.prev({originalEvent:c.originalEvent})}break;case o:if(t){this.switchTo(0,undefined,{originalEvent:c.originalEvent});c.halt()}break;case m:if(t){this.switchTo(f.length-1,undefined,{originalEvent:c.originalEvent});c.halt()}break;case r:if(c.ctrlKey&&!c.altKey){c.halt();c.shiftKey?this.prev({originalEvent:c.originalEvent}):
this.next({originalEvent:c.originalEvent})}}}function d(c){var l=!!(c.originalEvent.target||c.originalEvent.srcElement),f=this.completedIndex,t=c.currentIndex;if(f!=t){c=this.triggers[f];var z=this.triggers[t];f=this.panels[f];t=this.panels[t];c&&A(c,"-1");A(z,"0");l&&z.focus();f&&f.setAttribute("aria-hidden","true");t.setAttribute("aria-hidden","false")}}h=b.Switchable.Aria;k=b.Tabs;var a=b.Event,e=b.DOM,j=33,g=34,m=35,o=36,q=37,v=38,y=39,s=40,r=9;b.mix(k.Config,{aria:false});k.Plugins.push({name:"aria",
init:function(c){if(c.config.aria){var l=c.triggers,f=c.activeIndex,t=c.panels,z=c.container;c.nav&&e.attr(c.nav,"role","tablist");var x=0;b.each(l,function(i){i.setAttribute("role","tab");A(i,f==x?"0":"-1");if(!i.id)i.id=b.guid("ks-switchable");x++});x=0;b.each(t,function(i){var w=l[x];i.setAttribute("role","tabpanel");i.setAttribute("aria-hidden",f==x?"false":"true");i.setAttribute("aria-labelledby",w.id);x++});c.on("switch",d,c);a.on(z,"keydown",u,c);a.on(z,"keypress",n,c)}}});var A=h.setTabIndex});
