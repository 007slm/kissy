/*
Copyright 2011, KISSY UI Library v1.20dev
MIT Licensed
build time: ${build.time}
*/
KISSY.add("switchable/base",function(g,h,q,s){function n(a,c){c=c||{};if(!("markupType"in c))if(c.panelCls)c.markupType=1;else if(c.panels)c.markupType=2;for(var f=this.constructor;f;){c=g.merge(f.Config,c);f=f.superclass?f.superclass.constructor:null}this.container=h.get(a);this.config=c;this.ingIndex=this.activeIndex=c.activeIndex;this._init();this._initPlugins();this.fire(k);this.activeIndex>-1||g.isNumber(c.switchTo)&&this.switchTo(c.switchTo)}var w=g.require("event/target"),k="init",j={originalEvent:{target:1}};
n.Config={markupType:0,navCls:"ks-switchable-nav",contentCls:"ks-switchable-content",triggerCls:"ks-switchable-trigger",panelCls:"ks-switchable-panel",triggers:[],panels:[],hasTriggers:true,triggerType:"mouse",delay:0.1,activeIndex:-1,activeTriggerCls:"ks-active",switchTo:0,steps:1,viewSize:[]};n.Plugins=[];g.augment(n,w,{_initPlugins:function(){for(var a=this,c=a.constructor;c;){g.each(c.Plugins,function(f){f.init&&f.init(a)});c=c.superclass?c.superclass.constructor:null}},_init:function(){var a=
this.config;this._parseMarkup();a.hasTriggers&&this._bindTriggers()},_parseMarkup:function(){var a=this.container,c=this.config,f,p,i=[],r=[];switch(c.markupType){case 0:if(f=h.get("."+c.navCls,a))i=h.children(f);p=h.get("."+c.contentCls,a);r=h.children(p);break;case 1:i=h.query("."+c.triggerCls,a);r=h.query("."+c.panelCls,a);break;case 2:i=c.triggers;r=c.panels}a=r.length;this.length=a/c.steps;if(c.hasTriggers&&a>0&&i.length===0)i=this._generateTriggersMarkup(this.length);this.triggers=g.makeArray(i);
this.panels=g.makeArray(r);this.content=p||r[0].parentNode;this.nav=f||c.hasTriggers&&i[0].parentNode},_generateTriggersMarkup:function(a){var c=this.config,f=h.create("<ul>"),p,i;f.className=c.navCls;for(i=0;i<a;i++){p=h.create("<li>");if(i===this.activeIndex)p.className=c.activeTriggerCls;p.innerHTML=i+1;f.appendChild(p)}this.container.appendChild(f);return h.children(f)},_bindTriggers:function(){var a=this,c=a.config,f=a.triggers,p,i,r=f.length;for(i=0;i<r;i++)(function(x){p=f[x];q.on(p,"click",
function(){a._onFocusTrigger(x)});if(c.triggerType==="mouse"){q.on(p,"mouseenter",function(){a._onMouseEnterTrigger(x,j)});q.on(p,"mouseleave",function(){a._onMouseLeaveTrigger(x,j)})}})(i)},_onFocusTrigger:function(a){if(this._triggerIsValid(a)){this._cancelSwitchTimer();this.switchTo(a,s,j)}},_onMouseEnterTrigger:function(a){var c=this;if(c._triggerIsValid(a))c.switchTimer=g.later(function(){c.switchTo(a,s,j)},c.config.delay*1E3)},_onMouseLeaveTrigger:function(){this._cancelSwitchTimer()},_triggerIsValid:function(a){return this.ingIndex!==
a},_cancelSwitchTimer:function(){if(this.switchTimer){this.switchTimer.cancel();this.switchTimer=s}},switchTo:function(a,c,f,p){var i=this,r=i.config,x=i.triggers,u=i.panels,m=i.ingIndex,o=r.steps,y=m*o,l=a*o;if(!i._triggerIsValid(a))return i;if(i.fire("beforeSwitch",{toIndex:a})===false)return i;if(r.hasTriggers)i._switchTrigger(m>-1?x[m]:null,x[a]);if(c===s)c=a>m?"forward":"backward";i.ingIndex=a;i._switchView(m>-1?u.slice(y,y+o):null,u.slice(l,l+o),a,c,f,function(){p&&p.call(i,a);i.activeIndex=
a});return i},_switchTrigger:function(a,c){var f=this.config.activeTriggerCls;a&&h.removeClass(a,f);h.addClass(c,f)},_switchView:function(a,c,f,p,i,r){a&&h.css(a,"display","none");h.css(c,"display","block");this._fireOnSwitch(f,i);r&&r.call(this)},_fireOnSwitch:function(a,c){this.fire("switch",g.mix(c||{},{currentIndex:a}))},prev:function(a){var c=this.activeIndex;this.switchTo(c>0?c-1:this.length-1,"backward",a)},next:function(a){var c=this.activeIndex;this.switchTo(c<this.length-1?c+1:0,"forward",
a)}});return n},{requires:["dom","event"]});
KISSY.add("switchable/aria",function(g,h,q,s){function n(){this.stop&&this.stop()}function w(){this.start&&this.start()}s.Plugins.push({name:"aria",init:function(j){if(j.config.aria){var a=j.container;q.on(a,"focusin",n,j);q.on(a,"focusout",w,j)}}});var k=["a","input","button","object"];return{setTabIndex:function(j,a){j.tabIndex=a;h.query("*",j).each(function(c){var f=c.nodeName.toLowerCase();if(g.inArray(f,k)){h.hasAttr(c,"oriTabIndex")||h.attr(c,"oriTabIndex",c.tabIndex);c.tabIndex=a!=-1?h.attr(c,
"oriTabIndex"):a}})}}},{requires:["dom","event","./base"]});
KISSY.add("switchable/accordion/base",function(g,h,q){function s(n,w){if(!(this instanceof s))return new s(n,w);s.superclass.constructor.apply(this,arguments);return 0}g.extend(s,q,{_switchTrigger:function(n,w){var k=this.config;k.multiple?h.toggleClass(w,k.activeTriggerCls):s.superclass._switchTrigger.apply(this,arguments)},_triggerIsValid:function(n){return s.superclass._triggerIsValid.call(this,n)||this.config.multiple},_switchView:function(n,w,k,j,a,c){var f=w[0];if(this.config.multiple){h.toggle(f);
this._fireOnSwitch(k,a);c.call(this)}else s.superclass._switchView.apply(this,arguments)}});s.Plugins=[];s.Config={markupType:1,triggerType:"click",multiple:false};return s},{requires:["dom","../base"]});
KISSY.add("switchable/accordion/aria",function(g,h,q){function s(e){var t;g.each(this.triggers,function(B){if(B==e||i.contains(B,e))t=B});return t}function n(e){switch(e.keyCode){case r:case x:e.ctrlKey&&!e.altKey&&!e.shiftKey&&e.halt();break;case d:e.ctrlKey&&!e.altKey&&e.halt()}}function w(e){var t=e.target,B=this.triggers,C=!e.ctrlKey&&!e.shiftKey&&!e.altKey,E=e.ctrlKey&&!e.shiftKey&&!e.altKey;switch(e.keyCode){case z:case v:if(s.call(this,t)&&C){this.switchTo(this.focusIndex);e.halt()}break;case o:case y:if(s.call(this,
t)){j.call(this);e.halt()}break;case l:case b:if(s.call(this,t)){a.call(this);e.halt()}break;case x:if(E){e.halt();a.call(this)}break;case r:if(E){e.halt();j.call(this)}break;case m:if(C){t=this.focusIndex;this.focusIndex=0;k.call(this,t,0,true);e.halt()}break;case u:if(C){t=B.length-1;B=this.focusIndex;this.focusIndex=t;k.call(this,B,t,true);e.halt()}break;case d:if(e.ctrlKey&&!e.altKey){e.halt();e.shiftKey?j.call(this):a.call(this)}}}function k(e,t,B){var C=this.triggers;if(g.isNumber(e))var E=
C[e];e=C[t];if(E){A(E,"-1");i.removeClass(E,f);E.setAttribute("aria-selected","false")}B&&e.focus();A(e,"0");i.addClass(e,f);e.setAttribute("aria-selected","true")}function j(){var e=this.triggers,t=this.focusIndex;e=this.focusIndex=t==0?e.length-1:t-1;k.call(this,t,e,true)}function a(){var e=this.focusIndex,t=this.focusIndex=e==this.triggers.length-1?0:e+1;k.call(this,e,t,true)}function c(e){var t=!!e.originalEvent.target,B=this.config.multiple,C=this.activeIndex;e=e.currentIndex;var E=this.triggers[e],
F=this.panels[e];if(C>-1){var D=this.triggers[C];C=this.panels[C];A(D,"-1");t&&E.focus();if(!B){C.setAttribute("aria-hidden","true");D.setAttribute("aria-expanded","false")}}A(E,"0");t=F.getAttribute("aria-hidden");F.setAttribute("aria-hidden",t=="false"?"true":"false");E.setAttribute("aria-expanded",t=="false"?"false":"true");k.call(this,this.focusIndex,e);this.focusIndex=e}var f="ks-switchable-select",p=g.Event,i=g.DOM,r=33,x=34,u=35,m=36,o=37,y=38,l=39,b=40,d=9,v=32,z=13;g.mix(q.Config,{aria:true});
q.Plugins.push({name:"aria",init:function(e){if(e.config.aria){var t=e.container,B=e.activeIndex;i.attr(t,"aria-multiselectable",e.config.multiple?"true":"false");i.attr(t,"role","tablist");var C=e.triggers,E=e.panels,F=0;g.each(E,function(D){if(!D.id)D.id=g.guid("ks-switchable-tab-panel")});g.each(C,function(D){if(!D.id)D.id=g.guid("ks-switchable-tab")});g.each(C,function(D){D.setAttribute("role","tab");D.setAttribute("aria-expanded",B==F?"true":"false");D.setAttribute("aria-selected",B==F?"true":
"false");D.setAttribute("aria-controls",E[F].id);A(D,B==F?"0":"-1");F++});F=0;g.each(E,function(D){var G=C[F];D.setAttribute("role","tabpanel");D.setAttribute("aria-hidden",B==F?"false":"true");D.setAttribute("aria-labelledby",G.id);F++});e.on("switch",c,e);if(B>-1)e.focusIndex=B;p.on(t,"keydown",w,e);p.on(t,"keypress",n,e)}}});var A=h.setTabIndex},{requires:["../aria","./base"]});
KISSY.add("switchable/autoplay",function(g,h,q,s){g.mix(q.Config,{autoplay:false,interval:5,pauseOnHover:true});q.Plugins.push({name:"autoplay",init:function(n){function w(){a=g.later(function(){n.paused||n.switchTo(n.activeIndex<n.length-1?n.activeIndex+1:0,"forward")},j,true)}var k=n.config,j=k.interval*1E3,a;if(k.autoplay){if(k.pauseOnHover){h.on(n.container,"mouseenter",function(){n.stop()});h.on(n.container,"mouseleave",function(){n.start()})}w();n.stop=function(){if(a){a.cancel();a=s}n.paused=
true};n.start=function(){if(a){a.cancel();a=s}n.paused=false;w()}}}});return q},{requires:["event","./base"]});KISSY.add("switchable/autorender",function(g,h,q,s){s.autoRender=function(n,w){n="."+(n||"KS_Widget");h.query(n,w).each(function(k){var j=k.getAttribute("data-widget-type"),a;if(j&&"Switchable Tabs Slide Carousel Accordion".indexOf(j)>-1)try{if(a=k.getAttribute("data-widget-config"))a=a.replace(/'/g,'"');new g[j](k,q.parse(a))}catch(c){}})}},{requires:["dom","json","switchable/base"]});
KISSY.add("switchable/carousel/base",function(g,h,q,s,n){function w(k,j){if(!(this instanceof w))return new w(k,j);w.superclass.constructor.apply(this,arguments);return 0}w.Config={circular:true,prevBtnCls:"ks-switchable-prev-btn",nextBtnCls:"ks-switchable-next-btn",disableBtnCls:"ks-switchable-disable-btn"};w.Plugins=[];g.extend(w,s,{_init:function(){var k=this;w.superclass._init.call(k);var j=k.config,a=j.disableBtnCls,c=false;g.each(["prev","next"],function(f){var p=k[f+"Btn"]=h.get("."+j[f+"BtnCls"],
k.container);q.on(p,"click",function(i){i.preventDefault();c||h.hasClass(p,a)||k[f]()})});if(!j.circular){k.on("beforeSwitch",function(){c=true});k.on("switch",function(f){f=f.currentIndex;f=f===0?k.prevBtn:f===k.length-1?k.nextBtn:n;h.removeClass([k.prevBtn,k.nextBtn],a);f&&h.addClass(f,a);c=false})}q.on(k.panels,"click",function(){k.fire("itemSelected",{item:this})})}});return w},{requires:["dom","event","../base"]});
KISSY.add("switchable/carousel/aria",function(g,h,q,s,n){function w(l){var b=l.currentIndex,d=this.activeIndex,v=this.panels,z=v[b*this.config.steps],A=this.triggers;b=A[b];if((l=!!l.originalEvent.target)||d==-1){g.each(A,function(e){o(e,-1)});g.each(v,function(e){o(e,-1)});o(b,0);o(z,0);l&&z.focus()}}function k(l){var b;g.each(this.triggers,function(d){if(d==l||h.contains(d,l)){b=d;return false}});return b}function j(l){var b=l.target;switch(l.keyCode){case x:case r:if(b=k.call(this,b)){b=b;var d=
h.next(b),v=this.triggers;d||(d=v[0]);o(b,-1);o(d,0);d.focus();l.halt()}break;case i:case p:if(b=k.call(this,b)){b=b;d=h.prev(b);v=this.triggers;d||(d=v[v.length-1]);o(b,-1);o(d,0);d.focus();l.halt()}break;case m:case u:if(b=k.call(this,b)){this.switchTo(g.indexOf(b,this.triggers),undefined,y);l.halt()}}}function a(l){var b;g.each(this.panels,function(d){if(d==l||h.contains(d,l)){b=d;return false}});return b}function c(l){var b=g.indexOf(l,this.panels),d=this.config.steps,v=Math.floor(b/d);if(v==
this.activeIndex)return 1;if(b%d==0||b%d==d-1){this.switchTo(v,undefined,undefined,function(){l.focus()});return 0}return 1}function f(l){var b=l.target;switch(l.keyCode){case x:case r:if(b=a.call(this,b)){b=b;var d=h.next(b),v=this.panels;d||(d=v[0]);o(b,-1);o(d,0);c.call(this,d)&&d.focus();l.halt()}break;case i:case p:if(b=a.call(this,b)){b=b;d=h.prev(b);v=this.panels;d||(d=v[v.length-1]);o(b,-1);o(d,0);c.call(this,d)&&d.focus();l.halt()}break;case m:case u:if(b=a.call(this,b)){this.fire("itemSelected",
{item:b});l.halt()}}}var p=37,i=38,r=39,x=40,u=32,m=13,o=s.setTabIndex,y={originalEvent:{target:1}};g.mix(n.Config,{aria:true});n.Plugins.push({name:"aria",init:function(l){if(l.config.aria){var b=l.triggers,d=l.panels,v=l.content,z=l.activeIndex;if(!v.id)v.id=g.guid("ks-switchbale-content");v.setAttribute("role","listbox");var A=0;g.each(b,function(t){o(t,z==A?"0":"-1");t.setAttribute("role","button");t.setAttribute("aria-controls",v.id);A++});A=0;g.each(d,function(t){o(t,"-1");t.setAttribute("role",
"option");A++});l.on("switch",w,l);(d=l.nav)&&q.on(d,"keydown",j,l);q.on(v,"keydown",f,l);d=l.prevBtn;var e=l.nextBtn;if(d){o(d,0);d.setAttribute("role","button");q.on(d,"keydown",function(t){if(t.keyCode==m||t.keyCode==u)l.switchTo(l.activeIndex>0?l.activeIndex-1:b.length-1,undefined,y)})}if(e){o(e,0);e.setAttribute("role","button");q.on(e,"keydown",function(t){if(t.keyCode==m||t.keyCode==u)l.switchTo(l.activeIndex==b-1?l.activeIndex+1:0,undefined,y)})}}}})},{requires:["dom","event","../aria","./base"]});
KISSY.add("switchable/effect",function(g,h,q,s,n,w){var k;g.mix(n.Config,{effect:"none",duration:0.5,easing:"easeNone",nativeAnim:true});n.Effects={none:function(j,a,c){j&&h.css(j,"display","none");h.css(a,"display","block");c()},fade:function(j,a,c){j&&j.length!==1&&g.error("fade effect only supports steps == 1.");var f=this,p=f.config,i=j?j[0]:null,r=a[0];f.anim&&f.anim.stop();h.css(r,"opacity",1);if(i)f.anim=(new s(i,{opacity:0},p.duration,p.easing,function(){f.anim=w;h.css(r,"z-index",9);h.css(i,
"z-index",1);c&&c()},p.nativeAnim)).run();else{h.css(r,"z-index",9);c&&c()}},scroll:function(j,a,c,f){var p=this;j=p.config;a=j.effect==="scrollx";var i={};i[a?"left":"top"]=-(p.viewSize[a?0:1]*f)+"px";p.anim&&p.anim.stop();p.anim=(new s(p.content,i,j.duration,j.easing,function(){p.anim=w;c()},j.nativeAnim)).run()}};k=n.Effects;k.scrollx=k.scrolly=k.scroll;n.Plugins.push({name:"effect",init:function(j){var a=j.config,c=a.effect,f=j.panels,p=j.content,i=a.steps,r=j.activeIndex,x=f.length;j.viewSize=
[a.viewSize[0]||f[0].offsetWidth*i,a.viewSize[1]||f[0].offsetHeight*i];if(c!=="none"){g.each(f,function(y){h.css(y,"display","block")});switch(c){case "scrollx":case "scrolly":h.css(p,"position","absolute");h.css(p.parentNode,"position","relative");if(c==="scrollx"){h.css(f,"float","left");h.width(p,j.viewSize[0]*(x/i))}break;case "fade":var u=r*i,m=u+i-1,o;g.each(f,function(y,l){o=l>=u&&l<=m;h.css(y,{opacity:o?1:0,position:"absolute",zIndex:o?9:1})})}}}});g.augment(n,{_switchView:function(j,a,c,
f,p,i){var r=this,x=r.config.effect;(g.isFunction(x)?x:k[x]).call(r,j,a,function(){r._fireOnSwitch(c,p);i&&i.call(r)},c,f)}});return n},{requires:["dom","event","anim","switchable/base"]});
KISSY.add("switchable/circular",function(g,h,q,s){function n(m,o,y,l,b){var d=this;m=d.config;o=d.length;var v=d.activeIndex,z=m.scrollType===u,A=z?c:f,e=d.viewSize[z?0:1];z=-e*l;var t={},B,C=b===x;if(B=C&&v===0&&l===o-1||b===r&&v===o-1&&l===0)z=w.call(d,d.panels,l,C,A,e);t[A]=z+i;d.anim&&d.anim.stop();d.anim=(new q(d.content,t,m.duration,m.easing,function(){B&&k.call(d,d.panels,l,C,A,e);d.anim=undefined;y()},m.nativeAnim)).run()}function w(m,o,y,l,b){var d=this.config.steps;o=this.length;var v=y?
o-1:0,z=(v+1)*d;for(d=v*d;d<z;d++){h.css(m[d],j,a);h.css(m[d],l,(y?-1:1)*b*o)}return y?b:-b*o}function k(m,o,y,l,b){var d=this.config.steps;o=this.length;var v=y?o-1:0,z=(v+1)*d;for(d=v*d;d<z;d++){h.css(m[d],j,p);h.css(m[d],l,p)}h.css(this.content,l,y?-b*(o-1):p)}var j="position",a="relative",c="left",f="top",p="",i="px",r="forward",x="backward",u="scrollx";g.mix(s.Config,{circular:false});s.Plugins.push({name:"circular",init:function(m){m=m.config;if(m.circular&&(m.effect===u||m.effect==="scrolly")){m.scrollType=
m.effect;m.effect=n}}})},{requires:["dom","anim","switchable/base","switchable/effect"]});
KISSY.add("switchable/countdown",function(g,h,q,s,n,w){g.mix(n.Config,{countdown:false,countdownFromStyle:"",countdownToStyle:"width: 0"});n.Plugins.push({name:"countdown",init:function(k){function j(m){a();u=(new s(i[m],x,p-1)).run()}function a(){if(f){clearTimeout(f);f=null}if(u){u.stop();u=w}}var c=k.config,f,p=c.interval,i=[],r=c.countdownFromStyle,x=c.countdownToStyle,u;if(!(!c.autoplay||!c.hasTriggers||!c.countdown)){g.each(k.triggers,function(m,o){m.innerHTML='<div class="ks-switchable-trigger-mask"></div><div class="ks-switchable-trigger-content">'+
m.innerHTML+"</div>";i[o]=m.firstChild});if(c.pauseOnHover){q.on(k.container,"mouseenter",function(){a();var m=i[k.ingIndex];if(r)u=(new s(m,r,0.2,"easeOut")).run();else h.removeAttr(m,"style")});q.on(k.container,"mouseleave",function(){a();var m=k.ingIndex;h.removeAttr(i[m],"style");f=setTimeout(function(){j(m)},200)})}k.on("beforeSwitch",function(){a();h.attr(i[k.activeIndex],"style",r||"")});k.on("switch",function(m){k.paused||j(m.currentIndex)})}}});return n},{requires:["dom","event","anim","switchable/base"]});
KISSY.add("switchable/lazyload",function(g,h,q){var s="beforeSwitch",n="img-src",w="area-data",k={};k[n]="data-ks-lazyload-custom";k[w]="ks-datalazyload-custom";g.mix(q.Config,{lazyDataType:w});q.Plugins.push({name:"lazyload",init:function(j){function a(r){var x=f.steps;r=r.toIndex*x;c.loadCustomLazyData(j.panels.slice(r,r+x),p);a:{var u,m;if(r=(x=p===n)?"img":p===w?"textarea":""){r=h.query(r,j.container);u=0;for(m=r.length;u<m;u++)if(x?h.attr(r[u],i):h.hasClass(r[u],i)){x=false;break a}}x=true}x&&
j.detach(s,a)}var c=g.require("datalazyload"),f=j.config,p=f.lazyDataType,i=k[p];!c||!p||!i||j.on(s,a)}});return q},{requires:["dom","switchable/base"]});KISSY.add("switchable/slide/base",function(g,h){function q(s,n){if(!(this instanceof q))return new q(s,n);q.superclass.constructor.apply(this,arguments);return 0}q.Config={autoplay:true,circular:true};q.Plugins=[];g.extend(q,h);return q},{requires:["../base"]});
KISSY.add("switchable/slide/aria",function(g,h,q,s,n){function w(u){var m=this.panels,o=this.__slideIndex;switch(u.keyCode){case f:case c:o++;if(o==m.length)o=0;this.__slideIndex=o;this.switchTo(o,p,undefined,function(){m[o].focus()});u.halt();break;case a:case j:o--;if(o==-1)o=m.length-1;this.__slideIndex=o;this.switchTo(o,i,undefined,function(){m[o].focus()});u.halt()}}function k(u){var m=this;if(g.inArray(u.target,m.panels)){if(x){clearTimeout(x);x=undefined}switch(u.keyCode){case f:case a:case j:case c:u.halt()}x=
setTimeout(function(){w.call(m,u);x=undefined},200)}}var j=37,a=38,c=39,f=40,p="forward",i="backward";g.mix(n.Config,{aria:true});var r=s.setTabIndex;n.Plugins.push({name:"aria",init:function(u){if(u.config.aria){var m=u.panels,o=0,y=u.activeIndex;g.each(u.triggers,function(b){r(b,"-1");o++});o=0;g.each(m,function(b){r(b,y==o?"0":"-1");h.attr(b,"role","option");o++});var l=u.content;h.attr(l,"role","listbox");q.on(l,"keydown",k,u);r(m[0],0);if(y>-1)u.__slideIndex=y;u.on("switch",function(b){b=b.currentIndex;
var d=u.activeIndex;u.__slideIndex=b;d!=-1&&r(m[d],-1);r(m[b],0)})}}});var x},{requires:["dom","event","../aria","./base"]});KISSY.add("switchable/tabs/base",function(g,h){function q(s,n){if(!(this instanceof q))return new q(s,n);q.superclass.constructor.call(this,s,n);return 0}g.extend(q,h);q.Config={};q.Plugins=[];return q},{requires:["../base"]});
KISSY.add("switchable/tabs/aria",function(g,h,q){function s(b){var d;g.each(this.triggers,function(v){if(v==b||a.contains(v,b))d=v});return d}function n(b){switch(b.keyCode){case c:case f:b.ctrlKey&&!b.altKey&&!b.shiftKey&&b.halt();break;case o:b.ctrlKey&&!b.altKey&&b.halt()}}function w(b){var d=b.target,v=this.triggers,z=!b.ctrlKey&&!b.shiftKey&&!b.altKey,A=b.ctrlKey&&!b.shiftKey&&!b.altKey;switch(b.keyCode){case r:case x:if(s.call(this,d)){this.prev(y);b.halt()}break;case u:case m:if(s.call(this,
d)){this.next(y);b.halt()}break;case f:if(A){b.halt();this.next(y)}break;case c:if(A){b.halt();this.prev(y)}break;case i:if(z){this.switchTo(0,undefined,y);b.halt()}break;case p:if(z){this.switchTo(v.length-1,undefined,y);b.halt()}break;case o:if(b.ctrlKey&&!b.altKey){b.halt();b.shiftKey?this.prev(y):this.next(y)}}}function k(b){var d=!!b.originalEvent.target,v=this.activeIndex,z=b.currentIndex;if(v!=z){b=this.triggers[v];var A=this.triggers[z];v=this.panels[v];z=this.panels[z];b&&l(b,"-1");l(A,"0");
d&&A.focus();v&&v.setAttribute("aria-hidden","true");z.setAttribute("aria-hidden","false")}}var j=g.Event,a=g.DOM,c=33,f=34,p=35,i=36,r=37,x=38,u=39,m=40,o=9,y={originalEvent:{target:1}};g.mix(q.Config,{aria:true});q.Plugins.push({name:"aria",init:function(b){if(b.config.aria){var d=b.triggers,v=b.activeIndex,z=b.panels,A=b.container;a.attr(A,"role","tablist");var e=0;g.each(d,function(t){t.setAttribute("role","tab");l(t,v==e?"0":"-1");if(!t.id)t.id=g.guid("ks-switchable");e++});e=0;g.each(z,function(t){var B=
d[e];t.setAttribute("role","tabpanel");t.setAttribute("aria-hidden",v==e?"false":"true");t.setAttribute("aria-labelledby",B.id);e++});b.on("switch",k,b);j.on(A,"keydown",w,b);j.on(A,"keypress",n,b)}}});var l=h.setTabIndex},{requires:["../aria","./base"]});
KISSY.add("switchable",function(g,h,q,s,n,w,k,j,a,c,f,p,i,r,x,u){g.Switchable=h;q={Accordion:s,Carousel:j,Slide:r,Tabs:u};g.mix(g,q);g.mix(h,q);return h},{requires:["switchable/base","switchable/aria","switchable/accordion/base","switchable/accordion/aria","switchable/autoplay","switchable/autorender","switchable/carousel/base","switchable/carousel/aria","switchable/circular","switchable/countdown","switchable/effect","switchable/lazyload","switchable/slide/base","switchable/slide/aria","switchable/tabs/base",
"switchable/tabs/aria"]});
