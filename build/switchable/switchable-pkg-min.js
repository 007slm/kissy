/*
Copyright 2011, KISSY UI Library v1.1.8dev
MIT Licensed
build time: ${build.time}
*/
KISSY.add("switchable",function(c){function g(b,d){d=d||{};if(!("markupType"in d))if(d.panelCls)d.markupType=1;else if(d.panels)d.markupType=2;for(var e=this.constructor;e;){d=c.merge(e.Config,d);e=e.superclass?e.superclass.constructor:null}this.container=i.get(b);this.config=d;this.ingIndex=this.activeIndex=d.activeIndex;this._init();this._initPlugins();this.fire(v);this.activeIndex>-1||typeof d.switchTo=="number"&&this.switchTo(d.switchTo)}var i=c.DOM,p=c.Event,n=c.EventTarget,v="init";g.Config=
{markupType:0,navCls:"ks-switchable-nav",contentCls:"ks-switchable-content",triggerCls:"ks-switchable-trigger",panelCls:"ks-switchable-panel",triggers:[],panels:[],hasTriggers:true,triggerType:"mouse",delay:0.1,activeIndex:-1,activeTriggerCls:"ks-active",switchTo:0,steps:1,viewSize:[]};g.Plugins=[];c.augment(g,n,{_initPlugins:function(){for(var b=this,d=b.constructor;d;){c.each(d.Plugins,function(e){e.init&&e.init(b)});d=d.superclass?d.superclass.constructor:null}},_init:function(){var b=this.config;
this._parseMarkup();b.hasTriggers&&this._bindTriggers()},_parseMarkup:function(){var b=this.container,d=this.config,e,j,f=[],r=[];switch(d.markupType){case 0:if(e=i.get("."+d.navCls,b))f=i.children(e);j=i.get("."+d.contentCls,b);r=i.children(j);break;case 1:f=i.query("."+d.triggerCls,b);r=i.query("."+d.panelCls,b);break;case 2:f=d.triggers;r=d.panels}b=r.length;this.length=b/d.steps;if(d.hasTriggers&&b>0&&f.length===0)f=this._generateTriggersMarkup(this.length);this.triggers=c.makeArray(f);this.panels=
c.makeArray(r);this.content=j||r[0].parentNode;this.nav=e||d.hasTriggers&&f[0].parentNode},_generateTriggersMarkup:function(b){var d=this.config,e=i.create("<ul>"),j,f;e.className=d.navCls;for(f=0;f<b;f++){j=i.create("<li>");if(f===this.activeIndex)j.className=d.activeTriggerCls;j.innerHTML=f+1;e.appendChild(j)}this.container.appendChild(e);return i.children(e)},_bindTriggers:function(){var b=this,d=b.config,e=b.triggers,j,f,r=e.length;for(f=0;f<r;f++)(function(t){j=e[t];p.on(j,"click",function(u){b._onFocusTrigger(t,
u)});if(d.triggerType==="mouse"){p.on(j,"mouseenter",function(u){b._onMouseEnterTrigger(t,u)});p.on(j,"mouseleave",function(u){b._onMouseLeaveTrigger(t,u)})}})(f)},_onFocusTrigger:function(b,d){if(this._triggerIsValid(b)){this._cancelSwitchTimer();this.switchTo(b,undefined,d)}},_onMouseEnterTrigger:function(b,d){var e=this;if(e._triggerIsValid(b))e.switchTimer=c.later(function(){e.switchTo(b,undefined,d)},e.config.delay*1E3)},_onMouseLeaveTrigger:function(){this._cancelSwitchTimer()},_triggerIsValid:function(b){return this.ingIndex!==
b},_cancelSwitchTimer:function(){if(this.switchTimer){this.switchTimer.cancel();this.switchTimer=undefined}},switchTo:function(b,d,e,j){var f=this,r=f.config,t=f.triggers,u=f.panels,w=f.ingIndex,s=r.steps,o=w*s,q=b*s;if(!f._triggerIsValid(b))return f;if(f.fire("beforeSwitch",{toIndex:b})===false)return f;if(r.hasTriggers)f._switchTrigger(w>-1?t[w]:null,t[b]);if(d===undefined)d=b>w?"forward":"backward";f.ingIndex=b;f._switchView(w>-1?u.slice(o,o+s):null,u.slice(q,q+s),b,d,e,function(){j&&j.call(f,
b);f.activeIndex=b});return f},_switchTrigger:function(b,d){var e=this.config.activeTriggerCls;b&&i.removeClass(b,e);i.addClass(d,e)},_switchView:function(b,d,e,j,f,r){b&&i.css(b,"display","none");i.css(d,"display","block");this._fireOnSwitch(e,f);r&&r.call(this)},_fireOnSwitch:function(b,d){this.fire("switch",c.mix(d||{},{currentIndex:b}))},prev:function(b){var d=this.activeIndex;this.switchTo(d>0?d-1:this.length-1,"backward",b)},next:function(b){var d=this.activeIndex;this.switchTo(d<this.length-
1?d+1:0,"forward",b)}});return c.Switchable=g});
KISSY.add("switchable/aria",function(c,g,i,p){function n(){this.stop&&this.stop()}function v(){this.start&&this.start()}g=c.DOM;i=c.Event;p=c.Switchable;var b=!document.documentElement.hasAttribute?function(e,j){j=j.toLowerCase();var f=g.get(e).getAttributeNode(j);return!!(f&&f.specified)}:function(e,j){j=j.toLowerCase();return g.get(e).hasAttribute(j)};p.Plugins.push({name:"aria",init:function(e){if(e.config.aria){var j=e.container;i.on(j,"focusin",n,e);i.on(j,"focusout",v,e)}}});var d=["a","input",
"button","object"];p.Aria={setTabIndex:function(e,j){e.tabIndex=j;g.query("*",e).each(function(f){var r=f.nodeName.toLowerCase();if(c.inArray(r,d)){b(f,"oriTabIndex")||g.attr(f,"oriTabIndex",f.tabIndex);f.tabIndex=j!=-1?g.attr(f,"oriTabIndex"):j}})}}});
KISSY.add("switchable/accordion/base",function(c,g,i){function p(n,v){if(!(this instanceof p))return new p(n,v);p.superclass.constructor.apply(this,arguments);return 0}i=c.Switchable;g=c.DOM;c.extend(p,i,{_switchTrigger:function(n,v){var b=this.config;b.multiple?g.toggleClass(v,b.activeTriggerCls):p.superclass._switchTrigger.apply(this,arguments)},_triggerIsValid:function(n){return p.superclass._triggerIsValid.call(this,n)||this.config.multiple},_switchView:function(n,v,b,d,e,j){var f=v[0];if(this.config.multiple){g.toggle(f);
this._fireOnSwitch(b,e);j.call(this)}else p.superclass._switchView.apply(this,arguments)}});p.Plugins=[];p.Config={markupType:1,triggerType:"click",multiple:false};return c.Accordion=p});
KISSY.add("switchable/accordion/aria",function(c,g,i){function p(h){var y;c.each(this.triggers,function(B){if(B==h||t.contains(B,h))y=B});return y}function n(h){switch(h.keyCode){case u:case w:h.ctrlKey&&!h.altKey&&!h.shiftKey&&h.halt();break;case k:h.ctrlKey&&!h.altKey&&h.halt()}}function v(h){var y=h.target,B=this.triggers,C=!h.ctrlKey&&!h.shiftKey&&!h.altKey,E=h.ctrlKey&&!h.shiftKey&&!h.altKey;switch(h.keyCode){case z:case A:if(p.call(this,y)&&C){this.switchTo(this.focusIndex);h.halt()}break;case q:case m:if(p.call(this,
y)){d.call(this);h.halt()}break;case a:case l:if(p.call(this,y)){e.call(this);h.halt()}break;case w:if(E){h.halt();e.call(this)}break;case u:if(E){h.halt();d.call(this)}break;case o:if(C){y=this.focusIndex;this.focusIndex=0;b.call(this,y,0,true);h.halt()}break;case s:if(C){y=B.length-1;B=this.focusIndex;this.focusIndex=y;b.call(this,B,y,true);h.halt()}break;case k:if(h.ctrlKey&&!h.altKey){h.halt();h.shiftKey?d.call(this):e.call(this)}}}function b(h,y,B){var C=this.triggers;if(typeof h=="number")var E=
C[h];h=C[y];if(E){x(E,"-1");t.removeClass(E,f);E.setAttribute("aria-selected","false")}B&&h.focus();x(h,"0");t.addClass(h,f);h.setAttribute("aria-selected","true")}function d(){var h=this.triggers,y=this.focusIndex;h=this.focusIndex=y==0?h.length-1:y-1;b.call(this,y,h,true)}function e(){var h=this.focusIndex,y=this.focusIndex=h==this.triggers.length-1?0:h+1;b.call(this,h,y,true)}function j(h){var y=!!h.originalEvent.target,B=this.config.multiple,C=this.activeIndex;h=h.currentIndex;var E=this.triggers[h],
F=this.panels[h];if(C>-1){var D=this.triggers[C];C=this.panels[C];x(D,"-1");y&&E.focus();if(!B){C.setAttribute("aria-hidden","true");D.setAttribute("aria-expanded","false")}}x(E,"0");y=F.getAttribute("aria-hidden");F.setAttribute("aria-hidden",y=="false"?"true":"false");E.setAttribute("aria-expanded",y=="false"?"false":"true");b.call(this,this.focusIndex,h);this.focusIndex=h}g=c.Switchable.Aria;i=c.Accordion;var f="ks-switchable-select",r=c.Event,t=c.DOM,u=33,w=34,s=35,o=36,q=37,m=38,a=39,l=40,k=
9,A=32,z=13;c.mix(i.Config,{aria:true});i.Plugins.push({name:"aria",init:function(h){if(h.config.aria){var y=h.container,B=h.activeIndex;t.attr(y,"aria-multiselectable",h.config.multiple?"true":"false");t.attr(y,"role","tablist");var C=h.triggers,E=h.panels,F=0;c.each(E,function(D){if(!D.id)D.id=c.guid("ks-switchable-tab-panel")});c.each(C,function(D){if(!D.id)D.id=c.guid("ks-switchable-tab")});c.each(C,function(D){D.setAttribute("role","tab");D.setAttribute("aria-expanded",B==F?"true":"false");D.setAttribute("aria-selected",
B==F?"true":"false");D.setAttribute("aria-controls",E[F].id);x(D,B==F?"0":"-1");F++});F=0;c.each(E,function(D){var G=C[F];D.setAttribute("role","tabpanel");D.setAttribute("aria-hidden",B==F?"false":"true");D.setAttribute("aria-labelledby",G.id);F++});h.on("switch",j,h);if(B>-1)h.focusIndex=B;r.on(y,"keydown",v,h);r.on(y,"keypress",n,h)}}});var x=g.setTabIndex});
KISSY.add("switchable/autoplay",function(c,g,i,p){g=c.Event;i=c.Switchable;c.mix(i.Config,{autoplay:false,interval:5,pauseOnHover:true});i.Plugins.push({name:"autoplay",init:function(n){function v(){e=c.later(function(){n.paused||n.switchTo(n.activeIndex<n.length-1?n.activeIndex+1:0,"forward")},d,true)}var b=n.config,d=b.interval*1E3,e;if(b.autoplay){if(b.pauseOnHover){g.on(n.container,"mouseenter",function(){n.stop()});g.on(n.container,"mouseleave",function(){n.start()})}v();n.stop=function(){if(e){e.cancel();
e=p}n.paused=true};n.start=function(){if(e){e.cancel();e=p}n.paused=false;v()}}}});return i});KISSY.add("switchable/autorender",function(c,g,i,p){g=c.DOM;i=c.JSON;p=c.Switchable;p.autoRender=function(n,v){n="."+(n||"KS_Widget");g.query(n,v).each(function(b){var d=b.getAttribute("data-widget-type"),e;if(d&&"Switchable Tabs Slide Carousel Accordion".indexOf(d)>-1)try{if(e=b.getAttribute("data-widget-config"))e=e.replace(/'/g,'"');new c[d](b,i.parse(e))}catch(j){}})}});
KISSY.add("switchable/carousel/base",function(c,g,i,p,n){function v(b,d){if(!(this instanceof v))return new v(b,d);v.superclass.constructor.apply(this,arguments);return 0}p=c.Switchable;g=c.DOM;i=c.Event;v.Config={circular:true,prevBtnCls:"ks-switchable-prev-btn",nextBtnCls:"ks-switchable-next-btn",disableBtnCls:"ks-switchable-disable-btn"};v.Plugins=[];c.extend(v,p,{_init:function(){var b=this;v.superclass._init.call(b);var d=b.config,e=d.disableBtnCls,j=false;c.each(["prev","next"],function(f){var r=
b[f+"Btn"]=g.get("."+d[f+"BtnCls"],b.container);i.on(r,"click",function(t){t.preventDefault();j||g.hasClass(r,e)||b[f]()})});if(!d.circular){b.on("beforeSwitch",function(){j=true});b.on("switch",function(f){f=f.currentIndex;f=f===0?b.prevBtn:f===b.length-1?b.nextBtn:n;g.removeClass([b.prevBtn,b.nextBtn],e);f&&g.addClass(f,e);j=false})}i.on(b.panels,"click",function(){b.fire("itemSelected",{item:this})})}});return c.Carousel=v});
KISSY.add("switchable/carousel/aria",function(c,g,i,p,n){function v(m){var a=m.currentIndex,l=this.activeIndex,k=this.panels,A=k[a*this.config.steps],z=this.triggers;a=z[a];if((m=!!m.originalEvent.target)||l==-1){c.each(z,function(x){q(x,-1)});c.each(k,function(x){q(x,-1)});q(a,0);q(A,0);m&&A.focus()}}function b(m){var a;c.each(this.triggers,function(l){if(l==m||g.contains(l,m)){a=l;return false}});return a}function d(m){var a=m.target;switch(m.keyCode){case w:case u:if(a=b.call(this,a)){a=a;var l=
g.next(a),k=this.triggers;l||(l=k[0]);q(a,-1);q(l,0);l.focus();m.halt()}break;case t:case r:if(a=b.call(this,a)){a=a;l=g.prev(a);k=this.triggers;l||(l=k[k.length-1]);q(a,-1);q(l,0);l.focus();m.halt()}break;case o:case s:if(a=b.call(this,a)){this.switchTo(c.indexOf(a,this.triggers),undefined,m);m.halt()}}}function e(m){var a;c.each(this.panels,function(l){if(l==m||g.contains(l,m)){a=l;return false}});return a}function j(m){var a=c.indexOf(m,this.panels),l=this.config.steps,k=Math.floor(a/l);if(k==
this.activeIndex)return 1;if(a%l==0||a%l==l-1){this.switchTo(k,undefined,undefined,function(){m.focus()});return 0}return 1}function f(m){var a=m.target;switch(m.keyCode){case w:case u:if(a=e.call(this,a)){a=a;var l=g.next(a),k=this.panels;l||(l=k[0]);q(a,-1);q(l,0);j.call(this,l)&&l.focus();m.halt()}break;case t:case r:if(a=e.call(this,a)){a=a;l=g.prev(a);k=this.panels;l||(l=k[k.length-1]);q(a,-1);q(l,0);j.call(this,l)&&l.focus();m.halt()}break;case o:case s:if(a=e.call(this,a)){this.fire("itemSelected",
{item:a});m.halt()}}}g=c.DOM;i=c.Event;p=c.Switchable.Aria;n=c.Carousel;var r=37,t=38,u=39,w=40,s=32,o=13,q=p.setTabIndex;c.mix(n.Config,{aria:true});n.Plugins.push({name:"aria",init:function(m){if(m.config.aria){var a=m.triggers,l=m.panels,k=m.content,A=m.activeIndex;if(!k.id)k.id=c.guid("ks-switchbale-content");k.setAttribute("role","listbox");c.each(a,function(x){q(x,A==0?"0":"-1");x.setAttribute("role","button");x.setAttribute("aria-controls",k.id)});c.each(l,function(x){q(x,-1);x.setAttribute("role",
"option")});m.on("switch",v,m);(l=m.nav)&&i.on(l,"keydown",d,m);i.on(k,"keydown",f,m);l=m.prevBtn;var z=m.nextBtn;if(l){q(l,0);l.setAttribute("role","button");i.on(l,"keydown",function(x){if(x.keyCode==o||x.keyCode==s)m.switchTo(m.activeIndex>0?m.activeIndex-1:a.length-1,undefined,x)})}if(z){q(z,0);z.setAttribute("role","button");i.on(z,"keydown",function(x){if(x.keyCode==o||x.keyCode==s)m.switchTo(m.activeIndex==a-1?m.activeIndex+1:0,undefined,x)})}}}})});
KISSY.add("switchable/effect",function(c,g,i,p,n,v){g=c.DOM;p=c.Anim;n=c.Switchable;var b;c.mix(n.Config,{effect:"none",duration:0.5,easing:"easeNone",nativeAnim:true});n.Effects={none:function(d,e,j){d&&g.css(d,"display","none");g.css(e,"display","block");j()},fade:function(d,e,j){d&&d.length!==1&&c.error("fade effect only supports steps == 1.");var f=this,r=f.config,t=d?d[0]:null,u=e[0];f.anim&&f.anim.stop();g.css(u,"opacity",1);if(t)f.anim=(new p(t,{opacity:0},r.duration,r.easing,function(){f.anim=
v;g.css(u,"z-index",9);g.css(t,"z-index",1);j&&j()},r.nativeAnim)).run();else{g.css(u,"z-index",9);j&&j()}},scroll:function(d,e,j,f){var r=this;d=r.config;e=d.effect==="scrollx";var t={};t[e?"left":"top"]=-(r.viewSize[e?0:1]*f)+"px";r.anim&&r.anim.stop();r.anim=(new p(r.content,t,d.duration,d.easing,function(){r.anim=v;j()},d.nativeAnim)).run()}};b=n.Effects;b.scrollx=b.scrolly=b.scroll;n.Plugins.push({name:"effect",init:function(d){var e=d.config,j=e.effect,f=d.panels,r=d.content,t=e.steps,u=d.activeIndex,
w=f.length;d.viewSize=[e.viewSize[0]||f[0].offsetWidth*t,e.viewSize[1]||f[0].offsetHeight*t];if(j!=="none"){c.each(f,function(m){g.css(m,"display","block")});switch(j){case "scrollx":case "scrolly":g.css(r,"position","absolute");g.css(r.parentNode,"position","relative");if(j==="scrollx"){g.css(f,"float","left");g.width(r,d.viewSize[0]*(w/t))}break;case "fade":var s=u*t,o=s+t-1,q;c.each(f,function(m,a){q=a>=s&&a<=o;g.css(m,{opacity:q?1:0,position:"absolute",zIndex:q?9:1})})}}}});c.augment(n,{_switchView:function(d,
e,j,f,r,t){var u=this,w=u.config.effect;(c.isFunction(w)?w:b[w]).call(u,d,e,function(){u._fireOnSwitch(j,r);t&&t.call(u)},j,f)}});return n});
KISSY.add("switchable/circular",function(c,g,i,p){function n(o,q,m,a,l){var k=this;o=k.config;q=k.length;var A=k.activeIndex,z=o.scrollType===s,x=z?j:f,h=k.viewSize[z?0:1];z=-h*a;var y={},B,C=l===w;if(B=C&&A===0&&a===q-1||l===u&&A===q-1&&a===0)z=v.call(k,k.panels,a,C,x,h);y[x]=z+t;k.anim&&k.anim.stop();k.anim=(new i(k.content,y,o.duration,o.easing,function(){B&&b.call(k,k.panels,a,C,x,h);k.anim=undefined;m()},o.nativeAnim)).run()}function v(o,q,m,a,l){var k=this.config.steps;q=this.length;var A=m?
q-1:0,z=(A+1)*k;for(k=A*k;k<z;k++){g.css(o[k],d,e);g.css(o[k],a,(m?-1:1)*l*q)}return m?l:-l*q}function b(o,q,m,a,l){var k=this.config.steps;q=this.length;var A=m?q-1:0,z=(A+1)*k;for(k=A*k;k<z;k++){g.css(o[k],d,r);g.css(o[k],a,r)}g.css(this.content,a,m?-l*(q-1):r)}g=c.DOM;i=c.Anim;p=c.Switchable;var d="position",e="relative",j="left",f="top",r="",t="px",u="forward",w="backward",s="scrollx";c.mix(p.Config,{circular:false});p.Plugins.push({name:"circular",init:function(o){o=o.config;if(o.circular&&(o.effect===
s||o.effect==="scrolly")){o.scrollType=o.effect;o.effect=n}}})});
KISSY.add("switchable/countdown",function(c,g,i,p,n,v){g=c.DOM;i=c.Event;p=c.Anim;n=c.Switchable;c.mix(n.Config,{countdown:false,countdownFromStyle:"",countdownToStyle:"width: 0"});n.Plugins.push({name:"countdown",init:function(b){function d(o){e();s=(new p(t[o],w,r-1)).run()}function e(){if(f){clearTimeout(f);f=null}if(s){s.stop();s=v}}var j=b.config,f,r=j.interval,t=[],u=j.countdownFromStyle,w=j.countdownToStyle,s;if(!(!j.autoplay||!j.hasTriggers||!j.countdown)){c.each(b.triggers,function(o,q){o.innerHTML=
'<div class="ks-switchable-trigger-mask"></div><div class="ks-switchable-trigger-content">'+o.innerHTML+"</div>";t[q]=o.firstChild});if(j.pauseOnHover){i.on(b.container,"mouseenter",function(){e();var o=t[b.ingIndex];if(u)s=(new p(o,u,0.2,"easeOut")).run();else g.removeAttr(o,"style")});i.on(b.container,"mouseleave",function(){e();var o=b.ingIndex;g.removeAttr(t[o],"style");f=setTimeout(function(){d(o)},200)})}b.on("beforeSwitch",function(){e();g.attr(t[b.activeIndex],"style",u||"")});b.on("switch",
function(o){b.paused||d(o.currentIndex)})}}});return n});
KISSY.add("switchable/lazyload",function(c,g,i){g=c.DOM;i=c.Switchable;var p="beforeSwitch",n="img-src",v="area-data",b={};b[n]="data-ks-lazyload-custom";b[v]="ks-datalazyload-custom";c.mix(i.Config,{lazyDataType:v});i.Plugins.push({name:"lazyload",init:function(d){function e(u){var w=f.steps;u=u.toIndex*w;j.loadCustomLazyData(d.panels.slice(u,u+w),r);a:{var s,o;if(u=(w=r===n)?"img":r===v?"textarea":""){u=g.query(u,d.container);s=0;for(o=u.length;s<o;s++)if(w?g.attr(u[s],t):g.hasClass(u[s],t)){w=
false;break a}}w=true}w&&d.detach(p,e)}var j=c.DataLazyload,f=d.config,r=f.lazyDataType,t=b[r];!j||!r||!t||d.on(p,e)}});return i});KISSY.add("switchable/slide/base",function(c,g){function i(p,n){if(!(this instanceof i))return new i(p,n);i.superclass.constructor.apply(this,arguments);return 0}g=c.Switchable;i.Config={autoplay:true,circular:true};i.Plugins=[];c.extend(i,g);return c.Slide=i});
KISSY.add("switchable/slide/aria",function(c,g,i,p,n){function v(s){var o=this.panels,q=this.__slideIndex;switch(s.keyCode){case f:case j:q++;if(q==o.length)q=0;this.__slideIndex=q;this.switchTo(q,r,undefined,function(){o[q].focus()});s.halt();break;case e:case d:q--;if(q==-1)q=o.length-1;this.__slideIndex=q;this.switchTo(q,t,undefined,function(){o[q].focus()});s.halt()}}function b(s){var o=this;if(c.inArray(s.target,o.panels)){if(w){clearTimeout(w);w=undefined}switch(s.keyCode){case f:case e:case d:case j:s.halt()}w=
setTimeout(function(){v.call(o,s);w=undefined},200)}}p=c.Switchable;g=c.DOM;i=c.Event;p=p.Aria;n=c.Slide;var d=37,e=38,j=39,f=40,r="forward",t="backward";c.mix(n.Config,{aria:true});var u=p.setTabIndex;n.Plugins.push({name:"aria",init:function(s){if(s.config.aria){var o=s.panels,q=s.activeIndex;c.each(s.triggers,function(a){u(a,-1)});c.each(o,function(a){u(a,q==0?"0":"-1");g.attr(a,"role","option")});var m=s.content;g.attr(m,"role","listbox");i.on(m,"keydown",b,s);u(o[0],0);if(q>-1)s.__slideIndex=
q;s.on("switch",function(a){a=a.currentIndex;var l=s.activeIndex;s.__slideIndex=a;l!=-1&&u(o[l],-1);u(o[a],0)})}}});var w});KISSY.add("switchable/tabs/base",function(c,g){function i(p,n){if(!(this instanceof i))return new i(p,n);i.superclass.constructor.call(this,p,n);return 0}g=c.Switchable;c.extend(i,g);i.Config={};i.Plugins=[];return c.Tabs=i});
KISSY.add("switchable/tabs/aria",function(c,g,i){function p(a){var l;c.each(this.triggers,function(k){if(k==a||e.contains(k,a))l=k});return l}function n(a){switch(a.keyCode){case j:case f:a.ctrlKey&&!a.altKey&&!a.shiftKey&&a.halt();break;case q:a.ctrlKey&&!a.altKey&&a.halt()}}function v(a){var l=a.target,k=this.triggers,A=!a.ctrlKey&&!a.shiftKey&&!a.altKey,z=a.ctrlKey&&!a.shiftKey&&!a.altKey;switch(a.keyCode){case u:case w:if(p.call(this,l)){this.prev(a);a.halt()}break;case s:case o:if(p.call(this,
l)){this.next(a);a.halt()}break;case f:if(z){a.halt();this.next(a)}break;case j:if(z){a.halt();this.prev(a)}break;case t:if(A){this.switchTo(0,undefined,a);a.halt()}break;case r:if(A){this.switchTo(k.length-1,undefined,a);a.halt()}break;case q:if(a.ctrlKey&&!a.altKey){a.halt();a.shiftKey?this.prev(a):this.next(a)}}}function b(a){var l=!!a.originalEvent.target,k=this.activeIndex,A=a.currentIndex;if(k!=A){a=this.triggers[k];var z=this.triggers[A];k=this.panels[k];A=this.panels[A];a&&m(a,"-1");m(z,"0");
l&&z.focus();k&&k.setAttribute("aria-hidden","true");A.setAttribute("aria-hidden","false")}}g=c.Switchable.Aria;i=c.Tabs;var d=c.Event,e=c.DOM,j=33,f=34,r=35,t=36,u=37,w=38,s=39,o=40,q=9;c.mix(i.Config,{aria:true});i.Plugins.push({name:"aria",init:function(a){if(a.config.aria){var l=a.triggers,k=a.activeIndex,A=a.panels,z=a.container;e.attr(z,"role","tablist");var x=0;c.each(l,function(h){h.setAttribute("role","tab");m(h,k==x?"0":"-1");if(!h.id)h.id=c.guid("ks-switchable");x++});x=0;c.each(A,function(h){var y=
l[x];h.setAttribute("role","tabpanel");h.setAttribute("aria-hidden",k==x?"false":"true");h.setAttribute("aria-labelledby",y.id);x++});a.on("switch",b,a);d.on(z,"keydown",v,a);d.on(z,"keypress",n,a)}}});var m=g.setTabIndex});
