/*
Copyright 2011, KISSY UI Library v1.1.8dev
MIT Licensed
build time: ${build.time}
*/
KISSY.add("switchable",function(d){function h(c,a){a=a||{};if(!("markupType"in a))if(a.panelCls)a.markupType=1;else if(a.panels)a.markupType=2;for(var e=this.constructor;e;){a=d.merge(e.Config,a);e=e.superclass?e.superclass.constructor:null}this.container=j.get(c);this.config=a;this.activeIndex=this.completedIndex=a.activeIndex;if(!(this.activeIndex>-1))if(typeof a.switchTo!="number")this.completedIndex=this.activeIndex=0;this._init();this._initPlugins();this.fire(v);this.activeIndex>-1||typeof a.switchTo==
"number"&&this.switchTo(a.switchTo)}var j=d.DOM,o=d.Event,m=d.EventTarget,v="init",r={originalEvent:{target:1}};h.Config={markupType:0,navCls:"ks-switchable-nav",contentCls:"ks-switchable-content",triggerCls:"ks-switchable-trigger",panelCls:"ks-switchable-panel",triggers:[],panels:[],hasTriggers:true,triggerType:"mouse",delay:0.1,activeIndex:-1,activeTriggerCls:"ks-active",steps:1,viewSize:[]};h.Plugins=[];d.augment(h,m,{_initPlugins:function(){for(var c=this,a=c.constructor;a;){d.each(a.Plugins,
function(e){e.init&&e.init(c)});a=a.superclass?a.superclass.constructor:null}},_init:function(){var c=this.config;this._parseMarkup();c.hasTriggers&&this._bindTriggers()},_parseMarkup:function(){var c=this.container,a=this.config,e,k,g=[],p=[];switch(a.markupType){case 0:if(e=j.get("."+a.navCls,c))g=j.children(e);k=j.get("."+a.contentCls,c);p=j.children(k);break;case 1:g=j.query("."+a.triggerCls,c);p=j.query("."+a.panelCls,c);break;case 2:g=a.triggers;p=a.panels}c=p.length;this.length=c/a.steps;if(a.hasTriggers&&
c>0&&g.length===0)g=this._generateTriggersMarkup(this.length);this.triggers=d.makeArray(g);this.panels=d.makeArray(p);this.content=k||p[0].parentNode;this.nav=e||a.hasTriggers&&g[0].parentNode},_generateTriggersMarkup:function(c){var a=this.config,e=j.create("<ul>"),k,g;e.className=a.navCls;for(g=0;g<c;g++){k=j.create("<li>");if(g===this.activeIndex)k.className=a.activeTriggerCls;k.innerHTML=g+1;e.appendChild(k)}this.container.appendChild(e);return j.children(e)},_bindTriggers:function(){var c=this,
a=c.config,e=c.triggers,k,g,p=e.length;for(g=0;g<p;g++)(function(s){k=e[s];o.on(k,"click",function(){c._onFocusTrigger(s)});if(a.triggerType==="mouse"){o.on(k,"mouseenter",function(){c._onMouseEnterTrigger(s)});o.on(k,"mouseleave",function(){c._onMouseLeaveTrigger(s)})}})(g)},_onFocusTrigger:function(c){if(this._triggerIsValid(c)){this._cancelSwitchTimer();this.switchTo(c,undefined,r)}},_onMouseEnterTrigger:function(c){var a=this;if(a._triggerIsValid(c))a.switchTimer=d.later(function(){a.switchTo(c,
undefined,r)},a.config.delay*1E3)},_onMouseLeaveTrigger:function(){this._cancelSwitchTimer()},_triggerIsValid:function(c){return this.activeIndex!==c},_cancelSwitchTimer:function(){if(this.switchTimer){this.switchTimer.cancel();this.switchTimer=undefined}},switchTo:function(c,a,e,k){var g=this,p=g.config,s=g.triggers,y=g.panels,t=g.activeIndex,l=p.steps,q=t*l,z=c*l;if(!g._triggerIsValid(c))return g;if(g.fire("beforeSwitch",{toIndex:c})===false)return g;if(p.hasTriggers)g._switchTrigger(t>-1?s[t]:
null,s[c]);if(a===undefined)a=c>t?"forward":"backward";g._switchView(t>-1?y.slice(q,q+l):null,y.slice(z,z+l),c,a,e,function(){k&&k.call(g,c);g.completedIndex=c});g.activeIndex=c;return g},_switchTrigger:function(c,a){var e=this.config.activeTriggerCls;c&&j.removeClass(c,e);j.addClass(a,e)},_switchView:function(c,a,e,k,g,p){c&&j.css(c,"display","none");j.css(a,"display","block");this._fireOnSwitch(e,g);p&&p.call(this)},_fireOnSwitch:function(c,a){this.fire("switch",d.mix(a||{},{currentIndex:c}))},
prev:function(c){var a=this.activeIndex;this.switchTo(a>0?a-1:this.length-1,"backward",c)},next:function(c){var a=this.activeIndex;this.switchTo(a<this.length-1?a+1:0,"forward",c)}});return d.Switchable=h});
KISSY.add("switchable/aria",function(d,h,j,o){function m(){this.stop&&this.stop()}function v(){this.start&&this.start()}h=d.DOM;j=d.Event;o=d.Switchable;var r=!document.documentElement.hasAttribute?function(a,e){e=e.toLowerCase();var k=h.get(a).getAttributeNode(e);return!!(k&&k.specified)}:function(a,e){e=e.toLowerCase();return h.get(a).hasAttribute(e)};o.Plugins.push({name:"aria",init:function(a){if(a.config.aria){var e=a.container;j.on(e,"focusin",m,a);j.on(e,"focusout",v,a)}}});var c=["a","input",
"button","object"];o.Aria={setTabIndex:function(a,e){a.tabIndex=e;h.query("*",a).each(function(k){var g=k.nodeName.toLowerCase();if(d.inArray(g,c)){r(k,"oriTabIndex")||h.attr(k,"oriTabIndex",k.tabIndex);k.tabIndex=e!=-1?h.attr(k,"oriTabIndex"):e}})}}});
KISSY.add("switchable/accordion/base",function(d,h,j){function o(m,v){if(!(this instanceof o))return new o(m,v);o.superclass.constructor.apply(this,arguments);return 0}j=d.Switchable;h=d.DOM;d.extend(o,j,{_switchTrigger:function(m,v){var r=this.config;r.multiple?h.toggleClass(v,r.activeTriggerCls):o.superclass._switchTrigger.apply(this,arguments)},_triggerIsValid:function(m){return o.superclass._triggerIsValid.call(this,m)||this.config.multiple},_switchView:function(m,v,r,c,a,e){var k=v[0];if(this.config.multiple){h.toggle(k);
this._fireOnSwitch(r,a);e.call(this)}else o.superclass._switchView.apply(this,arguments)}});o.Plugins=[];o.Config={markupType:1,triggerType:"click",multiple:false};return d.Accordion=o});
KISSY.add("switchable/accordion/aria",function(d,h,j){function o(i){var w;d.each(this.triggers,function(B){if(B==i||p.contains(B,i))w=B});return w}function m(i){switch(i.keyCode){case s:case y:i.ctrlKey&&!i.altKey&&!i.shiftKey&&i.halt();break;case f:i.ctrlKey&&!i.altKey&&i.halt()}}function v(i){var w=i.target,B=this.triggers,C=!i.ctrlKey&&!i.shiftKey&&!i.altKey,E=i.ctrlKey&&!i.shiftKey&&!i.altKey;switch(i.keyCode){case A:case u:if(o.call(this,w)&&C){this.switchTo(this.focusIndex);i.halt()}break;case q:case z:if(o.call(this,
w)){c.call(this);i.halt()}break;case n:case b:if(o.call(this,w)){a.call(this);i.halt()}break;case y:if(E){i.halt();a.call(this)}break;case s:if(E){i.halt();c.call(this)}break;case l:if(C){w=this.focusIndex;this.focusIndex=0;r.call(this,w,0,true);i.halt()}break;case t:if(C){w=B.length-1;B=this.focusIndex;this.focusIndex=w;r.call(this,B,w,true);i.halt()}break;case f:if(i.ctrlKey&&!i.altKey){i.halt();i.shiftKey?c.call(this):a.call(this)}}}function r(i,w,B){var C=this.triggers;if(typeof i=="number")var E=
C[i];i=C[w];if(E){x(E,"-1");p.removeClass(E,k);E.setAttribute("aria-selected","false")}B&&i.focus();x(i,"0");p.addClass(i,k);i.setAttribute("aria-selected","true")}function c(){var i=this.triggers,w=this.focusIndex;i=this.focusIndex=w==0?i.length-1:w-1;r.call(this,w,i,true)}function a(){var i=this.focusIndex,w=this.focusIndex=i==this.triggers.length-1?0:i+1;r.call(this,i,w,true)}function e(i){var w=!!i.originalEvent.target,B=this.config.multiple,C=this.completedIndex;i=i.currentIndex;var E=this.triggers[i],
F=this.panels[i];if(C>-1){var D=this.triggers[C];C=this.panels[C];x(D,"-1");w&&E.focus();if(!B){C.setAttribute("aria-hidden","true");D.setAttribute("aria-expanded","false")}}x(E,"0");w=F.getAttribute("aria-hidden");F.setAttribute("aria-hidden",w=="false"?"true":"false");E.setAttribute("aria-expanded",w=="false"?"false":"true");r.call(this,this.focusIndex,i);this.focusIndex=i}h=d.Switchable.Aria;j=d.Accordion;var k="ks-switchable-select",g=d.Event,p=d.DOM,s=33,y=34,t=35,l=36,q=37,z=38,n=39,b=40,f=
9,u=32,A=13;d.mix(j.Config,{aria:false});j.Plugins.push({name:"aria",init:function(i){if(i.config.aria){var w=i.container,B=i.activeIndex;p.attr(w,"aria-multiselectable",i.config.multiple?"true":"false");p.attr(w,"role","tablist");var C=i.triggers,E=i.panels,F=0;d.each(E,function(D){if(!D.id)D.id=d.guid("ks-switchable-tab-panel")});d.each(C,function(D){if(!D.id)D.id=d.guid("ks-switchable-tab")});d.each(C,function(D){D.setAttribute("role","tab");D.setAttribute("aria-expanded",B==F?"true":"false");
D.setAttribute("aria-selected",B==F?"true":"false");D.setAttribute("aria-controls",E[F].id);x(D,B==F?"0":"-1");F++});F=0;d.each(E,function(D){var G=C[F];D.setAttribute("role","tabpanel");D.setAttribute("aria-hidden",B==F?"false":"true");D.setAttribute("aria-labelledby",G.id);F++});i.on("switch",e,i);if(B>-1)i.focusIndex=B;g.on(w,"keydown",v,i);g.on(w,"keypress",m,i)}}});var x=h.setTabIndex});
KISSY.add("switchable/autoplay",function(d,h,j,o){h=d.Event;j=d.Switchable;d.mix(j.Config,{autoplay:false,interval:5,pauseOnHover:true});j.Plugins.push({name:"autoplay",init:function(m){function v(){a=d.later(function(){m.paused||m.switchTo(m.activeIndex<m.length-1?m.activeIndex+1:0,"forward")},c,true)}var r=m.config,c=r.interval*1E3,a;if(r.autoplay){if(r.pauseOnHover){h.on(m.container,"mouseenter",function(){m.stop()});h.on(m.container,"mouseleave",function(){m.start()})}v();m.stop=function(){if(a){a.cancel();
a=o}m.paused=true};m.start=function(){if(a){a.cancel();a=o}m.paused=false;v()}}}});return j});KISSY.add("switchable/autorender",function(d,h,j,o){h=d.DOM;j=d.JSON;o=d.Switchable;o.autoRender=function(m,v){m="."+(m||"KS_Widget");h.query(m,v).each(function(r){var c=r.getAttribute("data-widget-type"),a;if(c&&"Switchable Tabs Slide Carousel Accordion".indexOf(c)>-1)try{if(a=r.getAttribute("data-widget-config"))a=a.replace(/'/g,'"');new d[c](r,j.parse(a))}catch(e){}})}});
KISSY.add("switchable/carousel/base",function(d,h,j,o,m){function v(c,a){if(!(this instanceof v))return new v(c,a);v.superclass.constructor.apply(this,arguments)}o=d.Switchable;h=d.DOM;j=d.Event;var r={originalEvent:{target:1}};v.Config={circular:true,prevBtnCls:"ks-switchable-prev-btn",nextBtnCls:"ks-switchable-next-btn",disableBtnCls:"ks-switchable-disable-btn"};v.Plugins=[];d.extend(v,o,{_init:function(){var c=this;v.superclass._init.call(c);var a=c.config,e=a.disableBtnCls,k=false;d.each(["prev",
"next"],function(g){var p=c[g+"Btn"]=h.get("."+a[g+"BtnCls"],c.container);p&&j.on(p,"click",function(s){s.preventDefault();k||h.hasClass(p,e)||c[g](r)})});if(!a.circular){c.on("beforeSwitch",function(){k=true});c.on("switch",function(g){g=g.currentIndex;g=g===0?c.prevBtn:g===c.length-1?c.nextBtn:m;h.removeClass([c.prevBtn,c.nextBtn],e);g&&h.addClass(g,e);k=false})}j.on(c.panels,"click",function(){c.fire("itemSelected",{item:this})})}});return d.Carousel=v});
KISSY.add("switchable/carousel/aria",function(d,h,j,o,m){function v(n){var b=n.currentIndex,f=this.completedIndex,u=this.panels,A=u[b*this.config.steps],x=this.triggers;b=x[b];if((n=!!n.originalEvent.target)||f==-1){d.each(x,function(i){q(i,-1)});d.each(u,function(i){q(i,-1)});b&&q(b,0);q(A,0);n&&A.focus()}}function r(n){var b;d.each(this.triggers,function(f){if(f==n||h.contains(f,n)){b=f;return false}});return b}function c(n){var b=n.target;switch(n.keyCode){case y:case s:if(b=r.call(this,b)){b=
b;var f=h.next(b),u=this.triggers;f||(f=u[0]);q(b,-1);if(f){q(f,0);f.focus()}n.halt()}break;case p:case g:if(b=r.call(this,b)){b=b;f=h.prev(b);u=this.triggers;f||(f=u[u.length-1]);q(b,-1);if(f){q(f,0);f.focus()}n.halt()}break;case l:case t:if(b=r.call(this,b)){this.switchTo(d.indexOf(b,this.triggers),undefined,z);n.halt()}}}function a(n){var b;d.each(this.panels,function(f){if(f==n||h.contains(f,n)){b=f;return false}});return b}function e(n){var b=d.indexOf(n,this.panels),f=this.config.steps,u=Math.floor(b/
f);if(u==this.activeIndex)return 1;if(b%f==0||b%f==f-1){this.switchTo(u,undefined,undefined,function(){n.focus()});return 0}return 1}function k(n){var b=n.target;switch(n.keyCode){case y:case s:if(b=a.call(this,b)){b=b;var f=h.next(b),u=this.panels;f||(f=u[0]);q(b,-1);q(f,0);e.call(this,f)&&f.focus();n.halt()}break;case p:case g:if(b=a.call(this,b)){b=b;f=h.prev(b);u=this.panels;f||(f=u[u.length-1]);q(b,-1);q(f,0);e.call(this,f)&&f.focus();n.halt()}break;case l:case t:if(b=a.call(this,b)){this.fire("itemSelected",
{item:b});n.halt()}}}h=d.DOM;j=d.Event;o=d.Switchable.Aria;m=d.Carousel;var g=37,p=38,s=39,y=40,t=32,l=13,q=o.setTabIndex,z={originalEvent:{target:1}};d.mix(m.Config,{aria:false});m.Plugins.push({name:"aria",init:function(n){if(n.config.aria){var b=n.triggers,f=n.panels,u=n.content,A=n.activeIndex;if(!u.id)u.id=d.guid("ks-switchbale-content");u.setAttribute("role","listbox");d.each(b,function(x){q(x,A==0?"0":"-1");x.setAttribute("role","button");x.setAttribute("aria-controls",u.id)});d.each(f,function(x){q(x,
-1);x.setAttribute("role","option")});n.on("switch",v,n);(b=n.nav)&&j.on(b,"keydown",c,n);j.on(u,"keydown",k,n);b=n.prevBtn;f=n.nextBtn;if(b){q(b,0);b.setAttribute("role","button");j.on(b,"keydown",function(x){if(x.keyCode==l||x.keyCode==t){n.prev(z);x.preventDefault()}})}if(f){q(f,0);f.setAttribute("role","button");j.on(f,"keydown",function(x){if(x.keyCode==l||x.keyCode==t){n.next(z);x.preventDefault()}})}}}})});
KISSY.add("switchable/effect",function(d,h,j,o,m,v){h=d.DOM;o=d.Anim;m=d.Switchable;var r;d.mix(m.Config,{effect:"none",duration:0.5,easing:"easeNone",nativeAnim:true});m.Effects={none:function(c,a,e){c&&h.css(c,"display","none");h.css(a,"display","block");e()},fade:function(c,a,e){c&&c.length!==1&&d.error("fade effect only supports steps == 1.");var k=this,g=k.config,p=c?c[0]:null,s=a[0];if(k.anim){k.anim.stop();h.css(k.anim.domEl,{zIndex:1,opacity:0})}h.css(s,"opacity",1);if(p)k.anim=(new o(p,{opacity:0},
g.duration,g.easing,function(){k.anim=v;h.css(s,"z-index",9);h.css(p,"z-index",1);e&&e()},g.nativeAnim)).run();else{h.css(s,"z-index",9);e&&e()}},scroll:function(c,a,e,k){var g=this;a=g.config;var p=a.effect==="scrollx",s={};s[p?"left":"top"]=-(g.viewSize[p?0:1]*k)+"px";g.anim&&g.anim.stop();if(c)g.anim=(new o(g.content,s,a.duration,a.easing,function(){g.anim=v;e&&e()},a.nativeAnim)).run();else{h.css(g.content,s);e&&e()}}};r=m.Effects;r.scrollx=r.scrolly=r.scroll;m.Plugins.push({name:"effect",init:function(c){var a=
c.config,e=a.effect,k=c.panels,g=c.content,p=a.steps,s=c.activeIndex,y=k.length;c.viewSize=[a.viewSize[0]||k[0].offsetWidth*p,a.viewSize[1]||k[0].offsetHeight*p];if(e!=="none"){d.each(k,function(z){h.css(z,"display","block")});switch(e){case "scrollx":case "scrolly":h.css(g,"position","absolute");h.css(g.parentNode,"position","relative");if(e==="scrollx"){h.css(k,"float","left");h.width(g,c.viewSize[0]*(y/p))}break;case "fade":var t=s*p,l=t+p-1,q;d.each(k,function(z,n){q=n>=t&&n<=l;h.css(z,{opacity:q?
1:0,position:"absolute",zIndex:q?9:1})})}}}});d.augment(m,{_switchView:function(c,a,e,k,g,p){var s=this,y=s.config.effect;(d.isFunction(y)?y:r[y]).call(s,c,a,function(){s._fireOnSwitch(e,g);p&&p.call(s)},e,k)}});return m});
KISSY.add("switchable/circular",function(d,h,j,o){function m(l,q,z,n,b){var f=this;l=f.config;q=f.length;var u=f.activeIndex,A=l.scrollType===t,x=A?e:k,i=f.viewSize[A?0:1];A=-i*n;var w={},B,C=b===y;if(B=C&&u===0&&n===q-1||b===s&&u===q-1&&n===0)A=v.call(f,f.panels,n,C,x,i);w[x]=A+p;f.anim&&f.anim.stop();f.anim=(new j(f.content,w,l.duration,l.easing,function(){B&&r.call(f,f.panels,n,C,x,i);f.anim=undefined;z()},l.nativeAnim)).run()}function v(l,q,z,n,b){var f=this.config.steps;q=this.length;var u=z?
q-1:0,A=(u+1)*f;for(f=u*f;f<A;f++){h.css(l[f],c,a);h.css(l[f],n,(z?-1:1)*b*q)}return z?b:-b*q}function r(l,q,z,n,b){var f=this.config.steps;q=this.length;var u=z?q-1:0,A=(u+1)*f;for(f=u*f;f<A;f++){h.css(l[f],c,g);h.css(l[f],n,g)}h.css(this.content,n,z?-b*(q-1):g)}h=d.DOM;j=d.Anim;o=d.Switchable;var c="position",a="relative",e="left",k="top",g="",p="px",s="forward",y="backward",t="scrollx";d.mix(o.Config,{circular:false});o.Plugins.push({name:"circular",init:function(l){l=l.config;if(l.circular&&(l.effect===
t||l.effect==="scrolly")){l.scrollType=l.effect;l.effect=m}}})});
KISSY.add("switchable/countdown",function(d,h,j,o,m,v){h=d.DOM;j=d.Event;o=d.Anim;m=d.Switchable;d.mix(m.Config,{countdown:false,countdownFromStyle:"",countdownToStyle:"width: 0"});m.Plugins.push({name:"countdown",init:function(r){function c(l){a();t=(new o(p[l],y,g-1)).run()}function a(){if(k){clearTimeout(k);k=null}if(t){t.stop();t=v}}var e=r.config,k,g=e.interval,p=[],s=e.countdownFromStyle,y=e.countdownToStyle,t;if(!(!e.autoplay||!e.hasTriggers||!e.countdown)){d.each(r.triggers,function(l,q){l.innerHTML=
'<div class="ks-switchable-trigger-mask"></div><div class="ks-switchable-trigger-content">'+l.innerHTML+"</div>";p[q]=l.firstChild});if(e.pauseOnHover){j.on(r.container,"mouseenter",function(){a();var l=p[r.activeIndex];if(s)t=(new o(l,s,0.2,"easeOut")).run();else h.removeAttr(l,"style")});j.on(r.container,"mouseleave",function(){a();var l=r.activeIndex;h.removeAttr(p[l],"style");k=setTimeout(function(){c(l)},200)})}r.on("beforeSwitch",function(){a();if(r.activeIndex>-1)h.attr(p[r.activeIndex],"style",
s||"")});r.on("switch",function(l){r.paused||c(l.currentIndex)})}}});return m});
KISSY.add("switchable/lazyload",function(d,h,j){h=d.DOM;j=d.Switchable;var o="beforeSwitch",m="img-src",v="area-data",r={};r[m]="data-ks-lazyload-custom";r[v]="ks-datalazyload-custom";d.mix(j.Config,{lazyDataType:v});j.Plugins.push({name:"lazyload",init:function(c){function a(s){var y=k.steps;s=s.toIndex*y;e.loadCustomLazyData(c.panels.slice(s,s+y),g);a:{var t,l;if(s=(y=g===m)?"img":g===v?"textarea":""){s=h.query(s,c.container);t=0;for(l=s.length;t<l;t++)if(y?h.attr(s[t],p):h.hasClass(s[t],p)){y=
false;break a}}y=true}y&&c.detach(o,a)}var e=d.DataLazyload,k=c.config,g=k.lazyDataType,p=r[g];!e||!g||!p||c.on(o,a)}});return j});KISSY.add("switchable/slide/base",function(d,h){function j(o,m){if(!(this instanceof j))return new j(o,m);j.superclass.constructor.apply(this,arguments);return 0}h=d.Switchable;j.Config={autoplay:true,circular:true};j.Plugins=[];d.extend(j,h);return d.Slide=j});
KISSY.add("switchable/slide/aria",function(d,h,j,o,m){function v(t){var l=this.panels,q=this.__slideIndex;switch(t.keyCode){case k:case e:q++;if(q==l.length)q=0;this.__slideIndex=q;this.switchTo(q,g,undefined,function(){l[q].focus()});t.halt();break;case a:case c:q--;if(q==-1)q=l.length-1;this.__slideIndex=q;this.switchTo(q,p,undefined,function(){l[q].focus()});t.halt()}}function r(t){var l=this;if(d.inArray(t.target,l.panels)){if(y){clearTimeout(y);y=undefined}switch(t.keyCode){case k:case a:case c:case e:t.halt()}y=
setTimeout(function(){v.call(l,t);y=undefined},200)}}o=d.Switchable;h=d.DOM;j=d.Event;o=o.Aria;m=d.Slide;var c=37,a=38,e=39,k=40,g="forward",p="backward";d.mix(m.Config,{aria:false});var s=o.setTabIndex;m.Plugins.push({name:"aria",init:function(t){if(t.config.aria){var l=t.panels,q=0,z=t.activeIndex;d.each(t.triggers,function(b){s(b,-1)});d.each(l,function(b){s(b,z==q?"0":"-1");h.attr(b,"role","option");q++});var n=t.content;h.attr(n,"role","listbox");j.on(n,"keydown",r,t);s(l[0],0);if(z>-1)t.__slideIndex=
z;t.on("switch",function(b){b=b.currentIndex;var f=t.completedIndex;t.__slideIndex=b;f!=-1&&s(l[f],-1);s(l[b],0)})}}});var y});KISSY.add("switchable/tabs/base",function(d,h){function j(o,m){if(!(this instanceof j))return new j(o,m);j.superclass.constructor.call(this,o,m);return 0}h=d.Switchable;d.extend(j,h);j.Config={};j.Plugins=[];return d.Tabs=j});
KISSY.add("switchable/tabs/aria",function(d,h,j){function o(b){var f;d.each(this.triggers,function(u){if(u==b||a.contains(u,b))f=u});return f}function m(b){switch(b.keyCode){case e:case k:b.ctrlKey&&!b.altKey&&!b.shiftKey&&b.halt();break;case q:b.ctrlKey&&!b.altKey&&b.halt()}}function v(b){var f=b.target,u=this.triggers,A=!b.ctrlKey&&!b.shiftKey&&!b.altKey,x=b.ctrlKey&&!b.shiftKey&&!b.altKey;switch(b.keyCode){case s:case y:if(o.call(this,f)){this.prev(z);b.halt()}break;case t:case l:if(o.call(this,
f)){this.next(b);b.halt()}break;case k:if(x){b.halt();this.next(z)}break;case e:if(x){b.halt();this.prev(z)}break;case p:if(A){this.switchTo(0,undefined,z);b.halt()}break;case g:if(A){this.switchTo(u.length-1,undefined,z);b.halt()}break;case q:if(b.ctrlKey&&!b.altKey){b.halt();b.shiftKey?this.prev(z):this.next(z)}}}function r(b){var f=!!b.originalEvent.target,u=this.completedIndex,A=b.currentIndex;if(u!=A){b=this.triggers[u];var x=this.triggers[A];u=this.panels[u];A=this.panels[A];b&&n(b,"-1");n(x,
"0");f&&x.focus();u&&u.setAttribute("aria-hidden","true");A.setAttribute("aria-hidden","false")}}h=d.Switchable.Aria;j=d.Tabs;var c=d.Event,a=d.DOM,e=33,k=34,g=35,p=36,s=37,y=38,t=39,l=40,q=9,z={originalEvent:{target:1}};d.mix(j.Config,{aria:false});j.Plugins.push({name:"aria",init:function(b){if(b.config.aria){var f=b.triggers,u=b.activeIndex,A=b.panels,x=b.container;a.attr(x,"role","tablist");var i=0;d.each(f,function(w){w.setAttribute("role","tab");n(w,u==i?"0":"-1");if(!w.id)w.id=d.guid("ks-switchable");
i++});i=0;d.each(A,function(w){var B=f[i];w.setAttribute("role","tabpanel");w.setAttribute("aria-hidden",u==i?"false":"true");w.setAttribute("aria-labelledby",B.id);i++});b.on("switch",r,b);c.on(x,"keydown",v,b);c.on(x,"keypress",m,b)}}});var n=h.setTabIndex});
