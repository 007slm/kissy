/*
Copyright 2010, KISSY UI Library v1.1.4
MIT Licensed
build time: Sep 14 17:56
*/
KISSY.add("event",function(d,l){function k(a,b,e,h,j){if(d.isString(b))b=d.query(b);if(d.isArray(b)){d.each(b,function(i){s[a](i,e,h,j)});return true}if((e=d.trim(e))&&e.indexOf(y)>0){d.each(e.split(y),function(i){s[a](b,i,h,j)});return true}}function g(a){return f(a)?p.data(a,x):-1}function m(a,b){f(a)&&p.data(a,x,b)}function c(a){p.removeData(a,x)}function f(a){return a&&a.nodeType!==3&&a.nodeType!==8}var t=document,p=d.DOM,z=t.addEventListener?function(a,b,e,h){a.addEventListener&&a.addEventListener(b,
e,!!h)}:function(a,b,e){a.attachEvent&&a.attachEvent("on"+b,e)},A=t.removeEventListener?function(a,b,e,h){a.removeEventListener&&a.removeEventListener(b,e,!!h)}:function(a,b,e){a.detachEvent&&a.detachEvent("on"+b,e)},x="ksEventTargetId",y=" ",B=d.now(),w={},s={EVENT_GUID:x,special:{},add:function(a,b,e,h){if(!k("add",a,b,e,h)){var j=g(a),i,o,q,r,v;if(!(j===-1||!b||!d.isFunction(e))){if(!j){m(a,j=B++);w[j]={target:a,events:{}}}o=w[j].events;if(!o[b]){i=((j=!a.isCustomEventTarget)||a._supportSpecialEvent)&&
s.special[b]||{};q=function(n,u){if(!n||!n.fixed){n=new d.EventObject(a,n,b);d.isPlainObject(u)&&d.mix(n,u)}i.setup&&i.setup(n);return(i.handle||s._handle)(a,n,o[b].listeners)};o[b]={handle:q,listeners:[]};r=i.fix||b;v=i.capture;if(j)z(a,r,q,v);else a._addEvent&&a._addEvent(r,q,v)}o[b].listeners.push({fn:e,scope:h||a})}}},remove:function(a,b,e,h){if(!k("remove",a,b,e,h)){var j=g(a),i,o,q,r,v,n,u;if(j!==-1)if(j&&(i=w[j]))if(i.target===a){h=h||a;i=i.events||{};if(o=i[b]){q=o.listeners;n=q.length;if(d.isFunction(e)&&
n){v=r=0;for(u=[];r<n;++r)if(e!==q[r].fn||h!==q[r].scope)u[v++]=q[r];o.listeners=u;n=u.length}if(e===l||n===0){if(a.isCustomEventTarget)a._addEvent&&a._removeEvent(b,o.handle);else{e=s.special[b]||{};A(a,e.fix||b,o.handle)}delete i[b]}}if(b===l||d.isEmptyObject(i)){for(b in i)s.remove(a,b);delete w[j];c(a)}}}},_handle:function(a,b,e){e=e.slice(0);for(var h,j=0,i=e.length;j<i;++j){h=e[j];h=h.fn.call(h.scope||a,b);if(h===false&&a.isCustomEventTarget||b.isImmediatePropagationStopped)break}return h},
_getCache:function(a){return w[a]},_simpleAdd:z,_simpleRemove:A};s.on=s.add;d.Event=s});
KISSY.add("event-object",function(d,l){function k(c,f,t){this.currentTarget=c;this.originalEvent=f||{};if(f){this.type=f.type;this._fix()}else{this.type=t;this.target=c}this.currentTarget=c;this.fixed=true}var g=document,m="altKey attrChange attrName bubbles button cancelable charCode clientX clientY ctrlKey currentTarget data detail eventPhase fromElement handler keyCode layerX layerY metaKey newValue offsetX offsetY originalTarget pageX pageY prevValue relatedNode relatedTarget screenX screenY shiftKey srcElement target toElement view wheelDelta which".split(" ");d.augment(k,
{_fix:function(){var c=this.originalEvent,f=m.length,t,p=this.currentTarget;for(p=p.nodeType===9?p:p.ownerDocument||g;f;){t=m[--f];this[t]=c[t]}if(!this.target)this.target=this.srcElement||g;if(this.target.nodeType===3)this.target=this.target.parentNode;if(!this.relatedTarget&&this.fromElement)this.relatedTarget=this.fromElement===this.target?this.toElement:this.fromElement;if(this.pageX===l&&this.clientX!==l){c=p.documentElement;f=p.body;this.pageX=this.clientX+(c&&c.scrollLeft||f&&f.scrollLeft||
0)-(c&&c.clientLeft||f&&f.clientLeft||0);this.pageY=this.clientY+(c&&c.scrollTop||f&&f.scrollTop||0)-(c&&c.clientTop||f&&f.clientTop||0)}if(this.which===l)this.which=this.charCode!==l?this.charCode:this.keyCode;if(this.metaKey===l)this.metaKey=this.ctrlKey;if(!this.which&&this.button!==l)this.which=this.button&1?1:this.button&2?3:this.button&4?2:0},preventDefault:function(){var c=this.originalEvent;if(c.preventDefault)c.preventDefault();else c.returnValue=false;this.isDefaultPrevented=true},stopPropagation:function(){var c=
this.originalEvent;if(c.stopPropagation)c.stopPropagation();else c.cancelBubble=true;this.isPropagationStopped=true},stopImmediatePropagation:function(){var c=this.originalEvent;c.stopImmediatePropagation?c.stopImmediatePropagation():this.stopPropagation();this.isImmediatePropagationStopped=true},halt:function(c){c?this.stopImmediatePropagation():this.stopPropagation();this.preventDefault()}});d.EventObject=k});
KISSY.add("event-target",function(d,l){var k=d.Event;d.EventTarget={isCustomEventTarget:true,fire:function(g,m){var c=d.DOM.data(this,k.EVENT_GUID)||-1;if((g=((k._getCache(c)||{}).events||{})[g])&&d.isFunction(g.handle))return g.handle(l,m);return this},on:function(g,m,c){k.add(this,g,m,c);return this},detach:function(g,m,c){k.remove(this,g,m,c);return this}}});
KISSY.add("event-mouseenter",function(d){var l=d.Event;d.UA.ie||d.each([{name:"mouseenter",fix:"mouseover"},{name:"mouseleave",fix:"mouseout"}],function(k){l.special[k.name]={fix:k.fix,setup:function(g){g.type=k.name},handle:function(g,m,c){var f=m.relatedTarget;try{for(;f&&f!==g;)f=f.parentNode;f!==g&&l._handle(g,m,c)}catch(t){}}}})});
KISSY.add("event-focusin",function(d){var l=d.Event;document.addEventListener&&d.each([{name:"focusin",fix:"focus"},{name:"focusout",fix:"blur"}],function(k){l.special[k.name]={fix:k.fix,capture:true,setup:function(g){g.type=k.name}}})});
