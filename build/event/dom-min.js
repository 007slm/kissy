/*
Copyright 2012, KISSY UI Library v1.40dev
MIT Licensed
build time: Oct 25 00:37
*/
KISSY.add("event/dom/api",function(i,d,b,c,j,g,h){function k(a,b){var e=c[b]||{};a.originalType||(a.selector?e.delegateFix&&(a.originalType=b,b=e.delegateFix):e.onFix&&(a.originalType=b,b=e.onFix));return b}function n(a,b,e){var o,c,d,b=k(e,b);(o=j.data(a))||j.data(a,o={});if(!(d=o.handle))d=o.handle=function(a){var b=a.type,e=d.currentTarget;if(!(g.triggeredEvent==b||"undefined"==typeof KISSY))if(b=g.getCustomEventFromNodeByType(e,b))return a.currentTarget=e,a=new h(a),b.notify(a)},d.currentTarget=
a;if(!(c=o.events))c=o.events={};o=c[b];o||(o=c[b]=new g({type:b,fn:d,currentTarget:a}),o.setup());o.on(e);a=null}var a=d._Utils;i.mix(d,{add:function(l,f,e,o){f=i.trim(f);l=b.query(l);if(a.batchForType(d.add,null,1,l,f,e,o))return l;var c=e;i.isFunction(e)&&(c={fn:e,context:o});for(e=l.length-1;0<=e;e--)n(l[e],f,c);return l},remove:function(l,f,e,c){f=i.trim(f);l=b.query(l);if(a.batchForType(d.remove,null,1,l,f,e,c))return l;e=a.normalizeParam(f,e,c);f=e.type;for(c=l.length-1;0<=c;c--){var h=l[c],
g=f,m=e,m=m||{},g=k(m,g),h=j.data(h),p=(h||{}).events;if(h&&p)if(g)p[g].detach(m);else for(g in p)p[g].detach(m)}return l},delegate:function(a,b,e,c,g){return d.add(a,b,{fn:c,context:g,selector:e})},undelegate:function(a,b,e,c,g){return d.remove(a,b,{fn:c,context:g,selector:e})},fire:function(l,f,e,c){var d=void 0,e=e||{};a.splitAndRun(f,function(f){e.type=f;var m,h,f=a.getTypedGroups(f);(h=f[1])&&(h=j.getGroupsRe(h));f=f[0];i.mix(e,{type:f,_ks_groups:h});l=b.query(l);for(h=l.length-1;0<=h;h--)if(m=
g.getCustomEventFromNodeByType(l[h],f))m=m.fire(e,c),!1!==d&&(d=m)});return d},fireHandler:function(a,b,e){return d.fire(a,b,e,1)},_clone:function(a,b){if(j.data(a)){var e=j.data(a).events;i.each(e,function(a,e){i.each(a.subscribers,function(a){n(b,e,a)})})}}});d.on=d.add;d.detach=d.remove;return d},{requires:"../base,dom,./special,./utils,./custom-event,./object".split(",")});
KISSY.add("event/dom/change",function(i,d,b,c,j){var g=i.Env.host.document,g=g&&g.documentMode;if(d.ie&&(9>d.ie||g&&9>g)){var h=/^(?:textarea|input|select)$/i,k=function(a){a=a.type;return"checkbox"==a||"radio"==a};j.change={setup:function(){if(h.test(this.nodeName))if(k(this))b.on(this,"propertychange",n),b.on(this,"click",a);else return!1;else b.on(this,"beforeactivate",l)},tearDown:function(){if(h.test(this.nodeName))if(k(this))b.remove(this,"propertychange",n),b.remove(this,"click",a);else return!1;
else b.remove(this,"beforeactivate",l),i.each(c.query("textarea,input,select",this),function(a){a.__changeHandler&&(a.__changeHandler=0,b.remove(a,"change",{fn:f,last:1}))})}};var n=function(a){"checked"==a.originalEvent.propertyName&&(this.__changed=1)},a=function(a){this.__changed&&(this.__changed=0,b.fire(this,"change",a))},l=function(a){a=a.target;h.test(a.nodeName)&&!a.__changeHandler&&(a.__changeHandler=1,b.on(a,"change",{fn:f,last:1}))},f=function(a){if(!a.isPropagationStopped&&!k(this)){var f;
(f=this.parentNode)&&b.fire(f,"change",a)}}}},{requires:["ua","./api","dom","./special"]});
KISSY.add("event/dom/custom-event",function(i,d,b,c,j,g,h){function k(a){i.mix(this,a);this.reset()}var n=h._Utils;i.extend(k,h._BaseCustomEvent,{setup:function(){var a=this.type,l=b[a]||{},f=this.currentTarget,e=c.data(f).handle;(!l.setup||!1===l.setup.call(f))&&c.simpleAdd(f,a,e)},constructor:k,reset:function(){k.superclass.reset.call(this);this.lastCount=this.delegateCount=0},notify:function(a){var b=a.target,f=this.currentTarget,e=this.subscribers,c=[],h,g,m=this.delegateCount||0,i,k;if(m&&!b.disabled)for(;b!=
f;){i=[];for(g=0;g<m;g++)k=e[g],d.test(b,k.selector)&&i.push(k);i.length&&c.push({currentTarget:b,currentTargetSubscribers:i});b=b.parentNode||f}c.push({currentTarget:f,currentTargetSubscribers:e.slice(m)});g=0;for(b=c.length;!a.isPropagationStopped()&&g<b;++g){f=c[g];i=f.currentTargetSubscribers;f=f.currentTarget;a.currentTarget=f;for(f=0;!a.isImmediatePropagationStopped()&&f<i.length;f++)e=i[f],e=e.notify(a,this),!1!==h&&(h=e)}return h},fire:function(a,c){var a=a||{},f=this.type,e=b[f];e&&e.onFix&&
(f=e.onFix);var h,j=this.currentTarget,n=!0;a.type=f;a instanceof g?e=a:(e=new g({currentTarget:j}),i.mix(e,a));var m=j,p=d._getWin(m.ownerDocument||m),s="on"+f;do{e.currentTarget=m;if(h=k.getCustomEventFromNodeByType(m,f))h=h.notify(e),!1!==n&&(n=h);m[s]&&!1===m[s].call(m)&&e.preventDefault();m=m.parentNode||m.ownerDocument||m===j.ownerDocument&&p}while(!c&&m&&!e.isPropagationStopped());if(!c&&!e.isDefaultPrevented()){var u;try{if(s&&j[f]&&("focus"!==f&&"blur"!==f||0!==j.offsetWidth)&&!i.isWindow(j))(u=
j[s])&&(j[s]=null),k.triggeredEvent=f,j[f]()}catch(q){}u&&(j[s]=u);k.triggeredEvent=""}return n},on:function(a){var c=this.subscribers,f=b[this.type]||{},a=a instanceof j?a:new j(a);-1==this.findSubscriber(a)&&(a.selector?(c.splice(this.delegateCount,0,a),this.delegateCount++):a.last?(c.push(a),this.lastCount++):c.splice(c.length-this.lastCount,0,a),f.add&&f.add.call(this.currentTarget,a))},detach:function(a){var c,f=b[this.type]||{},e="selector"in this,h=this.selector,g=this.context,d=a.fn,m=this.currentTarget,
i=this.subscribers,a=a.groups;if(i.length){a&&(c=n.getGroupsRe(a));var j,k,q,v,w=i.length;if(d||e||c){g=g||m;j=a=0;for(k=[];a<w;++a)q=i[a],v=q.context||m,g!=v||d&&d!=q.fn||e&&(h&&h!=q.selector||!h&&!q.selector)||c&&!q.groups.match(c)?k[j++]=q:(q.selector&&this.delegateCount&&this.delegateCount--,q.last&&this.lastCount&&this.lastCount--,f.remove&&f.remove.call(m,q));this.subscribers=k}else this.reset();this.checkNodeMemory()}},removeSubscriber:function(){k.superclass.removeSubscriber.apply(this,arguments);
this.checkNodeMemory()},checkNodeMemory:function(){var a=this.type,h,f=b[a]||{},e=this.currentTarget,g=c.data(e);if(g&&(h=g.events,this.hasSubscriber()||((!f.tearDown||!1===f.tearDown.call(e))&&c.simpleRemove(e,a,g.handle),delete h[a]),i.isEmptyObject(h)))g.handle=null,c.removeData(e)}});k.triggeredEvent="";k.getCustomEventFromNodeByType=function(a,b){var f=c.data(a),e;f&&(e=f.events);if(e)return e[b]};return k},{requires:"dom,./special,./utils,./subscriber,./object,event/base".split(",")});
KISSY.add("event/dom",function(i,d,b){i.mix(d,{KeyCodes:b});return d},{requires:"./base,./dom/key-codes,./dom/api,./dom/change,./dom/focusin,./dom/hashchange,./dom/mouseenter,./dom/mousewheel,./dom/valuechange".split(",")});
KISSY.add("event/dom/focusin",function(i,d,b,c){d.ie||i.each([{name:"focusin",fix:"focus"},{name:"focusout",fix:"blur"}],function(d){function g(c){return b.fire(c.target,d.name)}var h=i.guid("attaches_"+i.now()+"_");c[d.name]={setup:function(){var b=this.ownerDocument||this;h in b||(b[h]=0);b[h]+=1;1===b[h]&&b.addEventListener(d.fix,g,!0)},tearDown:function(){var b=this.ownerDocument||this;b[h]-=1;0===b[h]&&b.removeEventListener(d.fix,g,!0)}}});c.focus={delegateFix:"focusin"};c.blur={delegateFix:"focusout"};
return b},{requires:["ua","./api","./special"]});
KISSY.add("event/dom/hashchange",function(i,d,b,c,j){var g=i.Env.host,h=g.document,k=h&&h.documentMode,n="__replace_history_"+i.now(),c=k||c.ie;d.REPLACE_HISTORY=n;if(!("onhashchange"in g)||c&&8>c){var a="<html><head><title>"+(h&&h.title||"")+" - {hash}</title>{head}</head><body>{hash}</body></html>",l=function(){return"#"+(new i.Uri(location.href)).getFragment()},f,e,o=function(){var a=l(),b;if(b=i.endsWith(a,n))a=a.slice(0,-n.length),location.hash=a;a!==e&&(e=a,r(a,b));f=setTimeout(o,50)},r=c&&
8>c?function(c,f){var e=i.substitute(a,{hash:i.escapeHTML(c),head:b.isCustomDomain()?"<script>document.domain = '"+h.domain+"';<\/script>":""}),g=p.contentWindow.document;try{f?g.open("text/html","replace"):g.open(),g.write(e),g.close()}catch(d){}}:function(){d.fire(g,"hashchange")},t=function(){f||o()},m=function(){f&&clearTimeout(f);f=0},p;8>c&&(t=function(){if(!p){var a=b.getEmptyIframeSrc();p=b.create("<iframe "+(a?'src="'+a+'"':"")+' style="display: none" height="0" width="0" tabindex="-1" title="empty"/>');
b.prepend(p,h.documentElement);d.add(p,"load",function(){d.remove(p,"load");r(l());d.add(p,"load",c);o()});h.onpropertychange=function(){try{"title"===event.propertyName&&(p.contentWindow.document.title=h.title+" - "+l())}catch(a){}};var c=function(){var a=i.trim(p.contentWindow.document.body.innerText),b=l();a!=b&&(e=location.hash=a);d.fire(g,"hashchange")}}},m=function(){f&&clearTimeout(f);f=0;d.detach(p);b.remove(p);p=0});j.hashchange={setup:function(){if(this===g){e=l();t()}},tearDown:function(){this===
g&&m()}}}},{requires:["./api","dom","ua","./special"]});
KISSY.add("event/dom/key-codes",function(i,d){var b={MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,
META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,
WIN_KEY:224,MAC_FF_META:224,WIN_IME:229,isTextModifyingKeyEvent:function(c){if(c.altKey&&!c.ctrlKey||c.metaKey||c.keyCode>=b.F1&&c.keyCode<=b.F12)return!1;switch(c.keyCode){case b.ALT:case b.CAPS_LOCK:case b.CONTEXT_MENU:case b.CTRL:case b.DOWN:case b.END:case b.ESC:case b.HOME:case b.INSERT:case b.LEFT:case b.MAC_FF_META:case b.META:case b.NUMLOCK:case b.NUM_CENTER:case b.PAGE_DOWN:case b.PAGE_UP:case b.PAUSE:case b.PRINT_SCREEN:case b.RIGHT:case b.SHIFT:case b.UP:case b.WIN_KEY:case b.WIN_KEY_RIGHT:return!1;
default:return!0}},isCharacterKey:function(c){if(c>=b.ZERO&&c<=b.NINE||c>=b.NUM_ZERO&&c<=b.NUM_MULTIPLY||c>=b.A&&c<=b.Z||d.webkit&&0==c)return!0;switch(c){case b.SPACE:case b.QUESTION_MARK:case b.NUM_PLUS:case b.NUM_MINUS:case b.NUM_PERIOD:case b.NUM_DIVISION:case b.SEMICOLON:case b.DASH:case b.EQUALS:case b.COMMA:case b.PERIOD:case b.SLASH:case b.APOSTROPHE:case b.SINGLE_QUOTE:case b.OPEN_SQUARE_BRACKET:case b.BACKSLASH:case b.CLOSE_SQUARE_BRACKET:return!0;default:return!1}}};return b},{requires:["ua"]});
KISSY.add("event/dom/mouseenter",function(i,d,b,c,j){i.each([{name:"mouseenter",fix:"mouseover"},{name:"mouseleave",fix:"mouseout"}],function(c){j[c.name]={onFix:c.fix,delegateFix:c.fix,handle:function(c,g,d){var a=c.currentTarget,i=c.relatedTarget;if(!i||i!==a&&!b.contains(a,i))return[g.simpleNotify(c,d)]}}});return d},{requires:["./api","dom","ua","./special"]});
KISSY.add("event/dom/mousewheel",function(i,d,b){i=b.gecko?"DOMMouseScroll":"mousewheel";d.mousewheel={onFix:i,delegateFix:i}},{requires:["./special","ua"]});
KISSY.add("event/dom/object",function(i,d){function b(a){this.originalEvent=a;this.isDefaultPrevented=a.defaultPrevented||a.returnValue===k||a.getPreventDefault&&a.getPreventDefault()?function(){return h}:function(){return k};c(this);j(this)}function c(a){for(var b=a.originalEvent,c=n.length,e,d=b.currentTarget,d=9===d.nodeType?d:d.ownerDocument||g;c;)e=n[--c],a[e]=b[e];a.target||(a.target=a.srcElement||d);3===a.target.nodeType&&(a.target=a.target.parentNode);!a.relatedTarget&&a.fromElement&&(a.relatedTarget=
a.fromElement===a.target?a.toElement:a.fromElement);void 0===a.pageX&&void 0!==a.clientX&&(b=d.documentElement,c=d.body,a.pageX=a.clientX+(b&&b.scrollLeft||c&&c.scrollLeft||0)-(b&&b.clientLeft||c&&c.clientLeft||0),a.pageY=a.clientY+(b&&b.scrollTop||c&&c.scrollTop||0)-(b&&b.clientTop||c&&c.clientTop||0));void 0===a.which&&(a.which=void 0===a.charCode?a.keyCode:a.charCode);void 0===a.metaKey&&(a.metaKey=a.ctrlKey);!a.which&&void 0!==a.button&&(a.which=a.button&1?1:a.button&2?3:a.button&4?2:0)}function j(a){var b,
c,e,d=a.detail;a.wheelDelta&&(e=a.wheelDelta/120);a.detail&&(e=-(0==d%3?d/3:d));void 0!==a.axis&&(a.axis===a.HORIZONTAL_AXIS?(c=0,b=-1*e):a.axis===a.VERTICAL_AXIS&&(b=0,c=e));void 0!==a.wheelDeltaY&&(c=a.wheelDeltaY/120);void 0!==a.wheelDeltaX&&(b=-1*a.wheelDeltaX/120);!b&&!c&&(c=e);i.mix(a,{deltaY:c,delta:e,deltaX:b,type:"mousewheel"})}var g=i.Env.host.document,h=!0,k=!1,n="type,altKey,attrChange,attrName,bubbles,button,cancelable,charCode,clientX,clientY,ctrlKey,currentTarget,data,detail,eventPhase,fromElement,handler,keyCode,metaKey,newValue,offsetX,offsetY,originalTarget,pageX,pageY,prevValue,relatedNode,relatedTarget,screenX,screenY,shiftKey,srcElement,target,toElement,view,wheelDelta,which,axis".split(",");
i.extend(b,d._Object,{constructor:b,preventDefault:function(){var a=this.originalEvent;a.preventDefault?a.preventDefault():a.returnValue=k;b.superclass.preventDefault.call(this)},stopPropagation:function(){var a=this.originalEvent;a.stopPropagation?a.stopPropagation():a.cancelBubble=h;b.superclass.stopPropagation.call(this)}});return b},{requires:["event/base"]});KISSY.add("event/dom/special",function(){return{}});
KISSY.add("event/dom/submit",function(i,d,b,c,j){var g=i.Env.host.document,g=g&&g.documentMode;if(d.ie&&(9>d.ie||g&&9>g)){var h=c.nodeName;j.submit={setup:function(){if("form"==h(this))return!1;b.on(this,"click keypress",k)},tearDown:function(){if("form"==h(this))return!1;b.remove(this,"click keypress",k);i.each(c.query("form",this),function(a){a.__submit__fix&&(a.__submit__fix=0,b.remove(a,"submit",{fn:n,last:1}))})}};var k=function(a){var a=a.target,c=h(a);if((a="input"==c||"button"==c?a.form:null)&&
!a.__submit__fix)a.__submit__fix=1,b.on(a,"submit",{fn:n,last:1})},n=function(a){this.parentNode&&!a.isPropagationStopped&&!a._ks_fired&&b.fire(this.parentNode,"submit",a)}}},{requires:["ua","./api","dom","./special"]});
KISSY.add("event/dom/subscriber",function(i,d,b){function c(b){c.superclass.constructor.apply(this,arguments)}i.extend(c,b._Subscriber,{keys:"fn,selector,data,context,originalType,groups,last".split(","),notifyInternal:function(b,c){var h,i,n=b.type;this.originalType&&(b.type=this.originalType);(h=d[b.type])&&h.handle?(h=h.handle(b,this,c))&&0<h.length&&(i=h[0]):i=this.simpleNotify(b,c);b.type=n;return i}});return c},{requires:["./special","event/base"]});
KISSY.add("event/dom/utils",function(i,d){var b=i.Env.host.document;return{simpleAdd:b&&b.addEventListener?function(b,d,g,h){b.addEventListener&&b.addEventListener(d,g,!!h)}:function(b,d,g){b.attachEvent&&b.attachEvent("on"+d,g)},simpleRemove:b&&b.removeEventListener?function(b,d,g,h){b.removeEventListener&&b.removeEventListener(d,g,!!h)}:function(b,d,g){b.detachEvent&&b.detachEvent("on"+d,g)},data:function(b,i){return d.data(b,"ksEventTargetId_1.30",i)},removeData:function(b){return d.removeData(b,
"ksEventTargetId_1.30")}}},{requires:["dom"]});
KISSY.add("event/dom/valuechange",function(i,d,b,c){function j(a){if(b.hasData(a,r)){var c=b.data(a,r);clearTimeout(c);b.removeData(a,r)}}function g(a){j(a.target)}function h(a){var c=a.value,e=b.data(a,o);c!==e&&(d.fire(a,f,{prevVal:e,newVal:c},!0),b.data(a,o,c))}function k(a){b.hasData(a,r)||b.data(a,r,setTimeout(function(){h(a);b.data(a,r,setTimeout(arguments.callee,t))},t))}function n(a){var c=a.target;"focus"==a.type&&b.data(c,o,c.value);k(c)}function a(a){h(a.target)}function l(c){b.removeData(c,
o);j(c);d.remove(c,"blur",g);d.remove(c,"webkitspeechchange",a);d.remove(c,"mousedown keyup keydown focus",n)}var f="valuechange",e=b.nodeName,o="event/valuechange/history",r="event/valuechange/poll",t=50;c[f]={setup:function(){var b=e(this);if("input"==b||"textarea"==b)l(this),d.on(this,"blur",g),d.on(this,"webkitspeechchange",a),d.on(this,"mousedown keyup keydown focus",n)},tearDown:function(){l(this)}};return d},{requires:["./api","dom","./special"]});
