/*
Copyright 2012, KISSY UI Library v1.40dev
MIT Licensed
build time: Nov 8 17:28
*/
KISSY.add("event/dom/touch/gesture",function(f,d){var e=d.Gesture,c=f.Features,a,b,g;c.isTouchSupported?(a="touchstart",b="touchmove",g="touchend"):c.isMsPointerEnabled&&(a="MSPointerDown",b="MSPointerMove",g="MSPointerUp");a&&(e.start=a,e.move=b,e.end=g,e.tap="tap");return e},{requires:["event/dom/base"]});KISSY.add("event/dom/touch/handle-map",function(){return{}});
KISSY.add("event/dom/touch/handle",function(f,d,e,c,a){function b(h){this.doc=h;this.eventHandle={};this.init()}var g=f.guid("touch-handle"),k=f.Features,i={};i[a.start]="onTouchStart";i[a.move]="onTouchMove";i[a.end]="onTouchEnd";"mousedown"!==a.start&&(i.touchcancel="onTouchEnd");b.prototype={init:function(){var h=this.doc,b,a;this.onTouchMove=f.throttle(this.onTouchMove,30);for(b in i){a=i[b];c.on(h,b,this[a],this)}},normalize:function(h){var b=h.type,a;if(!k.isTouchSupported){if(b.indexOf("mouse")!=
-1&&h.which!=1)return;a=[h];b=!b.match(/up$/i);h.touches=b?a:[];h.targetTouches=b?a:[];h.changedTouches=a}return h},onTouchStart:function(b){var a,g;for(a in this.eventHandle){g=this.eventHandle[a];g.isActive=true}this.callEventHandle("onTouchStart",b)},onTouchMove:function(b){this.callEventHandle("onTouchMove",b)},onTouchEnd:function(b){this.callEventHandle("onTouchEnd",b)},callEventHandle:function(b,a){var g,c;if(a=this.normalize(a))for(g in this.eventHandle){c=this.eventHandle[g];if(c.isActive&&
c[b](a)===false)c.isActive=false}},addEventHandle:function(b){this.eventHandle[b]||(this.eventHandle[b]=new e[b])},removeEventHandle:function(b){delete this.eventHandle[b]},destroy:function(){var b=this.doc,a,g;for(a in i){g=i[a];c.detach(b,a,this[g],this)}}};return{addDocumentHandle:function(a,c){var e=d._getWin(a.ownerDocument||a).document,f=d.data(e,g);f||d.data(e,g,f=new b(e));f.addEventHandle(c)},removeDocumentHandle:function(b,a){var c=d._getWin(b.ownerDocument||b).document,e=d.data(c,g);if(e){e.removeEventHandle(a);
if(f.isEmptyObject(eventHandle)){e.destroy();d.removeData(c,g)}}}}},{requires:"dom,./handle-map,event/dom/base,./gesture,./tap,./horizontal-swipe,./vertical-swipe".split(",")});KISSY.add("event/dom/touch/horizontal-swipe",function(f,d,e){function c(){this.event=a}var a="horizontalSwipe";f.extend(c,e,{onTouchStart:function(){var b;b=c.superclass.onTouchStart.apply(this,arguments);this.isVertical=0;return b}});return d[a]=c},{requires:["./handle-map","./swipe"]});
KISSY.add("event/dom/touch/swipe",function(f,d,e){function c(){this.event=a}var a="swipe";c.prototype={onTouchStart:function(b){var a=b.touches;if(1<a.length)return!1;a=a[0];this.startTime=b.timeStamp;this.isVertical=this.isHorizontal=1;this.startX=a.pageX;this.startY=a.pageY;-1!=b.type.indexOf("mouse")&&b.preventDefault()},onTouchMove:function(b){var a=b.changedTouches[0],c=a.pageY,a=Math.abs(a.pageX-this.startX),c=Math.abs(c-this.startY);if(1E3<b.timeStamp-this.startTime)return!1;this.isVertical&&
35<a&&(this.isVertical=0);this.isHorizontal&&35<c&&(this.isHorizontal=0);if(!this.isHorizontal&&!this.isVertical)return!1},onTouchEnd:function(a){if(!1===this.onTouchMove(a))return!1;var c=a.changedTouches[0],d=c.pageX-this.startX,f=c.pageY-this.startY,h=Math.abs(d),j=Math.abs(f);this.isVertical&&50>j&&(this.isVertical=0);this.isHorizontal&&50>h&&(this.isHorizontal=0);if(this.isHorizontal)d=0>d?"left":"right";else if(this.isVertical)d=0>f?"up":"down",h=j;else return!1;e.fire(a.target,this.event,{touch:c,
direction:d,distance:h,duration:a.timeStamp-this.startTime})}};return d[a]=c},{requires:["./handle-map","event/dom/base"]});KISSY.add("event/dom/touch/tap",function(f,d,e){function c(){}c.prototype={onTouchStart:function(a){if(1<a.touches.length)return!1},onTouchMove:function(){return!1},onTouchEnd:function(a){e.fire(a.target,"tap",a)}};return d.tap=c},{requires:["./handle-map","event/dom/base"]});
KISSY.add("event/dom/touch",function(f,d,e,c){var f=d._Special,d={setup:function(a){c.addDocumentHandle(this,a)},tearDown:function(a){c.removeDocumentHandle(this,a)}},a;for(a in e)f[a]=d},{requires:["event/dom/base","./touch/handle-map","./touch/handle"]});
KISSY.add("event/dom/touch/vertical-swipe",function(f,d,e){function c(){this.event=a}var a="verticalSwipe";f.extend(c,e,{onTouchStart:function(){var a;a=c.superclass.onTouchStart.apply(this,arguments);this.isHorizontal=0;return a}});return d[a]=c},{requires:["./handle-map","./swipe"]});
