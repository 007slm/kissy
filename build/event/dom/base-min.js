/*
Copyright 2013, KISSY UI Library v1.40dev
MIT Licensed
build time: Mar 15 14:51
*/
KISSY.add("event/dom/base/api",function(h,d,b,a,i,k,m){function l(c,b){var e=a[b]||{};c.originalType||(c.selector?e.delegateFix&&(c.originalType=b,b=e.delegateFix):e.onFix&&(c.originalType=b,b=e.onFix));return b}function n(c,b,e){var f,q,a,e=h.merge(e),b=l(e,b);f=k.getCustomEvents(c,1);if(!(a=f.handle))a=f.handle=function(c){var b=c.type,e=a.currentTarget;if(!(k.triggeredEvent==b||"undefined"==typeof KISSY))if(b=k.getCustomEvent(e,b))return c.currentTarget=e,c=new m(c),b.notify(c)},a.currentTarget=
c;if(!(q=f.events))q=f.events={};f=q[b];f||(f=q[b]=new k({type:b,fn:a,currentTarget:c}),f.setup());f.on(e);c=null}function f(c,b,e){var e=h.merge(e),b=l(e,b),c=k.getCustomEvents(c),f=(c||{}).events;if(c&&f)if(b)(b=f[b])&&b.detach(e);else for(b in f)f[b].detach(e)}var c=d._Utils,q=b.NodeType.ELEMENT_NODE;h.mix(d,{add:function(f,a,e,d){f=b.query(f);c.batchForType(function(b,f,e,g){for(var e=c.normalizeParam(f,e,g),a,f=e.type,g=b.length-1;0<=g;g--)a=b[g],a.nodeType==q&&n(a,f,e)},1,f,a,e,d);return f},
remove:function(g,a,e,d){g=b.query(g);c.batchForType(function(b,e,g,a){for(var g=c.normalizeParam(e,g,a),j,d,e=g.type,a=b.length-1;0<=a;a--)if(j=b[a],j.nodeType==q&&(f(j,e,g),g.deep)){d=j.getElementsByTagName("*");for(j=d.length-1;0<=j;j--)f(d[j],e,g)}},1,g,a,e,d);return g},delegate:function(b,c,e,f,a){return d.add(b,c,{fn:f,context:a,selector:e})},undelegate:function(b,c,e,f,a){return d.remove(b,c,{fn:f,context:a,selector:e})},fire:function(f,a,e,d){var p=void 0,e=e||{};e.synthetic=1;c.splitAndRun(a,
function(a){e.type=a;var j,i,l,a=c.getTypedGroups(a);(i=a[1])&&(i=c.getGroupsRe(i));a=a[0];h.mix(e,{type:a,_ks_groups:i});f=b.query(f);for(i=f.length-1;0<=i;i--)j=f[i],j.nodeType==q&&(l=k.getCustomEvent(j,a),!d&&!l&&(l=new k({type:a,currentTarget:j})),l&&(j=l.fire(e,d),!1!==p&&(p=j)))});return p},fireHandler:function(b,c,f){return d.fire(b,c,f,1)},_clone:function(b,c){var f;(f=k.getCustomEvents(b))&&h.each(f.events,function(b,f){h.each(b.observers,function(b){n(c,f,b)})})},_ObservableDOMEvent:k});
d.on=d.add;d.detach=d.remove;return d},{requires:"event/base,dom,./special,./utils,./observable,./object".split(",")});KISSY.add("event/dom/base",function(h,d,b,a,i,k){h.mix(d,{KeyCodes:b,_DOMUtils:a,Gesture:i,_Special:k});return d},{requires:"event/base,./base/key-codes,./base/utils,./base/gesture,./base/special,./base/api,./base/mouseenter,./base/mousewheel,./base/valuechange".split(",")});
KISSY.add("event/dom/base/gesture",function(){return{start:"mousedown",move:"mousemove",end:"mouseup",tap:"click",doubleTap:"dblclick"}});
KISSY.add("event/dom/base/key-codes",function(h){var d=h.UA,b={MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,
Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,
WIN_KEY:224,MAC_FF_META:224,WIN_IME:229,isTextModifyingKeyEvent:function(a){if(a.altKey&&!a.ctrlKey||a.metaKey||a.keyCode>=b.F1&&a.keyCode<=b.F12)return!1;switch(a.keyCode){case b.ALT:case b.CAPS_LOCK:case b.CONTEXT_MENU:case b.CTRL:case b.DOWN:case b.END:case b.ESC:case b.HOME:case b.INSERT:case b.LEFT:case b.MAC_FF_META:case b.META:case b.NUMLOCK:case b.NUM_CENTER:case b.PAGE_DOWN:case b.PAGE_UP:case b.PAUSE:case b.PRINT_SCREEN:case b.RIGHT:case b.SHIFT:case b.UP:case b.WIN_KEY:case b.WIN_KEY_RIGHT:return!1;
default:return!0}},isCharacterKey:function(a){if(a>=b.ZERO&&a<=b.NINE||a>=b.NUM_ZERO&&a<=b.NUM_MULTIPLY||a>=b.A&&a<=b.Z||d.webkit&&0==a)return!0;switch(a){case b.SPACE:case b.QUESTION_MARK:case b.NUM_PLUS:case b.NUM_MINUS:case b.NUM_PERIOD:case b.NUM_DIVISION:case b.SEMICOLON:case b.DASH:case b.EQUALS:case b.COMMA:case b.PERIOD:case b.SLASH:case b.APOSTROPHE:case b.SINGLE_QUOTE:case b.OPEN_SQUARE_BRACKET:case b.BACKSLASH:case b.CLOSE_SQUARE_BRACKET:return!0;default:return!1}}};return b});
KISSY.add("event/dom/base/mouseenter",function(h,d,b,a){h.each([{name:"mouseenter",fix:"mouseover"},{name:"mouseleave",fix:"mouseout"}],function(d){a[d.name]={onFix:d.fix,delegateFix:d.fix,handle:function(a,d,i){var h=a.currentTarget,f=a.relatedTarget;if(!f||f!==h&&!b.contains(h,f))return[d.simpleNotify(a,i)]}}});return d},{requires:["./api","dom","./special"]});
KISSY.add("event/dom/base/mousewheel",function(h,d){var b=h.UA.gecko?"DOMMouseScroll":"mousewheel";d.mousewheel={onFix:b,delegateFix:b}},{requires:["./special"]});
KISSY.add("event/dom/base/object",function(h,d,b){function a(c){this.scale=this.rotation=this.targetTouches=this.touches=this.changedTouches=this.which=this.wheelDelta=this.view=this.toElement=this.srcElement=this.shiftKey=this.screenY=this.screenX=this.relatedTarget=this.relatedNode=this.prevValue=this.pageY=this.pageX=this.offsetY=this.offsetX=this.newValue=this.metaKey=this.keyCode=this.handler=this.fromElement=this.eventPhase=this.detail=this.data=this.ctrlKey=this.clientY=this.clientX=this.charCode=
this.cancelable=this.button=this.bubbles=this.attrName=this.attrChange=this.altKey=b;a.superclass.constructor.call(this);this.originalEvent=c;this.isDefaultPrevented=c.defaultPrevented||c.returnValue===n||c.getPreventDefault&&c.getPreventDefault()?function(){return l}:function(){return n};i(this);k(this)}function i(c){for(var a=c.originalEvent,g=f.length,d,e=a.currentTarget,e=9===e.nodeType?e:e.ownerDocument||m;g;)d=f[--g],c[d]=a[d];c.target||(c.target=c.srcElement||e);3===c.target.nodeType&&(c.target=
c.target.parentNode);!c.relatedTarget&&c.fromElement&&(c.relatedTarget=c.fromElement===c.target?c.toElement:c.fromElement);c.pageX===b&&c.clientX!==b&&(a=e.documentElement,g=e.body,c.pageX=c.clientX+(a&&a.scrollLeft||g&&g.scrollLeft||0)-(a&&a.clientLeft||g&&g.clientLeft||0),c.pageY=c.clientY+(a&&a.scrollTop||g&&g.scrollTop||0)-(a&&a.clientTop||g&&g.clientTop||0));c.which===b&&(c.which=c.charCode===b?c.keyCode:c.charCode);c.metaKey===b&&(c.metaKey=c.ctrlKey);!c.which&&c.button!==b&&(c.which=c.button&
1?1:c.button&2?3:c.button&4?2:0)}function k(c){var f,a,d,e=c.detail;c.wheelDelta&&(d=c.wheelDelta/120);c.detail&&(d=-(0==e%3?e/3:e));c.axis!==b&&(c.axis===c.HORIZONTAL_AXIS?(a=0,f=-1*d):c.axis===c.VERTICAL_AXIS&&(f=0,a=d));c.wheelDeltaY!==b&&(a=c.wheelDeltaY/120);c.wheelDeltaX!==b&&(f=-1*c.wheelDeltaX/120);!f&&!a&&(a=d);(f!==b||a!==b||d!==b)&&h.mix(c,{deltaY:a,delta:d,deltaX:f})}var m=h.Env.host.document,l=!0,n=!1,f="type,altKey,attrChange,attrName,bubbles,button,cancelable,charCode,clientX,clientY,ctrlKey,currentTarget,data,detail,eventPhase,fromElement,handler,keyCode,metaKey,newValue,offsetX,offsetY,pageX,pageY,prevValue,relatedNode,relatedTarget,screenX,screenY,shiftKey,srcElement,target,toElement,view,wheelDelta,which,axis,changedTouches,touches,targetTouches,rotation,scale".split(",");
h.extend(a,d._Object,{constructor:a,preventDefault:function(){var b=this.originalEvent;b.preventDefault?b.preventDefault():b.returnValue=n;a.superclass.preventDefault.call(this)},stopPropagation:function(){var b=this.originalEvent;b.stopPropagation?b.stopPropagation():b.cancelBubble=l;a.superclass.stopPropagation.call(this)}});return d.DOMEventObject=a},{requires:["event/base"]});
KISSY.add("event/dom/base/observable",function(h,d,b,a,i,k,m){function l(b){h.mix(this,b);this.reset()}var n=m._Utils;h.extend(l,m._ObservableEvent,{setup:function(){var f=this.type,c=b[f]||{},d=this.currentTarget,g=a.data(d).handle;(!c.setup||!1===c.setup.call(d,f))&&a.simpleAdd(d,f,g)},constructor:l,reset:function(){l.superclass.reset.call(this);this.lastCount=this.delegateCount=0},notify:function(b){var c=b.target,a=this.currentTarget,g=this.observers,j=[],e,i,p=this.delegateCount||0,h,k;if(p&&
!c.disabled)for(;c!=a;){h=[];for(i=0;i<p;i++)k=g[i],d.test(c,k.selector)&&h.push(k);h.length&&j.push({currentTarget:c,currentTargetObservers:h});c=c.parentNode||a}j.push({currentTarget:a,currentTargetObservers:g.slice(p)});i=0;for(c=j.length;!b.isPropagationStopped()&&i<c;++i){a=j[i];h=a.currentTargetObservers;a=a.currentTarget;b.currentTarget=a;for(a=0;!b.isImmediatePropagationStopped()&&a<h.length;a++)g=h[a],g=g.notify(b,this),!1!==e&&(e=g)}return e},fire:function(a,c){var a=a||{},i=this.type,g=
b[i];g&&g.onFix&&(i=g.onFix);var j,e,g=this.currentTarget,m=!0;a.type=i;a instanceof k||(e=a,a=new k({currentTarget:g,target:g}),h.mix(a,e));e=g;j=d.getWindow(e.ownerDocument||e);var p=j.document,s=[],n=0,r="on"+i;do s.push(e),e=e.parentNode||e.ownerDocument||e===p&&j;while(e);e=s[n];do{a.currentTarget=e;if(j=l.getCustomEvent(e,i))j=j.notify(a),!1!==m&&(m=j);e[r]&&!1===e[r].call(e)&&a.preventDefault();e=s[++n]}while(!c&&e&&!a.isPropagationStopped());if(!c&&!a.isDefaultPrevented()){var o;try{if(r&&
g[i]&&("focus"!==i&&"blur"!==i||0!==g.offsetWidth)&&!h.isWindow(g))(o=g[r])&&(g[r]=null),l.triggeredEvent=i,g[i]()}catch(t){}o&&(g[r]=o);l.triggeredEvent=""}return m},on:function(a){var c=this.observers,d=b[this.type]||{},a=a instanceof i?a:new i(a);-1==this.findObserver(a)&&(a.selector?(c.splice(this.delegateCount,0,a),this.delegateCount++):a.last?(c.push(a),this.lastCount++):c.splice(c.length-this.lastCount,0,a),d.add&&d.add.call(this.currentTarget,a))},detach:function(a){var c,d=b[this.type]||
{},g="selector"in a,i=a.selector,e=a.context,h=a.fn,p=this.currentTarget,k=this.observers,a=a.groups;if(k.length){a&&(c=n.getGroupsRe(a));var l,m,o,t,v=k.length;if(h||g||c){e=e||p;l=a=0;for(m=[];a<v;++a)o=k[a],t=o.context||p,e!=t||h&&h!=o.fn||g&&(i&&i!=o.selector||!i&&!o.selector)||c&&!o.groups.match(c)?m[l++]=o:(o.selector&&this.delegateCount&&this.delegateCount--,o.last&&this.lastCount&&this.lastCount--,d.remove&&d.remove.call(p,o));this.observers=m}else this.reset();this.checkMemory()}},checkMemory:function(){var d=
this.type,c,i,g=b[d]||{},k=this.currentTarget,e=a.data(k);if(e&&(c=e.events,this.hasObserver()||(i=e.handle,(!g.tearDown||!1===g.tearDown.call(k,d))&&a.simpleRemove(k,d,i),delete c[d]),h.isEmptyObject(c)))e.handle=null,a.removeData(k)}});l.triggeredEvent="";l.getCustomEvent=function(b,c){var d=a.data(b),i;d&&(i=d.events);if(i)return i[c]};l.getCustomEvents=function(b,c){var d=a.data(b);!d&&c&&a.data(b,d={});return d};return l},{requires:"dom,./special,./utils,./observer,./object,event/base".split(",")});
KISSY.add("event/dom/base/observer",function(h,d,b){function a(b){a.superclass.constructor.apply(this,arguments)}h.extend(a,b._Observer,{keys:"fn,selector,data,context,originalType,groups,last".split(","),notifyInternal:function(a,b){var h,l,n=a.type;this.originalType&&(a.type=this.originalType);(h=d[a.type])&&h.handle?(h=h.handle(a,this,b))&&0<h.length&&(l=h[0]):l=this.simpleNotify(a,b);a.type=n;return l}});return a},{requires:["./special","event/base"]});KISSY.add("event/dom/base/special",function(){return{}});
KISSY.add("event/dom/base/utils",function(h,d){var b=h.Env.host.document;return{simpleAdd:b&&b.addEventListener?function(a,b,d,h){a.addEventListener&&a.addEventListener(b,d,!!h)}:function(a,b,d){a.attachEvent&&a.attachEvent("on"+b,d)},simpleRemove:b&&b.removeEventListener?function(a,b,d,h){a.removeEventListener&&a.removeEventListener(b,d,!!h)}:function(a,b,d){a.detachEvent&&a.detachEvent("on"+b,d)},data:function(b,h){return d.data(b,"ksEventTargetId_1.30",h)},removeData:function(b){return d.removeData(b,
"ksEventTargetId_1.30")}}},{requires:["dom"]});
KISSY.add("event/dom/base/valuechange",function(h,d,b,a){function i(a){if(b.hasData(a,e)){var c=b.data(a,e);clearTimeout(c);b.removeData(a,e)}}function k(b){i(b.target)}function m(a){var c=a.value,e=b.data(a,j);c!==e&&(d.fireHandler(a,q,{prevVal:e,newVal:c}),b.data(a,j,c))}function l(a){b.hasData(a,e)||b.data(a,e,setTimeout(function(){m(a);b.data(a,e,setTimeout(arguments.callee,u))},u))}function n(a){var c=a.target;"focus"==a.type&&b.data(c,j,c.value);l(c)}function f(a){m(a.target)}function c(a){b.removeData(a,
j);i(a);d.remove(a,"blur",k);d.remove(a,"webkitspeechchange",f);d.remove(a,"mousedown keyup keydown focus",n)}var q="valuechange",g=b.nodeName,j="event/valuechange/history",e="event/valuechange/poll",u=50;a[q]={setup:function(){var a=g(this);if("input"==a||"textarea"==a)c(this),d.on(this,"blur",k),d.on(this,"webkitspeechchange",f),d.on(this,"mousedown keyup keydown focus",n)},tearDown:function(){c(this)}};return d},{requires:["./api","dom","./special"]});
