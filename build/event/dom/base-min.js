/*
Copyright 2013, KISSY UI Library v1.40dev
MIT Licensed
build time: Mar 18 13:59
*/
KISSY.add("event/dom/base/api",function(g,f,b,a,i,k,p){function m(c,b){var e=a[b]||{},d;if(!c.originalType&&(d=e.typeFix))c.originalType=b,b=d;return b}function o(c,b,e){var d,a,n,e=g.merge(e),b=m(e,b);d=k.getCustomEvents(c,1);if(!(n=d.handle))n=d.handle=function(c){var b=c.type,l=n.currentTarget;if(!(k.triggeredEvent==b||"undefined"==typeof KISSY))if(b=k.getCustomEvent(l,b))return c.currentTarget=l,c=new p(c),b.notify(c)},n.currentTarget=c;if(!(a=d.events))a=d.events={};d=a[b];d||(d=a[b]=new k({type:b,
currentTarget:c}),d.setup());d.on(e);c=null}function e(c,b,e){var e=g.merge(e),b=m(e,b),c=k.getCustomEvents(c),d=(c||{}).events;if(c&&d)if(b)(b=d[b])&&b.detach(e);else for(b in d)d[b].detach(e)}var c=f._Utils;g.mix(f,{add:function(e,a,h,d){e=b.query(e);c.batchForType(function(b,e,l,d){for(var l=c.normalizeParam(e,l,d),a,e=l.type,d=b.length-1;0<=d;d--)a=b[d],o(a,e,l)},1,e,a,h,d);return e},remove:function(l,a,h,d){l=b.query(l);c.batchForType(function(b,l,d,a){for(var d=c.normalizeParam(l,d,a),h,j,l=
d.type,a=b.length-1;0<=a;a--)if(h=b[a],e(h,l,d),d.deep&&h.getElementsByTagName){j=h.getElementsByTagName("*");for(h=j.length-1;0<=h;h--)e(j[h],l,d)}},1,l,a,h,d);return l},delegate:function(c,b,e,d,a){return f.add(c,b,{fn:d,context:a,selector:e})},undelegate:function(c,b,e,d,a){return f.remove(c,b,{fn:d,context:a,selector:e})},fire:function(e,j,h,d){var f=void 0,h=h||{};h.synthetic=1;c.splitAndRun(j,function(n){var j,g,i;c.fillGroupsForEvent(n,h);n=h.type;if((g=a[n])&&g.typeFix)n=g.typeFix;e=b.query(e);
for(g=e.length-1;0<=g;g--)j=e[g],i=k.getCustomEvent(j,n),!d&&!i&&(i=new k({type:n,currentTarget:j})),i&&(j=i.fire(h,d),!1!==f&&(f=j))});return f},fireHandler:function(c,b,e){return f.fire(c,b,e,1)},_clone:function(c,b){var e;(e=k.getCustomEvents(c))&&g.each(e.events,function(c,e){g.each(c.observers,function(c){o(b,e,c)})})},_ObservableDOMEvent:k});f.on=f.add;f.detach=f.remove;return f},{requires:"event/base,dom,./special,./utils,./observable,./object".split(",")});
KISSY.add("event/dom/base",function(g,f,b,a,i,k){g.mix(f,{KeyCodes:b,_DOMUtils:a,Gesture:i,_Special:k});return f},{requires:"event/base,./base/key-codes,./base/utils,./base/gesture,./base/special,./base/api,./base/mouseenter,./base/mousewheel,./base/valuechange".split(",")});KISSY.add("event/dom/base/gesture",function(){return{start:"mousedown",move:"mousemove",end:"mouseup",tap:"click",doubleTap:"dblclick"}});
KISSY.add("event/dom/base/key-codes",function(g){var f=g.UA,b={MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,
Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,
WIN_KEY:224,MAC_FF_META:224,WIN_IME:229,isTextModifyingKeyEvent:function(a){if(a.altKey&&!a.ctrlKey||a.metaKey||a.keyCode>=b.F1&&a.keyCode<=b.F12)return!1;switch(a.keyCode){case b.ALT:case b.CAPS_LOCK:case b.CONTEXT_MENU:case b.CTRL:case b.DOWN:case b.END:case b.ESC:case b.HOME:case b.INSERT:case b.LEFT:case b.MAC_FF_META:case b.META:case b.NUMLOCK:case b.NUM_CENTER:case b.PAGE_DOWN:case b.PAGE_UP:case b.PAUSE:case b.PRINT_SCREEN:case b.RIGHT:case b.SHIFT:case b.UP:case b.WIN_KEY:case b.WIN_KEY_RIGHT:return!1;
default:return!0}},isCharacterKey:function(a){if(a>=b.ZERO&&a<=b.NINE||a>=b.NUM_ZERO&&a<=b.NUM_MULTIPLY||a>=b.A&&a<=b.Z||f.webkit&&0==a)return!0;switch(a){case b.SPACE:case b.QUESTION_MARK:case b.NUM_PLUS:case b.NUM_MINUS:case b.NUM_PERIOD:case b.NUM_DIVISION:case b.SEMICOLON:case b.DASH:case b.EQUALS:case b.COMMA:case b.PERIOD:case b.SLASH:case b.APOSTROPHE:case b.SINGLE_QUOTE:case b.OPEN_SQUARE_BRACKET:case b.BACKSLASH:case b.CLOSE_SQUARE_BRACKET:return!0;default:return!1}}};return b});
KISSY.add("event/dom/base/mouseenter",function(g,f,b,a){g.each([{name:"mouseenter",fix:"mouseover"},{name:"mouseleave",fix:"mouseout"}],function(f){a[f.name]={typeFix:f.fix,handle:function(a,f,g){var i=a.currentTarget,e=a.relatedTarget;if(!e||e!==i&&!b.contains(i,e))return[f.simpleNotify(a,g)]}}});return f},{requires:["./api","dom","./special"]});KISSY.add("event/dom/base/mousewheel",function(g,f){f.mousewheel={typeFix:g.UA.gecko?"DOMMouseScroll":"mousewheel"}},{requires:["./special"]});
KISSY.add("event/dom/base/object",function(g,f,b){function a(c){this.currentTarget=this.target=this.scale=this.rotation=this.targetTouches=this.touches=this.changedTouches=this.which=this.wheelDelta=this.view=this.toElement=this.srcElement=this.shiftKey=this.screenY=this.screenX=this.relatedTarget=this.relatedNode=this.prevValue=this.pageY=this.pageX=this.offsetY=this.offsetX=this.newValue=this.metaKey=this.keyCode=this.handler=this.fromElement=this.eventPhase=this.detail=this.data=this.ctrlKey=this.clientY=
this.clientX=this.charCode=this.cancelable=this.button=this.bubbles=this.attrName=this.attrChange=this.altKey=b;a.superclass.constructor.call(this);this.originalEvent=c;this.isDefaultPrevented=c.defaultPrevented||c.returnValue===o||c.getPreventDefault&&c.getPreventDefault()?function(){return m}:function(){return o};i(this);k(this)}function i(c){for(var a=c.originalEvent,j=e.length,h,d=a.currentTarget,d=9===d.nodeType?d:d.ownerDocument||p;j;)h=e[--j],c[h]=a[h];c.target||(c.target=c.srcElement||d);
3===c.target.nodeType&&(c.target=c.target.parentNode);!c.relatedTarget&&c.fromElement&&(c.relatedTarget=c.fromElement===c.target?c.toElement:c.fromElement);c.pageX===b&&c.clientX!==b&&(a=d.documentElement,j=d.body,c.pageX=c.clientX+(a&&a.scrollLeft||j&&j.scrollLeft||0)-(a&&a.clientLeft||j&&j.clientLeft||0),c.pageY=c.clientY+(a&&a.scrollTop||j&&j.scrollTop||0)-(a&&a.clientTop||j&&j.clientTop||0));c.which===b&&(c.which=c.charCode===b?c.keyCode:c.charCode);c.metaKey===b&&(c.metaKey=c.ctrlKey);!c.which&&
c.button!==b&&(c.which=c.button&1?1:c.button&2?3:c.button&4?2:0)}function k(c){var e,a,h,d=c.detail;c.wheelDelta&&(h=c.wheelDelta/120);c.detail&&(h=-(0==d%3?d/3:d));c.axis!==b&&(c.axis===c.HORIZONTAL_AXIS?(a=0,e=-1*h):c.axis===c.VERTICAL_AXIS&&(e=0,a=h));c.wheelDeltaY!==b&&(a=c.wheelDeltaY/120);c.wheelDeltaX!==b&&(e=-1*c.wheelDeltaX/120);!e&&!a&&(a=h);(e!==b||a!==b||h!==b)&&g.mix(c,{deltaY:a,delta:h,deltaX:e})}var p=g.Env.host.document,m=!0,o=!1,e="type,altKey,attrChange,attrName,bubbles,button,cancelable,charCode,clientX,clientY,ctrlKey,currentTarget,data,detail,eventPhase,fromElement,handler,keyCode,metaKey,newValue,offsetX,offsetY,pageX,pageY,prevValue,relatedNode,relatedTarget,screenX,screenY,shiftKey,srcElement,target,toElement,view,wheelDelta,which,axis,changedTouches,touches,targetTouches,rotation,scale".split(",");
g.extend(a,f._Object,{constructor:a,preventDefault:function(){var c=this.originalEvent;c.preventDefault?c.preventDefault():c.returnValue=o;a.superclass.preventDefault.call(this)},stopPropagation:function(){var c=this.originalEvent;c.stopPropagation?c.stopPropagation():c.cancelBubble=m;a.superclass.stopPropagation.call(this)}});return f.DOMEventObject=a},{requires:["event/base"]});
KISSY.add("event/dom/base/observable",function(g,f,b,a,i,k,p){function m(b){g.mix(this,b);this.reset()}var o=p._Utils;g.extend(m,p._ObservableEvent,{setup:function(){var e=this.type,c=b[e]||{},l=this.currentTarget,j=a.data(l).handle;(!c.setup||!1===c.setup.call(l,e))&&a.simpleAdd(l,e,j)},constructor:m,reset:function(){m.superclass.reset.call(this);this.lastCount=this.delegateCount=0},notify:function(b){var c=b.target,a=b.type,j=this.currentTarget,h=this.observers,d=[],g,n,i=this.delegateCount||0,
k,m;if(i&&c.nodeType)for(;c!=j;){if(!0!==c.disabled||"click"!==a){var p={},o,r,s;k=[];for(n=0;n<i;n++)m=h[n],s=m.selector,r=s+"",o=p[r],void 0===o&&(o=p[r]=f.test(c,s)),o&&k.push(m);k.length&&d.push({currentTarget:c,currentTargetObservers:k})}c=c.parentNode||j}i<h.length&&d.push({currentTarget:j,currentTargetObservers:h.slice(i)});n=0;for(c=d.length;!b.isPropagationStopped()&&n<c;++n){a=d[n];k=a.currentTargetObservers;a=a.currentTarget;b.currentTarget=a;for(a=0;!b.isImmediatePropagationStopped()&&
a<k.length;a++)j=k[a],j=j.notify(b,this),!1!==g&&(g=j)}return g},fire:function(a,c){var a=a||{},l=""+this.type,j,h;h=b[l]||{};j=!1!==h.bubbles;var d=this.currentTarget;if(!(h.fire&&!1===h.fire.call(d))){a instanceof k||(h=a,a=new k({currentTarget:d,target:d}),g.mix(a,h));var i=d,n=f.getWindow(i.ownerDocument||i),p=n.document;h=[];var o=0;do h.push(i),i=i.parentNode||i.ownerDocument||i===p&&n;while(!c&&i&&j);i=h[o];do a.currentTarget=i,(j=m.getCustomEvent(i,l))&&j.notify(a),i=h[++o];while(!c&&i&&!a.isPropagationStopped());
if(!c&&!a.isDefaultPrevented()){try{d[l]&&!g.isWindow(d)&&(m.triggeredEvent=l,d[l]())}catch(v){}m.triggeredEvent=""}}},on:function(a){var c=this.observers,f=b[this.type]||{},a=a instanceof i?a:new i(a);-1==this.findObserver(a)&&(a.selector?(c.splice(this.delegateCount,0,a),this.delegateCount++):a.last?(c.push(a),this.lastCount++):c.splice(c.length-this.lastCount,0,a),f.add&&f.add.call(this.currentTarget,a))},detach:function(a){var c,i=b[this.type]||{},f="selector"in a,h=a.selector,d=a.context,g=a.fn,
n=this.currentTarget,k=this.observers,a=a.groups;if(k.length){a&&(c=o.getGroupsRe(a));var m,p,q,u,r=k.length;if(g||f||c){d=d||n;m=a=0;for(p=[];a<r;++a)q=k[a],u=q.context||n,d!=u||g&&g!=q.fn||f&&(h&&h!=q.selector||!h&&!q.selector)||c&&!q.groups.match(c)?p[m++]=q:(q.selector&&this.delegateCount&&this.delegateCount--,q.last&&this.lastCount&&this.lastCount--,i.remove&&i.remove.call(n,q));this.observers=p}else this.reset();this.checkMemory()}},checkMemory:function(){var e=this.type,c,i,f=b[e]||{},h=this.currentTarget,
d=a.data(h);if(d&&(c=d.events,this.hasObserver()||(i=d.handle,(!f.tearDown||!1===f.tearDown.call(h,e))&&a.simpleRemove(h,e,i),delete c[e]),g.isEmptyObject(c)))d.handle=null,a.removeData(h)}});m.triggeredEvent="";m.getCustomEvent=function(b,c){var i=a.data(b),f;i&&(f=i.events);return f?f[c]:null};m.getCustomEvents=function(b,c){var i=a.data(b);!i&&c&&a.data(b,i={});return i};return m},{requires:"dom,./special,./utils,./observer,./object,event/base".split(",")});
KISSY.add("event/dom/base/observer",function(g,f,b){function a(b){a.superclass.constructor.apply(this,arguments)}g.extend(a,b._Observer,{keys:"fn,selector,data,context,originalType,groups,last".split(","),notifyInternal:function(a,b){var g,m,o=a.type,e;(e=this.originalType)?a.type=e:e=o;(g=f[e])&&g.handle?(g=g.handle(a,this,b))&&0<g.length&&(m=g[0]):m=this.simpleNotify(a,b);a.type=o;return m}});return a},{requires:["./special","event/base"]});
KISSY.add("event/dom/base/special",function(){var g=g;return{load:{bubbles:!1},click:{fire:function(){return"checkbox"===""+this.type&&this.click&&"input"==this.nodeName.toLowerCase()?(this.click(),!1):g}},focus:{bubbles:!1,fire:function(){return this.ownerDocument&&this!==this.ownerDocument.activeElement&&this.focus?(this.focus(),!1):g}},blur:{bubbles:!1,fire:function(){return this.ownerDocument&&this===this.ownerDocument.activeElement&&this.blur?(this.blur(),!1):g}}}});
KISSY.add("event/dom/base/utils",function(g,f){var b=g.Env.host.document;return{simpleAdd:b&&b.addEventListener?function(a,b,f,g){a.addEventListener&&a.addEventListener(b,f,!!g)}:function(a,b,f){a.attachEvent&&a.attachEvent("on"+b,f)},simpleRemove:b&&b.removeEventListener?function(a,b,f,g){a.removeEventListener&&a.removeEventListener(b,f,!!g)}:function(b,f,g){b.detachEvent&&b.detachEvent("on"+f,g)},data:function(b,g){return f.data(b,"ksEventTargetId_1.30",g)},removeData:function(b){return f.removeData(b,
"ksEventTargetId_1.30")}}},{requires:["dom"]});
KISSY.add("event/dom/base/valuechange",function(g,f,b,a){function i(a){if(b.hasData(a,d)){var c=b.data(a,d);clearTimeout(c);b.removeData(a,d)}}function k(b){i(b.target)}function p(a){var c=a.value,d=b.data(a,h);c!==d&&(f.fireHandler(a,l,{prevVal:d,newVal:c}),b.data(a,h,c))}function m(a){b.hasData(a,d)||b.data(a,d,setTimeout(function(){p(a);b.data(a,d,setTimeout(arguments.callee,t))},t))}function o(a){var c=a.target;"focus"==a.type&&b.data(c,h,c.value);m(c)}function e(a){p(a.target)}function c(a){b.removeData(a,
h);i(a);f.remove(a,"blur",k);f.remove(a,"webkitspeechchange",e);f.remove(a,"mousedown keyup keydown focus",o)}var l="valuechange",j=b.nodeName,h="event/valuechange/history",d="event/valuechange/poll",t=50;a[l]={setup:function(){var a=j(this);if("input"==a||"textarea"==a)c(this),f.on(this,"blur",k),f.on(this,"webkitspeechchange",e),f.on(this,"mousedown keyup keydown focus",o)},tearDown:function(){c(this)}};return f},{requires:["./api","dom","./special"]});
