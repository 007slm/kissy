/*
Copyright 2013, KISSY UI Library v1.40dev
MIT Licensed
build time: Mar 18 12:48
*/
KISSY.add("event/dom/base/api",function(h,e,a,c,j,k,l){function i(b,a){var g=c[a]||{},d;if(!b.originalType&&(d=g.typeFix))b.originalType=a,a=d;return a}function n(b,a,g){var d,c,o,g=h.merge(g),a=i(g,a);d=k.getCustomEvents(b,1);if(!(o=d.handle))o=d.handle=function(b){var a=b.type,m=o.currentTarget;if(!(k.triggeredEvent==a||"undefined"==typeof KISSY))if(a=k.getCustomEvent(m,a))return b.currentTarget=m,b=new l(b),a.notify(b)},o.currentTarget=b;if(!(c=d.events))c=d.events={};d=c[a];d||(d=c[a]=new k({type:a,
currentTarget:b}),d.setup());d.on(g);b=null}function g(b,a,g){var g=h.merge(g),a=i(g,a),b=k.getCustomEvents(b),d=(b||{}).events;if(b&&d)if(a)(a=d[a])&&a.detach(g);else for(a in d)d[a].detach(g)}var b=e._Utils;h.mix(e,{add:function(g,f,c,d){g=a.query(g);b.batchForType(function(a,g,m,d){for(var m=b.normalizeParam(g,m,d),f,g=m.type,d=a.length-1;0<=d;d--)f=a[d],n(f,g,m)},1,g,f,c,d);return g},remove:function(m,f,c,d){m=a.query(m);b.batchForType(function(a,m,d,f){for(var d=b.normalizeParam(m,d,f),c,p,m=
d.type,f=a.length-1;0<=f;f--)if(c=a[f],g(c,m,d),d.deep&&c.getElementsByTagName){p=c.getElementsByTagName("*");for(c=p.length-1;0<=c;c--)g(p[c],m,d)}},1,m,f,c,d);return m},delegate:function(b,a,g,d,c){return e.add(b,a,{fn:d,context:c,selector:g})},undelegate:function(b,a,g,d,c){return e.remove(b,a,{fn:d,context:c,selector:g})},fire:function(g,f,p,d){var e=void 0,p=p||{};p.synthetic=1;b.splitAndRun(f,function(f){var j,h,i;b.fillGroupsForEvent(f,p);f=p.type;if((h=c[f])&&h.typeFix)f=h.typeFix;g=a.query(g);
for(h=g.length-1;0<=h;h--)j=g[h],i=k.getCustomEvent(j,f),!d&&!i&&(i=new k({type:f,currentTarget:j})),i&&(j=i.fire(p,d),!1!==e&&(e=j))});return e},fireHandler:function(b,a,g){return e.fire(b,a,g,1)},_clone:function(b,a){var g;(g=k.getCustomEvents(b))&&h.each(g.events,function(b,g){h.each(b.observers,function(b){n(a,g,b)})})},_ObservableDOMEvent:k});e.on=e.add;e.detach=e.remove;return e},{requires:"event/base,dom,./special,./utils,./observable,./object".split(",")});
KISSY.add("event/dom/base",function(h,e,a,c,j,k){h.mix(e,{KeyCodes:a,_DOMUtils:c,Gesture:j,_Special:k});return e},{requires:"event/base,./base/key-codes,./base/utils,./base/gesture,./base/special,./base/api,./base/mouseenter,./base/mousewheel,./base/valuechange".split(",")});KISSY.add("event/dom/base/gesture",function(){return{start:"mousedown",move:"mousemove",end:"mouseup",tap:"click",doubleTap:"dblclick"}});
KISSY.add("event/dom/base/key-codes",function(h){var e=h.UA,a={MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,
Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,
WIN_KEY:224,MAC_FF_META:224,WIN_IME:229,isTextModifyingKeyEvent:function(c){if(c.altKey&&!c.ctrlKey||c.metaKey||c.keyCode>=a.F1&&c.keyCode<=a.F12)return!1;switch(c.keyCode){case a.ALT:case a.CAPS_LOCK:case a.CONTEXT_MENU:case a.CTRL:case a.DOWN:case a.END:case a.ESC:case a.HOME:case a.INSERT:case a.LEFT:case a.MAC_FF_META:case a.META:case a.NUMLOCK:case a.NUM_CENTER:case a.PAGE_DOWN:case a.PAGE_UP:case a.PAUSE:case a.PRINT_SCREEN:case a.RIGHT:case a.SHIFT:case a.UP:case a.WIN_KEY:case a.WIN_KEY_RIGHT:return!1;
default:return!0}},isCharacterKey:function(c){if(c>=a.ZERO&&c<=a.NINE||c>=a.NUM_ZERO&&c<=a.NUM_MULTIPLY||c>=a.A&&c<=a.Z||e.webkit&&0==c)return!0;switch(c){case a.SPACE:case a.QUESTION_MARK:case a.NUM_PLUS:case a.NUM_MINUS:case a.NUM_PERIOD:case a.NUM_DIVISION:case a.SEMICOLON:case a.DASH:case a.EQUALS:case a.COMMA:case a.PERIOD:case a.SLASH:case a.APOSTROPHE:case a.SINGLE_QUOTE:case a.OPEN_SQUARE_BRACKET:case a.BACKSLASH:case a.CLOSE_SQUARE_BRACKET:return!0;default:return!1}}};return a});
KISSY.add("event/dom/base/mouseenter",function(h,e,a,c){h.each([{name:"mouseenter",fix:"mouseover"},{name:"mouseleave",fix:"mouseout"}],function(e){c[e.name]={typeFix:e.fix,handle:function(c,e,h){var j=c.currentTarget,g=c.relatedTarget;if(!g||g!==j&&!a.contains(j,g))return[e.simpleNotify(c,h)]}}});return e},{requires:["./api","dom","./special"]});KISSY.add("event/dom/base/mousewheel",function(h,e){e.mousewheel={typeFix:h.UA.gecko?"DOMMouseScroll":"mousewheel"}},{requires:["./special"]});
KISSY.add("event/dom/base/object",function(h,e,a){function c(b){this.currentTarget=this.target=this.scale=this.rotation=this.targetTouches=this.touches=this.changedTouches=this.which=this.wheelDelta=this.view=this.toElement=this.srcElement=this.shiftKey=this.screenY=this.screenX=this.relatedTarget=this.relatedNode=this.prevValue=this.pageY=this.pageX=this.offsetY=this.offsetX=this.newValue=this.metaKey=this.keyCode=this.handler=this.fromElement=this.eventPhase=this.detail=this.data=this.ctrlKey=this.clientY=
this.clientX=this.charCode=this.cancelable=this.button=this.bubbles=this.attrName=this.attrChange=this.altKey=a;c.superclass.constructor.call(this);this.originalEvent=b;this.isDefaultPrevented=b.defaultPrevented||b.returnValue===n||b.getPreventDefault&&b.getPreventDefault()?function(){return i}:function(){return n};j(this);k(this)}function j(b){for(var c=b.originalEvent,f=g.length,e,d=c.currentTarget,d=9===d.nodeType?d:d.ownerDocument||l;f;)e=g[--f],b[e]=c[e];b.target||(b.target=b.srcElement||d);
3===b.target.nodeType&&(b.target=b.target.parentNode);!b.relatedTarget&&b.fromElement&&(b.relatedTarget=b.fromElement===b.target?b.toElement:b.fromElement);b.pageX===a&&b.clientX!==a&&(c=d.documentElement,f=d.body,b.pageX=b.clientX+(c&&c.scrollLeft||f&&f.scrollLeft||0)-(c&&c.clientLeft||f&&f.clientLeft||0),b.pageY=b.clientY+(c&&c.scrollTop||f&&f.scrollTop||0)-(c&&c.clientTop||f&&f.clientTop||0));b.which===a&&(b.which=b.charCode===a?b.keyCode:b.charCode);b.metaKey===a&&(b.metaKey=b.ctrlKey);!b.which&&
b.button!==a&&(b.which=b.button&1?1:b.button&2?3:b.button&4?2:0)}function k(b){var g,c,e,d=b.detail;b.wheelDelta&&(e=b.wheelDelta/120);b.detail&&(e=-(0==d%3?d/3:d));b.axis!==a&&(b.axis===b.HORIZONTAL_AXIS?(c=0,g=-1*e):b.axis===b.VERTICAL_AXIS&&(g=0,c=e));b.wheelDeltaY!==a&&(c=b.wheelDeltaY/120);b.wheelDeltaX!==a&&(g=-1*b.wheelDeltaX/120);!g&&!c&&(c=e);(g!==a||c!==a||e!==a)&&h.mix(b,{deltaY:c,delta:e,deltaX:g})}var l=h.Env.host.document,i=!0,n=!1,g="type,altKey,attrChange,attrName,bubbles,button,cancelable,charCode,clientX,clientY,ctrlKey,currentTarget,data,detail,eventPhase,fromElement,handler,keyCode,metaKey,newValue,offsetX,offsetY,pageX,pageY,prevValue,relatedNode,relatedTarget,screenX,screenY,shiftKey,srcElement,target,toElement,view,wheelDelta,which,axis,changedTouches,touches,targetTouches,rotation,scale".split(",");
h.extend(c,e._Object,{constructor:c,preventDefault:function(){var b=this.originalEvent;b.preventDefault?b.preventDefault():b.returnValue=n;c.superclass.preventDefault.call(this)},stopPropagation:function(){var b=this.originalEvent;b.stopPropagation?b.stopPropagation():b.cancelBubble=i;c.superclass.stopPropagation.call(this)}});return e.DOMEventObject=c},{requires:["event/base"]});
KISSY.add("event/dom/base/observable",function(h,e,a,c,j,k,l){function i(a){h.mix(this,a);this.reset()}var n=l._Utils;h.extend(i,l._ObservableEvent,{setup:function(){var g=this.type,b=a[g]||{},e=this.currentTarget,f=c.data(e).handle;(!b.setup||!1===b.setup.call(e,g))&&c.simpleAdd(e,g,f)},constructor:i,reset:function(){i.superclass.reset.call(this);this.lastCount=this.delegateCount=0},notify:function(a){var b=a.target,c=a.type,f=this.currentTarget,h=this.observers,d=[],j,o,k=this.delegateCount||0,
i,l;if(k&&b.nodeType)for(;b!=f;){if(!0!==b.disabled||"click"!==c){var n={},r,s,t;i=[];for(o=0;o<k;o++)l=h[o],t=l.selector,s=t+"",r=n[s],void 0===r&&(r=n[s]=e.test(b,t)),r&&i.push(l);i.length&&d.push({currentTarget:b,currentTargetObservers:i})}b=b.parentNode||f}k<h.length&&d.push({currentTarget:f,currentTargetObservers:h.slice(k)});o=0;for(b=d.length;!a.isPropagationStopped()&&o<b;++o){c=d[o];i=c.currentTargetObservers;c=c.currentTarget;a.currentTarget=c;for(c=0;!a.isImmediatePropagationStopped()&&
c<i.length;c++)f=i[c],f=f.notify(a,this),!1!==j&&(j=f)}return j},fire:function(a,b){var a=a||{},c=""+this.type,f,j,d=this.currentTarget;if("checkbox"==""+d.type&&d.click&&"input"==e.nodeName(d))d.click();else{a instanceof k||(j=a,a=new k({currentTarget:d,target:d}),h.mix(a,j));f=d;var l=e.getWindow(f.ownerDocument||f),o=l.document;j=[];var n=0;do j.push(f),f=f.parentNode||f.ownerDocument||f===o&&l;while(!b&&f);f=j[n];do a.currentTarget=f,(f=i.getCustomEvent(f,c))&&f.notify(a),f=j[++n];while(!b&&f&&
!a.isPropagationStopped());if(!b&&!a.isDefaultPrevented()){try{if(d[c]&&("focus"!==c&&"blur"!==c||0!==d.offsetWidth)&&!h.isWindow(d))i.triggeredEvent=c,d[c]()}catch(v){}i.triggeredEvent=""}}},on:function(c){var b=this.observers,e=a[this.type]||{},c=c instanceof j?c:new j(c);-1==this.findObserver(c)&&(c.selector?(b.splice(this.delegateCount,0,c),this.delegateCount++):c.last?(b.push(c),this.lastCount++):b.splice(b.length-this.lastCount,0,c),e.add&&e.add.call(this.currentTarget,c))},detach:function(c){var b,
e=a[this.type]||{},f="selector"in c,j=c.selector,d=c.context,h=c.fn,o=this.currentTarget,i=this.observers,c=c.groups;if(i.length){c&&(b=n.getGroupsRe(c));var k,l,q,r,s=i.length;if(h||f||b){d=d||o;k=c=0;for(l=[];c<s;++c)q=i[c],r=q.context||o,d!=r||h&&h!=q.fn||f&&(j&&j!=q.selector||!j&&!q.selector)||b&&!q.groups.match(b)?l[k++]=q:(q.selector&&this.delegateCount&&this.delegateCount--,q.last&&this.lastCount&&this.lastCount--,e.remove&&e.remove.call(o,q));this.observers=l}else this.reset();this.checkMemory()}},
checkMemory:function(){var g=this.type,b,e,f=a[g]||{},j=this.currentTarget,d=c.data(j);if(d&&(b=d.events,this.hasObserver()||(e=d.handle,(!f.tearDown||!1===f.tearDown.call(j,g))&&c.simpleRemove(j,g,e),delete b[g]),h.isEmptyObject(b)))d.handle=null,c.removeData(j)}});i.triggeredEvent="";i.getCustomEvent=function(a,b){var e=c.data(a),f;e&&(f=e.events);return f?f[b]:null};i.getCustomEvents=function(a,b){var e=c.data(a);!e&&b&&c.data(a,e={});return e};return i},{requires:"dom,./special,./utils,./observer,./object,event/base".split(",")});
KISSY.add("event/dom/base/observer",function(h,e,a){function c(a){c.superclass.constructor.apply(this,arguments)}h.extend(c,a._Observer,{keys:"fn,selector,data,context,originalType,groups,last".split(","),notifyInternal:function(a,c){var h,i,n=a.type,g;(g=this.originalType)?a.type=g:g=n;(h=e[g])&&h.handle?(h=h.handle(a,this,c))&&0<h.length&&(i=h[0]):i=this.simpleNotify(a,c);a.type=n;return i}});return c},{requires:["./special","event/base"]});KISSY.add("event/dom/base/special",function(){return{}});
KISSY.add("event/dom/base/utils",function(h,e){var a=h.Env.host.document;return{simpleAdd:a&&a.addEventListener?function(a,e,h,l){a.addEventListener&&a.addEventListener(e,h,!!l)}:function(a,e,h){a.attachEvent&&a.attachEvent("on"+e,h)},simpleRemove:a&&a.removeEventListener?function(a,e,h,l){a.removeEventListener&&a.removeEventListener(e,h,!!l)}:function(a,e,h){a.detachEvent&&a.detachEvent("on"+e,h)},data:function(a,h){return e.data(a,"ksEventTargetId_1.30",h)},removeData:function(a){return e.removeData(a,
"ksEventTargetId_1.30")}}},{requires:["dom"]});
KISSY.add("event/dom/base/valuechange",function(h,e,a,c){function j(b){if(a.hasData(b,d)){var c=a.data(b,d);clearTimeout(c);a.removeData(b,d)}}function k(a){j(a.target)}function l(b){var c=b.value,d=a.data(b,p);c!==d&&(e.fireHandler(b,m,{prevVal:d,newVal:c}),a.data(b,p,c))}function i(b){a.hasData(b,d)||a.data(b,d,setTimeout(function(){l(b);a.data(b,d,setTimeout(arguments.callee,u))},u))}function n(b){var c=b.target;"focus"==b.type&&a.data(c,p,c.value);i(c)}function g(a){l(a.target)}function b(b){a.removeData(b,
p);j(b);e.remove(b,"blur",k);e.remove(b,"webkitspeechchange",g);e.remove(b,"mousedown keyup keydown focus",n)}var m="valuechange",f=a.nodeName,p="event/valuechange/history",d="event/valuechange/poll",u=50;c[m]={setup:function(){var a=f(this);if("input"==a||"textarea"==a)b(this),e.on(this,"blur",k),e.on(this,"webkitspeechchange",g),e.on(this,"mousedown keyup keydown focus",n)},tearDown:function(){b(this)}};return e},{requires:["./api","dom","./special"]});
