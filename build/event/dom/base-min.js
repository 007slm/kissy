/*
Copyright 2013, KISSY UI Library v1.40dev
MIT Licensed
build time: Mar 18 18:41
*/
KISSY.add("event/dom/base/api",function(g,d,a,b,i,l,m){function k(c,a){var e=b[a]||{},f;if(!c.originalType&&(f=e.typeFix))c.originalType=a,a=f;return a}function o(c,a,e){var f,b,j,e=g.merge(e),a=k(e,a);f=l.getCustomEvents(c,1);if(!(j=f.handle))j=f.handle=function(c){var a=c.type,p=j.currentTarget;if(!(l.triggeredEvent==a||"undefined"==typeof KISSY))if(a=l.getCustomEvent(p,a))return c.currentTarget=p,c=new m(c),a.notify(c)},j.currentTarget=c;if(!(b=f.events))b=f.events={};f=b[a];f||(f=b[a]=new l({type:a,
currentTarget:c}),f.setup());f.on(e);c=null}function e(c,a,e){var e=g.merge(e),a=k(e,a),c=l.getCustomEvents(c),b=(c||{}).events;if(c&&b)if(a)(a=b[a])&&a.detach(e);else for(a in b)b[a].detach(e)}var c=d._Utils;g.mix(d,{add:function(e,b,n,f){e=a.query(e);c.batchForType(function(a,e,b,p){for(var b=c.normalizeParam(e,b,p),f,e=b.type,p=a.length-1;0<=p;p--)f=a[p],o(f,e,b)},1,e,b,n,f);return e},remove:function(b,h,n,f){b=a.query(b);c.batchForType(function(a,b,p,f){for(var p=c.normalizeParam(b,p,f),h,n,b=
p.type,f=a.length-1;0<=f;f--)if(h=a[f],e(h,b,p),p.deep&&h.getElementsByTagName){n=h.getElementsByTagName("*");for(h=n.length-1;0<=h;h--)e(n[h],b,p)}},1,b,h,n,f);return b},delegate:function(a,c,e,b,i){return d.add(a,c,{fn:b,context:i,selector:e})},undelegate:function(a,c,e,b,i){return d.remove(a,c,{fn:b,context:i,selector:e})},fire:function(e,h,n,f){var d=void 0,n=n||{};n.synthetic=1;c.splitAndRun(h,function(j){var h,i,g;c.fillGroupsForEvent(j,n);j=n.type;if((i=b[j])&&i.typeFix)j=i.typeFix;e=a.query(e);
for(i=e.length-1;0<=i;i--)h=e[i],g=l.getCustomEvent(h,j),!f&&!g&&(g=new l({type:j,currentTarget:h})),g&&(h=g.fire(n,f),!1!==d&&(d=h))});return d},fireHandler:function(a,c,e){return d.fire(a,c,e,1)},_clone:function(a,c){var e;(e=l.getCustomEvents(a))&&g.each(e.events,function(a,e){g.each(a.observers,function(a){o(c,e,a)})})},_ObservableDOMEvent:l});d.on=d.add;d.detach=d.remove;return d},{requires:"event/base,dom,./special,./utils,./observable,./object".split(",")});
KISSY.add("event/dom/base",function(g,d,a,b,i,l){g.mix(d,{KeyCodes:a,_DOMUtils:b,Gesture:i,_Special:l});return d},{requires:"event/base,./base/key-codes,./base/utils,./base/gesture,./base/special,./base/api,./base/mouseenter,./base/mousewheel,./base/valuechange".split(",")});KISSY.add("event/dom/base/gesture",function(){return{start:"mousedown",move:"mousemove",end:"mouseup",tap:"click",doubleTap:"dblclick"}});
KISSY.add("event/dom/base/key-codes",function(g){var d=g.UA,a={MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,
Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,
WIN_KEY:224,MAC_FF_META:224,WIN_IME:229,isTextModifyingKeyEvent:function(b){if(b.altKey&&!b.ctrlKey||b.metaKey||b.keyCode>=a.F1&&b.keyCode<=a.F12)return!1;switch(b.keyCode){case a.ALT:case a.CAPS_LOCK:case a.CONTEXT_MENU:case a.CTRL:case a.DOWN:case a.END:case a.ESC:case a.HOME:case a.INSERT:case a.LEFT:case a.MAC_FF_META:case a.META:case a.NUMLOCK:case a.NUM_CENTER:case a.PAGE_DOWN:case a.PAGE_UP:case a.PAUSE:case a.PRINT_SCREEN:case a.RIGHT:case a.SHIFT:case a.UP:case a.WIN_KEY:case a.WIN_KEY_RIGHT:return!1;
default:return!0}},isCharacterKey:function(b){if(b>=a.ZERO&&b<=a.NINE||b>=a.NUM_ZERO&&b<=a.NUM_MULTIPLY||b>=a.A&&b<=a.Z||d.webkit&&0==b)return!0;switch(b){case a.SPACE:case a.QUESTION_MARK:case a.NUM_PLUS:case a.NUM_MINUS:case a.NUM_PERIOD:case a.NUM_DIVISION:case a.SEMICOLON:case a.DASH:case a.EQUALS:case a.COMMA:case a.PERIOD:case a.SLASH:case a.APOSTROPHE:case a.SINGLE_QUOTE:case a.OPEN_SQUARE_BRACKET:case a.BACKSLASH:case a.CLOSE_SQUARE_BRACKET:return!0;default:return!1}}};return a});
KISSY.add("event/dom/base/mouseenter",function(g,d,a,b){g.each([{name:"mouseenter",fix:"mouseover"},{name:"mouseleave",fix:"mouseout"}],function(d){b[d.name]={typeFix:d.fix,handle:function(b,d,i){var g=b.currentTarget,e=b.relatedTarget;if(!e||e!==g&&!a.contains(g,e))return[d.simpleNotify(b,i)]}}});return d},{requires:["./api","dom","./special"]});KISSY.add("event/dom/base/mousewheel",function(g,d){d.mousewheel={typeFix:g.UA.gecko?"DOMMouseScroll":"mousewheel"}},{requires:["./special"]});
KISSY.add("event/dom/base/object",function(g,d,a){function b(c){this.currentTarget=this.target=this.scale=this.rotation=this.targetTouches=this.touches=this.changedTouches=this.which=this.wheelDelta=this.view=this.toElement=this.srcElement=this.shiftKey=this.screenY=this.screenX=this.relatedTarget=this.relatedNode=this.prevValue=this.pageY=this.pageX=this.offsetY=this.offsetX=this.newValue=this.metaKey=this.keyCode=this.handler=this.fromElement=this.eventPhase=this.detail=this.data=this.ctrlKey=this.clientY=
this.clientX=this.charCode=this.cancelable=this.button=this.bubbles=this.attrName=this.attrChange=this.altKey=a;b.superclass.constructor.call(this);this.originalEvent=c;this.isDefaultPrevented=c.defaultPrevented||c.returnValue===o||c.getPreventDefault&&c.getPreventDefault()?function(){return k}:function(){return o};i(this);l(this)}function i(c){for(var b=c.originalEvent,h=e.length,d,f=b.currentTarget,f=9===f.nodeType?f:f.ownerDocument||m;h;)d=e[--h],c[d]=b[d];c.target||(c.target=c.srcElement||f);
3===c.target.nodeType&&(c.target=c.target.parentNode);!c.relatedTarget&&c.fromElement&&(c.relatedTarget=c.fromElement===c.target?c.toElement:c.fromElement);c.pageX===a&&c.clientX!==a&&(b=f.documentElement,h=f.body,c.pageX=c.clientX+(b&&b.scrollLeft||h&&h.scrollLeft||0)-(b&&b.clientLeft||h&&h.clientLeft||0),c.pageY=c.clientY+(b&&b.scrollTop||h&&h.scrollTop||0)-(b&&b.clientTop||h&&h.clientTop||0));c.which===a&&(c.which=c.charCode===a?c.keyCode:c.charCode);c.metaKey===a&&(c.metaKey=c.ctrlKey);!c.which&&
c.button!==a&&(c.which=c.button&1?1:c.button&2?3:c.button&4?2:0)}function l(c){var b,e,d,f=c.detail;c.wheelDelta&&(d=c.wheelDelta/120);c.detail&&(d=-(0==f%3?f/3:f));c.axis!==a&&(c.axis===c.HORIZONTAL_AXIS?(e=0,b=-1*d):c.axis===c.VERTICAL_AXIS&&(b=0,e=d));c.wheelDeltaY!==a&&(e=c.wheelDeltaY/120);c.wheelDeltaX!==a&&(b=-1*c.wheelDeltaX/120);!b&&!e&&(e=d);(b!==a||e!==a||d!==a)&&g.mix(c,{deltaY:e,delta:d,deltaX:b})}var m=g.Env.host.document,k=!0,o=!1,e="type,altKey,attrChange,attrName,bubbles,button,cancelable,charCode,clientX,clientY,ctrlKey,currentTarget,data,detail,eventPhase,fromElement,handler,keyCode,metaKey,newValue,offsetX,offsetY,pageX,pageY,prevValue,relatedNode,relatedTarget,screenX,screenY,shiftKey,srcElement,target,toElement,view,wheelDelta,which,axis,changedTouches,touches,targetTouches,rotation,scale".split(",");
g.extend(b,d._Object,{constructor:b,preventDefault:function(){var a=this.originalEvent;a.preventDefault?a.preventDefault():a.returnValue=o;b.superclass.preventDefault.call(this)},stopPropagation:function(){var a=this.originalEvent;a.stopPropagation?a.stopPropagation():a.cancelBubble=k;b.superclass.stopPropagation.call(this)}});return d.DOMEventObject=b},{requires:["event/base"]});
KISSY.add("event/dom/base/observable",function(g,d,a,b,i,l,m){function k(a){g.mix(this,a);this.reset()}var o=m._Utils;g.extend(k,m._ObservableEvent,{setup:function(){var e=this.type,c=a[e]||{},d=this.currentTarget,h=b.data(d).handle;(!c.setup||!1===c.setup.call(d,e))&&b.simpleAdd(d,e,h)},constructor:k,reset:function(){k.superclass.reset.call(this);this.lastCount=this.delegateCount=0},notify:function(a){var c=a.target,b=a.type,h=this.currentTarget,i=this.observers,f=[],g,j,l=this.delegateCount||0,
k,m;if(l&&c.nodeType)for(;c!=h;){if(!0!==c.disabled||"click"!==b){var o={},r,s,t;k=[];for(j=0;j<l;j++)m=i[j],t=m.selector,s=t+"",r=o[s],void 0===r&&(r=o[s]=d.test(c,t)),r&&k.push(m);k.length&&f.push({currentTarget:c,currentTargetObservers:k})}c=c.parentNode||h}l<i.length&&f.push({currentTarget:h,currentTargetObservers:i.slice(l)});j=0;for(c=f.length;!a.isPropagationStopped()&&j<c;++j){b=f[j];k=b.currentTargetObservers;b=b.currentTarget;a.currentTarget=b;for(b=0;!a.isImmediatePropagationStopped()&&
b<k.length;b++)h=k[b],h=h.notify(a,this),!1!==g&&(g=h)}return g},fire:function(b,c){var b=b||{},i=""+this.type,h,n,f=a[i]||{};h=!1!==f.bubbles;var m=this.currentTarget;if(!(f.fire&&!1===f.fire.call(m,c))&&(b instanceof l||(n=b,b=new l({currentTarget:m,target:m}),g.mix(b,n)),!(f.preFire&&!1===f.preFire.call(m,b,c)))){var j=m,o=d.getWindow(j.ownerDocument||j),v=o.document;n=[];f=0;do n.push(j),j=j.parentNode||j.ownerDocument||j===v&&o;while(!c&&j&&h);j=n[f];do b.currentTarget=j,(h=k.getCustomEvent(j,
i))&&h.notify(b),j=n[++f];while(!c&&j&&!b.isPropagationStopped());if(!c&&!b.isDefaultPrevented()){try{m[i]&&!g.isWindow(m)&&(k.triggeredEvent=i,m[i]())}catch(w){}k.triggeredEvent=""}}},on:function(b){var c=this.observers,d=a[this.type]||{},b=b instanceof i?b:new i(b);-1==this.findObserver(b)&&(b.selector?(c.splice(this.delegateCount,0,b),this.delegateCount++):b.last?(c.push(b),this.lastCount++):c.splice(c.length-this.lastCount,0,b),d.add&&d.add.call(this.currentTarget,b))},detach:function(b){var c,
d=a[this.type]||{},h="selector"in b,i=b.selector,f=b.context,g=b.fn,j=this.currentTarget,l=this.observers,b=b.groups;if(l.length){b&&(c=o.getGroupsRe(b));var m,k,q,r,s=l.length;if(g||h||c){f=f||j;m=b=0;for(k=[];b<s;++b)q=l[b],r=q.context||j,f!=r||g&&g!=q.fn||h&&(i&&i!=q.selector||!i&&!q.selector)||c&&!q.groups.match(c)?k[m++]=q:(q.selector&&this.delegateCount&&this.delegateCount--,q.last&&this.lastCount&&this.lastCount--,d.remove&&d.remove.call(j,q));this.observers=k}else this.reset();this.checkMemory()}},
checkMemory:function(){var e=this.type,c,d,i=a[e]||{},l=this.currentTarget,f=b.data(l);if(f&&(c=f.events,this.hasObserver()||(d=f.handle,(!i.tearDown||!1===i.tearDown.call(l,e))&&b.simpleRemove(l,e,d),delete c[e]),g.isEmptyObject(c)))f.handle=null,b.removeData(l)}});k.triggeredEvent="";k.getCustomEvent=function(a,c){var d=b.data(a),i;d&&(i=d.events);return i?i[c]:null};k.getCustomEvents=function(a,c){var d=b.data(a);!d&&c&&b.data(a,d={});return d};return k},{requires:"dom,./special,./utils,./observer,./object,event/base".split(",")});
KISSY.add("event/dom/base/observer",function(g,d,a){function b(a){b.superclass.constructor.apply(this,arguments)}g.extend(b,a._Observer,{keys:"fn,selector,data,context,originalType,groups,last".split(","),notifyInternal:function(b,a){var g,k,o=b.type,e;(e=this.originalType)?b.type=e:e=o;(g=d[e])&&g.handle?(g=g.handle(b,this,a))&&0<g.length&&(k=g[0]):k=this.simpleNotify(b,a);b.type=o;return k}});return b},{requires:["./special","event/base"]});
KISSY.add("event/dom/base/special",function(g,d){var a=a;return{load:{bubbles:!1},click:{fire:function(b){return!b&&"checkbox"===""+this.type&&this.click&&"input"==this.nodeName.toLowerCase()?(this.click(),!1):a}},focus:{bubbles:!1,preFire:function(b,a){a||d.fire(this,"focusin")},fire:function(b){return!b&&this.ownerDocument&&this!==this.ownerDocument.activeElement&&this.focus?(this.focus(),!1):a}},blur:{bubbles:!1,preFire:function(b,a){a||d.fire(this,"focusout")},fire:function(b){return!b&&this.ownerDocument&&
this===this.ownerDocument.activeElement&&this.blur?(this.blur(),!1):a}}}},{requires:["event/base"]});
KISSY.add("event/dom/base/utils",function(g,d){var a=g.Env.host.document;return{simpleAdd:a&&a.addEventListener?function(b,a,d,g){b.addEventListener&&b.addEventListener(a,d,!!g)}:function(a,d,g){a.attachEvent&&a.attachEvent("on"+d,g)},simpleRemove:a&&a.removeEventListener?function(a,d,g,m){a.removeEventListener&&a.removeEventListener(d,g,!!m)}:function(a,d,g){a.detachEvent&&a.detachEvent("on"+d,g)},data:function(a,g){return d.data(a,"ksEventTargetId_1.30",g)},removeData:function(a){return d.removeData(a,
"ksEventTargetId_1.30")}}},{requires:["dom"]});
KISSY.add("event/dom/base/valuechange",function(g,d,a,b){function i(b){if(a.hasData(b,f)){var c=a.data(b,f);clearTimeout(c);a.removeData(b,f)}}function l(a){i(a.target)}function m(b){var c=b.value,e=a.data(b,n);c!==e&&(d.fireHandler(b,p,{prevVal:e,newVal:c}),a.data(b,n,c))}function k(b){a.hasData(b,f)||a.data(b,f,setTimeout(function(){m(b);a.data(b,f,setTimeout(arguments.callee,u))},u))}function o(b){var c=b.target;"focus"==b.type&&a.data(c,n,c.value);k(c)}function e(a){m(a.target)}function c(b){a.removeData(b,
n);i(b);d.remove(b,"blur",l);d.remove(b,"webkitspeechchange",e);d.remove(b,"mousedown keyup keydown focus",o)}var p="valuechange",h=a.nodeName,n="event/valuechange/history",f="event/valuechange/poll",u=50;b[p]={setup:function(){var a=h(this);if("input"==a||"textarea"==a)c(this),d.on(this,"blur",l),d.on(this,"webkitspeechchange",e),d.on(this,"mousedown keyup keydown focus",o)},tearDown:function(){c(this)}};return d},{requires:["./api","dom","./special"]});
