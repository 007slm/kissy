/*
Copyright 2011, KISSY UI Library v1.20dev
MIT Licensed
build time: ${build.time}
*/
KISSY.add("node/attach",function(b,f,k,i,c,l){function p(a,d,g,h){a=[this[a?x:v]()].concat(b.makeArray(d));if(d[g]===l&&(g!=1||b.isString(d[0])))return h.apply(f,a);h.apply(f,a);return this}function e(a,d){b.each(a,function(g){b.each([t,y],function(h,m){h[g]=function(j){switch(d){case w:return function(){return p.call(this,m,arguments,1,j)};case u:return function(){return p.call(this,m,arguments,0,j)};case z:return function(){var n=this[m?x:v]();return(n=j.apply(f,[n].concat(b.makeArray(arguments))))?
new (b.isArray(n)?c:i)(n):null};default:return function(){var n=this[m?x:v]();n=j.apply(f,[n].concat(b.makeArray(arguments)));return n===l?this:n}}}(f[g])})})}function q(a,d,g){a&&b.each(this,function(h){var m;if(d||b.isString(a))m=f.create(a);else{if(s(a,1)||s(a,3))m=a;if(B(a))m=a[0]}f[g](m,h)});return this}function o(a,d){if((a=f.get(a))&&a.appendChild)b.each(this,function(g){f[d](g,a)});return this}function r(a,d){a.__wrap=a.__wrap||[];a.__wrap.push(d)}var s=f._nodeTypeIs,B=f._isKSNode,A=b.require("event/target"),
t=i.prototype,y=c.prototype,v="getDOMNode",x=v+"s",w=1,u=2,z=4;b.mix(t,{one:function(a){return i.one(a,this[0])},all:function(a){return c.all(a,this[0])}});e(["data","removeData"],w);e(["hasClass","addClass","removeClass","replaceClass","toggleClass"],l);e(["attr","removeAttr"],w);e(["val","text"],u);e(["css"],w);e(["width","height"],u);e(["offset"],u);e(["scrollIntoView"],l);e(["parent","next","prev","siblings","children"],z);e(["contains"],l);e(["html","unselectable"],u);e(["remove"],l);b.each(["insertBefore",
"insertAfter"],function(a){t[a]=function(d){f[a].call(f,this[0],d);return this}});b.each([t,y],function(a,d){b.each(["append","prepend"],function(g){a[g]=function(h){return q.call(this,h,d,g)};a[g+"To"]=function(h){return o.call(this,h,g)}})});b.augment(i,A,{fire:null,on:function(a,d,g){function h(j){var n=b.makeArray(arguments);n.shift();j.target=new i(j.target);if(j.relatedTarget)j.relatedTarget=new i(j.relatedTarget);n.unshift(j);return d.apply(g||m,n)}var m=this;k.add(this[0],a,h,g);r(d,h);return this},
detach:function(a,d,g){if(b.isFunction(d)){d=d.__wrap||[];for(var h=0;h<d.length;h++)k.remove(this[0],a,d[h],g)}else k.remove(this[0],a,d,g);return this}});b.augment(c,A,{fire:null});t._supportSpecialEvent=true;b.each({on:"add",detach:"remove"},function(a,d){y[d]=function(g,h,m){for(var j=0;j<this.length;j++)this.item(j).on(g,h,m)}})},{requires:["dom","event","node/node","node/nodelist"]});
KISSY.add("node/node",function(b,f,k){function i(c,l,p){if(!(this instanceof i))return new i(c,l,p);if(!c){this.length=0;return k}if(b.isString(c)){c=f.create(c,l,p);if(c.nodeType===11)return new (b.require("node/nodelist"))(c.childNodes)}else if(c instanceof i)return c;else c=c;this[0]=c;return k}i.TYPE="-ks-Node";b.augment(i,{length:1,getDOMNode:function(){return this[0]},nodeType:i.TYPE});i.one=function(c,l){return(c=f.get(c,l))?new i(c,k,k):null};return i},{requires:["dom"]});
KISSY.add("node/nodelist",function(b,f,k,i){function c(e){if(!(this instanceof c))return new c(e);l.push.apply(this,b.makeArray(e)||[]);return i}var l=Array.prototype,p=f._isElementNode;b.mix(c.prototype,{length:0,item:function(e){var q=null,o,r;if(p(e)){o=0;for(r=this.length;o<r;o++)if(e===this[o]){e=o;break}}if(p(this[e]))q=new k(this[e]);return q},getDOMNodes:function(){return l.slice.call(this)},each:function(e,q){var o=this.length,r=0,s;for(s=new k(this[0]);r<o&&e.call(q||s,s,r,this)!==false;s=
new k(this[++r]));return this}});c.all=function(e,q){return new c(f.query(e,q,true))};return c},{requires:["dom","node/node"]});KISSY.add("node",function(b,f,k){f.List=k;return f},{requires:["node/node","node/nodelist","node/attach"]});
