/*
Copyright 2011, KISSY UI Library v1.1.7dev
MIT Licensed
build time: ${build.time}
*/
KISSY.add("uibase/align",function(f,e){function a(){}function d(c,b){var g=f.require("node/node"),l=b.charAt(0),h=b.charAt(1),j,i,k;if(c){c=g.one(c);j=c.offset();g=c[0].offsetWidth;i=c[0].offsetHeight}else{j={left:e.scrollLeft(),top:e.scrollTop()};g=e.viewportWidth();i=e.viewportHeight()}k=j.left;j=j.top;if(l==="c")j+=i/2;else if(l==="b")j+=i;if(h==="c")k+=g/2;else if(h==="r")k+=g;return{left:k,top:j}}f.mix(a,{TL:"tl",TC:"tc",TR:"tr",CL:"cl",CC:"cc",CR:"cr",BL:"bl",BC:"bc",BR:"br"});a.ATTRS={align:{}};
a.prototype={_uiSetAlign:function(c){f.isPlainObject(c)&&this.align(c.node,c.points,c.offset)},align:function(c,b,g){var l,h=this.get("el");g=g||[0,0];l=h.offset();c=d(c,b[0]);b=d(h,b[1]);b=[b.left-c.left,b.top-c.top];l=[l.left-b[0]+ +g[0],l.top-b[1]+ +g[1]];this.set("xy",l)},center:function(c){this.set("align",{node:c,points:[a.CC,a.CC],offset:[0,0]})}};return a},{requires:["dom"]});
KISSY.add("uibase/base",function(f,e){function a(h){e.apply(this,arguments);for(var j=this.constructor;j;){if(h&&h[c]&&j.HTML_PARSER)if(h[c]=b.one(h[c])){var i=h[c],k=j.HTML_PARSER,m=void 0,n=void 0;for(m in k)if(k.hasOwnProperty(m)){n=k[m];if(f.isFunction(n))this.__set(m,n.call(this,i));else if(f.isString(n))this.__set(m,i.one(n));else f.isArray(n)&&n[0]&&this.__set(m,i.all(n[0]))}}j=j.superclass&&j.superclass.constructor}d(this,"initializer","constructor");h&&h.autoRender&&this.render()}function d(h,
j,i){for(var k=h.constructor,m=[],n,o,q;k;){q=[];if(o=k.__ks_exts)for(var p=0;p<o.length;p++)if(n=o[p]){if(i!="constructor")n=o[p].prototype[i];n&&q.push(n)}if(n=k.prototype[j])q.push(n);q.length&&m.push.apply(m,q.reverse());k=k.superclass&&k.superclass.constructor}for(p=m.length-1;p>=0;p--)m[p]&&m[p].call(h)}var c="srcNode",b=f.require("node/node"),g=f.require("base/attribute").__capitalFirst,l=function(){};a.HTML_PARSER={};a.ATTRS={render:{valueFn:function(){return document.body}},rendered:{value:false}};
f.extend(a,e,{render:function(){if(!this.get("rendered")){this._renderUI();this.fire("renderUI");d(this,"renderUI","__renderUI");this._bindUI();this.fire("bindUI");d(this,"bindUI","__bindUI");this._syncUI();this.fire("syncUI");d(this,"syncUI","__syncUI");this.set("rendered",true)}},_renderUI:l,renderUI:l,_bindUI:function(){var h=this,j=h.__getDefAttrs(),i,k;for(i in j)if(j.hasOwnProperty(i)){k="_uiSet"+g(i);h[k]&&function(m,n){h.on("after"+g(m)+"Change",function(o){h[n](o.newVal,o)})}(i,k)}},bindUI:l,
_syncUI:function(){var h=this.__getDefAttrs(),j;for(j in h)if(h.hasOwnProperty(j)){var i="_uiSet"+g(j);this[i]&&this[i](this.get(j))}},syncUI:l,destroy:function(){for(var h=this.constructor,j,i,k;h;){(i=h.prototype.destructor)&&i.apply(this);if(j=h.__ks_exts)for(k=j.length-1;k>=0;k--)(i=j[k]&&j[k].prototype.__destructor)&&i.apply(this);h=h.superclass&&h.superclass.constructor}this.fire("destroy");this.detach()}});a.create=function(h,j,i,k){function m(){a.apply(this,arguments)}if(f.isArray(h)){k=i;
i=j;j=h;h=a}h=h||a;f.extend(m,h,i,k);if(j){m.__ks_exts=j;f.each(j,function(n){if(n){f.each(["ATTRS","HTML_PARSER"],function(o){if(n[o]){m[o]=m[o]||{};f.mix(m[o],n[o],false)}});f.augment(m,n,false)}})}return m};return a},{requires:["base","dom","node"]});
KISSY.add("uibase/box",function(f){function e(){}f.mix(e,{APPEND:1,INSERT:0});e.ATTRS={el:{setter:function(a){var d=f.require("node/node");if(f.isString(a))return d.one(a)}},elCls:{},elStyle:{},width:{},height:{},elTagName:{value:"div"},elAttrs:{},elOrder:{value:1},html:{value:false}};e.HTML_PARSER={el:function(a){return a}};e.prototype={__syncUI:function(){},__bindUI:function(){},__renderUI:function(){var a=f.require("node/node"),d=this.get("render"),c=this.get("el");d=new a(d);if(!c){c=new a("<"+
this.get("elTagName")+">");this.get("elOrder")?d.append(c):d.prepend(c);this.set("el",c)}},_uiSetElAttrs:function(a){a&&this.get("el").attr(a)},_uiSetElCls:function(a){a&&this.get("el").addClass(a)},_uiSetElStyle:function(a){a&&this.get("el").css(a)},_uiSetWidth:function(a){a&&this.get("el").width(a)},_uiSetHeight:function(a){a&&this.get("el").height(a)},_uiSetHtml:function(a){a!==false&&this.get("el").html(a)},__destructor:function(){var a=this.get("el");if(a){a.detach();a.remove()}}};return e});
KISSY.add("uibase/close",function(f){function e(){}e.ATTRS={closable:{value:true},closeBtn:{}};e.HTML_PARSER={closeBtn:".ks-ext-close"};e.prototype={__syncUI:function(){},_uiSetClosable:function(a){var d=this.get("closeBtn");if(d)a?d.css("display",""):d.css("display","none")},__renderUI:function(){var a=f.require("node/node"),d=this.get("closeBtn"),c=this.get("contentEl");if(!d&&c){d=(new a("<a href='#' class='ks-ext-close'><span class='ks-ext-close-x'>X</span></a>")).appendTo(c);this.set("closeBtn",
d)}},__bindUI:function(){var a=this,d=a.get("closeBtn");d&&d.on("click",function(c){a.hide();c.halt()})},__destructor:function(){var a=this.get("closeBtn");a&&a.detach()}};return e});
KISSY.add("uibase/constrain",function(f,e){function a(){}function d(b){var g;if(!b)return g;var l=this.get("el");if(b!==true){b=c.one(b);g=b.offset();f.mix(g,{maxLeft:g.left+b[0].offsetWidth-l[0].offsetWidth,maxTop:g.top+b[0].offsetHeight-l[0].offsetHeight})}else{b=document.documentElement.clientWidth;g={left:e.scrollLeft(),top:e.scrollTop()};f.mix(g,{maxLeft:g.left+b-l[0].offsetWidth,maxTop:g.top+e.viewportHeight()-l[0].offsetHeight})}return g}var c=f.require("node/node");a.ATTRS={constrain:{value:false}};
a.prototype={__bindUI:function(){},__renderUI:function(){var b=this,g=b.__getDefAttrs(),l=g.x;g=g.y;var h=l.setter,j=g.setter;l.setter=function(i){var k=h&&h(i);if(k===undefined)k=i;if(!b.get("constrain"))return k;i=d.call(b,b.get("constrain"));return Math.min(Math.max(k,i.left),i.maxLeft)};g.setter=function(i){var k=j&&j(i);if(k===undefined)k=i;if(!b.get("constrain"))return k;i=d.call(b,b.get("constrain"));return Math.min(Math.max(k,i.top),i.maxTop)};b.addAttr("x",l);b.addAttr("y",g)},__syncUI:function(){},
__destructor:function(){}};return a},{requires:["dom","node"]});
KISSY.add("uibase/contentbox",function(f){function e(){}var a=f.require("node/node");e.ATTRS={contentEl:{},contentElAttrs:{},contentTagName:{value:"div"},content:{}};e.HTML_PARSER={contentEl:".ks-contentbox"};e.prototype={__syncUI:function(){},__bindUI:function(){},__renderUI:function(){var d=this.get("contentEl"),c=this.get("el");if(!d){var b=f.makeArray(c[0].childNodes);d=(new a("<"+this.get("contentTagName")+" class='ks-contentbox'>")).appendTo(c);for(c=0;c<b.length;c++)d.append(b[c]);this.set("contentEl",
d)}},_uiSetContentElAttrs:function(d){d&&this.get("contentEl").attr(d)},_uiSetContent:function(d){if(d!==undefined)if(f.isString(d))this.get("contentEl").html(d);else{this.get("contentEl").html("");this.get("contentEl").append(d)}},__destructor:function(){}};return e},{requires:["dom","node"]});
KISSY.add("uibase/drag",function(f){function e(){}e.ATTRS={handlers:{value:[]},draggable:{value:true}};e.prototype={_uiSetHandlers:function(a){a&&a.length>0&&this.__drag&&this.__drag.set("handlers",a)},__syncUI:function(){},__renderUI:function(){},__bindUI:function(){var a=f.require("dd/draggable"),d=this.get("el");if(this.get("draggable")&&a)this.__drag=new a({node:d,handlers:this.get("handlers")})},_uiSetDraggable:function(a){var d=this.__drag;if(d)if(a){d.detach("drag");d.on("drag",this._dragExtAction,
this)}else d.detach("drag")},_dragExtAction:function(a){this.set("xy",[a.left,a.top])},__destructor:function(){var a=this.__drag;a&&a.destroy()}};return e});
KISSY.add("uibase/loading",function(f){function e(){}e.prototype={loading:function(){if(!this._loadingExtEl)this._loadingExtEl=(new (f.require("node/node"))("<div class='ks-ext-loading' style='position: absolute;border: none;width: 100%;top: 0;left: 0;z-index: 99999;height:100%;*height: expression(this.parentNode.offsetHeight);'>")).appendTo(this.get("el"));this._loadingExtEl.show()},unloading:function(){var a=this._loadingExtEl;a&&a.hide()}};return e});
KISSY.add("uibase/mask",function(f){function e(){}var a,d=0;e.ATTRS={mask:{value:false}};e.prototype={__bindUI:function(){},__renderUI:function(){},__syncUI:function(){},_uiSetMask:function(c){if(c){this.on("show",this._maskExtShow);this.on("hide",this._maskExtHide)}else{this.detach("show",this._maskExtShow);this.detach("hide",this._maskExtHide)}},_maskExtShow:function(){if(!a){var c=f.require("ua"),b=f.require("node/node"),g=f.require("dom");a=(new b("<div class='ks-ext-mask'>")).prependTo(document.body);
a.css({position:"absolute",left:0,top:0,width:c.ie==6?g.docWidth():"100%",height:g.docHeight()});c.ie==6&&a.append("<iframe style='width:100%;height:expression(this.parentNode.offsetHeight);filter:alpha(opacity=0);z-index:-1;'>")}a.css({"z-index":this.get("zIndex")-1});d++;a.css("display","")},_maskExtHide:function(){d--;if(d<=0)d=0;d||a&&a.css("display","none")},__destructor:function(){}};return e},{requires:["ua"]});
KISSY.add("uibase/position",function(f,e,a){function d(){}var c=document;d.ATTRS={x:{},y:{},xy:{setter:function(b){var g=f.makeArray(b);if(g.length){g[0]&&this.set("x",g[0]);g[1]&&this.set("y",g[1])}return b}},zIndex:{value:9999},visible:{value:undefined}};d.prototype={__syncUI:function(){},__renderUI:function(){var b=this.get("el");b.addClass("ks-ext-position");b.css("display","")},__bindUI:function(){},_uiSetZIndex:function(b){b!==undefined&&this.get("el").css("z-index",b)},_uiSetX:function(b){b!==
undefined&&this.get("el").offset({left:b})},_uiSetY:function(b){b!==undefined&&this.get("el").offset({top:b})},_uiSetVisible:function(b){if(b!==undefined){this.get("el").css("visibility",b?"visible":"hidden");this[b?"_bindKey":"_unbindKey"]();this.fire(b?"show":"hide")}},_bindKey:function(){a.on(c,"keydown",this._esc,this)},_unbindKey:function(){a.remove(c,"keydown",this._esc,this)},_esc:function(b){b.keyCode===27&&this.hide()},move:function(b,g){if(f.isArray(b)){g=b[1];b=b[0]}this.set("xy",[b,g])},
show:function(){this._firstShow()},_firstShow:function(){this.render();this._realShow();this._firstShow=this._realShow},_realShow:function(){this.set("visible",true)},hide:function(){this.set("visible",false)},__destructor:function(){}};return d},{requires:["dom","event"]});
KISSY.add("uibase/shim",function(f){function e(){}e.ATTRS={shim:{value:true}};e.prototype={__syncUI:function(){},__bindUI:function(){},_uiSetShim:function(a){var d=f.require("node/node"),c=this.get("el");if(a&&!this.__shimEl){this.__shimEl=new d("<iframe style='position: absolute;border: none;width: expression(this.parentNode.offsetWidth);top: 0;opacity: 0;filter: alpha(opacity=0);left: 0;z-index: -1;height: expression(this.parentNode.offsetHeight);'>");c.prepend(this.__shimEl)}else if(!a&&this.__shimEl){this.__shimEl.remove();
delete this.__shimEl}},__renderUI:function(){},__destructor:function(){}};return e},{host:"uibase"});
KISSY.add("uibase/stdmod",function(f){function e(){}function a(c,b){var g=f.require("node/node"),l=c.get("contentEl"),h=c.get(b);if(!h){h=(new g("<div class='"+d+b+"'>")).appendTo(l);c.set(b,h)}}var d="ks-stdmod-";e.ATTRS={header:{},body:{},footer:{},bodyStyle:{},headerContent:{value:false},bodyContent:{value:false},footerContent:{value:false}};e.HTML_PARSER={header:"."+d+"header",body:"."+d+"body",footer:"."+d+"footer"};e.prototype={__bindUI:function(){},__syncUI:function(){},_setStdModContent:function(c,
b){if(b!==false)if(f.isString(b))this.get(c).html(b);else{this.get(c).html("");this.get(c).append(b)}},_uiSetBodyStyle:function(c){c!==undefined&&this.get("body").css(c)},_uiSetBodyContent:function(c){this._setStdModContent("body",c)},_uiSetHeaderContent:function(c){this._setStdModContent("header",c)},_uiSetFooterContent:function(c){this._setStdModContent("footer",c)},__renderUI:function(){a(this,"header");a(this,"body");a(this,"footer")},__destructor:function(){}};return e});
KISSY.add("uibase",function(f,e){return e},{requires:["uibase/base","uibase/align","uibase/box","uibase/close","uibase/constrain","uibase/contentbox","uibase/drag","uibase/loading","uibase/mask","uibase/position","uibase/shim","uibase/stdmod"]});
