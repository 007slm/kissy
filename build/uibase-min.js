/*
Copyright 2012, KISSY UI Library v1.30dev
MIT Licensed
build time: Feb 21 19:59
*/
KISSY.add("uibase/align",function(k,m,e,i){function q(b){var d=b.ownerDocument.body,f=e.css(b,"position"),g=f=="fixed"||f=="absolute";for(b=b.parentNode;b&&b!=d;b=b.parentNode){f=e.css(b,"position");g=g&&f=="static";if(e.css(b,"overflow")!="visible"&&(!g||f=="fixed"||f=="absolute"||f=="relative"))return b}return null}function a(b){for(var d in b)if(d.indexOf("fail")===0)return true;return false}function j(b){var d=b.offset,f=b.node,g=b.points,p,c=this.get("el");d=d||[0,0];p=c.offset();f=o(f,g[0]);
g=o(c,g[1]);g=[g.left-f.left,g.top-f.top];p={left:p.left-g[0]+ +d[0],top:p.top-g[1]+ +d[1]};a:{d=p;p=this.get("el");c={};g={width:p.outerWidth(),height:p.outerHeight()};f=k.clone(g);if(!k.isEmptyObject(b.overflow)){c={left:0,right:Infinity,top:0,bottom:Infinity};for(var l=p[0];l=q(l);){var r=l.clientWidth;if(!m.ie||r!==0){var s=l.clientLeft,t=l.clientTop;r=e.offset(l);s={left:s,top:t};r.left+=s.left;r.top+=s.top;c.top=Math.max(c.top,r.top);c.right=Math.min(c.right,r.left+l.clientWidth);c.bottom=Math.min(c.bottom,
r.top+l.clientHeight);c.left=Math.max(c.left,r.left)}}l=e.scrollLeft();r=e.scrollTop();c.left=Math.max(c.left,l);c.top=Math.max(c.top,r);c.right=Math.min(c.right,l+e.viewportWidth());c.bottom=Math.min(c.bottom,r+e.viewportHeight());c=c.top>=0&&c.left>=0&&c.bottom>c.top&&c.right>c.left?c:null;b=b.overflow||{};l={};if(d.left<c.left&&b.adjustX){d.left=c.left;l.adjustX=1}if(d.left<c.left&&d.left+f.width>c.right&&b.resizeWidth){f.width-=d.left+f.width-c.right;l.resizeWidth=1}if(d.left+f.width>c.right&&
b.adjustX){d.left=Math.max(c.right-f.width,c.left);l.adjustX=1}if(b.failX)l.failX=d.left<c.left||d.left+f.width>c.right;if(d.top<c.top&&b.adjustY){d.top=c.top;l.adjustY=1}if(d.top>=c.top&&d.top+f.height>c.bottom&&b.resizeHeight){f.height-=d.top+f.height-c.bottom;l.resizeHeight=1}if(d.top+f.height>c.bottom&&b.adjustY){d.top=Math.max(c.bottom-f.height,c.top);l.adjustY=1}if(b.failY)l.failY=d.top<c.top||d.top+f.height>c.bottom;c=l;if(a(c)){b=c;break a}}this.set("x",d.left);this.set("y",d.top);if(f.width!=
g.width||f.height!=g.height){p.width(f.width);p.height(f.height)}b=c}return b}function n(b,d,f){var g=[];k.each(b,function(p){g.push(p.replace(d,function(c){return f[c]}))});return g}function h(){}function o(b,d){var f=d.charAt(0),g=d.charAt(1),p,c,l,r;if(b){p=b.offset();c=b.outerWidth();l=b.outerHeight()}else{p={left:e.scrollLeft(),top:e.scrollTop()};c=e.viewportWidth();l=e.viewportHeight()}r=p.left;p=p.top;if(f==="c")p+=l/2;else if(f==="b")p+=l;if(g==="c")r+=c/2;else if(g==="r")r+=c;return{left:r,
top:p}}h.ATTRS={align:{setter:function(b){var d;if(d=b.node)b.node=i.one(d)}}};h.prototype={_uiSetAlign:function(b){this.align(b.node,b.points,b.offset,b.overflow)},align:function(b,d,f,g){var p={};if(b)b=i.one(b);g=k.clone(g||{});f=f&&[].concat(f)||[0,0];if(g.failX)p.failX=1;if(g.failY)p.failY=1;var c=j.call(this,{node:b,points:d,offset:f,overflow:p});if(a(c)){if(c.failX){d=n(d,/[lr]/ig,{l:"r",r:"l"});f=f;f[0]=-f[0];f=f}if(c.failY){d=n(d,/[tb]/ig,{t:"b",b:"t"});c=f;c[1]=-c[1];f=c}}c=j.call(this,
{node:b,points:d,offset:f,overflow:p});if(a(c)){delete g.failX;delete g.failY;j.call(this,{node:b,points:d,offset:f,overflow:g})}},center:function(b){this.set("align",{node:b,points:["cc","cc"],offset:[0,0]})}};return h},{requires:["ua","dom","node"]});
KISSY.add("uibase/base",function(k,m,e){function i(h){return h.charAt(0).toUpperCase()+h.substring(1)}function q(h){m.apply(this,arguments);for(var o=this.constructor;o;){if(h&&h[j]&&o.HTML_PARSER)if(h[j]=e.one(h[j])){var b=h[j],d=o.HTML_PARSER,f=void 0,g=void 0;for(f in d)if(d.hasOwnProperty(f)){g=d[f];if(k.isFunction(g))this.__set(f,g.call(this,b));else if(k.isString(g))this.__set(f,b.one(g));else k.isArray(g)&&g[0]&&this.__set(f,b.all(g[0]))}}o=o.superclass&&o.superclass.constructor}a(this,"initializer",
"constructor");h&&h.autoRender&&this.render()}function a(h,o,b){for(var d=h.constructor,f=[],g,p,c,l;d;){l=[];if(c=d.__ks_exts)for(var r=0;r<c.length;r++)if(g=c[r]){if(b!="constructor")g=g.prototype.hasOwnProperty(b)?g.prototype[b]:null;g&&l.push(g)}if(d.prototype.hasOwnProperty(o)&&(p=d.prototype[o]))l.push(p);l.length&&f.push.apply(f,l.reverse());d=d.superclass&&d.superclass.constructor}for(r=f.length-1;r>=0;r--)f[r]&&f[r].call(h)}var j="srcNode",n=k.noop;q.HTML_PARSER={};q.ATTRS={rendered:{value:false},
created:{value:false}};k.extend(q,m,{create:function(){if(!this.get("created")){this._createDom();this.fire("createDom");a(this,"createDom","__createDom");this.fire("afterCreateDom");this.__set("created",true)}},render:function(){if(!this.get("rendered")){this.create();this._renderUI();this.fire("renderUI");a(this,"renderUI","__renderUI");this.fire("afterRenderUI");this._bindUI();this.fire("bindUI");a(this,"bindUI","__bindUI");this.fire("afterBindUI");this._syncUI();this.fire("syncUI");a(this,"syncUI",
"__syncUI");this.fire("afterSyncUI");this.__set("rendered",true)}return this},_createDom:n,_renderUI:n,renderUI:n,_bindUI:function(){var h=this,o=h.__attrs,b,d;for(b in o)if(o.hasOwnProperty(b)){d="_uiSet"+i(b);h[d]&&function(f,g){h.on("after"+i(f)+"Change",function(p){h[g](p.newVal,p)})}(b,d)}},bindUI:n,_syncUI:function(){var h=this.__attrs,o;for(o in h)if(h.hasOwnProperty(o)){var b="_uiSet"+i(o);this[b]&&h[o].sync!==false&&this.get(o)!==undefined&&this[b](this.get(o))}},syncUI:n,destroy:function(){for(var h=
this.constructor,o,b,d;h;){h.prototype.hasOwnProperty("destructor")&&h.prototype.destructor.apply(this);if(o=h.__ks_exts)for(d=o.length-1;d>=0;d--)(b=o[d]&&o[d].prototype.__destructor)&&b.apply(this);h=h.superclass&&h.superclass.constructor}this.fire("destroy");this.detach()}},{create:function(h,o,b,d){function f(){q.apply(this,arguments)}if(k.isArray(h)){d=b;b=o;o=h;h=q}h=h||q;if(k.isObject(o)){d=b;b=o;o=[]}k.extend(f,h,b,d);if(o){f.__ks_exts=o;var g={};h=o.concat(f);k.each(h,function(c){c&&k.each(["ATTRS",
"HTML_PARSER"],function(l){if(c[l]){g[l]=g[l]||{};k.mix(g[l],c[l],true,undefined,true)}})});k.each(g,function(c,l){f[l]=c});var p={};k.each(h,function(c){if(c){c=c.prototype;for(var l in c)if(c.hasOwnProperty(l))p[l]=c[l]}});k.each(p,function(c,l){f.prototype[l]=c})}return f}});return q},{requires:["base","node"]});
KISSY.add("uibase/box",function(k){function m(){}m.ATTRS={html:{view:true},width:{view:true},height:{view:true},elCls:{view:true},elStyle:{view:true},elAttrs:{view:true},elBefore:{view:true},el:{view:true},render:{view:true},visibleMode:{value:"display",view:true},visible:{view:true},srcNode:{view:true}};m.HTML_PARSER={el:function(e){this.decorateInternal&&this.decorateInternal(k.one(e));return e}};m.prototype={_uiSetVisible:function(e){this.fire(e?"show":"hide")},show:function(){this.render();this.set("visible",
true)},hide:function(){this.set("visible",false)}};return m});
KISSY.add("uibase/boxrender",function(k,m){function e(){}function i(a,j,n,h,o,b,d){j=j||{};d=d||"";if(typeof d!=="string")d="";if(n)j.width=typeof n=="number"?n+"px":n;if(h)j.height=typeof h=="number"?h+"px":h;n="";for(var f in j)if(j.hasOwnProperty(f))n+=f+":"+j[f]+";";j="";for(var g in b)if(b.hasOwnProperty(g))j+=" "+g+"='"+b[g]+"' ";return"<"+o+(n?" style='"+n+"' ":"")+j+(a?" class='"+a+"' ":"")+">"+d+"</"+o+">"}var q=k.all;e.ATTRS={el:{setter:function(a){return q(a)}},elCls:{sync:false},elStyle:{sync:false},
width:{sync:false},height:{sync:false},elTagName:{sync:false,value:"div"},elAttrs:{sync:false},html:{sync:false},elBefore:{},render:{},visible:{},visibleMode:{}};e.construct=i;e.HTML_PARSER={html:function(a){return a.html()}};e.prototype={__renderUI:function(){if(this.__boxRenderNew){var a=this.get("render"),j=this.get("el"),n=this.get("elBefore");if(n)j.insertBefore(n);else a?j.appendTo(a):j.appendTo(document.body)}},__createDom:function(){var a=this.get("el");if(!a){this.__boxRenderNew=true;a=new m(i(this.get("elCls"),
this.get("elStyle"),this.get("width"),this.get("height"),this.get("elTagName"),this.get("elAttrs"),this.get("html")));this.__set("el",a)}},_uiSetElAttrs:function(a){this.get("el").attr(a)},_uiSetElCls:function(a){this.get("el").addClass(a)},_uiSetElStyle:function(a){this.get("el").css(a)},_uiSetWidth:function(a){this.get("el").width(a)},_uiSetHeight:function(a){this.get("el").height(a)},_uiSetHtml:function(a){this.get("el").html(a)},_uiSetVisible:function(a){var j=this.get("el");this.get("visibleMode")==
"visibility"?j.css("visibility",a?"visible":"hidden"):j.css("display",a?"":"none")},show:function(){this.render();this.set("visible",true)},hide:function(){this.set("visible",false)},__destructor:function(){var a=this.get("el");if(a){a.detach();a.remove()}}};return e},{requires:["node"]});
KISSY.add("uibase/close",function(){function k(){}k.ATTRS={closable:{view:true},closeAction:{value:"hide"}};var m={hide:"hide",destroy:"destroy"};k.prototype={__bindUI:function(){var e=this,i=e.get("view").get("closeBtn");i&&i.on("click",function(q){e[m[e.get("closeAction")]||"hide"]();q.preventDefault()})}};return k});
KISSY.add("uibase/closerender",function(k,m){function e(){}e.ATTRS={closable:{value:true},closeBtn:{}};e.HTML_PARSER={closeBtn:function(i){return i.one("."+this.get("prefixCls")+"ext-close")}};e.prototype={_uiSetClosable:function(i){var q=this.get("closeBtn");if(q)i?q.css("display",""):q.css("display","none")},__renderUI:function(){var i=this.get("closeBtn"),q=this.get("el");if(!i&&q){i=(new m("<a tabindex='0' href='javascript:void(\"\u5173\u95ed\")' role='button' class='"+this.get("prefixCls")+"ext-close'><span class='"+
this.get("prefixCls")+"ext-close-x'>\u5173\u95ed</span></a>")).appendTo(q);this.__set("closeBtn",i)}},__destructor:function(){var i=this.get("closeBtn");i&&i.detach()}};return e},{requires:["node"]});
KISSY.add("uibase/constrain",function(k,m,e){function i(){}function q(a){var j;if(!a)return j;var n=this.get("el");if(a!==true){a=e.one(a);j=a.offset();k.mix(j,{maxLeft:j.left+a.outerWidth()-n.outerWidth(),maxTop:j.top+a.outerHeight()-n.outerHeight()})}else{a=document.documentElement.clientWidth;j={left:m.scrollLeft(),top:m.scrollTop()};k.mix(j,{maxLeft:j.left+a-n.outerWidth(),maxTop:j.top+m.viewportHeight()-n.outerHeight()})}return j}i.ATTRS={constrain:{value:false}};i.prototype={__renderUI:function(){var a=
this,j=a.getAttrs(),n=j.x;j=j.y;var h=n.setter,o=j.setter;n.setter=function(b){var d=h&&h.call(a,b);if(d===undefined)d=b;if(!a.get("constrain"))return d;b=q.call(a,a.get("constrain"));return Math.min(Math.max(d,b.left),b.maxLeft)};j.setter=function(b){var d=o&&o.call(a,b);if(d===undefined)d=b;if(!a.get("constrain"))return d;b=q.call(a,a.get("constrain"));return Math.min(Math.max(d,b.top),b.maxTop)};a.addAttr("x",n);a.addAttr("y",j)}};return i},{requires:["dom","node"]});
KISSY.add("uibase/contentbox",function(){function k(){}k.ATTRS={content:{view:true,sync:false},contentEl:{view:true},contentElAttrs:{view:true},contentElStyle:{view:true},contentTagName:{view:true}};k.prototype={};return k});
KISSY.add("uibase/contentboxrender",function(k,m,e){function i(){}i.ATTRS={contentEl:{},contentElAttrs:{},contentElCls:{},contentElStyle:{},contentTagName:{value:"div"},content:{sync:false}};i.HTML_PARSER={content:function(a){return a[0].innerHTML}};var q=e.construct;i.prototype={__renderUI:function(){},__createDom:function(){var a,j=this.get("content");a=this.get("el");var n="",h=k.makeArray(a[0].childNodes);if(h.length)n=a[0].innerHTML;if(j==n)j="";a=(new m(q(this.get("prefixCls")+"contentbox "+
(this.get("contentElCls")||""),this.get("contentElStyle"),undefined,undefined,this.get("contentTagName"),this.get("contentElAttrs"),j))).appendTo(a);this.__set("contentEl",a);if(j)typeof j!=="string"&&a.append(j);else{j=0;for(n=h.length;j<n;j++)a.append(h[j])}},_uiSetContentElCls:function(a){this.get("contentEl").addClass(a)},_uiSetContentElAttrs:function(a){this.get("contentEl").attr(a)},_uiSetContentElStyle:function(a){this.get("contentEl").css(a)},_uiSetContent:function(a){typeof a=="string"?this.get("contentEl").html(a):
this.get("contentEl").empty().append(a)}};return i},{requires:["node","./boxrender"]});
KISSY.add("uibase/drag",function(k){function m(){}m.ATTRS={handlers:{value:[]},draggable:{value:true}};m.prototype={_uiSetHandlers:function(e){e&&e.length>0&&this.__drag&&this.__drag.set("handlers",e)},__bindUI:function(){var e=k.require("dd/draggable"),i=this.get("el");if(this.get("draggable")&&e)this.__drag=new e({node:i})},_uiSetDraggable:function(e){var i=this.__drag;if(i)if(e){i.detach("drag");i.on("drag",this._dragExtAction,this)}else i.detach("drag")},_dragExtAction:function(e){this.set("xy",
[e.left,e.top])},__destructor:function(){var e=this.__drag;e&&e.destroy()}};return m});KISSY.add("uibase/loading",function(){function k(){}k.prototype={loading:function(){this.get("view").loading()},unloading:function(){this.get("view").unloading()}};return k});
KISSY.add("uibase/loadingrender",function(k,m){function e(){}e.prototype={loading:function(){if(!this._loadingExtEl)this._loadingExtEl=(new m("<div class='"+this.get("prefixCls")+"ext-loading' style='position: absolute;border: none;width: 100%;top: 0;left: 0;z-index: 99999;height:100%;*height: expression(this.parentNode.offsetHeight);'/>")).appendTo(this.get("el"));this._loadingExtEl.show()},unloading:function(){var i=this._loadingExtEl;i&&i.hide()}};return e},{requires:["node"]});
KISSY.add("uibase/mask",function(){function k(){}k.ATTRS={mask:{value:false}};k.prototype={_uiSetMask:function(m){if(m){this.on("show",this.get("view")._maskExtShow,this.get("view"));this.on("hide",this.get("view")._maskExtHide,this.get("view"))}else{this.detach("show",this.get("view")._maskExtShow,this.get("view"));this.detach("hide",this.get("view")._maskExtHide,this.get("view"))}}};return k},{requires:["ua"]});
KISSY.add("uibase/maskrender",function(k,m,e){function i(){return h?f.width()+o:"100%"}function q(){return h?f.height()+o:"100%"}function a(){n=b("<div class='"+this.get("prefixCls")+"ext-mask'/>").prependTo("body");n.css({position:h?"absolute":"fixed",left:0,top:0,width:i(),height:q()});if(h)g=b("<iframe style='position:absolute;left:0px;top:0px;background:red;width:"+i()+";height:"+q()+";filter:alpha(opacity=0);z-index:-1;'/>").insertBefore(n);n.unselectable();n.on("mousedown click",function(l){l.halt()})}
function j(){}var n,h=m.ie===6,o="px",b=e.all,d=b(window),f=b(document),g,p=0,c=k.throttle(function(){var l={width:i(),height:q()};n.css(l);g&&g.css(l)},50);j.prototype={_maskExtShow:function(){n||a.call(this);var l={"z-index":this.get("zIndex")-1},r={display:""};n.css(l);g&&g.css(l);p++;if(p==1){n.css(r);g&&g.css(r);h&&d.on("resize scroll",c)}},_maskExtHide:function(){p--;if(p<=0)p=0;if(!p){var l={display:"none"};n&&n.css(l);g&&g.css(l);h&&d.detach("resize scroll",c)}},__destructor:function(){this._maskExtHide()}};
return j},{requires:["ua","node"]});KISSY.add("uibase/position",function(k){function m(){}m.ATTRS={x:{view:true},y:{view:true},xy:{setter:function(e){var i=k.makeArray(e);if(i.length){i[0]&&this.set("x",i[0]);i[1]&&this.set("y",i[1])}return e},getter:function(){return[this.get("x"),this.get("y")]}},zIndex:{view:true}};m.prototype={move:function(e,i){if(k.isArray(e)){i=e[1];e=e[0]}this.set("xy",[e,i])}};return m});
KISSY.add("uibase/positionrender",function(){function k(){}k.ATTRS={x:{valueFn:function(){return this.get("el")&&this.get("el").offset().left}},y:{valueFn:function(){return this.get("el")&&this.get("el").offset().top}},zIndex:{value:9999}};k.prototype={__renderUI:function(){this.get("el").addClass(this.get("prefixCls")+"ext-position")},_uiSetZIndex:function(m){this.get("el").css("z-index",m)},_uiSetX:function(m){this.get("el").offset({left:m})},_uiSetY:function(m){this.get("el").offset({top:m})}};
return k});KISSY.add("uibase/resize",function(k){function m(){}m.ATTRS={resize:{value:{}}};m.prototype={__destructor:function(){var e=this.resizer;e&&e.destroy()},_uiSetResize:function(e){var i=k.require("resizable");if(i){this.resizer&&this.resizer.destroy();e.node=this.get("el");if(e.handlers)this.resizer=new i(e)}}};return m});
KISSY.add("uibase/shimrender",function(k,m){function e(){}e.ATTRS={shim:{value:true}};e.prototype={_uiSetShim:function(i){var q=this.get("el");if(i&&!this.__shimEl){this.__shimEl=new m("<iframe style='position: absolute;border: none;width: expression(this.parentNode.offsetWidth);top: 0;opacity: 0;filter: alpha(opacity=0);left: 0;z-index: -1;height: expression(this.parentNode.offsetHeight);'/>");q.prepend(this.__shimEl)}else if(!i&&this.__shimEl){this.__shimEl.remove();delete this.__shimEl}}};return e},
{requires:["node"]});KISSY.add("uibase/stdmod",function(){function k(){}k.ATTRS={header:{view:true},body:{view:true},footer:{view:true},bodyStyle:{view:true},footerStyle:{view:true},headerStyle:{view:true},headerContent:{view:true},bodyContent:{view:true},footerContent:{view:true}};k.prototype={};return k});
KISSY.add("uibase/stdmodrender",function(k,m){function e(){}function i(a,j){var n=a.get("contentEl"),h=a.get(j);if(!h){h=(new m("<div class='"+a.get("prefixCls")+q+j+"'/>")).appendTo(n);a.__set(j,h)}}var q="stdmod-";e.ATTRS={header:{},body:{},footer:{},bodyStyle:{},footerStyle:{},headerStyle:{},headerContent:{},bodyContent:{},footerContent:{}};e.HTML_PARSER={header:function(a){return a.one("."+this.get("prefixCls")+q+"header")},body:function(a){return a.one("."+this.get("prefixCls")+q+"body")},footer:function(a){return a.one("."+
this.get("prefixCls")+q+"footer")}};e.prototype={_setStdModContent:function(a,j){if(k.isString(j))this.get(a).html(j);else{this.get(a).html("");this.get(a).append(j)}},_uiSetBodyStyle:function(a){this.get("body").css(a)},_uiSetHeaderStyle:function(a){this.get("header").css(a)},_uiSetFooterStyle:function(a){this.get("footer").css(a)},_uiSetBodyContent:function(a){this._setStdModContent("body",a)},_uiSetHeaderContent:function(a){this._setStdModContent("header",a)},_uiSetFooterContent:function(a){this._setStdModContent("footer",
a)},__renderUI:function(){i(this,"header");i(this,"body");i(this,"footer")}};return e},{requires:["node"]});
KISSY.add("uibase",function(k,m,e,i,q,a,j,n,h,o,b,d,f,g,p,c,l,r,s,t,u){a.Render=j;d.Render=f;g.Render=p;c.Render=l;t.Render=u;i.Render=q;h.Render=o;k.mix(m,{Align:e,Box:i,Close:a,Constrain:n,ContentBox:h,Drag:b,Loading:d,Mask:g,Position:c,Shim:{Render:r},Resize:s,StdMod:t});return m},{requires:["uibase/base","uibase/align","uibase/box","uibase/boxrender","uibase/close","uibase/closerender","uibase/constrain","uibase/contentbox","uibase/contentboxrender","uibase/drag","uibase/loading","uibase/loadingrender",
"uibase/mask","uibase/maskrender","uibase/position","uibase/positionrender","uibase/shimrender","uibase/resize","uibase/stdmod","uibase/stdmodrender"]});
