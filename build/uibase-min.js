/*
Copyright 2011, KISSY UI Library v1.20dev
MIT Licensed
build time: Oct 27 15:39
*/
KISSY.add("uibase/align",function(h,m,f,j){function p(b){var d=b.ownerDocument.body,e=f.css(b,"position"),k=e=="fixed"||e=="absolute";for(b=b.parentNode;b&&b!=d;b=b.parentNode){e=f.css(b,"position");k=k&&e=="static";if(f.css(b,"overflow")!="visible"&&(!k||e=="fixed"||e=="absolute"||e=="relative"))return b}return null}function a(b){for(var d in b)if(d.indexOf("fail")===0)return true;return false}function g(b){var d=b.offset,e=b.node,k=b.points,q,c=this.get("el");d=d||[0,0];q=c.offset();e=l(e,k[0]);
k=l(c,k[1]);k=[k.left-e.left,k.top-e.top];q={left:q.left-k[0]+ +d[0],top:q.top-k[1]+ +d[1]};a:{d=q;q=this.get("el");c={};k={width:q.outerWidth(),height:q.outerHeight()};e=h.clone(k);if(!h.isEmptyObject(b.overflow)){c={left:0,right:Infinity,top:0,bottom:Infinity};for(var n=q[0];n=p(n);){var r=n.clientWidth;if(!m.ie||r!==0){var s=n.clientLeft,t=n.clientTop;r=f.offset(n);s={left:s,top:t};r.left+=s.left;r.top+=s.top;c.top=Math.max(c.top,r.top);c.right=Math.min(c.right,r.left+n.clientWidth);c.bottom=Math.min(c.bottom,
r.top+n.clientHeight);c.left=Math.max(c.left,r.left)}}n=f.scrollLeft();r=f.scrollTop();c.left=Math.max(c.left,n);c.top=Math.max(c.top,r);c.right=Math.min(c.right,n+f.viewportWidth());c.bottom=Math.min(c.bottom,r+f.viewportHeight());c=c.top>=0&&c.left>=0&&c.bottom>c.top&&c.right>c.left?c:null;b=b.overflow||{};n={};if(d.left<c.left&&b.adjustX){d.left=c.left;n.adjustX=1}if(d.left<c.left&&d.left+e.width>c.right&&b.resizeWidth){e.width-=d.left+e.width-c.right;n.resizeWidth=1}if(d.left+e.width>c.right&&
b.adjustX){d.left=Math.max(c.right-e.width,c.left);n.adjustX=1}if(b.failX)n.failX=d.left<c.left||d.left+e.width>c.right;if(d.top<c.top&&b.adjustY){d.top=c.top;n.adjustY=1}if(d.top>=c.top&&d.top+e.height>c.bottom&&b.resizeHeight){e.height-=d.top+e.height-c.bottom;n.resizeHeight=1}if(d.top+e.height>c.bottom&&b.adjustY){d.top=Math.max(c.bottom-e.height,c.top);n.adjustY=1}if(b.failY)n.failY=d.top<c.top||d.top+e.height>c.bottom;c=n;if(a(c)){b=c;break a}}this.set("x",d.left);this.set("y",d.top);if(e.width!=
k.width||e.height!=k.height){q.width(e.width);q.height(e.height)}b=c}return b}function o(b,d,e){var k=[];h.each(b,function(q){k.push(q.replace(d,function(c){return e[c]}))});return k}function i(){}function l(b,d){var e=d.charAt(0),k=d.charAt(1),q,c,n,r;if(b){b=j.one(b);q=b.offset();c=b.outerWidth();n=b.outerHeight()}else{q={left:f.scrollLeft(),top:f.scrollTop()};c=f.viewportWidth();n=f.viewportHeight()}r=q.left;q=q.top;if(e==="c")q+=n/2;else if(e==="b")q+=n;if(k==="c")r+=c/2;else if(k==="r")r+=c;
return{left:r,top:q}}i.ATTRS={align:{}};i.prototype={_uiSetAlign:function(b){h.isPlainObject(b)&&this.align(b.node,b.points,b.offset,b.overflow)},align:function(b,d,e,k){var q={};k=h.clone(k||{});e=e&&[].concat(e)||[0,0];if(k.failX)q.failX=1;if(k.failY)q.failY=1;var c=g.call(this,{node:b,points:d,offset:e,overflow:q});if(a(c)){if(c.failX){d=o(d,/[lr]/ig,{l:"r",r:"l"});e=e;e[0]=-e[0];e=e}if(c.failY){d=o(d,/[tb]/ig,{t:"b",b:"t"});c=e;c[1]=-c[1];e=c}}c=g.call(this,{node:b,points:d,offset:e,overflow:q});
if(a(c)){delete k.failX;delete k.failY;g.call(this,{node:b,points:d,offset:e,overflow:k})}},center:function(b){this.set("align",{node:b,points:["cc","cc"],offset:[0,0]})}};return i},{requires:["ua","dom","node"]});
KISSY.add("uibase/base",function(h,m,f){function j(i){return i.charAt(0).toUpperCase()+i.substring(1)}function p(i){m.apply(this,arguments);for(var l=this.constructor;l;){if(i&&i[g]&&l.HTML_PARSER)if(i[g]=f.one(i[g])){var b=i[g],d=l.HTML_PARSER,e=void 0,k=void 0;for(e in d)if(d.hasOwnProperty(e)){k=d[e];if(h.isFunction(k))this.__set(e,k.call(this,b));else if(h.isString(k))this.__set(e,b.one(k));else h.isArray(k)&&k[0]&&this.__set(e,b.all(k[0]))}}l=l.superclass&&l.superclass.constructor}a(this,"initializer",
"constructor");i&&i.autoRender&&this.render()}function a(i,l,b){for(var d=i.constructor,e=[],k,q,c,n;d;){n=[];if(c=d.__ks_exts)for(var r=0;r<c.length;r++)if(k=c[r]){if(b!="constructor")k=k.prototype.hasOwnProperty(b)?k.prototype[b]:null;k&&n.push(k)}if(d.prototype.hasOwnProperty(l)&&(q=d.prototype[l]))n.push(q);n.length&&e.push.apply(e,n.reverse());d=d.superclass&&d.superclass.constructor}for(r=e.length-1;r>=0;r--)e[r]&&e[r].call(i)}var g="srcNode",o=function(){};p.HTML_PARSER={};p.ATTRS={rendered:{value:false},
created:{value:false}};h.extend(p,m,{create:function(){if(!this.get("created")){this._createDom();this.fire("createDom");a(this,"createDom","__createDom");this.fire("afterCreateDom");this.set("created",true)}},render:function(){if(!this.get("rendered")){this.create();this._renderUI();this.fire("renderUI");a(this,"renderUI","__renderUI");this.fire("afterRenderUI");this._bindUI();this.fire("bindUI");a(this,"bindUI","__bindUI");this.fire("afterBindUI");this._syncUI();this.fire("syncUI");a(this,"syncUI",
"__syncUI");this.fire("afterSyncUI");this.set("rendered",true)}},_createDom:o,_renderUI:o,renderUI:o,_bindUI:function(){var i=this,l=i.__attrs,b,d;for(b in l)if(l.hasOwnProperty(b)){d="_uiSet"+j(b);i[d]&&function(e,k){i.on("after"+j(e)+"Change",function(q){i[k](q.newVal,q)})}(b,d)}},bindUI:o,_syncUI:function(){var i=this.__attrs,l;for(l in i)if(i.hasOwnProperty(l)){var b="_uiSet"+j(l);this[b]&&i[l].sync!==false&&this.get(l)!==undefined&&this[b](this.get(l))}},syncUI:o,destroy:function(){for(var i=
this.constructor,l,b,d;i;){i.prototype.hasOwnProperty("destructor")&&i.prototype.destructor.apply(this);if(l=i.__ks_exts)for(d=l.length-1;d>=0;d--)(b=l[d]&&l[d].prototype.__destructor)&&b.apply(this);i=i.superclass&&i.superclass.constructor}this.fire("destroy");this.detach()}});p.create=function(i,l,b,d){function e(){p.apply(this,arguments)}if(h.isArray(i)){d=b;b=l;l=i;i=p}i=i||p;if(h.isObject(l)){d=b;b=l;l=[]}h.extend(e,i,b,d);if(l){e.__ks_exts=l;var k={};i=l.concat(e);h.each(i,function(c){c&&h.each(["ATTRS",
"HTML_PARSER"],function(n){if(c[n]){k[n]=k[n]||{};h.mix(k[n],c[n],true,undefined,true)}})});h.each(k,function(c,n){e[n]=c});var q={};h.each(i,function(c){if(c){c=c.prototype;for(var n in c)if(c.hasOwnProperty(n))q[n]=c[n]}});h.each(q,function(c,n){e.prototype[n]=c})}return e};return p},{requires:["base","node"]});
KISSY.add("uibase/box",function(){function h(){}h.ATTRS={html:{view:true,sync:false},width:{view:true},height:{view:true},elCls:{view:true},elStyle:{view:true},elAttrs:{view:true},elBefore:{view:true},el:{view:true},render:{view:true},visibleMode:{value:"display",view:true},visible:{view:true},srcNode:{view:true}};h.HTML_PARSER={el:function(m){this.decorateInternal&&this.decorateInternal(m);return m}};h.prototype={_uiSetVisible:function(m){this.fire(m?"show":"hide")},show:function(){this.render();
this.set("visible",true)},hide:function(){this.set("visible",false)}};return h});
KISSY.add("uibase/boxrender",function(h,m){function f(){}function j(a,g,o,i,l,b){g=g||{};if(o)g.width=o;if(i)g.height=i;o="";for(var d in g)if(g.hasOwnProperty(d))o+=d+":"+g[d]+";";g="";for(var e in b)if(b.hasOwnProperty(e))g+=" "+e+"='"+b[e]+"' ";return"<"+l+(o?" style='"+o+"' ":"")+g+(a?" class='"+a+"' ":"")+"></"+l+">"}var p=h.all;f.ATTRS={el:{setter:function(a){return p(a)}},elCls:{},elStyle:{},width:{},height:{},elTagName:{value:"div"},elAttrs:{},elBefore:{},render:{},html:{sync:false},visible:{},
visibleMode:{}};f.construct=j;f.HTML_PARSER={html:function(a){return a.html()}};f.prototype={__renderUI:function(){if(this.__boxRenderNew){var a=this.get("render"),g=this.get("el"),o=this.get("elBefore");if(o)g.insertBefore(o);else a?g.appendTo(a):g.appendTo("body")}},__createDom:function(){var a=this.get("el");if(!a){this.__boxRenderNew=true;a=new m(j(this.get("elCls"),this.get("elStyle"),this.get("width"),this.get("height"),this.get("elTagName"),this.get("elAttrs")));this.set("el",a);this.get("html")&&
a.html(this.get("html"))}},_uiSetElAttrs:function(a){this.get("el").attr(a)},_uiSetElCls:function(a){this.get("el").addClass(a)},_uiSetElStyle:function(a){this.get("el").css(a)},_uiSetWidth:function(a){this.get("el").width(a)},_uiSetHeight:function(a){this.get("el").height(a)},_uiSetHtml:function(a){this.get("el").html(a)},_uiSetVisible:function(a){var g=this.get("el");this.get("visibleMode")=="visibility"?g.css("visibility",a?"visible":"hidden"):g.css("display",a?"":"none")},show:function(){this.render();
this.set("visible",true)},hide:function(){this.set("visible",false)},__destructor:function(){var a=this.get("el");if(a){a.detach();a.remove()}}};return f},{requires:["node"]});KISSY.add("uibase/close",function(){function h(){}h.ATTRS={closable:{view:true},closeAction:{value:"hide"}};var m={hide:"hide",destroy:"destroy"};h.prototype={__bindUI:function(){var f=this,j=f.get("view").get("closeBtn");j&&j.on("click",function(p){f[m[f.get("closeAction")]||"hide"]();p.preventDefault()})}};return h});
KISSY.add("uibase/closerender",function(h,m){function f(){}f.ATTRS={closable:{value:true},closeBtn:{}};f.HTML_PARSER={closeBtn:function(j){return j.one("."+this.get("prefixCls")+"ext-close")}};f.prototype={_uiSetClosable:function(j){var p=this.get("closeBtn");if(p)j?p.css("display",""):p.css("display","none")},__renderUI:function(){var j=this.get("closeBtn"),p=this.get("el");if(!j&&p){j=(new m("<a tabindex='0' role='button' class='"+this.get("prefixCls")+"ext-close'><span class='"+this.get("prefixCls")+
"ext-close-x'>\u5173\u95ed</span></a>")).appendTo(p);this.set("closeBtn",j)}},__destructor:function(){var j=this.get("closeBtn");j&&j.detach()}};return f},{requires:["node"]});
KISSY.add("uibase/constrain",function(h,m,f){function j(){}function p(a){var g;if(!a)return g;var o=this.get("el");if(a!==true){a=f.one(a);g=a.offset();h.mix(g,{maxLeft:g.left+a.outerWidth()-o.outerWidth(),maxTop:g.top+a.outerHeight()-o.outerHeight()})}else{a=document.documentElement.clientWidth;g={left:m.scrollLeft(),top:m.scrollTop()};h.mix(g,{maxLeft:g.left+a-o.outerWidth(),maxTop:g.top+m.viewportHeight()-o.outerHeight()})}return g}j.ATTRS={constrain:{value:false}};j.prototype={__renderUI:function(){var a=
this,g=a.getAttrs(),o=g.x;g=g.y;var i=o.setter,l=g.setter;o.setter=function(b){var d=i&&i.call(a,b);if(d===undefined)d=b;if(!a.get("constrain"))return d;b=p.call(a,a.get("constrain"));return Math.min(Math.max(d,b.left),b.maxLeft)};g.setter=function(b){var d=l&&l.call(a,b);if(d===undefined)d=b;if(!a.get("constrain"))return d;b=p.call(a,a.get("constrain"));return Math.min(Math.max(d,b.top),b.maxTop)};a.addAttr("x",o);a.addAttr("y",g)}};return j},{requires:["dom","node"]});
KISSY.add("uibase/contentbox",function(){function h(){}h.ATTRS={content:{view:true,sync:false},contentEl:{view:true},contentElAttrs:{view:true},contentElStyle:{view:true},contentTagName:{view:true}};h.prototype={};return h});
KISSY.add("uibase/contentboxrender",function(h,m,f){function j(){}function p(g,o){var i=g.get("contentEl");i.html("");o&&i.append(o)}j.ATTRS={contentEl:{},contentElAttrs:{},contentElCls:{value:""},contentElStyle:{},contentTagName:{value:"div"},content:{sync:false}};j.HTML_PARSER={content:function(g){return g.html()}};var a=f.construct;j.prototype={__renderUI:function(){},__createDom:function(){var g,o;g=this.get("el");o=h.makeArray(g[0].childNodes);g=(new m(a(this.get("prefixCls")+"contentbox "+this.get("contentElCls"),
this.get("contentElStyle"),undefined,undefined,this.get("contentTagName"),this.get("contentElAttrs")))).appendTo(g);this.set("contentEl",g);if(o.length)for(var i=0;i<o.length;i++)g.append(o[i]);else if(o=this.get("content"))p(this,o)},_uiSetContentElCls:function(g){this.get("contentEl").addClass(g)},_uiSetContentElAttrs:function(g){this.get("contentEl").attr(g)},_uiSetContentElStyle:function(g){this.get("contentEl").css(g)},_uiSetContent:function(g){p(this,g)}};return j},{requires:["node","./boxrender"]});
KISSY.add("uibase/drag",function(h){function m(){}m.ATTRS={handlers:{value:[]},draggable:{value:true}};m.prototype={_uiSetHandlers:function(f){f&&f.length>0&&this.__drag&&this.__drag.set("handlers",f)},__bindUI:function(){var f=h.require("dd/draggable"),j=this.get("el");if(this.get("draggable")&&f)this.__drag=new f({node:j,handlers:this.get("handlers")})},_uiSetDraggable:function(f){var j=this.__drag;if(j)if(f){j.detach("drag");j.on("drag",this._dragExtAction,this)}else j.detach("drag")},_dragExtAction:function(f){this.set("xy",
[f.left,f.top])},__destructor:function(){var f=this.__drag;f&&f.destroy()}};return m});KISSY.add("uibase/loading",function(){function h(){}h.prototype={loading:function(){this.get("view").loading()},unloading:function(){this.get("view").unloading()}};return h});
KISSY.add("uibase/loadingrender",function(h,m){function f(){}f.prototype={loading:function(){if(!this._loadingExtEl)this._loadingExtEl=(new m("<div class='"+this.get("prefixCls")+"ext-loading' style='position: absolute;border: none;width: 100%;top: 0;left: 0;z-index: 99999;height:100%;*height: expression(this.parentNode.offsetHeight);'/>")).appendTo(this.get("el"));this._loadingExtEl.show()},unloading:function(){var j=this._loadingExtEl;j&&j.hide()}};return f},{requires:["node"]});
KISSY.add("uibase/mask",function(){function h(){}h.ATTRS={mask:{value:false}};h.prototype={_uiSetMask:function(m){if(m){this.on("show",this.get("view")._maskExtShow,this.get("view"));this.on("hide",this.get("view")._maskExtHide,this.get("view"))}else{this.detach("show",this.get("view")._maskExtShow,this.get("view"));this.detach("hide",this.get("view")._maskExtHide,this.get("view"))}}};return h},{requires:["ua"]});
KISSY.add("uibase/maskrender",function(h,m,f){function j(){a=g("<div class='"+this.get("prefixCls")+"ext-mask'/>").prependTo("body");a.css({position:"absolute",left:0,top:0,width:i.width()+"px",height:i.height()+"px"});if(m.ie==6)l=g("<iframe style='position:absolute;left:0px;top:0px;background:red;width:"+(i.width()+"px")+";height:"+(i.height()+"px")+";filter:alpha(opacity=0);z-index:-1;'/>").insertBefore(a);a.unselectable();a.on("mousedown click",function(e){e.halt()})}function p(){}var a,g=f.all,
o=g(window),i=g(document),l,b=0,d=h.buffer(function(){var e={width:i.width()+"px",height:i.height()+"px"};a.css(e);l&&l.css(e)},50);p.prototype={_maskExtShow:function(){a||j.call(this);var e={"z-index":this.get("zIndex")-1},k={display:""};a.css(e);l&&l.css(e);b++;if(b==1){a.css(k);l&&l.css(k);o.on("resize",d)}},_maskExtHide:function(){b--;if(b<=0)b=0;if(!b){var e={display:"none"};a&&a.css(e);l&&l.css(e);o.detach("resize",d)}},__destructor:function(){this._maskExtHide()}};return p},{requires:["ua",
"node"]});KISSY.add("uibase/position",function(h){function m(){}m.ATTRS={x:{view:true},y:{view:true},xy:{setter:function(f){var j=h.makeArray(f);if(j.length){j[0]&&this.set("x",j[0]);j[1]&&this.set("y",j[1])}return f},getter:function(){return[this.get("x"),this.get("y")]}},zIndex:{view:true}};m.prototype={move:function(f,j){if(h.isArray(f)){j=f[1];f=f[0]}this.set("xy",[f,j])}};return m});
KISSY.add("uibase/positionrender",function(){function h(){}h.ATTRS={x:{valueFn:function(){return this.get("el")&&this.get("el").offset().left}},y:{valueFn:function(){return this.get("el")&&this.get("el").offset().top}},zIndex:{value:9999}};h.prototype={__renderUI:function(){this.get("el").addClass(this.get("prefixCls")+"ext-position")},_uiSetZIndex:function(m){this.get("el").css("z-index",m)},_uiSetX:function(m){this.get("el").offset({left:m})},_uiSetY:function(m){this.get("el").offset({top:m})}};
return h});KISSY.add("uibase/resize",function(h){function m(){}m.ATTRS={resize:{value:{}}};m.prototype={__destructor:function(){self.resizer&&self.resizer.destroy()},_uiSetResize:function(f){var j=h.require("resizable");if(j){this.resizer&&this.resizer.destroy();f.node=this.get("el");f.autoRender=true;if(f.handlers)this.resizer=new j(f)}}};return m});
KISSY.add("uibase/shimrender",function(h,m){function f(){}f.ATTRS={shim:{value:true}};f.prototype={_uiSetShim:function(j){var p=this.get("el");if(j&&!this.__shimEl){this.__shimEl=new m("<iframe style='position: absolute;border: none;width: expression(this.parentNode.offsetWidth);top: 0;opacity: 0;filter: alpha(opacity=0);left: 0;z-index: -1;height: expression(this.parentNode.offsetHeight);'/>");p.prepend(this.__shimEl)}else if(!j&&this.__shimEl){this.__shimEl.remove();delete this.__shimEl}}};return f},
{requires:["node"]});KISSY.add("uibase/stdmod",function(){function h(){}h.ATTRS={header:{view:true},body:{view:true},footer:{view:true},bodyStyle:{view:true},footerStyle:{view:true},headerStyle:{view:true},headerContent:{view:true},bodyContent:{view:true},footerContent:{view:true}};h.prototype={};return h});
KISSY.add("uibase/stdmodrender",function(h,m){function f(){}function j(a,g){var o=a.get("contentEl"),i=a.get(g);if(!i){i=(new m("<div class='"+a.get("prefixCls")+p+g+"'/>")).appendTo(o);a.set(g,i)}}var p="stdmod-";f.ATTRS={header:{},body:{},footer:{},bodyStyle:{},footerStyle:{},headerStyle:{},headerContent:{},bodyContent:{},footerContent:{}};f.HTML_PARSER={header:function(a){return a.one("."+this.get("prefixCls")+p+"header")},body:function(a){return a.one("."+this.get("prefixCls")+p+"body")},footer:function(a){return a.one("."+
this.get("prefixCls")+p+"footer")}};f.prototype={_setStdModContent:function(a,g){if(h.isString(g))this.get(a).html(g);else{this.get(a).html("");this.get(a).append(g)}},_uiSetBodyStyle:function(a){this.get("body").css(a)},_uiSetHeaderStyle:function(a){this.get("header").css(a)},_uiSetFooterStyle:function(a){this.get("footer").css(a)},_uiSetBodyContent:function(a){this._setStdModContent("body",a)},_uiSetHeaderContent:function(a){this._setStdModContent("header",a)},_uiSetFooterContent:function(a){this._setStdModContent("footer",
a)},__renderUI:function(){j(this,"header");j(this,"body");j(this,"footer")}};return f},{requires:["node"]});
KISSY.add("uibase",function(h,m,f,j,p,a,g,o,i,l,b,d,e,k,q,c,n,r,s,t,u){a.Render=g;d.Render=e;k.Render=q;c.Render=n;t.Render=u;j.Render=p;i.Render=l;h.mix(m,{Align:f,Box:j,Close:a,Contrain:o,Contentbox:i,Drag:b,Loading:d,Mask:k,Position:c,Shim:{Render:r},Resize:s,StdMod:t});return h.UIBase=m},{requires:["uibase/base","uibase/align","uibase/box","uibase/boxrender","uibase/close","uibase/closerender","uibase/constrain","uibase/contentbox","uibase/contentboxrender","uibase/drag","uibase/loading","uibase/loadingrender",
"uibase/mask","uibase/maskrender","uibase/position","uibase/positionrender","uibase/shimrender","uibase/resize","uibase/stdmod","uibase/stdmodrender"]});
