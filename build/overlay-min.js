/*
Copyright 2011, KISSY UI Library v1.20dev
MIT Licensed
build time: ${build.time}
*/
KISSY.add("overlay/overlayrender",function(d,c,f,e){function a(b){return d.require("uibase/"+b)}return f.create(e.Render,[a("contentboxrender"),a("positionrender"),a("loadingrender"),c.ie==6?a("shimrender"):null,a("maskrender")],{renderUI:function(){this.get("el").addClass(this.get("prefixCls")+"overlay")}},{ATTRS:{prefixCls:{value:"ks-"},elOrder:0}})},{requires:["ua","uibase","component"]});
KISSY.add("overlay/ariarender",function(d){function c(){}function f(a){var b=a.keyCode,h=this.get("el");if(b==e){b=a.target;for(var j=h.all("*"),g=[],k=0;k<j.length;k++){var i=d.one(j[k]),l=false;if(-1!=i[0].tabIndex){if(i[0].nodeName.toLowerCase()=="a")l=true;else if(i[0].nodeName.toLowerCase()=="input"&&!i[0].disabled)l=true;else if(i.hasAttr("tabindex")&&i[0].tabIndex==0)l=true;if(l){l=i[0].tabIndex||0;for(var m=0;m<g.length;m++)if((g[m][0].tabIndex||0)>l){g.splice(m,0,i);break}m==g.length&&g.push(i)}}}j=
g[0];g=g[g.length-1];k=j==g;if(b[0]==j[0]&&a.shiftKey){k||g[0].focus();a.halt()}else if(b[0]==g[0]&&!a.shiftKey){k||j[0].focus();a.halt()}else if(b[0]==h[0]||h.contains(b))return;a.halt()}}var e=9;c.prototype={__renderUI:function(){var a=this.get("el"),b=this.get("header");if(this.get("aria")){a.attr("role","dialog");a.attr("tabindex",0);b.attr("id")||b.attr("id",d.guid("ks-dialog-header"));a.attr("aria-labelledby",b.attr("id"))}},__bindUI:function(){var a=this;if(a.get("aria")){var b=a.get("el"),
h;a.on("afterVisibleChange",function(j){if(j.newVal){h=document.activeElement;b[0].focus();b.on("keydown",f,a)}else{b.detach("keydown",f,a);h&&h.focus()}})}}};return c});KISSY.add("overlay/aria",function(){function d(){}d.ATTRS={aria:{view:true}};return d});
KISSY.add("overlay/overlay",function(d,c,f,e){function a(b){return d.require("uibase/"+b)}c=c.create(f.ModelControl,[a("contentbox"),a("position"),a("loading"),a("align"),a("resize"),a("mask")]);c.DefaultRender=e;return c},{requires:["uibase","component","./overlayrender"]});KISSY.add("overlay/dialogrender",function(d,c,f,e){return c.create(f,[d.require("uibase/stdmodrender"),d.require("uibase/closerender"),e])},{requires:["uibase","./overlayrender","./ariarender"]});
KISSY.add("overlay/dialog",function(d,c,f,e,a){function b(h){return d.require("uibase/"+h)}c=f.create(c,[b("stdmod"),b("close"),b("drag"),b("constrain"),a],{renderUI:function(){this.get("view").get("el").addClass(this.get("view").get("prefixCls")+"dialog");this.set("handlers",[this.get("view").get("header")])}});c.DefaultRender=e;return c},{requires:["overlay/overlay","uibase","overlay/dialogrender","./aria"]});
KISSY.add("overlay",function(d,c,f,e,a){c.Render=f;e.Render=a;c.Dialog=e;d.Overlay=c;d.Dialog=e;return c},{requires:["overlay/overlay","overlay/overlayrender","overlay/dialog","overlay/dialogrender"]});
