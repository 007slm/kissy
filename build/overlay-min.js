/*
Copyright 2012, KISSY UI Library v1.30dev
MIT Licensed
build time: May 28 19:45
*/
KISSY.add("overlay/aria",function(e,b){function c(){}c.ATTRS={aria:{view:!0}};c.prototype={__bindUI:function(){var d=this,a=d.get("el");if(d.get("aria"))a.on("keydown",function(a){a.keyCode===b.KeyCodes.ESC&&(d.hide(),a.halt())})}};return c},{requires:["event"]});
KISSY.add("overlay/ariarender",function(e,b){function c(){}function d(f){var d=f.keyCode,b=this.get("el");if(d==g){var d=a(f.target),c=this.__ariaArchor;if(d.equals(b)&&f.shiftKey)c[0].focus(),f.halt();else if(d.equals(c)&&!f.shiftKey)b[0].focus(),f.halt();else if(d.equals(b)||b.contains(d))return;f.halt()}}var a=b.all,g=b.KeyCodes.TAB;c.prototype={__renderUI:function(){var f=this.get("el"),d=this.get("header");this.get("aria")&&(f.attr("role","dialog"),f.attr("tabindex",0),d.attr("id")||d.attr("id",
e.guid("ks-dialog-header")),f.attr("aria-labelledby",d.attr("id")),this.__ariaArchor=a("<div tabindex='0'></div>").appendTo(f))},__bindUI:function(){var a=this;if(a.get("aria")){var b=a.get("el"),c;a.on("afterVisibleChange",function(e){e.newVal?(c=b[0].ownerDocument.activeElement,b[0].focus(),b.attr("aria-hidden","false"),b.on("keydown",d,a)):(b.attr("aria-hidden","true"),b.detach("keydown",d,a),c&&c.focus())})}}};return c},{requires:["node"]});
KISSY.add("overlay/base",function(e,b,c,d){function a(a){return e.require("component/uibase/"+a)}d=b.define(b.Controller,[a("contentbox"),a("position"),a("loading"),a("align"),a("close"),a("resize"),a("mask"),d],{},{ATTRS:{focusable:{value:!1},closable:{value:!1},handleMouseEvents:{value:!1},visibleMode:{value:"visibility"}}});d.DefaultRender=c;b.UIStore.setUIConstructorByCssClass("overlay",{priority:b.UIStore.PRIORITY.LEVEL1,ui:d});return d},{requires:["component","./overlayrender","./effect"]});
KISSY.add("overlay/dialog",function(e,b,c,d,a){function g(a){return e.require("component/uibase/"+a)}c=b.define(c,[g("stdmod"),g("drag"),g("constrain"),a],{},{ATTRS:{closable:{value:!0},handlers:{valueFn:function(){var a=this;return[function(){return a.get("view").get("header")}]}}}});c.DefaultRender=d;b.UIStore.setUIConstructorByCssClass("dialog",{priority:b.UIStore.PRIORITY.LEVEL2,ui:c});return c},{requires:["component","overlay/base","overlay/dialogrender","./aria"]});
KISSY.add("overlay/dialogrender",function(e,b,c,d){return b.define(c,[e.require("component/uibase/stdmodrender"),d])},{requires:["component","./overlayrender","./ariarender"]});
KISSY.add("overlay/effect",function(e){function b(){}function c(b,c){var e=b.get("el"),h=b.get("effect"),i=h.effect,k=h.duration,h=h.easing;if(i!=d){var j=c?1:0;e.stop(1,1);e.css({visibility:"visible",display:g[j]});e[i+a[i][j]](k,function(){e.css({display:g[0],visibility:c?"visible":"hidden"})},h)}}var d="none",a={fade:["Out","In"],slide:["Up","Down"]},g=["block","none"];b.ATTRS={effect:{value:{effect:d,duration:0.5,easing:"easeOut"},setter:function(b){var c=b.effect;e.isString(c)&&!a[c]&&(b.effect=
d)}}};b.prototype={__bindUI:function(){var a=this;a.on("hide",function(){c(a,0)});a.on("show",function(){c(a,1)})}};return b},{requires:["anim"]});KISSY.add("overlay",function(e,b,c,d,a,g){b.Render=c;d.Render=a;b.Dialog=d;e.Dialog=d;b.Popup=g;return e.Overlay=b},{requires:["overlay/base","overlay/overlayrender","overlay/dialog","overlay/dialogrender","overlay/popup"]});
KISSY.add("overlay/overlayrender",function(e,b,c){function d(a){return e.require("component/uibase/"+a)}return c.define(c.Render,[d("contentboxrender"),d("positionrender"),d("loadingrender"),6===b.ie?d("shimrender"):null,d("closerender"),d("maskrender")])},{requires:["ua","component"]});
KISSY.add("overlay/popup",function(e,b,c,d){c=b.define(c,[],{initializer:function(){var a=this;a.get("trigger")&&("mouse"===a.get("triggerType")?(a._bindTriggerMouse(),a.on("bindUI",function(){a._bindContainerMouse()})):a._bindTriggerClick())},_bindTriggerMouse:function(){var a=this,b=a.get("trigger"),c;a.__mouseEnterPopup=function(b){a._clearHiddenTimer();c=e.later(function(){a._showing(b);c=d},1E3*a.get("mouseDelay"))};e.each(b,function(b){e.one(b).on("mouseenter",a.__mouseEnterPopup)});a._mouseLeavePopup=
function(){c&&(c.cancel(),c=d);a._setHiddenTimer()};e.each(b,function(b){e.one(b).on("mouseleave",a._mouseLeavePopup)})},_bindContainerMouse:function(){this.get("el").on("mouseleave",this._setHiddenTimer,this).on("mouseenter",this._clearHiddenTimer,this)},_setHiddenTimer:function(){var a=this;a._hiddenTimer=e.later(function(){a._hiding()},1E3*a.get("mouseDelay"))},_clearHiddenTimer:function(){this._hiddenTimer&&(this._hiddenTimer.cancel(),this._hiddenTimer=d)},_bindTriggerClick:function(){var a=this;
a.__clickPopup=function(b){b.halt();if(a.get("toggle"))a[a.get("visible")?"_hiding":"_showing"](b);else a._showing(b)};e.each(a.get("trigger"),function(b){e.one(b).on("click",a.__clickPopup)})},_showing:function(a){this.set("currentTrigger",e.one(a.target));this.show()},_hiding:function(){this.set("currentTrigger",d);this.hide()},destructor:function(){var a=this,b,c=a.get("trigger");c&&(a.__clickPopup&&c.each(function(b){b.detach("click",a.__clickPopup)}),a.__mouseEnterPopup&&c.each(function(b){b.detach("mouseenter",
a.__mouseEnterPopup)}),a._mouseLeavePopup&&c.each(function(b){b.detach("mouseleave",a._mouseLeavePopup)}));(b=a.get("el"))&&b.detach("mouseleave",a._setHiddenTimer,a).detach("mouseenter",a._clearHiddenTimer,a)}},{ATTRS:{trigger:{setter:function(a){e.isString(a)&&(a=e.all(a));return a}},triggerType:{value:"click"},currentTrigger:{},mouseDelay:{value:0.1},toggle:{value:!1}}});b.UIStore.setUIConstructorByCssClass("popup",{priority:b.UIStore.PRIORITY.LEVEL2,ui:c});return c},{requires:["component","./base"]});
