/*
Copyright 2011, KISSY UI Library v1.20dev
MIT Licensed
build time: ${build.time}
*/
KISSY.add("dom/attr",function(k,b,p,g){function x(d){if(k.isArray(d)){for(var a=0;a<d.length;a++)d[a]=x(d[a]);return d}else return d+h}var y=document.documentElement,l=!y.hasAttribute,m=y.textContent!==g?"textContent":"innerText",h="",u=b._isElementNode,o=/^(?:href|src|style)/,r=/^(?:href|src|colspan|rowspan)/,v=/\r/g,e=/^(?:radio|checkbox)/,i={readonly:"readOnly"},s={val:1,css:1,html:1,text:1,data:1,width:1,height:1,offset:1};l&&k.mix(i,{"for":"htmlFor","class":"className"});var t={tabindex:{getter:function(d){return d.tabIndex},
setter:function(d,a){if(isNaN(parseInt(a))){d.removeAttribute("tabindex");d.removeAttribute("tabIndex")}else d.tabIndex=a}},style:{getter:function(d){return d.style.cssText},setter:function(d,a){d.style.cssText=a}},checked:{setter:function(d,a){d.checked=!!a}},disabled:{setter:function(d,a){d.disabled=!!a}}};k.mix(b,{attr:function(d,a,c,j){if(k.isPlainObject(a)){j=c;for(var f in a)b.attr(d,f,a[f],j)}else if(a=k.trim(a)){a=a.toLowerCase();if(j&&s[a])return b[a](d,c);a=i[a]||a;var n=t[a];if(c===g){d=
b.get(d);if(!u(d))return null;if(n&&n.getter)return n.getter(d);var q;o.test(a)||(q=d[a]);if(q===g)q=d.getAttribute(a);if(l)if(r.test(a))q=d.getAttribute(a,2);return q===g?null:q}else k.each(b.query(d),function(w){if(u(w))n&&n.setter?n.setter(w,c):w.setAttribute(a,h+c)})}},removeAttr:function(d,a){a=a.toLowerCase();k.each(b.query(d),function(c){if(u(c)){b.attr(c,a,h);c.removeAttribute(a)}})},hasAttr:l?function(d,a){a=a.toLowerCase();var c=b.get(d).getAttributeNode(a);return!!(c&&c.specified)}:function(d,
a){a=a.toLowerCase();return b.get(d).hasAttribute(a)},val:function(d,a){if(a===g){var c=b.get(d);if(!u(c))return null;if(c&&c.nodeName.toUpperCase()==="option".toUpperCase())return(c.attributes.value||{}).specified?c.value:c.text;if(c&&c.nodeName.toUpperCase()==="select".toUpperCase()){var j=c.selectedIndex,f=c.options;if(j<0)return null;else if(c.type==="select-one")return b.val(f[j]);c=[];for(var n=0,q=f.length;n<q;++n)f[n].selected&&c.push(b.val(f[n]));return c}if(p.webkit&&e.test(c.type))return c.getAttribute("value")===
null?"on":c.value;return(c.value||h).replace(v,h)}k.each(b.query(d),function(w){if(w&&w.nodeName.toUpperCase()==="select".toUpperCase()){a=x(a);var z=k.makeArray(a),B=w.options,A;n=0;for(q=B.length;n<q;++n){A=B[n];A.selected=k.inArray(b.val(A),z)}if(!z.length)w.selectedIndex=-1}else if(u(w))w.value=a})},text:function(d,a){if(a===g){var c=b.get(d);if(u(c))return c[m]||h;else if(b._nodeTypeIs(c,3))return c.nodeValue;return null}else k.each(b.query(d),function(j){if(u(j))j[m]=a;else if(b._nodeTypeIs(j,
3))j.nodeValue=a})}});return b},{requires:["dom/base","ua"]});KISSY.add("dom/base",function(k,b){function p(g,x){return g&&g.nodeType===x}return{_isElementNode:function(g){return p(g,1)},_getWin:function(g){return g&&"scrollTo"in g&&g.document?g:p(g,9)?g.defaultView||g.parentWindow:g===b?window:false},_nodeTypeIs:p}});
KISSY.add("dom/class",function(k,b,p){function g(l,m,h,u){if(!(m=k.trim(m)))return u?false:p;l=b.query(l);var o=0,r=l.length,v=m.split(x);for(m=[];o<v.length;o++){var e=k.trim(v[o]);e&&m.push(e)}for(o=0;o<r;o++){v=l[o];if(b._isElementNode(v)){v=h(v,m,m.length);if(v!==p)return v}}if(u)return false;return p}var x=/[\.\s]\s*\.?/,y=/[\n\t]/g;k.mix(b,{hasClass:function(l,m){return g(l,m,function(h,u,o){if(h=h.className){h=" "+h+" ";for(var r=0,v=true;r<o;r++)if(h.indexOf(" "+u[r]+" ")<0){v=false;break}if(v)return true}},
true)},addClass:function(l,m){g(l,m,function(h,u,o){var r=h.className;if(r){var v=" "+r+" ";r=r;for(var e=0;e<o;e++)if(v.indexOf(" "+u[e]+" ")<0)r+=" "+u[e];h.className=k.trim(r)}else h.className=m},p)},removeClass:function(l,m){g(l,m,function(h,u,o){var r=h.className;if(r)if(o){r=(" "+r+" ").replace(y," ");for(var v=0,e;v<o;v++)for(e=" "+u[v]+" ";r.indexOf(e)>=0;)r=r.replace(e," ");h.className=k.trim(r)}else h.className=""},p)},replaceClass:function(l,m,h){b.removeClass(l,m);b.addClass(l,h)},toggleClass:function(l,
m,h){var u=k.isBoolean(h),o;g(l,m,function(r,v,e){for(var i=0,s;i<e;i++){s=v[i];o=u?!h:b.hasClass(r,s);b[o?"removeClass":"addClass"](r,s)}},p)}});return b},{requires:["dom/base"]});
KISSY.add("dom/create",function(k,b,p,g){function x(f,n,q,w){if(q){var z=k.guid("ks-tmp-"),B=RegExp(v);n+='<span id="'+z+'"></span>';k.available(z,function(){var A=b.get("head"),C,F,D,G,H,E;for(B.lastIndex=0;C=B.exec(n);)if((D=(F=C[1])?F.match(i):false)&&D[2]){C=l.createElement("script");C.src=D[2];if((G=F.match(s))&&G[2])C.charset=G[2];C.async=true;A.appendChild(C)}else if((E=C[2])&&E.length>0)k.globalEval(E);(H=l.getElementById(z))&&b.remove(H);k.isFunction(w)&&w()});y(f,n)}else{y(f,n);k.isFunction(w)&&
w()}}function y(f,n){n=(n+"").replace(v,"");try{f.innerHTML=n}catch(q){for(;f.firstChild;)f.removeChild(f.firstChild);n&&f.appendChild(b.create(n))}}var l=document,m=p.ie,h=b._nodeTypeIs,u=b._isElementNode,o=l.createElement("div"),r=/<(\w+)/,v=/<script([^>]*)>([^<]*(?:(?!<\/script>)<[^<]*)*)<\/script>/ig,e=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,i=/\ssrc=(['"])(.*?)\1/i,s=/\scharset=(['"])(.*?)\1/i;k.mix(b,{create:function(f,n,q){if(h(f,1)||h(f,3)){n=f;q=n.cloneNode(true);if(p.ie<8)q.innerHTML=n.innerHTML;return q}if(!(f=
k.trim(f)))return null;var w=null;w=b._creators;var z,B="div",A;if(z=e.exec(f))w=(q||l).createElement(z[1]);else{if((z=r.exec(f))&&(A=z[1])&&k.isFunction(w[A=A.toLowerCase()]))B=A;f=w[B](f,q).childNodes;if(f.length===1)q=f[0].parentNode.removeChild(f[0]);else{f=f;A=q||l;q=null;if(f&&(f.push||f.item)&&f[0]){A=A||f[0].ownerDocument;q=A.createDocumentFragment();if(f.item)f=k.makeArray(f);A=0;for(w=f.length;A<w;A++)q.appendChild(f[A])}q=q}w=q}q=w;u(q)&&k.isPlainObject(n)&&b.attr(q,n,true);return q},_creators:{div:function(f,
n){var q=n?n.createElement("div"):o;q.innerHTML=f;return q}},html:function(f,n,q,w){if(n===g){f=b.get(f);if(u(f))return f.innerHTML;return null}else k.each(b.query(f),function(z){u(z)&&x(z,n,q,w)})},remove:function(f){k.each(b.query(f),function(n){n.parentNode&&n.parentNode.removeChild(n)})}});if(m||p.gecko||p.webkit){var t=b._creators,d=b.create,a=/(?:\/(?:thead|tfoot|caption|col|colgroup)>)+\s*<tbody/,c={option:"select",td:"tr",tr:"tbody",tbody:"table",col:"colgroup",legend:"fieldset"},j;for(j in c)(function(f){t[j]=
function(n,q){return d("<"+f+">"+n+"</"+f+">",null,q)}})(c[j]);if(m){t.script=function(f,n){var q=n?n.createElement("div"):o;q.innerHTML="-"+f;q.removeChild(q.firstChild);return q};if(m<8)t.tbody=function(f,n){var q=d("<table>"+f+"</table>",null,n),w=q.children.tags("tbody")[0];q.children.length>1&&w&&!a.test(f)&&w.parentNode.removeChild(w);return q}}k.mix(t,{optgroup:t.option,th:t.td,thead:t.tbody,tfoot:t.tbody,caption:t.tbody,colgroup:t.tbody})}return b},{requires:["./base","ua"]});
KISSY.add("dom/data",function(k,b,p){var g=window,x="_ks_data_"+k.now(),y={},l={},m={};m.applet=1;m.object=1;m.embed=1;k.mix(b,{hasData:function(h,u){var o=b.get(h),r;if(!o||o.nodeName&&m[o.nodeName.toLowerCase()])return false;if(o==g)o=l;r=o&&o.nodeType;if(o=(r?y:o)[r?o[x]:x])if(u!==p){if(u in o)return true}else return true;return false},data:function(h,u,o){if(k.isPlainObject(u))for(var r in u)b.data(h,r,u[r]);else if(o===p){h=b.get(h);if(!h||h.nodeName&&m[h.nodeName.toLowerCase()])return null;
if(h==g)h=l;r=h&&h.nodeType;r=h=(r?y:h)[r?h[x]:x];if(k.isString(u)&&h)r=h[u];return r===p?null:r}else b.query(h).each(function(v){if(!(!v||v.nodeName&&m[v.nodeName.toLowerCase()])){if(v==g)v=l;var e=y,i;if(v&&v.nodeType){if(!(i=v[x]))i=v[x]=k.guid()}else{i=x;e=v}if(u&&o!==p){e[i]||(e[i]={});e[i][u]=o}}})},removeData:function(h,u){b.query(h).each(function(o){if(o){if(o==g)o=l;var r,v=y,e,i=o&&o.nodeType;if(i)r=o[x];else{v=o;r=x}if(r){e=v[r];if(u){if(e){delete e[u];k.isEmptyObject(e)&&b.removeData(o)}}else{if(i)o.removeAttribute&&
o.removeAttribute(x);else try{delete o[x]}catch(s){}i&&delete v[r]}}}})}});return b},{requires:["dom/base"]});
KISSY.add("dom/insertion",function(k,b){k.mix(b,{insertBefore:function(p,g){if((p=b.get(p))&&(g=b.get(g))&&g.parentNode)g.parentNode.insertBefore(p,g);return p},insertAfter:function(p,g){if((p=b.get(p))&&(g=b.get(g))&&g.parentNode)g.nextSibling?g.parentNode.insertBefore(p,g.nextSibling):g.parentNode.appendChild(p);return p},append:function(p,g){if((p=b.get(p))&&(g=b.get(g)))g.appendChild&&g.appendChild(p);return p},appendTo:function(p,g){return b.append(p,g)},prepend:function(p,g){if((p=b.get(p))&&
(g=b.get(g)))g.firstChild?b.insertBefore(p,g.firstChild):g.appendChild(p);return p},prependTo:function(p,g){return b.prepend(p,g)}});return b},{requires:["dom/base"]});
KISSY.add("dom/offset",function(k,b,p,g){function x(a){var c=0,j=0,f=h(a[v]);if(a[d]){a=a[d]();c=a[e];j=a[i];if(p.mobile!=="apple"){c+=b[s](f);j+=b[t](f)}}return{left:c,top:j}}var y=window,l=b._isElementNode,m=b._nodeTypeIs,h=b._getWin,u=document.compatMode==="CSS1Compat",o=Math.max,r=parseInt,v="ownerDocument",e="left",i="top",s="scrollLeft",t="scrollTop",d="getBoundingClientRect";k.mix(b,{offset:function(a,c){if(!(a=b.get(a))||!a[v])return null;if(c===g)return x(a);var j=a;if(b.css(j,"position")===
"static")j.style.position="relative";var f=x(j),n={},q,w;for(w in c){q=r(b.css(j,w),10)||0;n[w]=q+c[w]-f[w]}b.css(j,n)},scrollIntoView:function(a,c,j,f){if((a=b.get(a))&&a[v]){f=f===g?true:!!f;j=j===g?true:!!j;if(!c||c===y)a.scrollIntoView(j);else{c=b.get(c);if(m(c,9))c=h(c);var n=!!h(c),q=b.offset(a),w=n?{left:b.scrollLeft(c),top:b.scrollTop(c)}:b.offset(c),z={left:q[e]-w[e],top:q[i]-w[i]};q=n?b.viewportHeight(c):c.clientHeight;n=n?b.viewportWidth(c):c.clientWidth;w=b[s](c);var B=b[t](c),A=w+n,C=
B+q,F=a.offsetHeight;a=a.offsetWidth;var D=z.left+w-(r(b.css(c,"borderLeftWidth"))||0);z=z.top+B-(r(b.css(c,"borderTopWidth"))||0);var G=D+a,H=z+F,E,I;if(F>q||z<B||j)E=z;else if(H>C)E=H-q;if(f)if(a>n||D<w||j)I=D;else if(G>A)I=G-n;b[t](c,E);b[s](c,I)}}},docWidth:0,docHeight:0,viewportHeight:0,viewportWidth:0});k.each(["Left","Top"],function(a,c){var j="scroll"+a;b[j]=function(f,n){if(k.isNumber(f))arguments.callee(y,f);else{var q=0,w=h(f);if(w){if(n!==g){q=a=="Left"?n:b.scrollLeft(w);var z=a=="Top"?
n:b.scrollTop(w);w.scrollTo(q,z)}q=w.document;q=w[c?"pageYOffset":"pageXOffset"]||q.documentElement[j]||q.body[j]}else if(l(f=b.get(f)))q=n!==g?f[j]=n:f[j];return n===g?q:g}}});k.each(["Width","Height"],function(a){b["doc"+a]=function(c){c=h(c).document;return o(u?c.documentElement["scroll"+a]:c.body["scroll"+a],b["viewport"+a](c))};b["viewport"+a]=function(c){var j="inner"+a;c=h(c);var f=c.document;return j in c?c[j]:u?f.documentElement["client"+a]:f.body["client"+a]}});return b},{requires:["./base",
"ua"]});
KISSY.add("dom/selector",function(k,b,p){function g(e,i){var s,t,d=[],a;t=k.require("sizzle");i=x(i);if(k.isString(e))if(e.indexOf(",")!=-1){s=e.split(",");k.each(s,function(c){d.push.apply(d,k.makeArray(g(c,i)))})}else{e=k.trim(e);if(o.test(e)){if(t=y(e.slice(1),i))d=[t]}else if(s=r.exec(e)){t=s[1];a=s[2];s=s[3];if(i=t?y(t,i):i)if(s)if(!t||e.indexOf(u)!==-1)d=k.makeArray(v(s,a,i));else{if((t=y(t,i))&&b.hasClass(t,s))d=[t]}else if(a)d=l(a,i)}else if(t)d=t(e,i);else m(e)}else if(e&&(k.isArray(e)||e&&
!e.nodeType&&e.item&&!e.setTimeout))d=k.makeArray(e);else if(e)d=[e];if(d&&!d.nodeType&&d.item&&!d.setTimeout)d=k.makeArray(d);d.each=function(c,j){return k.each(d,c,j)};return d}function x(e){if(e===p)e=h;else if(k.isString(e)&&o.test(e))e=y(e.slice(1),h);else if(e&&e.nodeType!==1&&e.nodeType!==9)e=null;return e}function y(e,i){if(i.nodeType!==9)i=i.ownerDocument;return i.getElementById(e)}function l(e,i){return i.getElementsByTagName(e)}function m(e){k.error("Unsupported selector: "+e)}var h=document,
u=" ",o=/^#[\w-]+$/,r=/^(?:#([\w-]+))?\s*([\w-]+|\*)?\.?([\w-]+)?$/;(function(){var e=h.createElement("div");e.appendChild(h.createComment(""));if(e.getElementsByTagName("*").length>0)l=function(i,s){var t=k.makeArray(s.getElementsByTagName(i));if(i==="*"){for(var d=[],a=0,c=0,j;j=t[a++];)if(j.nodeType===1)d[c++]=j;t=d}return t}})();var v=h.getElementsByClassName?function(e,i,s){s=e=k.makeArray(s.getElementsByClassName(e));var t=0,d=0,a=e.length,c;if(i&&i!=="*"){s=[];for(i=i.toUpperCase();t<a;++t){c=
e[t];if(c.tagName===i)s[d++]=c}}return s}:h.querySelectorAll?function(e,i,s){return s.querySelectorAll((i?i:"")+"."+e)}:function(e,i,s){i=s.getElementsByTagName(i||"*");s=[];var t=0,d=0,a=i.length,c,j;for(e=u+e+u;t<a;++t){c=i[t];if((j=c.className)&&(u+j+u).indexOf(e)>-1)s[d++]=c}return s};k.mix(b,{query:g,get:function(e,i){return g(e,i)[0]||null},filter:function(e,i,s){var t=g(e,s),d=k.require("sizzle"),a,c,j,f=[];if(k.isString(i)&&(a=r.exec(i))&&!a[1]){c=a[2];j=a[3];i=function(n){return!(c&&n.tagName!==
c.toUpperCase()||j&&!b.hasClass(n,j))}}if(k.isFunction(i))f=k.filter(t,i);else if(i&&d)f=d._filter(e,i,s);else m(i);return f},test:function(e,i,s){e=g(e,s);return e.length&&b.filter(e,i,s).length===e.length}});return b},{requires:["dom/base"]});
KISSY.add("dom/style-ie",function(k,b,p,g,x){if(!p.ie)return b;g=document;var y=g.documentElement,l=b._CUSTOM_STYLES,m=/^-?\d+(?:px)?$/i,h=/^-?\d/,u=/^(?:width|height)$/;try{if(y.style.opacity==x&&y.filters)l.opacity={get:function(e){var i=100;try{i=e.filters["DXImageTransform.Microsoft.Alpha"].opacity}catch(s){try{i=e.filters("alpha").opacity}catch(t){if(e=((e.currentStyle||0).filter||"").match(/alpha\(opacity[=:]([^)]+)\)/))i=parseInt(k.trim(e[1]))}}return i/100+""},set:function(e,i){var s=e.style,
t=(e.currentStyle||0).filter||"";s.zoom=1;if(t)t=k.trim(t.replace(/alpha\(opacity[=:][^)]+\),?/ig,""));if(t&&i!=1)t+=", ";s.filter=t+(i!=1?"alpha(opacity="+i*100+")":"")}}}catch(o){}p=p.ie==8;var r={},v={get:function(e,i){var s=e.currentStyle[i]+"";if(s.indexOf("px")<0)s=r[s]?r[s]:0;return s}};r.thin=p?"1px":"2px";r.medium=p?"3px":"4px";r.thick=p?"5px":"6px";k.each(["","Top","Left","Right","Bottom"],function(e){l["border"+e+"Width"]=v});if(!(g.defaultView||{}).getComputedStyle&&y.currentStyle)b._getComputedStyle=
function(e,i){var s=e.style,t=e.currentStyle[i];if(u.test(i))t=b[i](e)+"px";else if(!m.test(t)&&h.test(t)){var d=s.left,a=e.runtimeStyle.left;e.runtimeStyle.left=e.currentStyle.left;s.left=i==="fontSize"?"1em":t||0;t=s.pixelLeft+"px";s.left=d;e.runtimeStyle.left=a}return t};return b},{requires:["./base","ua","./style"]});
KISSY.add("dom/style",function(k,b,p,g){function x(d,a){var c=b.get(d),j=a===h?c.offsetWidth:c.offsetHeight;k.each(a===h?["Left","Right"]:["Top","Bottom"],function(f){j-=parseFloat(b._getComputedStyle(c,"padding"+f))||0;j-=parseFloat(b._getComputedStyle(c,"border"+f+"Width"))||0});return j}function y(d,a,c){var j=c;if(c===u&&r.test(a)){j=0;if(k.inArray(b.css(d,"position"),["absolute","fixed"])){c=d[a==="left"?"offsetLeft":"offsetTop"];if(p.ie===8||p.opera)c-=o(b.css(d.offsetParent,"border-"+a+"-width"))||
0;j=c-(o(b.css(d,"margin-"+a))||0)}}return j}var l=document,m=l.documentElement,h="width",u="auto",o=parseInt,r=/^(?:left|top)/,v=/^(?:width|height|top|left|right|bottom|margin|padding)/i,e=/-([a-z])/ig,i=function(d,a){return a.toUpperCase()},s={},t={};k.mix(b,{_CUSTOM_STYLES:s,_getComputedStyle:function(d,a){var c="",j=d.ownerDocument;if(d.style)c=j.defaultView.getComputedStyle(d,null)[a];return c},css:function(d,a,c){if(k.isPlainObject(a))for(var j in a)b.css(d,j,a[j]);else{if(a.indexOf("-")>0)a=
a.replace(e,i);j=a;a=s[a]||a;if(c===g){d=b.get(d);var f="";if(d&&d.style){f=a.get?a.get(d,j):d.style[a];if(f===""&&!a.get)f=y(d,a,b._getComputedStyle(d,a))}return f===g?"":f}else{if(c===null||c==="")c="";else if(!isNaN(new Number(c))&&v.test(a))c+="px";(a===h||a==="height")&&parseFloat(c)<0||k.each(b.query(d),function(n){if(n&&n.style){a.set?a.set(n,c):n.style[a]=c;if(c==="")n.style.cssText||n.removeAttribute("style")}})}}},width:function(d,a){if(a===g)return x(d,h);else b.css(d,h,a)},height:function(d,
a){if(a===g)return x(d,"height");else b.css(d,"height",a)},show:function(d){b.query(d).each(function(a){if(a){a.style.display=b.data(a,"display")||"";if(b.css(a,"display")==="none"){var c=a.tagName,j=t[c],f;if(!j){f=l.createElement(c);l.body.appendChild(f);j=b.css(f,"display");b.remove(f);t[c]=j}b.data(a,"display",j);a.style.display=j}}})},hide:function(d){b.query(d).each(function(a){if(a){var c=a.style,j=c.display;if(j!=="none"){j&&b.data(a,"display",j);c.display="none"}}})},toggle:function(d){b.query(d).each(function(a){if(a)b.css(a,
"display")==="none"?b.show(a):b.hide(a)})},addStyleSheet:function(d,a,c){if(k.isString(d)){c=a;a=d;d=window}d=b._getWin(d).document;var j;if(c&&(c=c.replace("#","")))j=b.get("#"+c,d);if(!j){j=b.create("<style>",{id:c},d);b.get("head",d).appendChild(j);if(j.styleSheet)j.styleSheet.cssText=a;else j.appendChild(d.createTextNode(a))}},unselectable:function(d){b.query(d).each(function(a){if(a)if(p.gecko)a.style.MozUserSelect="none";else if(p.webkit)a.style.KhtmlUserSelect="none";else if(p.ie||p.opera){var c=
0,j=a.getElementsByTagName("*");for(a.setAttribute("unselectable","on");a=j[c++];)switch(a.tagName.toLowerCase()){case "iframe":case "textarea":case "input":case "select":break;default:a.setAttribute("unselectable","on")}}})}});if(m.style.cssFloat!==g)s["float"]="cssFloat";else if(m.style.styleFloat!==g)s["float"]="styleFloat";return b},{requires:["dom/base","ua"]});
KISSY.add("dom/traversal",function(k,b,p){function g(l,m,h,u){if(!(l=b.get(l)))return null;if(m===p)m=1;var o=null,r,v;if(k.isNumber(m)&&m>=0){if(m===0)return l;r=0;v=m;m=function(){return++r===v}}for(;l=l[h];)if(y(l)&&(!m||b.test(l,m))&&(!u||u(l))){o=l;break}return o}function x(l,m,h){var u=[];var o=l=b.get(l);if(l&&h)o=l.parentNode;if(o){h=0;for(o=o.firstChild;o;o=o.nextSibling)if(y(o)&&o!==l&&(!m||b.test(o,m)))u[h++]=o}return u}var y=b._isElementNode;k.mix(b,{parent:function(l,m){return g(l,m,
"parentNode",function(h){return h.nodeType!=11})},next:function(l,m){return g(l,m,"nextSibling",p)},prev:function(l,m){return g(l,m,"previousSibling",p)},siblings:function(l,m){return x(l,m,true)},children:function(l,m){return x(l,m,p)},contains:function(l,m){var h=false;if((l=b.get(l))&&(m=b.get(m)))if(l.contains){if(m.nodeType===3){m=m.parentNode;if(m===l)return true}if(m)return l.contains(m)}else if(l.compareDocumentPosition)return!!(l.compareDocumentPosition(m)&16);else for(;!h&&(m=m.parentNode);)h=
m==l;return h},equals:function(l,m){l=k.query(l);m=k.query(m);if(l.length!=m.length)return false;for(var h=l.length;h>=0;h--)if(l[h]!=m[h])return false;return true}});return b},{requires:["./base"]});KISSY.add("dom",function(k,b){return b},{requires:["dom/attr","dom/class","dom/create","dom/data","dom/insertion","dom/offset","dom/style","dom/selector","dom/style-ie","dom/traversal"]});
