/*
Copyright 2011, KISSY UI Library v1.1.8dev
MIT Licensed
build time: ${build.time}
*/
KISSY.add("dom",function(c,u){function r(n,p){return n&&n.nodeType===p}c.DOM={_isElementNode:function(n){return r(n,1)},_isKSNode:function(n){return c.Node&&r(n,c.Node.TYPE)},_getWin:function(n){return n&&"scrollTo"in n&&n.document?n:r(n,9)?n.defaultView||n.parentWindow:n===u?window:false},_nodeTypeIs:r}});
KISSY.add("selector",function(c,u){function r(a,b){var d,g=[],t,l;b=p(b);if(c.isString(a)){a=c.trim(a);if(B.test(a)){if(a=z(a.slice(1),b))g=[a]}else if(d=C.exec(a)){t=d[1];l=d[2];d=d[3];if(b=t?z(t,b):b)if(d)if(!t||a.indexOf(o)!==-1)g=e(d,l,b);else{if((a=z(t,b))&&m.hasClass(a,d))g=[a]}else if(l)g=j(l,b)}else if(c.ExternalSelector)return c.ExternalSelector(a,b);else q(a)}else if(a&&(a[x]||a[y]))g=a[x]?[a[x]()]:a[y]();else if(a&&(c.isArray(a)||n(a)))g=a;else if(a)g=[a];if(n(g))g=c.makeArray(g);g.each=
function(h,v){return c.each(g,h,v)};return g}function n(a){return a&&!a.nodeType&&a.item&&!a.setTimeout}function p(a){if(a===u)a=i;else if(c.isString(a)&&B.test(a))a=z(a.slice(1),i);else if(a&&a.nodeType!==1&&a.nodeType!==9)a=null;return a}function z(a,b){if(b.nodeType!==9)b=b.ownerDocument;return b.getElementById(a)}function j(a,b){return b.getElementsByTagName(a)}function e(a,b,d){d=a=d.getElementsByClassName(a);var g=0,t=0,l=a.length,h;if(b&&b!==s){d=[];for(b=b.toUpperCase();g<l;++g){h=a[g];if(h.tagName===
b)d[t++]=h}}return d}function q(a){c.error("Unsupported selector: "+a)}var i=document,m=c.DOM,o=" ",s="*",x="getDOMNode",y=x+"s",B=/^#[\w-]+$/,C=/^(?:#([\w-]+))?\s*([\w-]+|\*)?\.?([\w-]+)?$/;(function(){var a=i.createElement("div");a.appendChild(i.createComment(""));if(a.getElementsByTagName(s).length>0)j=function(b,d){d=d.getElementsByTagName(b);if(b===s){b=[];for(var g=0,t=0,l;l=d[g++];)if(l.nodeType===1)b[t++]=l;d=b}return d}})();i.getElementsByClassName||(e=i.querySelectorAll?function(a,b,d){return d.querySelectorAll((b?
b:"")+"."+a)}:function(a,b,d){b=d.getElementsByTagName(b||s);d=[];var g=0,t=0,l=b.length,h,v;for(a=o+a+o;g<l;++g){h=b[g];if((v=h.className)&&(o+v+o).indexOf(a)>-1)d[t++]=h}return d});c.query=r;c.get=function(a,b){return r(a,b)[0]||null};c.mix(m,{query:r,get:c.get,filter:function(a,b){var d=r(a),g,t,l,h=[];if(c.isString(b)&&(g=C.exec(b))&&!g[1]){t=g[2];l=g[3];b=function(v){return!(t&&v.tagName!==t.toUpperCase()||l&&!m.hasClass(v,l))}}if(c.isFunction(b))h=c.filter(d,b);else if(b&&c.ExternalSelector)h=
c.ExternalSelector._filter(a,b+"");else q(b);return h},test:function(a,b){a=r(a);return a.length&&m.filter(a,b).length===a.length}})});
KISSY.add("dom-data",function(c,u){function r(i){return i&&i.nodeType}var n=window,p=c.DOM,z="_ks_data_"+c.now(),j={},e={},q={EMBED:1,OBJECT:1,APPLET:1};c.mix(p,{data:function(i,m,o){if(c.isPlainObject(m))for(var s in m)p.data(i,s,m[s]);else if(o===u){i=c.get(i);var x;if(!(!i||q[i.nodeName])){if(i==n)i=e;x=(s=r(i))?j:i;i=x[s?i[z]:z];if(c.isString(m)&&i)return i[m];return i}}else c.query(i).each(function(y){if(!(!y||q[y.nodeName])){if(y==n)y=e;var B=j,C;if(r(y)){if(!(C=y[z]))C=y[z]=c.guid()}else{C=
z;B=y}if(m&&o!==u){B[C]||(B[C]={});B[C][m]=o}}})},removeData:function(i,m){c.query(i).each(function(o){if(o){if(o==n)o=e;var s,x=j,y,B=r(o);if(B)s=o[z];else{x=o;s=z}if(s){y=x[s];if(m){if(y){delete y[m];c.isEmptyObject(y)&&p.removeData(o)}}else{if(B)o.removeAttribute&&o.removeAttribute(z);else try{delete o[z]}catch(C){}B&&delete x[s]}}}})}})});
KISSY.add("dom-class",function(c,u){function r(j,e,q,i){if(!(e=c.trim(e)))return i?false:u;j=c.query(j);var m=0,o=j.length;e=e.split(p);for(var s;m<o;m++){s=j[m];if(n._isElementNode(s)){s=q(s,e,e.length);if(s!==u)return s}}if(i)return false}var n=c.DOM,p=/[\.\s]\s*\.?/,z=/[\n\t]/g;c.mix(n,{hasClass:function(j,e){return r(j,e,function(q,i,m){if(q=q.className){q=" "+q+" ";for(var o=0,s=true;o<m;o++)if(q.indexOf(" "+i[o]+" ")<0){s=false;break}if(s)return true}},true)},addClass:function(j,e){r(j,e,function(q,
i,m){var o=q.className;if(o){var s=" "+o+" ";o=o;for(var x=0;x<m;x++)if(s.indexOf(" "+i[x]+" ")<0)o+=" "+i[x];q.className=c.trim(o)}else q.className=e})},removeClass:function(j,e){r(j,e,function(q,i,m){var o=q.className;if(o)if(m){o=(" "+o+" ").replace(z," ");for(var s=0,x;s<m;s++)for(x=" "+i[s]+" ";o.indexOf(x)>=0;)o=o.replace(x," ");q.className=c.trim(o)}else q.className=""})},replaceClass:function(j,e,q){n.removeClass(j,e);n.addClass(j,q)},toggleClass:function(j,e,q){var i=c.isBoolean(q),m;r(j,
e,function(o,s,x){for(var y=0,B;y<x;y++){B=s[y];m=i?!q:n.hasClass(o,B);n[m?"removeClass":"addClass"](o,B)}})}})});
KISSY.add("dom-attr",function(c,u){function r(a,b){return b&&b.nodeName.toUpperCase()===a.toUpperCase()}var n=c.UA,p=document.documentElement,z=!p.hasAttribute,j=p.textContent!==u?"textContent":"innerText",e=c.DOM,q=e._isElementNode,i=function(a){return e._nodeTypeIs(a,3)},m=/^(?:href|src|style)/,o=/^(?:href|src|colspan|rowspan)/,s=/\r/g,x=/^(?:radio|checkbox)/,y={readonly:"readOnly"},B={val:1,css:1,html:1,text:1,data:1,width:1,height:1,offset:1},C={tabindex:{getter:function(a){return a.tabIndex},
setter:function(a,b){if(isNaN(parseInt(b))){a.removeAttribute("tabindex");a.removeAttribute("tabIndex")}else a.tabIndex=b}},style:{getter:function(a){return a.style.cssText},setter:function(a,b){a.style.cssText=b}},checked:{setter:function(a,b){a.checked=!!b}},disabled:{setter:function(a,b){a.disabled=!!b}}};z&&c.mix(y,{"for":"htmlFor","class":"className"});c.mix(e,{attr:function(a,b,d,g){if(c.isPlainObject(b)){g=d;for(var t in b)e.attr(a,t,b[t],g)}else if(b=c.trim(b)){b=b.toLowerCase();if(g&&B[b])return e[b](a,
d);b=y[b]||b;var l=C[b];if(d===u){a=e.get(a);if(!q(a))return u;if(l&&l.getter)return l.getter(a);var h;m.test(b)||(h=a[b]);if(h===u)h=a.getAttribute(b);if(z)if(o.test(b))h=a.getAttribute(b,2);return h===null?u:h}c.each(e.query(a),function(v){if(q(v))l&&l.setter?l.setter(v,d):v.setAttribute(b,""+d)})}},removeAttr:function(a,b){c.each(c.query(a),function(d){if(q(d)){e.attr(d,b,"");d.removeAttribute(b)}})},val:function(a,b){if(b===u){var d=c.get(a);if(!q(d))return u;if(r("option",d))return(d.attributes.value||
{}).specified?d.value:d.text;if(r("select",d)){var g=d.selectedIndex;a=d.options;if(g<0)return null;else if(d.type==="select-one")return e.val(a[g]);d=[];for(var t=0,l=a.length;t<l;++t)a[t].selected&&d.push(e.val(a[t]));return d}if(n.webkit&&x.test(d.type))return d.getAttribute("value")===null?"on":d.value;return(d.value||"").replace(s,"")}c.each(c.query(a),function(h){if(r("select",h)){if(c.isNumber(b))b+="";var v=c.makeArray(b),f=h.options,k;t=0;for(l=f.length;t<l;++t){k=f[t];k.selected=c.inArray(e.val(k),
v)}if(!v.length)h.selectedIndex=-1}else if(q(h))h.value=b})},text:function(a,b){if(b===u){a=c.get(a);if(q(a))return a[j]||"";else if(i(a))return a.nodeValue}else c.each(c.query(a),function(d){if(q(d))d[j]=b;else if(i(d))d.nodeValue=b})}})});
KISSY.add("dom-style",function(c,u){function r(a,b){var d=c.get(a),g=b===q?d.offsetWidth:d.offsetHeight;c.each(b===q?["Left","Right"]:["Top","Bottom"],function(t){g-=parseFloat(p._getComputedStyle(d,"padding"+t))||0;g-=parseFloat(p._getComputedStyle(d,"border"+t+"Width"))||0});return g}function n(a,b,d){var g=d;if(d===i&&o.test(b)){g=0;if(c.inArray(p.css(a,"position"),["absolute","fixed"])){d=a[b==="left"?"offsetLeft":"offsetTop"];if(z.ie===8||z.opera)d-=m(p.css(a.offsetParent,"border-"+b+"-width"))||
0;g=d-(m(p.css(a,"margin-"+b))||0)}}return g}var p=c.DOM,z=c.UA,j=document,e=j.documentElement,q="width",i="auto",m=parseInt,o=/^(?:left|top)/,s=/^(?:width|height|top|left|right|bottom|margin|padding)/i,x=/-([a-z])/ig,y=function(a,b){return b.toUpperCase()},B={},C={};c.mix(p,{_CUSTOM_STYLES:B,_getComputedStyle:function(a,b){var d="",g=a.ownerDocument;if(a.style)d=g.defaultView.getComputedStyle(a,null)[b];return d},css:function(a,b,d){if(c.isPlainObject(b))for(var g in b)p.css(a,g,b[g]);else{if(b.indexOf("-")>
0)b=b.replace(x,y);b=B[b]||b;if(d===u){a=c.get(a);g="";if(a&&a.style){g=b.get?b.get(a):a.style[b];if(g===""&&!b.get)g=n(a,b,p._getComputedStyle(a,b))}return g===u?"":g}else{if(d===null||d==="")d="";else if(!isNaN(new Number(d))&&s.test(b))d+="px";(b===q||b==="height")&&parseFloat(d)<0||c.each(c.query(a),function(t){if(t&&t.style){b.set?b.set(t,d):(t.style[b]=d);if(d==="")t.style.cssText||t.removeAttribute("style")}})}}},width:function(a,b){if(b===u)return r(a,q);else p.css(a,q,b)},height:function(a,
b){if(b===u)return r(a,"height");else p.css(a,"height",b)},show:function(a){c.query(a).each(function(b){if(b){b.style.display=p.data(b,"display")||"";if(p.css(b,"display")==="none"){var d=b.tagName,g=C[d],t;if(!g){t=j.createElement(d);j.body.appendChild(t);g=p.css(t,"display");p.remove(t);C[d]=g}p.data(b,"display",g);b.style.display=g}}})},hide:function(a){c.query(a).each(function(b){if(b){var d=b.style,g=d.display;if(g!=="none"){g&&p.data(b,"display",g);d.display="none"}}})},toggle:function(a){c.query(a).each(function(b){if(b)b.style.display===
"none"?p.show(b):p.hide(b)})},addStyleSheet:function(a,b){var d;if(b&&(b=b.replace("#","")))d=c.get("#"+b);if(!d){d=p.create("<style>",{id:b});c.get("head").appendChild(d);if(d.styleSheet)d.styleSheet.cssText=a;else d.appendChild(j.createTextNode(a))}}});if(e.style.cssFloat!==u)B["float"]="cssFloat";else if(e.style.styleFloat!==u)B["float"]="styleFloat"});
KISSY.add("dom-style-ie",function(c,u){if(c.UA.ie){var r=c.DOM;c=document;var n=c.documentElement,p=r._CUSTOM_STYLES,z=/^-?\d+(?:px)?$/i,j=/^-?\d/,e=/^(?:width|height)$/;try{if(n.style.opacity===u&&n.filters)p.opacity={get:function(i){var m=100;try{m=i.filters["DXImageTransform.Microsoft.Alpha"].opacity}catch(o){try{m=i.filters("alpha").opacity}catch(s){}}return m/100+""},set:function(i,m){var o=i.style;i=(i.currentStyle||0).filter||"";o.zoom=1;if(i)if(i=i.replace(/alpha\(opacity=.+\)/ig,""))i+=", ";
o.filter=i+"alpha(opacity="+m*100+")";if(m===1)o.filter=""}}}catch(q){}if(!(c.defaultView||{}).getComputedStyle&&n.currentStyle)r._getComputedStyle=function(i,m){var o=i.style,s=i.currentStyle[m];if(e.test(m))s=r[m](i)+"px";else if(!z.test(s)&&j.test(s)){var x=o.left,y=i.runtimeStyle.left;i.runtimeStyle.left=i.currentStyle.left;o.left=m==="fontSize"?"1em":s||0;s=o.pixelLeft+"px";o.left=x;i.runtimeStyle.left=y}return s}}});
KISSY.add("dom-offset",function(c,u){function r(l){var h=0,v=0,f=m(l[C]);if(l[t]){l=l[t]();h=l[a];v=l[b];if(z.mobile!=="apple"){h+=p[d](f);v+=p[g](f)}}return{left:h,top:v}}function n(l,h){if(p.css(l,y)==="static")l.style[y]=B;var v=r(l),f={},k,w;for(w in h){k=x(p.css(l,w),10)||0;f[w]=k+h[w]-v[w]}p.css(l,f)}var p=c.DOM,z=c.UA,j=window,e=document,q=p._isElementNode,i=p._nodeTypeIs,m=p._getWin,o=e.compatMode==="CSS1Compat",s=Math.max,x=parseInt,y="position",B="relative",C="ownerDocument",a="left",b=
"top",d="scrollLeft",g="scrollTop",t="getBoundingClientRect";c.mix(p,{offset:function(l,h){if(!(l=c.get(l))||!l[C])return null;if(h===u)return r(l);n(l,h)},scrollIntoView:function(l,h,v,f){if((l=c.get(l))&&l[C]){f=f===u?true:!!f;v=v===u?true:!!v;if(!h||h===j)return l.scrollIntoView(v);h=c.get(h);if(i(h,9))h=m(h);var k=h&&"scrollTo"in h&&h.document,w=p.offset(l),A=k?{left:p.scrollLeft(h),top:p.scrollTop(h)}:p.offset(h),D={left:w[a]-A[a],top:w[b]-A[b]};w=k?p.viewportHeight(h):h.clientHeight;A=k?p.viewportWidth(h):
h.clientWidth;var G=p[d](h),E=p[g](h),F=G+A,M=E+w,I=l.offsetHeight;l=l.offsetWidth;var H=D.left+G-(x(p.css(h,"borderLeftWidth"))||0);D=D.top+E-(x(p.css(h,"borderTopWidth"))||0);var N=H+l,J=D+I,K,L;if(I>w||D<E||v)K=D;else if(J>M)K=J-w;if(f)if(l>A||H<G||v)L=H;else if(N>F)L=N-A;if(k){if(K!==u||L!==u)h.scrollTo(L,K)}else{if(K!==u)h[g]=K;if(L!==u)h[d]=L}}}});c.each(["Left","Top"],function(l,h){var v="scroll"+l;p[v]=function(f){var k=0,w=m(f),A;if(w&&(A=w.document))k=w[h?"pageYOffset":"pageXOffset"]||A.documentElement[v]||
A.body[v];else if(q(f=c.get(f)))k=f[v];return k}});c.each(["Width","Height"],function(l){p["doc"+l]=function(h){h=h||e;return s(o?h.documentElement["scroll"+l]:h.body["scroll"+l],p["viewport"+l](h))};p["viewport"+l]=function(h){var v="inner"+l;h=m(h);var f=h.document;return v in h?h[v]:o?f.documentElement["client"+l]:f.body["client"+l]}})});
KISSY.add("dom-traversal",function(c,u){function r(j,e,q,i){if(!(j=c.get(j)))return null;if(e===u)e=1;var m=null,o,s;if(c.isNumber(e)&&e>=0){if(e===0)return j;o=0;s=e;e=function(){return++o===s}}for(;j=j[q];)if(z(j)&&(!e||p.test(j,e))&&(!i||i(j))){m=j;break}return m}function n(j,e,q){var i=[];var m=j=c.get(j);if(j&&q)m=j.parentNode;if(m){q=0;for(m=m.firstChild;m;m=m.nextSibling)if(z(m)&&m!==j&&(!e||p.test(m,e)))i[q++]=m}return i}var p=c.DOM,z=p._isElementNode;c.mix(p,{parent:function(j,e){return r(j,
e,"parentNode",function(q){return q.nodeType!=11})},next:function(j,e){return r(j,e,"nextSibling")},prev:function(j,e){return r(j,e,"previousSibling")},siblings:function(j,e){return n(j,e,true)},children:function(j,e){return n(j,e)},contains:function(j,e){var q=false;if((j=c.get(j))&&(e=c.get(e)))if(j.contains){if(e.nodeType===3){e=e.parentNode;if(e===j)return true}if(e)return j.contains(e)}else if(j.compareDocumentPosition)return!!(j.compareDocumentPosition(e)&16);else for(;!q&&(e=e.parentNode);)q=
e==j;return q}})});
KISSY.add("dom-create",function(c,u){function r(f,k){s(f)&&c.isPlainObject(k)&&q.attr(f,k,true);return f}function n(f,k){var w=null,A;if(f&&(f.push||f.item)&&f[0]){k=k||f[0].ownerDocument;w=k.createDocumentFragment();if(f.item)f=c.makeArray(f);k=0;for(A=f.length;k<A;k++)w.appendChild(f[k])}return w}function p(f){var k=f.cloneNode(true);if(i.ie<8)k.innerHTML=f.innerHTML;return k}function z(f,k,w,A){if(w){var D=c.guid("ks-tmp-"),G=new RegExp(C);k+='<span id="'+D+'"></span>';c.available(D,function(){var E=
c.get("head"),F,M,I,H,N,J;for(G.lastIndex=0;F=G.exec(k);)if((I=(M=F[1])?M.match(b):false)&&I[2]){F=e.createElement("script");F.src=I[2];if((H=M.match(d))&&H[2])F.charset=H[2];F.async=true;E.appendChild(F)}else if((J=F[2])&&J.length>0)c.globalEval(J);(N=e.getElementById(D))&&q.remove(N);c.isFunction(A)&&A()});j(f,k)}else{j(f,k);c.isFunction(A)&&A()}}function j(f,k){k=(k+"").replace(C,"");try{f.innerHTML=k}catch(w){for(;f.firstChild;)f.removeChild(f.firstChild);k&&f.appendChild(q.create(k))}}var e=
document,q=c.DOM,i=c.UA,m=i.ie,o=q._nodeTypeIs,s=q._isElementNode,x=q._isKSNode,y=e.createElement("div"),B=/<(\w+)/,C=/<script([^>]*)>([^<]*(?:(?!<\/script>)<[^<]*)*)<\/script>/ig,a=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,b=/\ssrc=(['"])(.*?)\1/i,d=/\scharset=(['"])(.*?)\1/i;c.mix(q,{create:function(f,k,w){if(o(f,1)||o(f,3))return p(f);if(x(f))return p(f[0]);if(!(f=c.trim(f)))return null;var A=null;A=q._creators;var D,G="div",E;if(D=a.exec(f))A=(w||e).createElement(D[1]);else{if((D=B.exec(f))&&(E=D[1])&&c.isFunction(A[E=
E.toLowerCase()]))G=E;f=A[G](f,w).childNodes;A=f.length===1?f[0].parentNode.removeChild(f[0]):n(f,w||e)}return r(A,k)},_creators:{div:function(f,k){k=k?k.createElement("div"):y;k.innerHTML=f;return k}},html:function(f,k,w,A){if(k===u){f=c.get(f);if(s(f))return f.innerHTML}else c.each(c.query(f),function(D){s(D)&&z(D,k,w,A)})},remove:function(f){c.each(c.query(f),function(k){s(k)&&k.parentNode&&k.parentNode.removeChild(k)})}});if(m||i.gecko||i.webkit){var g=q._creators,t=q.create,l=/(?:\/(?:thead|tfoot|caption|col|colgroup)>)+\s*<tbody/,
h={option:"select",td:"tr",tr:"tbody",tbody:"table",col:"colgroup",legend:"fieldset"};for(var v in h)(function(f){g[v]=function(k,w){return t("<"+f+">"+k+"</"+f+">",null,w)}})(h[v]);if(m){g.script=function(f,k){k=k?k.createElement("div"):y;k.innerHTML="-"+f;k.removeChild(k.firstChild);return k};if(m<8)g.tbody=function(f,k){k=t("<table>"+f+"</table>",null,k);var w=k.children.tags("tbody")[0];k.children.length>1&&w&&!l.test(f)&&w.parentNode.removeChild(w);return k}}c.mix(g,{optgroup:g.option,th:g.td,
thead:g.tbody,tfoot:g.tbody,caption:g.tbody,colgroup:g.tbody})}});
KISSY.add("dom-insertion",function(c){var u=c.DOM;c.mix(u,{insertBefore:function(r,n){if((r=c.get(r))&&(n=c.get(n))&&n.parentNode)n.parentNode.insertBefore(r,n);return r},insertAfter:function(r,n){if((r=c.get(r))&&(n=c.get(n))&&n.parentNode)n.nextSibling?n.parentNode.insertBefore(r,n.nextSibling):n.parentNode.appendChild(r);return r},append:function(r,n){if((r=c.get(r))&&(n=c.get(n)))n.appendChild&&n.appendChild(r)},prepend:function(r,n){if((r=c.get(r))&&(n=c.get(n)))n.firstChild?u.insertBefore(r,
n.firstChild):n.appendChild(r)}})});
