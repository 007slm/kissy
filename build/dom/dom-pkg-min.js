/*
Copyright 2011, KISSY UI Library v1.1.8dev
MIT Licensed
build time: ${build.time}
*/
KISSY.add("dom",function(a,x){function p(h,q){return h&&h.nodeType===q}a.DOM={_isElementNode:function(h){return p(h,1)},_isKSNode:function(h){return a.Node&&p(h,a.Node.TYPE)},_getWin:function(h){return h&&"scrollTo"in h&&h.document?h:p(h,9)?h.defaultView||h.parentWindow:h===x?window:false},_nodeTypeIs:p}});
KISSY.add("selector",function(a,x){function p(e,b){var d,f,c=[],m;b=h(b);if(a.isString(e)){e=a.trim(e);if(y.test(e)){if(f=q(e.slice(1),b))c=[f]}else if(d=o.exec(e)){f=d[1];m=d[2];d=d[3];if(b=f?q(f,b):b)if(d)if(!f||e.indexOf(k)!==-1)c=g(d,m,b);else{if((f=q(f,b))&&w.hasClass(f,d))c=[f]}else if(m)c=z(m,b)}else if(a.ExternalSelector)return a.ExternalSelector(e,b);else j(e)}else if(e&&(e[s]||e[t]))c=e[s]?[e[s]()]:e[t]();else if(e&&(a.isArray(e)||e&&!e.nodeType&&e.item&&!e.setTimeout))c=e;else if(e)c=[e];
if(c&&!c.nodeType&&c.item&&!c.setTimeout)c=a.makeArray(c);c.each=function(v,i){return a.each(c,v,i)};return c}function h(e){if(e===x)e=l;else if(a.isString(e)&&y.test(e))e=q(e.slice(1),l);else if(e&&e.nodeType!==1&&e.nodeType!==9)e=null;return e}function q(e,b){if(b.nodeType!==9)b=b.ownerDocument;return b.getElementById(e)}function z(e,b){return b.getElementsByTagName(e)}function g(e,b,d){d=e=d.getElementsByClassName(e);var f=0,c=0,m=e.length,v;if(b&&b!==n){d=[];for(b=b.toUpperCase();f<m;++f){v=e[f];
if(v.tagName===b)d[c++]=v}}return d}function j(e){a.error("Unsupported selector: "+e)}var l=document,w=a.DOM,k=" ",n="*",s="getDOMNode",t=s+"s",y=/^#[\w-]+$/,o=/^(?:#([\w-]+))?\s*([\w-]+|\*)?\.?([\w-]+)?$/;(function(){var e=l.createElement("div");e.appendChild(l.createComment(""));if(e.getElementsByTagName(n).length>0)z=function(b,d){var f=d.getElementsByTagName(b);if(b===n){for(var c=[],m=0,v=0,i;i=f[m++];)if(i.nodeType===1)c[v++]=i;f=c}return f}})();l.getElementsByClassName||(g=l.querySelectorAll?
function(e,b,d){return d.querySelectorAll((b?b:"")+"."+e)}:function(e,b,d){b=d.getElementsByTagName(b||n);d=[];var f=0,c=0,m=b.length,v,i;for(e=k+e+k;f<m;++f){v=b[f];if((i=v.className)&&(k+i+k).indexOf(e)>-1)d[c++]=v}return d});a.query=p;a.get=function(e,b){return p(e,b)[0]||null};a.mix(w,{query:p,get:a.get,filter:function(e,b){var d=p(e),f,c,m,v=[];if(a.isString(b)&&(f=o.exec(b))&&!f[1]){c=f[2];m=f[3];b=function(i){return!(c&&i.tagName!==c.toUpperCase()||m&&!w.hasClass(i,m))}}if(a.isFunction(b))v=
a.filter(d,b);else if(b&&a.ExternalSelector)v=a.ExternalSelector._filter(e,b+"");else j(b);return v},test:function(e,b){var d=p(e);return d.length&&w.filter(d,b).length===d.length}})});
KISSY.add("dom-data",function(a,x){var p=window,h=a.DOM,q="_ks_data_"+a.now(),z={},g={},j={EMBED:1,OBJECT:1,APPLET:1};a.mix(h,{data:function(l,w,k){if(a.isPlainObject(w))for(var n in w)h.data(l,n,w[n]);else if(k===x){l=a.get(l);var s;if(!(!l||j[l.nodeName])){if(l==p)l=g;s=(n=l&&l.nodeType)?z:l;l=s[n?l[q]:q];if(a.isString(w)&&l)return l[w];return l}}else a.query(l).each(function(t){if(!(!t||j[t.nodeName])){if(t==p)t=g;var y=z,o;if(t&&t.nodeType){if(!(o=t[q]))o=t[q]=a.guid()}else{o=q;y=t}if(w&&k!==
x){y[o]||(y[o]={});y[o][w]=k}}})},removeData:function(l,w){a.query(l).each(function(k){if(k){if(k==p)k=g;var n,s=z,t,y=k&&k.nodeType;if(y)n=k[q];else{s=k;n=q}if(n){t=s[n];if(w){if(t){delete t[w];a.isEmptyObject(t)&&h.removeData(k)}}else{if(y)k.removeAttribute&&k.removeAttribute(q);else try{delete k[q]}catch(o){}y&&delete s[n]}}}})}})});
KISSY.add("dom-class",function(a,x){function p(g,j,l,w){if(!(j=a.trim(j)))return w?false:x;g=a.query(g);var k=0,n=g.length;j=j.split(q);for(var s;k<n;k++){s=g[k];if(h._isElementNode(s)){s=l(s,j,j.length);if(s!==x)return s}}if(w)return false}var h=a.DOM,q=/[\.\s]\s*\.?/,z=/[\n\t]/g;a.mix(h,{hasClass:function(g,j){return p(g,j,function(l,w,k){if(l=l.className){l=" "+l+" ";for(var n=0,s=true;n<k;n++)if(l.indexOf(" "+w[n]+" ")<0){s=false;break}if(s)return true}},true)},addClass:function(g,j){p(g,j,function(l,
w,k){var n=l.className;if(n){var s=" "+n+" ";n=n;for(var t=0;t<k;t++)if(s.indexOf(" "+w[t]+" ")<0)n+=" "+w[t];l.className=a.trim(n)}else l.className=j})},removeClass:function(g,j){p(g,j,function(l,w,k){var n=l.className;if(n)if(k){n=(" "+n+" ").replace(z," ");for(var s=0,t;s<k;s++)for(t=" "+w[s]+" ";n.indexOf(t)>=0;)n=n.replace(t," ");l.className=a.trim(n)}else l.className=""})},replaceClass:function(g,j,l){h.removeClass(g,j);h.addClass(g,l)},toggleClass:function(g,j,l){var w=a.isBoolean(l),k;p(g,
j,function(n,s,t){for(var y=0,o;y<t;y++){o=s[y];k=w?!l:h.hasClass(n,o);h[k?"removeClass":"addClass"](n,o)}})}})});
KISSY.add("dom-attr",function(a,x){var p=a.UA,h=document.documentElement,q=!h.hasAttribute,z=h.textContent!==x?"textContent":"innerText",g=a.DOM,j=g._isElementNode,l=/^(?:href|src|style)/,w=/^(?:href|src|colspan|rowspan)/,k=/\r/g,n=/^(?:radio|checkbox)/,s={readonly:"readOnly"},t={val:1,css:1,html:1,text:1,data:1,width:1,height:1,offset:1},y={tabindex:{getter:function(o){return o.tabIndex},setter:function(o,e){if(isNaN(parseInt(e))){o.removeAttribute("tabindex");o.removeAttribute("tabIndex")}else o.tabIndex=
e}},style:{getter:function(o){return o.style.cssText},setter:function(o,e){o.style.cssText=e}},checked:{setter:function(o,e){o.checked=!!e}},disabled:{setter:function(o,e){o.disabled=!!e}}};q&&a.mix(s,{"for":"htmlFor","class":"className"});a.mix(g,{attr:function(o,e,b,d){if(a.isPlainObject(e)){d=b;for(var f in e)g.attr(o,f,e[f],d)}else if(e=a.trim(e)){e=e.toLowerCase();if(d&&t[e])return g[e](o,b);e=s[e]||e;var c=y[e];if(b===x){o=g.get(o);if(!j(o))return x;if(c&&c.getter)return c.getter(o);var m;l.test(e)||
(m=o[e]);if(m===x)m=o.getAttribute(e);if(q)if(w.test(e))m=o.getAttribute(e,2);return m===null?x:m}a.each(g.query(o),function(v){if(j(v))c&&c.setter?c.setter(v,b):v.setAttribute(e,""+b)})}},removeAttr:function(o,e){a.each(a.query(o),function(b){if(j(b)){g.attr(b,e,"");b.removeAttribute(e)}})},val:function(o,e){if(e===x){var b=a.get(o);if(!j(b))return x;if(b&&b.nodeName.toUpperCase()==="option".toUpperCase())return(b.attributes.value||{}).specified?b.value:b.text;if(b&&b.nodeName.toUpperCase()==="select".toUpperCase()){var d=
b.selectedIndex,f=b.options;if(d<0)return null;else if(b.type==="select-one")return g.val(f[d]);b=[];for(var c=0,m=f.length;c<m;++c)f[c].selected&&b.push(g.val(f[c]));return b}if(p.webkit&&n.test(b.type))return b.getAttribute("value")===null?"on":b.value;return(b.value||"").replace(k,"")}a.each(a.query(o),function(v){if(v&&v.nodeName.toUpperCase()==="select".toUpperCase()){if(a.isNumber(e))e+="";var i=a.makeArray(e),u=v.options,r;c=0;for(m=u.length;c<m;++c){r=u[c];r.selected=a.inArray(g.val(r),i)}if(!i.length)v.selectedIndex=
-1}else if(j(v))v.value=e})},text:function(o,e){if(e===x){var b=a.get(o);if(j(b))return b[z]||"";else if(g._nodeTypeIs(b,3))return b.nodeValue}else a.each(a.query(o),function(d){if(j(d))d[z]=e;else if(g._nodeTypeIs(d,3))d.nodeValue=e})}})});
KISSY.add("dom-style",function(a,x){function p(b,d){var f=a.get(b),c=d===l?f.offsetWidth:f.offsetHeight;a.each(d===l?["Left","Right"]:["Top","Bottom"],function(m){c-=parseFloat(q._getComputedStyle(f,"padding"+m))||0;c-=parseFloat(q._getComputedStyle(f,"border"+m+"Width"))||0});return c}function h(b,d,f){var c=f;if(f===w&&n.test(d)){c=0;if(a.inArray(q.css(b,"position"),["absolute","fixed"])){f=b[d==="left"?"offsetLeft":"offsetTop"];if(z.ie===8||z.opera)f-=k(q.css(b.offsetParent,"border-"+d+"-width"))||
0;c=f-(k(q.css(b,"margin-"+d))||0)}}return c}var q=a.DOM,z=a.UA,g=document,j=g.documentElement,l="width",w="auto",k=parseInt,n=/^(?:left|top)/,s=/^(?:width|height|top|left|right|bottom|margin|padding)/i,t=/-([a-z])/ig,y=function(b,d){return d.toUpperCase()},o={},e={};a.mix(q,{_CUSTOM_STYLES:o,_getComputedStyle:function(b,d){var f="",c=b.ownerDocument;if(b.style)f=c.defaultView.getComputedStyle(b,null)[d];return f},css:function(b,d,f){if(a.isPlainObject(d))for(var c in d)q.css(b,c,d[c]);else{if(d.indexOf("-")>
0)d=d.replace(t,y);d=o[d]||d;if(f===x){b=a.get(b);c="";if(b&&b.style){c=d.get?d.get(b):b.style[d];if(c===""&&!d.get)c=h(b,d,q._getComputedStyle(b,d))}return c===x?"":c}else{if(f===null||f==="")f="";else if(!isNaN(new Number(f))&&s.test(d))f+="px";(d===l||d==="height")&&parseFloat(f)<0||a.each(a.query(b),function(m){if(m&&m.style){d.set?d.set(m,f):m.style[d]=f;if(f==="")m.style.cssText||m.removeAttribute("style")}})}}},width:function(b,d){if(d===x)return p(b,l);else q.css(b,l,d)},height:function(b,
d){if(d===x)return p(b,"height");else q.css(b,"height",d)},show:function(b){a.query(b).each(function(d){if(d){d.style.display=q.data(d,"display")||"";if(q.css(d,"display")==="none"){var f=d.tagName,c=e[f],m;if(!c){m=g.createElement(f);g.body.appendChild(m);c=q.css(m,"display");q.remove(m);e[f]=c}q.data(d,"display",c);d.style.display=c}}})},hide:function(b){a.query(b).each(function(d){if(d){var f=d.style,c=f.display;if(c!=="none"){c&&q.data(d,"display",c);f.display="none"}}})},toggle:function(b){a.query(b).each(function(d){if(d)d.style.display===
"none"?q.show(d):q.hide(d)})},addStyleSheet:function(b,d){var f;if(d&&(d=d.replace("#","")))f=a.get("#"+d);if(!f){f=q.create("<style>",{id:d});a.get("head").appendChild(f);if(f.styleSheet)f.styleSheet.cssText=b;else f.appendChild(g.createTextNode(b))}}});if(j.style.cssFloat!==x)o["float"]="cssFloat";else if(j.style.styleFloat!==x)o["float"]="styleFloat"});
KISSY.add("dom-style-ie",function(a,x){if(a.UA.ie){var p=a.DOM,h=document,q=h.documentElement,z=p._CUSTOM_STYLES,g=/^-?\d+(?:px)?$/i,j=/^-?\d/,l=/^(?:width|height)$/;try{if(q.style.opacity===x&&q.filters)z.opacity={get:function(k){var n=100;try{n=k.filters["DXImageTransform.Microsoft.Alpha"].opacity}catch(s){try{n=k.filters("alpha").opacity}catch(t){}}return n/100+""},set:function(k,n){var s=k.style,t=(k.currentStyle||0).filter||"";s.zoom=1;if(t)t=t.replace(/alpha\(opacity=.+\)/ig,"");if(t&&n!=1)t+=
", ";s.filter=t+(n!=1?"alpha(opacity="+n*100+")":"")}}}catch(w){}if(!(h.defaultView||{}).getComputedStyle&&q.currentStyle)p._getComputedStyle=function(k,n){var s=k.style,t=k.currentStyle[n];if(l.test(n))t=p[n](k)+"px";else if(!g.test(t)&&j.test(t)){var y=s.left,o=k.runtimeStyle.left;k.runtimeStyle.left=k.currentStyle.left;s.left=n==="fontSize"?"1em":t||0;t=s.pixelLeft+"px";s.left=y;k.runtimeStyle.left=o}return t}}});
KISSY.add("dom-offset",function(a,x){function p(f){var c=0,m=0,v=w(f[t]);if(f[d]){f=f[d]();c=f[y];m=f[o];if(q.mobile!=="apple"){c+=h[e](v);m+=h[b](v)}}return{left:c,top:m}}var h=a.DOM,q=a.UA,z=window,g=document,j=h._isElementNode,l=h._nodeTypeIs,w=h._getWin,k=g.compatMode==="CSS1Compat",n=Math.max,s=parseInt,t="ownerDocument",y="left",o="top",e="scrollLeft",b="scrollTop",d="getBoundingClientRect";a.mix(h,{offset:function(f,c){if(!(f=a.get(f))||!f[t])return null;if(c===x)return p(f);var m=f;if(h.css(m,
"position")==="static")m.style.position="relative";var v=p(m),i={},u,r;for(r in c){u=s(h.css(m,r),10)||0;i[r]=u+c[r]-v[r]}h.css(m,i)},scrollIntoView:function(f,c,m,v){if((f=a.get(f))&&f[t]){v=v===x?true:!!v;m=m===x?true:!!m;if(!c||c===z)return f.scrollIntoView(m);c=a.get(c);if(l(c,9))c=w(c);var i=c&&"scrollTo"in c&&c.document,u=h.offset(f),r=i?{left:h.scrollLeft(c),top:h.scrollTop(c)}:h.offset(c),A={left:u[y]-r[y],top:u[o]-r[o]};u=i?h.viewportHeight(c):c.clientHeight;r=i?h.viewportWidth(c):c.clientWidth;
var C=h[e](c),F=h[b](c),B=C+r,D=F+u,H=f.offsetHeight;f=f.offsetWidth;var G=A.left+C-(s(h.css(c,"borderLeftWidth"))||0);A=A.top+F-(s(h.css(c,"borderTopWidth"))||0);var I=G+f,K=A+H,E,J;if(H>u||A<F||m)E=A;else if(K>D)E=K-u;if(v)if(f>r||G<C||m)J=G;else if(I>B)J=I-r;if(i){if(E!==x||J!==x)c.scrollTo(J,E)}else{if(E!==x)c[b]=E;if(J!==x)c[e]=J}}}});a.each(["Left","Top"],function(f,c){var m="scroll"+f;h[m]=function(v){var i=0,u=w(v),r;if(u&&(r=u.document))i=u[c?"pageYOffset":"pageXOffset"]||r.documentElement[m]||
r.body[m];else if(j(v=a.get(v)))i=v[m];return i}});a.each(["Width","Height"],function(f){h["doc"+f]=function(c){c=c||g;return n(k?c.documentElement["scroll"+f]:c.body["scroll"+f],h["viewport"+f](c))};h["viewport"+f]=function(c){var m="inner"+f;c=w(c);var v=c.document;return m in c?c[m]:k?v.documentElement["client"+f]:v.body["client"+f]}})});
KISSY.add("dom-traversal",function(a,x){function p(g,j,l,w){if(!(g=a.get(g)))return null;if(j===x)j=1;var k=null,n,s;if(a.isNumber(j)&&j>=0){if(j===0)return g;n=0;s=j;j=function(){return++n===s}}for(;g=g[l];)if(z(g)&&(!j||q.test(g,j))&&(!w||w(g))){k=g;break}return k}function h(g,j,l){var w=[];var k=g=a.get(g);if(g&&l)k=g.parentNode;if(k){l=0;for(k=k.firstChild;k;k=k.nextSibling)if(z(k)&&k!==g&&(!j||q.test(k,j)))w[l++]=k}return w}var q=a.DOM,z=q._isElementNode;a.mix(q,{parent:function(g,j){return p(g,
j,"parentNode",function(l){return l.nodeType!=11})},next:function(g,j){return p(g,j,"nextSibling")},prev:function(g,j){return p(g,j,"previousSibling")},siblings:function(g,j){return h(g,j,true)},children:function(g,j){return h(g,j)},contains:function(g,j){var l=false;if((g=a.get(g))&&(j=a.get(j)))if(g.contains){if(j.nodeType===3){j=j.parentNode;if(j===g)return true}if(j)return g.contains(j)}else if(g.compareDocumentPosition)return!!(g.compareDocumentPosition(j)&16);else for(;!l&&(j=j.parentNode);)l=
j==g;return l}})});
KISSY.add("dom-create",function(a,x){function p(i){var u=i.cloneNode(true);if(j.ie<8)u.innerHTML=i.innerHTML;return u}function h(i,u,r,A){if(r){var C=a.guid("ks-tmp-"),F=RegExp(y);u+='<span id="'+C+'"></span>';a.available(C,function(){var B=a.get("head"),D,H,G,I,K,E;for(F.lastIndex=0;D=F.exec(u);)if((G=(H=D[1])?H.match(e):false)&&G[2]){D=z.createElement("script");D.src=G[2];if((I=H.match(b))&&I[2])D.charset=I[2];D.async=true;B.appendChild(D)}else if((E=D[2])&&E.length>0)a.globalEval(E);(K=z.getElementById(C))&&
g.remove(K);a.isFunction(A)&&A()});q(i,u)}else{q(i,u);a.isFunction(A)&&A()}}function q(i,u){u=(u+"").replace(y,"");try{i.innerHTML=u}catch(r){for(;i.firstChild;)i.removeChild(i.firstChild);u&&i.appendChild(g.create(u))}}var z=document,g=a.DOM,j=a.UA,l=j.ie,w=g._nodeTypeIs,k=g._isElementNode,n=g._isKSNode,s=z.createElement("div"),t=/<(\w+)/,y=/<script([^>]*)>([^<]*(?:(?!<\/script>)<[^<]*)*)<\/script>/ig,o=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,e=/\ssrc=(['"])(.*?)\1/i,b=/\scharset=(['"])(.*?)\1/i;a.mix(g,{create:function(i,
u,r){if(w(i,1)||w(i,3))return p(i);if(n(i))return p(i[0]);if(!(i=a.trim(i)))return null;var A=null;A=g._creators;var C,F="div",B;if(C=o.exec(i))A=(r||z).createElement(C[1]);else{if((C=t.exec(i))&&(B=C[1])&&a.isFunction(A[B=B.toLowerCase()]))F=B;i=A[F](i,r).childNodes;if(i.length===1)r=i[0].parentNode.removeChild(i[0]);else{i=i;B=r||z;r=null;if(i&&(i.push||i.item)&&i[0]){B=B||i[0].ownerDocument;r=B.createDocumentFragment();if(i.item)i=a.makeArray(i);B=0;for(A=i.length;B<A;B++)r.appendChild(i[B])}r=
r}A=r}r=A;k(r)&&a.isPlainObject(u)&&g.attr(r,u,true);return r},_creators:{div:function(i,u){var r=u?u.createElement("div"):s;r.innerHTML=i;return r}},html:function(i,u,r,A){if(u===x){i=a.get(i);if(k(i))return i.innerHTML}else a.each(a.query(i),function(C){k(C)&&h(C,u,r,A)})},remove:function(i){a.each(a.query(i),function(u){k(u)&&u.parentNode&&u.parentNode.removeChild(u)})}});if(l||j.gecko||j.webkit){var d=g._creators,f=g.create,c=/(?:\/(?:thead|tfoot|caption|col|colgroup)>)+\s*<tbody/,m={option:"select",
td:"tr",tr:"tbody",tbody:"table",col:"colgroup",legend:"fieldset"},v;for(v in m)(function(i){d[v]=function(u,r){return f("<"+i+">"+u+"</"+i+">",null,r)}})(m[v]);if(l){d.script=function(i,u){var r=u?u.createElement("div"):s;r.innerHTML="-"+i;r.removeChild(r.firstChild);return r};if(l<8)d.tbody=function(i,u){var r=f("<table>"+i+"</table>",null,u),A=r.children.tags("tbody")[0];r.children.length>1&&A&&!c.test(i)&&A.parentNode.removeChild(A);return r}}a.mix(d,{optgroup:d.option,th:d.td,thead:d.tbody,tfoot:d.tbody,
caption:d.tbody,colgroup:d.tbody})}});
KISSY.add("dom-insertion",function(a){var x=a.DOM;a.mix(x,{insertBefore:function(p,h){if((p=a.get(p))&&(h=a.get(h))&&h.parentNode)h.parentNode.insertBefore(p,h);return p},insertAfter:function(p,h){if((p=a.get(p))&&(h=a.get(h))&&h.parentNode)h.nextSibling?h.parentNode.insertBefore(p,h.nextSibling):h.parentNode.appendChild(p);return p},append:function(p,h){if((p=a.get(p))&&(h=a.get(h)))h.appendChild&&h.appendChild(p)},prepend:function(p,h){if((p=a.get(p))&&(h=a.get(h)))h.firstChild?x.insertBefore(p,
h.firstChild):h.appendChild(p)}})});
