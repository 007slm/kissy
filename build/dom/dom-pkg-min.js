/*
Copyright 2010, KISSY UI Library v1.1.2dev
MIT Licensed
build time: ${build.time}
*/
KISSY.add("dom",function(c,s){function q(u,n){return u&&u.nodeType===n}c.DOM={_isElementNode:function(u){return q(u,1)},_isKSNode:function(u){return c.Node&&q(u,c.Node.TYPE)},_getWin:function(u){return u&&"scrollTo"in u&&u.document?u:q(u,9)?u.defaultView||u.parentWindow:u===s?window:false},_nodeTypeIs:q}});
KISSY.add("selector",function(c,s){function q(a,b){var e,g=[],p,y;b=u(b);if(c.isString(a)){a=c.trim(a);if(B.test(a)){if(a=n(a.slice(1),b))g=[a]}else if(e=r.exec(a)){p=e[1];y=e[2];e=e[3];if(b=p?n(p,b):b)if(e)if(!p||a.indexOf(k)!==-1)g=j(e,y,b);else{if((a=n(p,b))&&v.hasClass(a,e))g=[a]}else if(y)g=C(y,b)}else if(c.ExternalSelector)return c.ExternalSelector(a,b);else f(a)}else if(a&&(a[t]||a[x]))g=a[t]?[a[t]()]:a[x]();else if(a&&a.nodeType)g=[a];else if(a&&(c.isArray(a)||a.item))g=a;if(g.item)g=c.makeArray(g);
g.each=function(l,m){return c.each(g,l,m)};return g}function u(a){if(a===s)a=i;else if(c.isString(a)&&B.test(a))a=n(a.slice(1),i);else if(a&&a.nodeType!==1&&a.nodeType!==9)a=null;return a}function n(a,b){if(b.nodeType!==9)b=b.ownerDocument;return b.getElementById(a)}function C(a,b){return b.getElementsByTagName(a)}function j(a,b,e){e=a=e.getElementsByClassName(a);var g=0,p=0,y=a.length,l;if(b&&b!==o){e=[];for(b=b.toUpperCase();g<y;++g){l=a[g];if(l.tagName===b)e[p++]=l}}return e}function f(a){c.error("Unsupported selector: "+
a)}var i=document,v=c.DOM,k=" ",o="*",t="getDOMNode",x=t+"s",B=/^#[\w-]+$/,r=/^(?:#([\w-]+))?\s*([\w-]+|\*)?\.?([\w-]+)?$/;(function(){var a=i.createElement("div");a.appendChild(i.createComment(""));if(a.getElementsByTagName(o).length>0)C=function(b,e){e=e.getElementsByTagName(b);if(b===o){b=[];for(var g=0,p=0,y;y=e[g++];)if(y.nodeType===1)b[p++]=y;e=b}return e}})();i.getElementsByClassName||(j=i.querySelectorAll?function(a,b,e){return e.querySelectorAll((b?b:"")+"."+a)}:function(a,b,e){b=e.getElementsByTagName(b||
o);e=[];var g=0,p=0,y=b.length,l,m;for(a=k+a+k;g<y;++g){l=b[g];if((m=l.className)&&(k+m+k).indexOf(a)>-1)e[p++]=l}return e});c.query=q;c.get=function(a,b){return q(a,b)[0]||null};c.mix(v,{query:q,get:c.get,filter:function(a,b){var e=q(a),g,p,y,l=[];if(c.isString(b)&&(g=r.exec(b))&&!g[1]){p=g[2];y=g[3];b=function(m){return!(p&&m.tagName!==p.toUpperCase()||y&&!v.hasClass(m,y))}}if(c.isFunction(b))l=c.filter(e,b);else if(b&&c.ExternalSelector)l=c.ExternalSelector._filter(a,b);else f(b);return l},test:function(a,
b){a=q(a);return v.filter(a,b).length===a.length}})});
KISSY.add("dom-class",function(c,s){function q(j,f,i,v){if(!(f=c.trim(f)))return v?false:s;j=c.query(j);var k=0,o=j.length;f=f.split(n);for(var t;k<o;k++){t=j[k];if(u._isElementNode(t)){t=i(t,f,f.length);if(t!==s)return t}}if(v)return false}var u=c.DOM,n=/[\.\s]\s*\.?/,C=/[\n\t]/g;c.mix(u,{hasClass:function(j,f){return q(j,f,function(i,v,k){if(i=i.className){i=" "+i+" ";for(var o=0,t=true;o<k;o++)if(i.indexOf(" "+v[o]+" ")<0){t=false;break}if(t)return true}},true)},addClass:function(j,f){q(j,f,function(i,
v,k){var o=i.className;if(o){var t=" "+o+" ";o=o;for(var x=0;x<k;x++)if(t.indexOf(" "+v[x]+" ")<0)o+=" "+v[x];i.className=c.trim(o)}else i.className=f})},removeClass:function(j,f){q(j,f,function(i,v,k){var o=i.className;if(o)if(k){o=(" "+o+" ").replace(C," ");for(var t=0,x;t<k;t++)for(x=" "+v[t]+" ";o.indexOf(x)>=0;)o=o.replace(x," ");i.className=c.trim(o)}else i.className=""})},replaceClass:function(j,f,i){u.removeClass(j,f);u.addClass(j,i)},toggleClass:function(j,f,i){var v=c.isBoolean(i),k;q(j,
f,function(o,t,x){for(var B=0,r;B<x;B++){r=t[B];k=v?!i:u.hasClass(o,r);u[k?"removeClass":"addClass"](o,r)}})}})});
KISSY.add("dom-attr",function(c,s){function q(r,a){return a&&a.nodeName.toUpperCase()===r.toUpperCase()}var u=c.UA,n=u.ie,C=n&&n<8,j=document.documentElement.textContent!==s?"textContent":"innerText",f=c.DOM,i=f._isElementNode,v=function(r){return f._nodeTypeIs(r,3)},k=/href|src|style/,o=/href|src|colspan|rowspan/,t=/\r/g,x=/radio|checkbox/,B={readonly:"readOnly"};C&&c.mix(B,{"for":"htmlFor","class":"className"});c.mix(f,{attr:function(r,a,b){if(c.isPlainObject(a))for(var e in a)f.attr(r,e,a[e]);
else if(a=c.trim(a)){a=a.toLowerCase();a=B[a]||a;if(b===s){r=c.get(r);if(!i(r))return s;var g;k.test(a)||(g=r[a]);if(g===s)g=r.getAttribute(a);if(C)if(o.test(a))g=r.getAttribute(a,2);else if(a==="style")g=r.style.cssText;return g===null?s:g}c.each(c.query(r),function(p){if(i(p))if(a==="style")p.style.cssText=b;else{if(a==="checked")p[a]=!!b;p.setAttribute(a,""+b)}})}},removeAttr:function(r,a){c.each(c.query(r),function(b){if(i(b)){f.attr(b,a,"");b.removeAttribute(a)}})},val:function(r,a){if(a===s){var b=
c.get(r);if(!i(b))return s;if(q("option",b))return(b.attributes.value||{}).specified?b.value:b.text;if(q("select",b)){var e=b.selectedIndex;r=b.options;if(e<0)return null;else if(b.type==="select-one")return f.val(r[e]);b=[];for(var g=0,p=r.length;g<p;++g)r[g].selected&&b.push(f.val(r[g]));return b}if(u.webkit&&x.test(b.type))return b.getAttribute("value")===null?"on":b.value;return(b.value||"").replace(t,"")}c.each(c.query(r),function(y){if(q("select",y)){if(c.isNumber(a))a+="";var l=c.makeArray(a),
m=y.options,z;g=0;for(p=m.length;g<p;++g){z=m[g];z.selected=c.inArray(f.val(z),l)}if(!l.length)y.selectedIndex=-1}else if(i(y))y.value=a})},text:function(r,a){if(a===s){r=c.get(r);if(i(r))return r[j]||"";else if(v(r))return r.nodeValue}else c.each(c.query(r),function(b){if(i(b))b[j]=a;else if(v(b))b.nodeValue=a})}})});
KISSY.add("dom-style",function(c,s){function q(a,b){var e=c.get(a),g=b===i?e.offsetWidth:e.offsetHeight;c.each(b===i?["Left","Right"]:["Top","Bottom"],function(p){g-=parseFloat(n._getComputedStyle(e,"padding"+p))||0;g-=parseFloat(n._getComputedStyle(e,"border"+p+"Width"))||0});return g}function u(a,b,e){var g=e;if(e===v&&o.test(b)){g=0;if(n.css(a,"position")==="absolute"){e=a[b==="left"?"offsetLeft":"offsetTop"];if(C.ie===8||C.opera)e-=k(n.css(a.offsetParent,"border-"+b+"-width"))||0;g=e-(k(n.css(a,
"margin-"+b))||0)}}return g}var n=c.DOM,C=c.UA,j=document,f=j.documentElement,i="width",v="auto",k=parseInt,o=/^left|top$/,t=/width|height|top|left|right|bottom|margin|padding/i,x=/-([a-z])/ig,B=function(a,b){return b.toUpperCase()},r={};c.mix(n,{_CUSTOM_STYLES:r,_getComputedStyle:function(a,b){var e="",g=a.ownerDocument;if(a.style)e=g.defaultView.getComputedStyle(a,null)[b];return e},css:function(a,b,e){if(c.isPlainObject(b))for(var g in b)n.css(a,g,b[g]);else{if(b.indexOf("-")>0)b=b.replace(x,B);
b=r[b]||b;if(e===s){a=c.get(a);g="";if(a&&a.style){g=b.get?b.get(a):a.style[b];if(g===""&&!b.get)g=u(a,b,n._getComputedStyle(a,b))}return g===s?"":g}else{if(e===null||e==="")e="";else if(!isNaN(new Number(e))&&t.test(b))e+="px";(b===i||b==="height")&&parseFloat(e)<0||c.each(c.query(a),function(p){if(p&&p.style){b.set?b.set(p,e):(p.style[b]=e);if(e==="")p.style.cssText||p.removeAttribute("style")}})}}},width:function(a,b){if(b===s)return q(a,i);else n.css(a,i,b)},height:function(a,b){if(b===s)return q(a,
"height");else n.css(a,"height",b)},addStyleSheet:function(a,b){var e;if(b)e=c.get(b);e||(e=n.create("<style>",{id:b}));c.get("head").appendChild(e);if(e.styleSheet)e.styleSheet.cssText=a;else e.appendChild(j.createTextNode(a))}});if(f.style.cssFloat!==s)r["float"]="cssFloat";else if(f.style.styleFloat!==s)r["float"]="styleFloat"});
KISSY.add("dom-style-ie",function(c,s){if(c.UA.ie){var q=c.DOM,u=document,n=u.documentElement,C=q._CUSTOM_STYLES,j=/^-?\d+(?:px)?$/i,f=/^-?\d/,i=/^width|height$/;try{if(n.style.opacity===s&&n.filters)C.opacity={get:function(k){var o=100;try{o=k.filters["DXImageTransform.Microsoft.Alpha"].opacity}catch(t){try{o=k.filters("alpha").opacity}catch(x){}}return o/100+""},set:function(k,o){k=k.style;k.zoom=1;k.filter="alpha(opacity="+o*100+")"}}}catch(v){c.log("IE filters ActiveX is disabled. ex = "+v)}if(!(u.defaultView||
{}).getComputedStyle&&n.currentStyle)q._getComputedStyle=function(k,o){var t=k.style,x=k.currentStyle[o];if(i.test(o))x=q[o](k)+"px";else if(!j.test(x)&&f.test(x)){var B=t.left,r=k.runtimeStyle.left;k.runtimeStyle.left=k.currentStyle.left;t.left=o==="fontSize"?"1em":x||0;x=t.pixelLeft+"px";t.left=B;k.runtimeStyle.left=r}return x}}});
KISSY.add("dom-offset",function(c,s){function q(l){var m=0,z=0,d=k(l[a]);if(l[y]){l=l[y]();m=l[b];z=l[e];if(C.mobile!=="Apple"){m+=n[g](d);z+=n[p](d)}}return{left:m,top:z}}function u(l,m){if(n.css(l,B)==="static")l.style[B]=r;var z=q(l),d={},h,w;for(w in m){h=x(n.css(l,w),10)||0;d[w]=h+m[w]-z[w]}n.css(l,d)}var n=c.DOM,C=c.UA,j=window,f=document,i=n._isElementNode,v=n._nodeTypeIs,k=n._getWin,o=f.compatMode==="CSS1Compat",t=Math.max,x=parseInt,B="position",r="relative",a="ownerDocument",b="left",e=
"top",g="scrollLeft",p="scrollTop",y="getBoundingClientRect";c.mix(n,{offset:function(l,m){if(!(l=c.get(l))||!l[a])return null;if(m===s)return q(l);u(l,m)},scrollIntoView:function(l,m,z,d){if((l=c.get(l))&&l[a]){m=c.get(m);d=d===s?true:!!d;z=z===s?true:!!z;if(!m||m===j)return l.scrollIntoView(z);if(v(m,9))m=k(m);var h=n.offset(l),w=n.offset(m),A={left:h[b]-w[b],top:h[e]-w[e]};h=m.clientHeight;w=m.clientWidth;var D=n[g](m),F=n[p](m),G=D+w,E=F+h,I=l.offsetHeight;l=l.offsetWidth;var H=A.left+D-(x(n.css(m,
"borderLeftWidth"))||0);A=A.top+F-(x(n.css(m,"borderTopWidth"))||0);var J=H+l,K=A+I;if(I>h||A<F||z)m[p]=A;else if(K>E)m[p]=K-h;if(d)if(l>w||H<D||z)m[g]=H;else if(J>G)m[g]=J-w}}});c.each(["Left","Top"],function(l,m){var z="scroll"+l;n[z]=function(d){var h=0,w=k(d),A;if(w&&(A=w.document))h=w[m?"pageYOffset":"pageXOffset"]||A.documentElement[z]||A.body[z];else if(i(d=c.get(d)))h=d[z];return h}});c.each(["Width","Height"],function(l){n["doc"+l]=function(m){m=m||f;return t(o?m.documentElement["scroll"+
l]:m.body["scroll"+l],n["viewport"+l](m))};n["viewport"+l]=function(m){var z="inner"+l;m=k(m);var d=m.document;return z in m?m[z]:o?d.documentElement["client"+l]:d.body["client"+l]}})});
KISSY.add("dom-traversal",function(c,s){function q(j,f,i,v){if(!(j=c.get(j)))return null;if(f===s)f=1;var k=null,o,t;if(c.isNumber(f)&&f>=0){if(f===0)return j;o=0;t=f;f=function(){return++o===t}}for(;j=j[i];)if(C(j)&&(!f||n.test(j,f))&&(!v||v(j))){k=j;break}return k}function u(j,f,i){var v=[];var k=j=c.get(j);if(j&&i)k=j.parentNode;if(k){i=0;for(k=k.firstChild;k;k=k.nextSibling)if(C(k)&&k!==j&&(!f||n.test(k,f)))v[i++]=k}return v}var n=c.DOM,C=n._isElementNode;c.mix(n,{parent:function(j,f){return q(j,
f,"parentNode",function(i){return i.nodeType!=11})},next:function(j,f){return q(j,f,"nextSibling")},prev:function(j,f){return q(j,f,"previousSibling")},siblings:function(j,f){return u(j,f,true)},children:function(j,f){return u(j,f)},contains:function(j,f){var i=false;if((j=c.get(j))&&(f=c.get(f)))if(j.contains)return j.contains(f);else if(j.compareDocumentPosition)return!!(j.compareDocumentPosition(f)&16);else for(;!i&&(f=f.parentNode);)i=f==j;return i}})});
KISSY.add("dom-create",function(c,s){function q(d,h){t(d)&&c.isPlainObject(h)&&i.attr(d,h);return d}function u(d,h){var w=null,A;if(d&&(d.push||d.item)&&d[0]){h=h||d[0].ownerDocument;w=h.createDocumentFragment();if(d.item)d=c.makeArray(d);h=0;for(A=d.length;h<A;h++)w.appendChild(d[h])}else c.log("Unable to convert "+d+" to fragment.");return w}function n(d){var h=d.cloneNode(true);if(v.ie<8)h.innerHTML=d.innerHTML;return h}function C(d,h,w,A){if(w){var D=c.guid("ks-tmp-"),F=new RegExp(a);h+='<span id="'+
D+'"></span>';c.available(D,function(){var G=c.get("head"),E,I,H,J,K,L;for(F.lastIndex=0;E=F.exec(h);)if((H=(I=E[1])?I.match(e):false)&&H[2]){E=f.createElement("script");E.src=H[2];if((J=I.match(g))&&J[2])E.charset=J[2];E.async=true;G.appendChild(E)}else if((L=E[2])&&L.length>0)c.globalEval(L);(K=f.getElementById(D))&&i.remove(K);c.isFunction(A)&&A()});j(d,h)}else{j(d,h);c.isFunction(A)&&A()}}function j(d,h){h=(h+"").replace(a,"");try{d.innerHTML=h}catch(w){for(;d.firstChild;)d.removeChild(d.firstChild);
h&&d.appendChild(i.create(h))}}var f=document,i=c.DOM,v=c.UA,k=v.ie,o=i._nodeTypeIs,t=i._isElementNode,x=i._isKSNode,B=f.createElement("div"),r=/<(\w+)/,a=/<script([^>]*)>([\s\S]*?)<\/script>/ig,b=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,e=/\ssrc=(['"])(.*?)\1/i,g=/\scharset=(['"])(.*?)\1/i;c.mix(i,{create:function(d,h,w){if(o(d,1)||o(d,3))return n(d);if(x(d))return n(d[0]);if(!(d=c.trim(d)))return null;var A=null;A=i._creators;var D,F="div",G;if(D=b.exec(d))A=(w||f).createElement(D[1]);else{if((D=r.exec(d))&&
(G=D[1])&&c.isFunction(A[G=G.toLowerCase()]))F=G;d=A[F](d,w).childNodes;A=d.length===1?d[0].parentNode.removeChild(d[0]):u(d,w||f)}return q(A,h)},_creators:{div:function(d,h){h=h?h.createElement("div"):B;h.innerHTML=d;return h}},html:function(d,h,w,A){if(h===s){d=c.get(d);if(t(d))return d.innerHTML}else c.each(c.query(d),function(D){t(D)&&C(D,h,w,A)})},remove:function(d){c.each(c.query(d),function(h){t(h)&&h.parentNode&&h.parentNode.removeChild(h)})}});if(v.gecko||k){var p=i._creators,y=i.create,
l=/(?:\/(?:thead|tfoot|caption|col|colgroup)>)+\s*<tbody/,m={option:"select",td:"tr",tr:"tbody",tbody:"table",col:"colgroup",legend:"fieldset"};for(var z in m)(function(d){p[z]=function(h,w){return y("<"+d+">"+h+"</"+d+">",null,w)}})(m[z]);if(k){p.script=function(d,h){h=h?h.createElement("div"):B;h.innerHTML="-"+d;h.removeChild(h.firstChild);return h};if(k<8)p.tbody=function(d,h){h=y("<table>"+d+"</table>",null,h);var w=h.children.tags("tbody")[0];h.children.length>1&&w&&!l.test(d)&&w.parentNode.removeChild(w);
return h}}c.mix(p,{optgroup:p.option,th:p.td,thead:p.tbody,tfoot:p.tbody,caption:p.tbody,colgroup:p.tbody})}});KISSY.add("dom-insertion",function(c){c.mix(c.DOM,{insertBefore:function(s,q){if((s=c.get(s))&&(q=c.get(q))&&q.parentNode)q.parentNode.insertBefore(s,q);return s},insertAfter:function(s,q){if((s=c.get(s))&&(q=c.get(q))&&q.parentNode)q.nextSibling?q.parentNode.insertBefore(s,q.nextSibling):q.parentNode.appendChild(s);return s}})});
