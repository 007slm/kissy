/*
Copyright 2010, KISSY UI Library v1.1.0
MIT Licensed
build time: Jul 27 11:10
*/
KISSY.add("dom",function(c){var q={_isSupportedNode:function(m){return q._isElementNode(m)||q._isTextNode(m)},_isElementNode:function(m){return m&&m.nodeType===1},_isTextNode:function(m){return m&&m.nodeType===3},_isKSNode:function(m){return m&&c.Node&&m.nodeType===c.Node.TYPE}};c.DOM=q});
KISSY.add("selector",function(c,q){function m(a,b){var d,k=[],r,e;b=A(b);if(c.isString(a)){a=c.trim(a);if(B.test(a)){if(a=t(a.slice(1)))k=[a]}else if(d=p.exec(a)){r=d[1];e=d[2];d=d[3];if(b=r?t(r):b)if(d)if(!r||a.indexOf(l)!==-1)k=j(d,e,b);else{if((a=t(r))&&u.hasClass(a,d))k=[a]}else if(e)k=v(b,e)}else if(c.ExternalSelector)return c.ExternalSelector(a,b);else h(a)}else if(a&&(a[s]||a[y]))k=a[s]?[a[s]()]:a[y]();else if(a&&a.nodeType)k=[a];else if(a&&(c.isArray(a)||a.item))k=a;if(k.item)k=c.makeArray(k);
return k}function A(a){if(a===q)a=i;else if(c.isString(a)&&B.test(a))a=t(a.slice(1));else if(a&&a.nodeType!==1&&a.nodeType!==9)a=null;return a}function t(a){return i.getElementById(a)}function v(a,b){return a.getElementsByTagName(b)}function j(a,b,d){d=a=d.getElementsByClassName(a);var k=0,r=0,e=a.length,n;if(b&&b!==o){d=[];for(b=b.toUpperCase();k<e;++k){n=a[k];if(n.tagName===b)d[r++]=n}}return d}function h(a){c.error("Unsupported selector: "+a)}var i=document,u=c.DOM,l=" ",o="*",s="getDOMNode",y=
s+"s",B=/^#[\w-]+$/,p=/^(?:#([\w-]+))?\s*([\w-]+|\*)?\.?([\w-]+)?$/;(function(){var a=i.createElement("div");a.appendChild(i.createComment(""));if(a.getElementsByTagName(o).length>0)v=function(b,d){b=b.getElementsByTagName(d);if(d===o){d=[];for(var k=0,r=0,e;e=b[k++];)if(e.nodeType===1)d[r++]=e;b=d}return b}})();i.getElementsByClassName||(j=i.querySelectorAll?function(a,b,d){return d.querySelectorAll((b?b:"")+"."+a)}:function(a,b,d){b=d.getElementsByTagName(b||o);d=[];var k=0,r=0,e=b.length,n,x;for(a=
l+a+l;k<e;++k){n=b[k];if((x=n.className)&&(l+x+l).indexOf(a)>-1)d[r++]=n}return d});c.query=m;c.get=function(a,b){return m(a,b)[0]||null};c.mix(u,{query:m,get:c.get,filter:function(a,b){var d=m(a),k,r,e,n=[];if(c.isString(b)&&(k=p.exec(b))&&!k[1]){r=k[2];e=k[3];b=function(x){return!(r&&x.tagName!==r.toUpperCase()||e&&!u.hasClass(x,e))}}if(c.isFunction(b))n=c.filter(d,b);else if(b&&c.ExternalSelector)n=c.ExternalSelector._filter(a,b);else h(b);return n},test:function(a,b){a=m(a);return u.filter(a,
b).length===a.length}})});
KISSY.add("dom-class",function(c,q){function m(j,h,i,u){if(!(h=c.trim(h)))return u?false:q;j=c.query(j);var l=0,o=j.length;h=h.split(t);for(var s;l<o;l++){s=j[l];if(A._isElementNode(s)){s=i(s,h,h.length);if(s!==q)return s}}if(u)return false}var A=c.DOM,t=/[\.\s]\s*\.?/,v=/[\n\t]/g;c.mix(A,{hasClass:function(j,h){return m(j,h,function(i,u,l){if(i=i.className){i=" "+i+" ";for(var o=0,s=true;o<l;o++)if(i.indexOf(" "+u[o]+" ")<0){s=false;break}if(s)return true}},true)},addClass:function(j,h){m(j,h,function(i,
u,l){var o=i.className;if(o){var s=" "+o+" ";o=o;for(var y=0;y<l;y++)if(s.indexOf(" "+u[y]+" ")<0)o+=" "+u[y];i.className=c.trim(o)}else i.className=h})},removeClass:function(j,h){m(j,h,function(i,u,l){var o=i.className;if(o)if(l){o=(" "+o+" ").replace(v," ");for(var s=0,y;s<l;s++)for(y=" "+u[s]+" ";o.indexOf(y)>=0;)o=o.replace(y," ");i.className=c.trim(o)}else i.className=""})},replaceClass:function(j,h,i){A.removeClass(j,h);A.addClass(j,i)},toggleClass:function(j,h,i){var u=c.isBoolean(i),l;m(j,
h,function(o,s,y){for(var B=0,p;B<y;B++){p=s[B];l=u?!i:A.hasClass(o,p);A[l?"removeClass":"addClass"](o,p)}})}})});
KISSY.add("dom-attr",function(c,q){function m(p,a){return a&&a.nodeName.toUpperCase()===p.toUpperCase()}var A=c.UA,t=A.ie,v=t&&t<8,j=document.documentElement.textContent!==q?"textContent":"innerText",h=c.DOM,i=h._isElementNode,u=h._isTextNode,l=/href|src|style/,o=/href|src|colspan|rowspan/,s=/\r/g,y=/radio|checkbox/,B={readonly:"readOnly"};v&&c.mix(B,{"for":"htmlFor","class":"className"});c.mix(h,{attr:function(p,a,b){if(a=c.trim(a)){a=a.toLowerCase();a=B[a]||a;if(b===q){p=c.get(p);if(!i(p))return q;
var d;l.test(a)||(d=p[a]);if(d===q)d=p.getAttribute(a);if(v)if(o.test(a))d=p.getAttribute(a,2);else if(a==="style")d=p.style.cssText;return d===null?q:d}c.each(c.query(p),function(k){if(i(k))if(v&&a==="style")k.style.cssText=b;else k.setAttribute(a,""+b)})}},removeAttr:function(p,a){c.each(c.query(p),function(b){i(b)&&b.removeAttribute(a)})},val:function(p,a){if(a===q){var b=c.get(p);if(!i(b))return q;if(m("option",b))return(b.attributes.value||{}).specified?b.value:b.text;if(m("select",b)){var d=
b.selectedIndex;p=b.options;if(d<0)return null;else if(b.type==="select-one")return h.val(p[d]);b=[];for(var k=0,r=p.length;k<r;++k)p[k].selected&&b.push(h.val(p[k]));return b}if(A.webkit&&y.test(b.type))return b.getAttribute("value")===null?"on":b.value;return(b.value||"").replace(s,"")}c.each(c.query(p),function(e){if(m("select",e)){if(c.isNumber(a))a+="";var n=c.makeArray(a),x=e.options,z;k=0;for(r=x.length;k<r;++k){z=x[k];z.selected=c.inArray(h.val(z),n)}if(!n.length)e.selectedIndex=-1}else if(i(e))e.value=
a})},text:function(p,a){if(a===q){p=c.get(p);if(i(p))return p[j]||"";else if(u(p))return p.nodeValue}else c.each(c.query(p),function(b){if(i(b))b[j]=a;else if(u(b))b.nodeValue=a})}})});
KISSY.add("dom-style",function(c,q){function m(a,b){var d=c.get(a),k=b===i?d.offsetWidth:d.offsetHeight;c.each(b===i?["Left","Right"]:["Top","Bottom"],function(r){k-=parseFloat(t._getComputedStyle(d,"padding"+r))||0;k-=parseFloat(t._getComputedStyle(d,"border"+r+"Width"))||0});return k}function A(a,b,d){var k=d;if(d===u&&o.test(b)){k=0;if(t.css(a,"position")==="absolute"){d=a[b==="left"?"offsetLeft":"offsetTop"];if(v.ie===8||v.opera)d-=l(t.css(a.offsetParent,"border-"+b+"-width"))||0;k=d-(l(t.css(a,
"margin-"+b))||0)}}return k}var t=c.DOM,v=c.UA,j=document,h=j.documentElement,i="width",u="auto",l=parseInt,o=/^left|top$/,s=/width|height|top|left|right|bottom|margin|padding/i,y=/-([a-z])/ig,B=function(a,b){return b.toUpperCase()},p={};c.mix(t,{_CUSTOM_STYLES:p,_getComputedStyle:function(a,b){var d="",k=a.ownerDocument;if(a.style)d=k.defaultView.getComputedStyle(a,null)[b];return d},css:function(a,b,d){if(c.isPlainObject(b))for(var k in b)t.css(a,k,b[k]);else{if(b.indexOf("-")>0)b=b.replace(y,B);
b=p[b]||b;if(d===q){a=c.get(a);k="";if(a&&a.style){k=b.get?b.get(a):a.style[b];if(k===""&&!b.get)k=A(a,b,t._getComputedStyle(a,b))}return k===q?"":k}else{if(d===null||d==="")d="";else if(!isNaN(new Number(d))&&s.test(b))d+="px";(b===i||b==="height")&&parseFloat(d)<0||c.each(c.query(a),function(r){if(r&&r.style){b.set?b.set(r,d):(r.style[b]=d);if(d==="")r.style.cssText||r.removeAttribute("style")}})}}},width:function(a,b){if(b===q)return m(a,i);else t.css(a,i,b)},height:function(a,b){if(b===q)return m(a,
"height");else t.css(a,"height",b)},addStyleSheet:function(a,b){var d;if(b)d=c.get(b);d||(d=t.create("<style>",{id:b}));c.get("head").appendChild(d);if(d.styleSheet)d.styleSheet.cssText=a;else d.appendChild(j.createTextNode(a))}});if(h.style.cssFloat!==q)p["float"]="cssFloat";else if(h.style.styleFloat!==q)p["float"]="styleFloat"});
KISSY.add("dom-style-ie",function(c,q){if(c.UA.ie){var m=c.DOM,A=document,t=A.documentElement,v=m._CUSTOM_STYLES,j=/^-?\d+(?:px)?$/i,h=/^-?\d/,i=/^width|height$/;try{if(t.style.opacity===q&&t.filters)v.opacity={get:function(l){var o=100;try{o=l.filters["DXImageTransform.Microsoft.Alpha"].opacity}catch(s){try{o=l.filters("alpha").opacity}catch(y){}}return o/100+""},set:function(l,o){l=l.style;l.zoom=1;l.filter="alpha(opacity="+o*100+")"}}}catch(u){c.log("IE filters ActiveX is disabled. ex = "+u)}if(!(A.defaultView||
{}).getComputedStyle&&t.currentStyle)m._getComputedStyle=function(l,o){var s=l.style,y=l.currentStyle[o];if(i.test(o))y=m[o](l)+"px";else if(!j.test(y)&&h.test(y)){var B=s.left,p=l.runtimeStyle.left;l.runtimeStyle.left=l.currentStyle.left;s.left=o==="fontSize"?"1em":y||0;y=s.pixelLeft+"px";s.left=B;l.runtimeStyle.left=p}return y}}});
KISSY.add("dom-offset",function(c,q){function m(e){var n=0,x=0,z=t(e[p]);if(e[r]){e=e[r]();n=e[a]+v[d](z);x=e[b]+v[k](z)}return{left:n,top:x}}function A(e,n){if(v.css(e,s)==="static")e.style[s]=y;var x=m(e),z={},f,g;for(g in n){f=o(v.css(e,g),10)||0;z[g]=f+n[g]-x[g]}v.css(e,z)}function t(e){return e&&"scrollTo"in e&&e[B]?e:e&&e.nodeType===9?e.defaultView||e.parentWindow:false}var v=c.DOM,j=window,h=document,i=v._isElementNode,u=h.compatMode==="CSS1Compat",l=Math.max,o=parseInt,s="position",y="relative",
B="document",p="ownerDocument",a="left",b="top",d="scrollLeft",k="scrollTop",r="getBoundingClientRect";c.mix(v,{offset:function(e,n){if(!(e=c.get(e))||!e[p])return null;if(n===q)return m(e);A(e,n)},scrollIntoView:function(e,n,x,z){if((e=c.get(e))&&e[p]){n=c.get(n);z=z===q?true:!!z;x=x===q?true:!!x;if(!i(n))return e.scrollIntoView(x);var f=v.offset(e),g=v.offset(n),w={left:f[a]-g[a],top:f[b]-g[b]};f=n.clientHeight;g=n.clientWidth;var C=v[d](n),D=v[k](n),G=C+g,F=D+f,E=e.offsetHeight;e=e.offsetWidth;
var H=w.left+C-(o(v.css(n,"borderLeftWidth"))||0);w=w.top+D-(o(v.css(n,"borderTopWidth"))||0);var I=H+e,J=w+E;if(E>f||w<D||x)n[k]=w;else if(J>F)n[k]=J-f;if(z)if(e>g||H<C||x)n[d]=H;else if(I>G)n[d]=I-g}}});c.each(["Left","Top"],function(e,n){var x="scroll"+e;v[x]=function(z){var f=0,g=z===q?j:t(z),w;if(g&&(w=g[B]))f=g[n?"pageYOffset":"pageXOffset"]||w.documentElement[x]||w.body[x];else if(i(z=c.get(z)))f=z[x];return f}});c.each(["Width","Height"],function(e){v["doc"+e]=function(n){n=n||h;return l(u?
n.documentElement["scroll"+e]:n.body["scroll"+e],v["viewport"+e](n))};v["viewport"+e]=function(n){var x="inner"+e;n=t(n)||j;var z=n[B];return x in n?n[x]:u?z.documentElement["client"+e]:z.body["client"+e]}})});
KISSY.add("dom-traversal",function(c,q){function m(j,h,i,u){if(!(j=c.get(j)))return null;if(h===q)h=1;var l=null,o,s;if(c.isNumber(h)&&h>=0){if(h===0)return j;o=0;s=h;h=function(){return++o===s}}for(;j=j[i];)if(v(j)&&(!h||t.test(j,h))&&(!u||u(j))){l=j;break}return l}function A(j,h,i){var u=[];var l=j=c.get(j);if(j&&i)l=j.parentNode;if(l){i=0;for(l=l.firstChild;l;l=l.nextSibling)if(v(l)&&l!==j&&(!h||t.test(l,h)))u[i++]=l}return u}var t=c.DOM,v=t._isElementNode;c.mix(t,{parent:function(j,h){return m(j,
h,"parentNode",function(i){return i.nodeType!=11})},next:function(j,h){return m(j,h,"nextSibling")},prev:function(j,h){return m(j,h,"previousSibling")},siblings:function(j,h){return A(j,h,true)},children:function(j,h){return A(j,h)},contains:function(j,h){var i=false;if((j=c.get(j))&&(h=c.get(h)))if(j.contains)return j.contains(h);else if(j.compareDocumentPosition)return!!(j.compareDocumentPosition(h)&16);else for(;!i&&(h=h.parentNode);)i=h==j;return i}})});
KISSY.add("dom-create",function(c,q){function m(f,g){if(s(f)&&g)for(var w in g)i.attr(f,w,g[w]);return f}function A(f,g){var w=null,C;if(f&&(f.push||f.item)&&f[0]){g=g||f[0].ownerDocument;w=g.createDocumentFragment();if(f.item)f=c.makeArray(f);g=0;for(C=f.length;g<C;g++)w.appendChild(f[g])}else c.log("Unable to convert "+f+" to fragment.");return w}function t(f){var g=f.cloneNode(true);if(u.ie<8)g.innerHTML=f.innerHTML;return g}function v(f,g,w,C){if(w){var D=c.guid("ks-tmp-");g+='<span id="'+D+'"></span>';
var G=new RegExp(b);c.available(D,function(){var F=c.get("head"),E,H,I,J,L,K;for(G.lastIndex=0;E=G.exec(g);)if((I=(H=E[1])?H.match(d):false)&&I[2]){E=h.createElement("script");E.src=I[2];if((J=H.match(k))&&J[2])E.charset=J[2];E.async=true;F.appendChild(E)}else if((K=E[2])&&K.length>0)c.globalEval(K);(L=h.getElementById(D))&&i.remove(L);c.isFunction(C)&&C()});j(f,g)}else{j(f,g);c.isFunction(C)&&C()}}function j(f,g){g=g.replace(b,"");try{f.innerHTML=g}catch(w){for(;f.firstChild;)f.removeChild(f.firstChild);
g&&f.appendChild(i.create(g))}}var h=document,i=c.DOM,u=c.UA,l=u.ie,o=i._isSupportedNode,s=i._isElementNode,y=i._isKSNode,B=h.createElement("div"),p=/<(\w+)/,a=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,b=/<script([^>]*)>([\s\S]*?)<\/script>/ig,d=/\ssrc=(['"])(.*?)\1/i,k=/\scharset=(['"])(.*?)\1/i;c.mix(i,{create:function(f,g,w){if(o(f))return t(f);if(y(f))return t(f[0]);if(!(f=c.trim(f)))return null;var C=null;C=i._creators;var D,G="div",F;if(D=a.exec(f))C=(w||h).createElement(D[1]);else{if((D=p.exec(f))&&(F=
D[1])&&c.isFunction(C[F=F.toLowerCase()]))G=F;f=C[G](f,w).childNodes;C=f.length===1?f[0].parentNode.removeChild(f[0]):A(f,w||h)}return m(C,g)},_creators:{div:function(f,g){g=g?g.createElement("div"):B;g.innerHTML=f;return g}},html:function(f,g,w,C){if(g===q){f=c.get(f);if(s(f))return f.innerHTML}else c.each(c.query(f),function(D){s(D)&&v(D,g,w,C)})},remove:function(f){c.each(c.query(f),function(g){s(g)&&g.parentNode&&g.parentNode.removeChild(g)})}});if(u.gecko||l){var r=i._creators,e=i.create,n=/(?:\/(?:thead|tfoot|caption|col|colgroup)>)+\s*<tbody/,
x={option:"select",td:"tr",tr:"tbody",tbody:"table",col:"colgroup",legend:"fieldset"};for(var z in x)(function(f){r[z]=function(g,w){return e("<"+f+">"+g+"</"+f+">",null,w)}})(x[z]);if(l){r.script=function(f,g){g=g?g.createElement("div"):B;g.innerHTML="-"+f;g.removeChild(g.firstChild);return g};if(l<8)r.tbody=function(f,g){g=e("<table>"+f+"</table>",null,g);var w=g.children.tags("tbody")[0];g.children.length>1&&w&&!n.test(f)&&w.parentNode.removeChild(w);return g}}c.mix(r,{optgroup:r.option,th:r.td,
thead:r.tbody,tfoot:r.tbody,caption:r.tbody,colgroup:r.tbody})}});KISSY.add("dom-insertion",function(c){c.mix(c.DOM,{insertBefore:function(q,m){if((q=c.get(q))&&(m=c.get(m))&&m.parentNode)m.parentNode.insertBefore(q,m);return q},insertAfter:function(q,m){if((q=c.get(q))&&(m=c.get(m))&&m.parentNode)m.nextSibling?m.parentNode.insertBefore(q,m.nextSibling):m.parentNode.appendChild(q);return q}})});
