/*
Copyright 2010, KISSY UI Library v1.1.1dev
MIT Licensed
build time: ${build.time}
*/
KISSY.add("dom",function(c){var r={_isSupportedNode:function(m){return r._isElementNode(m)||r._isTextNode(m)},_isElementNode:function(m){return m&&m.nodeType===1},_isTextNode:function(m){return m&&m.nodeType===3},_isKSNode:function(m){return m&&c.Node&&m.nodeType===c.Node.TYPE}};c.DOM=r});
KISSY.add("selector",function(c,r){function m(a,b){var d,i=[],q,e;b=A(b);if(c.isString(a)){a=c.trim(a);if(B.test(a)){if(a=t(a.slice(1),b))i=[a]}else if(d=p.exec(a)){q=d[1];e=d[2];d=d[3];if(b=q?t(q,b):b)if(d)if(!q||a.indexOf(l)!==-1)i=k(d,e,b);else{if((a=t(q,b))&&u.hasClass(a,d))i=[a]}else if(e)i=v(e,b)}else if(c.ExternalSelector)return c.ExternalSelector(a,b);else f(a)}else if(a&&(a[s]||a[x]))i=a[s]?[a[s]()]:a[x]();else if(a&&a.nodeType)i=[a];else if(a&&(c.isArray(a)||a.item))i=a;if(i.item)i=c.makeArray(i);
return i}function A(a){if(a===r)a=j;else if(c.isString(a)&&B.test(a))a=t(a.slice(1),j);else if(a&&a.nodeType!==1&&a.nodeType!==9)a=null;return a}function t(a,b){if(b.nodeType!==9)b=b.ownerDocument;return b.getElementById(a)}function v(a,b){return b.getElementsByTagName(a)}function k(a,b,d){d=a=d.getElementsByClassName(a);var i=0,q=0,e=a.length,n;if(b&&b!==o){d=[];for(b=b.toUpperCase();i<e;++i){n=a[i];if(n.tagName===b)d[q++]=n}}return d}function f(a){c.error("Unsupported selector: "+a)}var j=document,
u=c.DOM,l=" ",o="*",s="getDOMNode",x=s+"s",B=/^#[\w-]+$/,p=/^(?:#([\w-]+))?\s*([\w-]+|\*)?\.?([\w-]+)?$/;(function(){var a=j.createElement("div");a.appendChild(j.createComment(""));if(a.getElementsByTagName(o).length>0)v=function(b,d){d=d.getElementsByTagName(b);if(b===o){b=[];for(var i=0,q=0,e;e=d[i++];)if(e.nodeType===1)b[q++]=e;d=b}return d}})();j.getElementsByClassName||(k=j.querySelectorAll?function(a,b,d){return d.querySelectorAll((b?b:"")+"."+a)}:function(a,b,d){b=d.getElementsByTagName(b||
o);d=[];var i=0,q=0,e=b.length,n,w;for(a=l+a+l;i<e;++i){n=b[i];if((w=n.className)&&(l+w+l).indexOf(a)>-1)d[q++]=n}return d});c.query=m;c.get=function(a,b){return m(a,b)[0]||null};c.mix(u,{query:m,get:c.get,filter:function(a,b){var d=m(a),i,q,e,n=[];if(c.isString(b)&&(i=p.exec(b))&&!i[1]){q=i[2];e=i[3];b=function(w){return!(q&&w.tagName!==q.toUpperCase()||e&&!u.hasClass(w,e))}}if(c.isFunction(b))n=c.filter(d,b);else if(b&&c.ExternalSelector)n=c.ExternalSelector._filter(a,b);else f(b);return n},test:function(a,
b){a=m(a);return u.filter(a,b).length===a.length}})});
KISSY.add("dom-class",function(c,r){function m(k,f,j,u){if(!(f=c.trim(f)))return u?false:r;k=c.query(k);var l=0,o=k.length;f=f.split(t);for(var s;l<o;l++){s=k[l];if(A._isElementNode(s)){s=j(s,f,f.length);if(s!==r)return s}}if(u)return false}var A=c.DOM,t=/[\.\s]\s*\.?/,v=/[\n\t]/g;c.mix(A,{hasClass:function(k,f){return m(k,f,function(j,u,l){if(j=j.className){j=" "+j+" ";for(var o=0,s=true;o<l;o++)if(j.indexOf(" "+u[o]+" ")<0){s=false;break}if(s)return true}},true)},addClass:function(k,f){m(k,f,function(j,
u,l){var o=j.className;if(o){var s=" "+o+" ";o=o;for(var x=0;x<l;x++)if(s.indexOf(" "+u[x]+" ")<0)o+=" "+u[x];j.className=c.trim(o)}else j.className=f})},removeClass:function(k,f){m(k,f,function(j,u,l){var o=j.className;if(o)if(l){o=(" "+o+" ").replace(v," ");for(var s=0,x;s<l;s++)for(x=" "+u[s]+" ";o.indexOf(x)>=0;)o=o.replace(x," ");j.className=c.trim(o)}else j.className=""})},replaceClass:function(k,f,j){A.removeClass(k,f);A.addClass(k,j)},toggleClass:function(k,f,j){var u=c.isBoolean(j),l;m(k,
f,function(o,s,x){for(var B=0,p;B<x;B++){p=s[B];l=u?!j:A.hasClass(o,p);A[l?"removeClass":"addClass"](o,p)}})}})});
KISSY.add("dom-attr",function(c,r){function m(p,a){return a&&a.nodeName.toUpperCase()===p.toUpperCase()}var A=c.UA,t=A.ie,v=t&&t<8,k=document.documentElement.textContent!==r?"textContent":"innerText",f=c.DOM,j=f._isElementNode,u=f._isTextNode,l=/href|src|style/,o=/href|src|colspan|rowspan/,s=/\r/g,x=/radio|checkbox/,B={readonly:"readOnly"};v&&c.mix(B,{"for":"htmlFor","class":"className"});c.mix(f,{attr:function(p,a,b){if(c.isPlainObject(a))for(var d in a)f.attr(p,d,a[d]);else if(a=c.trim(a)){a=a.toLowerCase();
a=B[a]||a;if(b===r){p=c.get(p);if(!j(p))return r;var i;l.test(a)||(i=p[a]);if(i===r)i=p.getAttribute(a);if(v)if(o.test(a))i=p.getAttribute(a,2);else if(a==="style")i=p.style.cssText;return i===null?r:i}c.each(c.query(p),function(q){if(j(q))if(v&&a==="style")q.style.cssText=b;else{if(a==="checked")q[a]=!!b;q.setAttribute(a,""+b)}})}},removeAttr:function(p,a){c.each(c.query(p),function(b){if(j(b)){f.attr(b,a,"");b.removeAttribute(a)}})},val:function(p,a){if(a===r){var b=c.get(p);if(!j(b))return r;if(m("option",
b))return(b.attributes.value||{}).specified?b.value:b.text;if(m("select",b)){var d=b.selectedIndex;p=b.options;if(d<0)return null;else if(b.type==="select-one")return f.val(p[d]);b=[];for(var i=0,q=p.length;i<q;++i)p[i].selected&&b.push(f.val(p[i]));return b}if(A.webkit&&x.test(b.type))return b.getAttribute("value")===null?"on":b.value;return(b.value||"").replace(s,"")}c.each(c.query(p),function(e){if(m("select",e)){if(c.isNumber(a))a+="";var n=c.makeArray(a),w=e.options,z;i=0;for(q=w.length;i<q;++i){z=
w[i];z.selected=c.inArray(f.val(z),n)}if(!n.length)e.selectedIndex=-1}else if(j(e))e.value=a})},text:function(p,a){if(a===r){p=c.get(p);if(j(p))return p[k]||"";else if(u(p))return p.nodeValue}else c.each(c.query(p),function(b){if(j(b))b[k]=a;else if(u(b))b.nodeValue=a})}})});
KISSY.add("dom-style",function(c,r){function m(a,b){var d=c.get(a),i=b===j?d.offsetWidth:d.offsetHeight;c.each(b===j?["Left","Right"]:["Top","Bottom"],function(q){i-=parseFloat(t._getComputedStyle(d,"padding"+q))||0;i-=parseFloat(t._getComputedStyle(d,"border"+q+"Width"))||0});return i}function A(a,b,d){var i=d;if(d===u&&o.test(b)){i=0;if(t.css(a,"position")==="absolute"){d=a[b==="left"?"offsetLeft":"offsetTop"];if(v.ie===8||v.opera)d-=l(t.css(a.offsetParent,"border-"+b+"-width"))||0;i=d-(l(t.css(a,
"margin-"+b))||0)}}return i}var t=c.DOM,v=c.UA,k=document,f=k.documentElement,j="width",u="auto",l=parseInt,o=/^left|top$/,s=/width|height|top|left|right|bottom|margin|padding/i,x=/-([a-z])/ig,B=function(a,b){return b.toUpperCase()},p={};c.mix(t,{_CUSTOM_STYLES:p,_getComputedStyle:function(a,b){var d="",i=a.ownerDocument;if(a.style)d=i.defaultView.getComputedStyle(a,null)[b];return d},css:function(a,b,d){if(c.isPlainObject(b))for(var i in b)t.css(a,i,b[i]);else{if(b.indexOf("-")>0)b=b.replace(x,B);
b=p[b]||b;if(d===r){a=c.get(a);i="";if(a&&a.style){i=b.get?b.get(a):a.style[b];if(i===""&&!b.get)i=A(a,b,t._getComputedStyle(a,b))}return i===r?"":i}else{if(d===null||d==="")d="";else if(!isNaN(new Number(d))&&s.test(b))d+="px";(b===j||b==="height")&&parseFloat(d)<0||c.each(c.query(a),function(q){if(q&&q.style){b.set?b.set(q,d):(q.style[b]=d);if(d==="")q.style.cssText||q.removeAttribute("style")}})}}},width:function(a,b){if(b===r)return m(a,j);else t.css(a,j,b)},height:function(a,b){if(b===r)return m(a,
"height");else t.css(a,"height",b)},addStyleSheet:function(a,b){var d;if(b)d=c.get(b);d||(d=t.create("<style>",{id:b}));c.get("head").appendChild(d);if(d.styleSheet)d.styleSheet.cssText=a;else d.appendChild(k.createTextNode(a))}});if(f.style.cssFloat!==r)p["float"]="cssFloat";else if(f.style.styleFloat!==r)p["float"]="styleFloat"});
KISSY.add("dom-style-ie",function(c,r){if(c.UA.ie){var m=c.DOM,A=document,t=A.documentElement,v=m._CUSTOM_STYLES,k=/^-?\d+(?:px)?$/i,f=/^-?\d/,j=/^width|height$/;try{if(t.style.opacity===r&&t.filters)v.opacity={get:function(l){var o=100;try{o=l.filters["DXImageTransform.Microsoft.Alpha"].opacity}catch(s){try{o=l.filters("alpha").opacity}catch(x){}}return o/100+""},set:function(l,o){l=l.style;l.zoom=1;l.filter="alpha(opacity="+o*100+")"}}}catch(u){c.log("IE filters ActiveX is disabled. ex = "+u)}if(!(A.defaultView||
{}).getComputedStyle&&t.currentStyle)m._getComputedStyle=function(l,o){var s=l.style,x=l.currentStyle[o];if(j.test(o))x=m[o](l)+"px";else if(!k.test(x)&&f.test(x)){var B=s.left,p=l.runtimeStyle.left;l.runtimeStyle.left=l.currentStyle.left;s.left=o==="fontSize"?"1em":x||0;x=s.pixelLeft+"px";s.left=B;l.runtimeStyle.left=p}return x}}});
KISSY.add("dom-offset",function(c,r){function m(e){var n=0,w=0,z=t(e[p]);if(e[q]){e=e[q]();n=e[a]+v[d](z);w=e[b]+v[i](z)}return{left:n,top:w}}function A(e,n){if(v.css(e,s)==="static")e.style[s]=x;var w=m(e),z={},g,h;for(h in n){g=o(v.css(e,h),10)||0;z[h]=g+n[h]-w[h]}v.css(e,z)}function t(e){return e&&"scrollTo"in e&&e[B]?e:e&&e.nodeType===9?e.defaultView||e.parentWindow:false}var v=c.DOM,k=window,f=document,j=v._isElementNode,u=f.compatMode==="CSS1Compat",l=Math.max,o=parseInt,s="position",x="relative",
B="document",p="ownerDocument",a="left",b="top",d="scrollLeft",i="scrollTop",q="getBoundingClientRect";c.mix(v,{offset:function(e,n){if(!(e=c.get(e))||!e[p])return null;if(n===r)return m(e);A(e,n)},scrollIntoView:function(e,n,w,z){if((e=c.get(e))&&e[p]){n=c.get(n);z=z===r?true:!!z;w=w===r?true:!!w;if(!j(n))return e.scrollIntoView(w);var g=v.offset(e),h=v.offset(n),y={left:g[a]-h[a],top:g[b]-h[b]};g=n.clientHeight;h=n.clientWidth;var C=v[d](n),D=v[i](n),G=C+h,F=D+g,E=e.offsetHeight;e=e.offsetWidth;
var H=y.left+C-(o(v.css(n,"borderLeftWidth"))||0);y=y.top+D-(o(v.css(n,"borderTopWidth"))||0);var I=H+e,J=y+E;if(E>g||y<D||w)n[i]=y;else if(J>F)n[i]=J-g;if(z)if(e>h||H<C||w)n[d]=H;else if(I>G)n[d]=I-h}}});c.each(["Left","Top"],function(e,n){var w="scroll"+e;v[w]=function(z){var g=0,h=z===r?k:t(z),y;if(h&&(y=h[B]))g=h[n?"pageYOffset":"pageXOffset"]||y.documentElement[w]||y.body[w];else if(j(z=c.get(z)))g=z[w];return g}});c.each(["Width","Height"],function(e){v["doc"+e]=function(n){n=n||f;return l(u?
n.documentElement["scroll"+e]:n.body["scroll"+e],v["viewport"+e](n))};v["viewport"+e]=function(n){var w="inner"+e;n=t(n)||k;var z=n[B];return w in n?n[w]:u?z.documentElement["client"+e]:z.body["client"+e]}})});
KISSY.add("dom-traversal",function(c,r){function m(k,f,j,u){if(!(k=c.get(k)))return null;if(f===r)f=1;var l=null,o,s;if(c.isNumber(f)&&f>=0){if(f===0)return k;o=0;s=f;f=function(){return++o===s}}for(;k=k[j];)if(v(k)&&(!f||t.test(k,f))&&(!u||u(k))){l=k;break}return l}function A(k,f,j){var u=[];var l=k=c.get(k);if(k&&j)l=k.parentNode;if(l){j=0;for(l=l.firstChild;l;l=l.nextSibling)if(v(l)&&l!==k&&(!f||t.test(l,f)))u[j++]=l}return u}var t=c.DOM,v=t._isElementNode;c.mix(t,{parent:function(k,f){return m(k,
f,"parentNode",function(j){return j.nodeType!=11})},next:function(k,f){return m(k,f,"nextSibling")},prev:function(k,f){return m(k,f,"previousSibling")},siblings:function(k,f){return A(k,f,true)},children:function(k,f){return A(k,f)},contains:function(k,f){var j=false;if((k=c.get(k))&&(f=c.get(f)))if(k.contains)return k.contains(f);else if(k.compareDocumentPosition)return!!(k.compareDocumentPosition(f)&16);else for(;!j&&(f=f.parentNode);)j=f==k;return j}})});
KISSY.add("dom-create",function(c,r){function m(g,h){s(g)&&c.isPlainObject(h)&&j.attr(g,h);return g}function A(g,h){var y=null,C;if(g&&(g.push||g.item)&&g[0]){h=h||g[0].ownerDocument;y=h.createDocumentFragment();if(g.item)g=c.makeArray(g);h=0;for(C=g.length;h<C;h++)y.appendChild(g[h])}else c.log("Unable to convert "+g+" to fragment.");return y}function t(g){var h=g.cloneNode(true);if(u.ie<8)h.innerHTML=g.innerHTML;return h}function v(g,h,y,C){if(y){var D=c.guid("ks-tmp-"),G=new RegExp(a);h+='<span id="'+
D+'"></span>';c.available(D,function(){var F=c.get("head"),E,H,I,J,L,K;for(G.lastIndex=0;E=G.exec(h);)if((I=(H=E[1])?H.match(d):false)&&I[2]){E=f.createElement("script");E.src=I[2];if((J=H.match(i))&&J[2])E.charset=J[2];E.async=true;F.appendChild(E)}else if((K=E[2])&&K.length>0)c.globalEval(K);(L=f.getElementById(D))&&j.remove(L);c.isFunction(C)&&C()});k(g,h)}else{k(g,h);c.isFunction(C)&&C()}}function k(g,h){h=(h+"").replace(a,"");try{g.innerHTML=h}catch(y){for(;g.firstChild;)g.removeChild(g.firstChild);
h&&g.appendChild(j.create(h))}}var f=document,j=c.DOM,u=c.UA,l=u.ie,o=j._isSupportedNode,s=j._isElementNode,x=j._isKSNode,B=f.createElement("div"),p=/<(\w+)/,a=/<script([^>]*)>([\s\S]*?)<\/script>/ig,b=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,d=/\ssrc=(['"])(.*?)\1/i,i=/\scharset=(['"])(.*?)\1/i;c.mix(j,{create:function(g,h,y){if(o(g))return t(g);if(x(g))return t(g[0]);if(!(g=c.trim(g)))return null;var C=null;C=j._creators;var D,G="div",F;if(D=b.exec(g))C=(y||f).createElement(D[1]);else{if((D=p.exec(g))&&(F=
D[1])&&c.isFunction(C[F=F.toLowerCase()]))G=F;g=C[G](g,y).childNodes;C=g.length===1?g[0].parentNode.removeChild(g[0]):A(g,y||f)}return m(C,h)},_creators:{div:function(g,h){h=h?h.createElement("div"):B;h.innerHTML=g;return h}},html:function(g,h,y,C){if(h===r){g=c.get(g);if(s(g))return g.innerHTML}else c.each(c.query(g),function(D){s(D)&&v(D,h,y,C)})},remove:function(g){c.each(c.query(g),function(h){s(h)&&h.parentNode&&h.parentNode.removeChild(h)})}});if(u.gecko||l){var q=j._creators,e=j.create,n=/(?:\/(?:thead|tfoot|caption|col|colgroup)>)+\s*<tbody/,
w={option:"select",td:"tr",tr:"tbody",tbody:"table",col:"colgroup",legend:"fieldset"};for(var z in w)(function(g){q[z]=function(h,y){return e("<"+g+">"+h+"</"+g+">",null,y)}})(w[z]);if(l){q.script=function(g,h){h=h?h.createElement("div"):B;h.innerHTML="-"+g;h.removeChild(h.firstChild);return h};if(l<8)q.tbody=function(g,h){h=e("<table>"+g+"</table>",null,h);var y=h.children.tags("tbody")[0];h.children.length>1&&y&&!n.test(g)&&y.parentNode.removeChild(y);return h}}c.mix(q,{optgroup:q.option,th:q.td,
thead:q.tbody,tfoot:q.tbody,caption:q.tbody,colgroup:q.tbody})}});KISSY.add("dom-insertion",function(c){c.mix(c.DOM,{insertBefore:function(r,m){if((r=c.get(r))&&(m=c.get(m))&&m.parentNode)m.parentNode.insertBefore(r,m);return r},insertAfter:function(r,m){if((r=c.get(r))&&(m=c.get(m))&&m.parentNode)m.nextSibling?m.parentNode.insertBefore(r,m.nextSibling):m.parentNode.appendChild(r);return r}})});
