/*
Copyright 2010, KISSY UI Library v1.1.2dev
MIT Licensed
build time: ${build.time}
*/
KISSY.add("dom",function(c){var r={_isSupportedNode:function(m){return r._isElementNode(m)||r._isTextNode(m)},_isElementNode:function(m){return m&&m.nodeType===1},_isTextNode:function(m){return m&&m.nodeType===3},_isKSNode:function(m){return m&&c.Node&&m.nodeType===c.Node.TYPE}};c.DOM=r});
KISSY.add("selector",function(c,r){function m(a,b){var e,h=[],n,y;b=B(b);if(c.isString(a)){a=c.trim(a);if(C.test(a)){if(a=t(a.slice(1),b))h=[a]}else if(e=q.exec(a)){n=e[1];y=e[2];e=e[3];if(b=n?t(n,b):b)if(e)if(!n||a.indexOf(l)!==-1)h=k(e,y,b);else{if((a=t(n,b))&&u.hasClass(a,e))h=[a]}else if(y)h=v(y,b)}else if(c.ExternalSelector)return c.ExternalSelector(a,b);else f(a)}else if(a&&(a[s]||a[x]))h=a[s]?[a[s]()]:a[x]();else if(a&&a.nodeType)h=[a];else if(a&&(c.isArray(a)||a.item))h=a;if(h.item)h=c.makeArray(h);
return h}function B(a){if(a===r)a=i;else if(c.isString(a)&&C.test(a))a=t(a.slice(1),i);else if(a&&a.nodeType!==1&&a.nodeType!==9)a=null;return a}function t(a,b){if(b.nodeType!==9)b=b.ownerDocument;return b.getElementById(a)}function v(a,b){return b.getElementsByTagName(a)}function k(a,b,e){e=a=e.getElementsByClassName(a);var h=0,n=0,y=a.length,j;if(b&&b!==o){e=[];for(b=b.toUpperCase();h<y;++h){j=a[h];if(j.tagName===b)e[n++]=j}}return e}function f(a){c.error("Unsupported selector: "+a)}var i=document,
u=c.DOM,l=" ",o="*",s="getDOMNode",x=s+"s",C=/^#[\w-]+$/,q=/^(?:#([\w-]+))?\s*([\w-]+|\*)?\.?([\w-]+)?$/;(function(){var a=i.createElement("div");a.appendChild(i.createComment(""));if(a.getElementsByTagName(o).length>0)v=function(b,e){e=e.getElementsByTagName(b);if(b===o){b=[];for(var h=0,n=0,y;y=e[h++];)if(y.nodeType===1)b[n++]=y;e=b}return e}})();i.getElementsByClassName||(k=i.querySelectorAll?function(a,b,e){return e.querySelectorAll((b?b:"")+"."+a)}:function(a,b,e){b=e.getElementsByTagName(b||
o);e=[];var h=0,n=0,y=b.length,j,p;for(a=l+a+l;h<y;++h){j=b[h];if((p=j.className)&&(l+p+l).indexOf(a)>-1)e[n++]=j}return e});c.query=m;c.get=function(a,b){return m(a,b)[0]||null};c.mix(u,{query:m,get:c.get,filter:function(a,b){var e=m(a),h,n,y,j=[];if(c.isString(b)&&(h=q.exec(b))&&!h[1]){n=h[2];y=h[3];b=function(p){return!(n&&p.tagName!==n.toUpperCase()||y&&!u.hasClass(p,y))}}if(c.isFunction(b))j=c.filter(e,b);else if(b&&c.ExternalSelector)j=c.ExternalSelector._filter(a,b);else f(b);return j},test:function(a,
b){a=m(a);return u.filter(a,b).length===a.length}})});
KISSY.add("dom-class",function(c,r){function m(k,f,i,u){if(!(f=c.trim(f)))return u?false:r;k=c.query(k);var l=0,o=k.length;f=f.split(t);for(var s;l<o;l++){s=k[l];if(B._isElementNode(s)){s=i(s,f,f.length);if(s!==r)return s}}if(u)return false}var B=c.DOM,t=/[\.\s]\s*\.?/,v=/[\n\t]/g;c.mix(B,{hasClass:function(k,f){return m(k,f,function(i,u,l){if(i=i.className){i=" "+i+" ";for(var o=0,s=true;o<l;o++)if(i.indexOf(" "+u[o]+" ")<0){s=false;break}if(s)return true}},true)},addClass:function(k,f){m(k,f,function(i,
u,l){var o=i.className;if(o){var s=" "+o+" ";o=o;for(var x=0;x<l;x++)if(s.indexOf(" "+u[x]+" ")<0)o+=" "+u[x];i.className=c.trim(o)}else i.className=f})},removeClass:function(k,f){m(k,f,function(i,u,l){var o=i.className;if(o)if(l){o=(" "+o+" ").replace(v," ");for(var s=0,x;s<l;s++)for(x=" "+u[s]+" ";o.indexOf(x)>=0;)o=o.replace(x," ");i.className=c.trim(o)}else i.className=""})},replaceClass:function(k,f,i){B.removeClass(k,f);B.addClass(k,i)},toggleClass:function(k,f,i){var u=c.isBoolean(i),l;m(k,
f,function(o,s,x){for(var C=0,q;C<x;C++){q=s[C];l=u?!i:B.hasClass(o,q);B[l?"removeClass":"addClass"](o,q)}})}})});
KISSY.add("dom-attr",function(c,r){function m(q,a){return a&&a.nodeName.toUpperCase()===q.toUpperCase()}var B=c.UA,t=B.ie,v=t&&t<8,k=document.documentElement.textContent!==r?"textContent":"innerText",f=c.DOM,i=f._isElementNode,u=f._isTextNode,l=/href|src|style/,o=/href|src|colspan|rowspan/,s=/\r/g,x=/radio|checkbox/,C={readonly:"readOnly"};v&&c.mix(C,{"for":"htmlFor","class":"className"});c.mix(f,{attr:function(q,a,b){if(c.isPlainObject(a))for(var e in a)f.attr(q,e,a[e]);else if(a=c.trim(a)){a=a.toLowerCase();
a=C[a]||a;if(b===r){q=c.get(q);if(!i(q))return r;var h;l.test(a)||(h=q[a]);if(h===r)h=q.getAttribute(a);if(v)if(o.test(a))h=q.getAttribute(a,2);else if(a==="style")h=q.style.cssText;return h===null?r:h}c.each(c.query(q),function(n){if(i(n))if(a==="style")n.style.cssText=b;else{if(a==="checked")n[a]=!!b;n.setAttribute(a,""+b)}})}},removeAttr:function(q,a){c.each(c.query(q),function(b){if(i(b)){f.attr(b,a,"");b.removeAttribute(a)}})},val:function(q,a){if(a===r){var b=c.get(q);if(!i(b))return r;if(m("option",
b))return(b.attributes.value||{}).specified?b.value:b.text;if(m("select",b)){var e=b.selectedIndex;q=b.options;if(e<0)return null;else if(b.type==="select-one")return f.val(q[e]);b=[];for(var h=0,n=q.length;h<n;++h)q[h].selected&&b.push(f.val(q[h]));return b}if(B.webkit&&x.test(b.type))return b.getAttribute("value")===null?"on":b.value;return(b.value||"").replace(s,"")}c.each(c.query(q),function(y){if(m("select",y)){if(c.isNumber(a))a+="";var j=c.makeArray(a),p=y.options,z;h=0;for(n=p.length;h<n;++h){z=
p[h];z.selected=c.inArray(f.val(z),j)}if(!j.length)y.selectedIndex=-1}else if(i(y))y.value=a})},text:function(q,a){if(a===r){q=c.get(q);if(i(q))return q[k]||"";else if(u(q))return q.nodeValue}else c.each(c.query(q),function(b){if(i(b))b[k]=a;else if(u(b))b.nodeValue=a})}})});
KISSY.add("dom-style",function(c,r){function m(a,b){var e=c.get(a),h=b===i?e.offsetWidth:e.offsetHeight;c.each(b===i?["Left","Right"]:["Top","Bottom"],function(n){h-=parseFloat(t._getComputedStyle(e,"padding"+n))||0;h-=parseFloat(t._getComputedStyle(e,"border"+n+"Width"))||0});return h}function B(a,b,e){var h=e;if(e===u&&o.test(b)){h=0;if(t.css(a,"position")==="absolute"){e=a[b==="left"?"offsetLeft":"offsetTop"];if(v.ie===8||v.opera)e-=l(t.css(a.offsetParent,"border-"+b+"-width"))||0;h=e-(l(t.css(a,
"margin-"+b))||0)}}return h}var t=c.DOM,v=c.UA,k=document,f=k.documentElement,i="width",u="auto",l=parseInt,o=/^left|top$/,s=/width|height|top|left|right|bottom|margin|padding/i,x=/-([a-z])/ig,C=function(a,b){return b.toUpperCase()},q={};c.mix(t,{_CUSTOM_STYLES:q,_getComputedStyle:function(a,b){var e="",h=a.ownerDocument;if(a.style)e=h.defaultView.getComputedStyle(a,null)[b];return e},css:function(a,b,e){if(c.isPlainObject(b))for(var h in b)t.css(a,h,b[h]);else{if(b.indexOf("-")>0)b=b.replace(x,C);
b=q[b]||b;if(e===r){a=c.get(a);h="";if(a&&a.style){h=b.get?b.get(a):a.style[b];if(h===""&&!b.get)h=B(a,b,t._getComputedStyle(a,b))}return h===r?"":h}else{if(e===null||e==="")e="";else if(!isNaN(new Number(e))&&s.test(b))e+="px";(b===i||b==="height")&&parseFloat(e)<0||c.each(c.query(a),function(n){if(n&&n.style){b.set?b.set(n,e):(n.style[b]=e);if(e==="")n.style.cssText||n.removeAttribute("style")}})}}},width:function(a,b){if(b===r)return m(a,i);else t.css(a,i,b)},height:function(a,b){if(b===r)return m(a,
"height");else t.css(a,"height",b)},addStyleSheet:function(a,b){var e;if(b)e=c.get(b);e||(e=t.create("<style>",{id:b}));c.get("head").appendChild(e);if(e.styleSheet)e.styleSheet.cssText=a;else e.appendChild(k.createTextNode(a))}});if(f.style.cssFloat!==r)q["float"]="cssFloat";else if(f.style.styleFloat!==r)q["float"]="styleFloat"});
KISSY.add("dom-style-ie",function(c,r){if(c.UA.ie){var m=c.DOM,B=document,t=B.documentElement,v=m._CUSTOM_STYLES,k=/^-?\d+(?:px)?$/i,f=/^-?\d/,i=/^width|height$/;try{if(t.style.opacity===r&&t.filters)v.opacity={get:function(l){var o=100;try{o=l.filters["DXImageTransform.Microsoft.Alpha"].opacity}catch(s){try{o=l.filters("alpha").opacity}catch(x){}}return o/100+""},set:function(l,o){l=l.style;l.zoom=1;l.filter="alpha(opacity="+o*100+")"}}}catch(u){c.log("IE filters ActiveX is disabled. ex = "+u)}if(!(B.defaultView||
{}).getComputedStyle&&t.currentStyle)m._getComputedStyle=function(l,o){var s=l.style,x=l.currentStyle[o];if(i.test(o))x=m[o](l)+"px";else if(!k.test(x)&&f.test(x)){var C=s.left,q=l.runtimeStyle.left;l.runtimeStyle.left=l.currentStyle.left;s.left=o==="fontSize"?"1em":x||0;x=s.pixelLeft+"px";s.left=C;l.runtimeStyle.left=q}return x}}});
KISSY.add("dom-offset",function(c,r){function m(j){var p=0,z=0,d=t(j[a]);if(j[y]){j=j[y]();p=j[b];z=j[e];if(k.mobile!=="Apple"){p+=v[h](d);z+=v[n](d)}}return{left:p,top:z}}function B(j,p){if(v.css(j,x)==="static")j.style[x]=C;var z=m(j),d={},g,w;for(w in p){g=s(v.css(j,w),10)||0;d[w]=g+p[w]-z[w]}v.css(j,d)}function t(j){return j&&"scrollTo"in j&&j[q]?j:j&&j.nodeType===9?j.defaultView||j.parentWindow:false}var v=c.DOM,k=c.UA,f=window,i=document,u=v._isElementNode,l=i.compatMode==="CSS1Compat",o=Math.max,
s=parseInt,x="position",C="relative",q="document",a="ownerDocument",b="left",e="top",h="scrollLeft",n="scrollTop",y="getBoundingClientRect";c.mix(v,{offset:function(j,p){if(!(j=c.get(j))||!j[a])return null;if(p===r)return m(j);B(j,p)},scrollIntoView:function(j,p,z,d){if((j=c.get(j))&&j[a]){p=c.get(p);d=d===r?true:!!d;z=z===r?true:!!z;if(!u(p))return j.scrollIntoView(z);var g=v.offset(j),w=v.offset(p),A={left:g[b]-w[b],top:g[e]-w[e]};g=p.clientHeight;w=p.clientWidth;var D=v[h](p),F=v[n](p),G=D+w,E=
F+g,I=j.offsetHeight;j=j.offsetWidth;var H=A.left+D-(s(v.css(p,"borderLeftWidth"))||0);A=A.top+F-(s(v.css(p,"borderTopWidth"))||0);var J=H+j,K=A+I;if(I>g||A<F||z)p[n]=A;else if(K>E)p[n]=K-g;if(d)if(j>w||H<D||z)p[h]=H;else if(J>G)p[h]=J-w}}});c.each(["Left","Top"],function(j,p){var z="scroll"+j;v[z]=function(d){var g=0,w=d===r?f:t(d),A;if(w&&(A=w[q]))g=w[p?"pageYOffset":"pageXOffset"]||A.documentElement[z]||A.body[z];else if(u(d=c.get(d)))g=d[z];return g}});c.each(["Width","Height"],function(j){v["doc"+
j]=function(p){p=p||i;return o(l?p.documentElement["scroll"+j]:p.body["scroll"+j],v["viewport"+j](p))};v["viewport"+j]=function(p){var z="inner"+j;p=t(p)||f;var d=p[q];return z in p?p[z]:l?d.documentElement["client"+j]:d.body["client"+j]}})});
KISSY.add("dom-traversal",function(c,r){function m(k,f,i,u){if(!(k=c.get(k)))return null;if(f===r)f=1;var l=null,o,s;if(c.isNumber(f)&&f>=0){if(f===0)return k;o=0;s=f;f=function(){return++o===s}}for(;k=k[i];)if(v(k)&&(!f||t.test(k,f))&&(!u||u(k))){l=k;break}return l}function B(k,f,i){var u=[];var l=k=c.get(k);if(k&&i)l=k.parentNode;if(l){i=0;for(l=l.firstChild;l;l=l.nextSibling)if(v(l)&&l!==k&&(!f||t.test(l,f)))u[i++]=l}return u}var t=c.DOM,v=t._isElementNode;c.mix(t,{parent:function(k,f){return m(k,
f,"parentNode",function(i){return i.nodeType!=11})},next:function(k,f){return m(k,f,"nextSibling")},prev:function(k,f){return m(k,f,"previousSibling")},siblings:function(k,f){return B(k,f,true)},children:function(k,f){return B(k,f)},contains:function(k,f){var i=false;if((k=c.get(k))&&(f=c.get(f)))if(k.contains)return k.contains(f);else if(k.compareDocumentPosition)return!!(k.compareDocumentPosition(f)&16);else for(;!i&&(f=f.parentNode);)i=f==k;return i}})});
KISSY.add("dom-create",function(c,r){function m(d,g){s(d)&&c.isPlainObject(g)&&i.attr(d,g);return d}function B(d,g){var w=null,A;if(d&&(d.push||d.item)&&d[0]){g=g||d[0].ownerDocument;w=g.createDocumentFragment();if(d.item)d=c.makeArray(d);g=0;for(A=d.length;g<A;g++)w.appendChild(d[g])}else c.log("Unable to convert "+d+" to fragment.");return w}function t(d){var g=d.cloneNode(true);if(u.ie<8)g.innerHTML=d.innerHTML;return g}function v(d,g,w,A){if(w){var D=c.guid("ks-tmp-"),F=new RegExp(a);g+='<span id="'+
D+'"></span>';c.available(D,function(){var G=c.get("head"),E,I,H,J,K,L;for(F.lastIndex=0;E=F.exec(g);)if((H=(I=E[1])?I.match(e):false)&&H[2]){E=f.createElement("script");E.src=H[2];if((J=I.match(h))&&J[2])E.charset=J[2];E.async=true;G.appendChild(E)}else if((L=E[2])&&L.length>0)c.globalEval(L);(K=f.getElementById(D))&&i.remove(K);c.isFunction(A)&&A()});k(d,g)}else{k(d,g);c.isFunction(A)&&A()}}function k(d,g){g=(g+"").replace(a,"");try{d.innerHTML=g}catch(w){for(;d.firstChild;)d.removeChild(d.firstChild);
g&&d.appendChild(i.create(g))}}var f=document,i=c.DOM,u=c.UA,l=u.ie,o=i._isSupportedNode,s=i._isElementNode,x=i._isKSNode,C=f.createElement("div"),q=/<(\w+)/,a=/<script([^>]*)>([\s\S]*?)<\/script>/ig,b=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,e=/\ssrc=(['"])(.*?)\1/i,h=/\scharset=(['"])(.*?)\1/i;c.mix(i,{create:function(d,g,w){if(o(d))return t(d);if(x(d))return t(d[0]);if(!(d=c.trim(d)))return null;var A=null;A=i._creators;var D,F="div",G;if(D=b.exec(d))A=(w||f).createElement(D[1]);else{if((D=q.exec(d))&&(G=
D[1])&&c.isFunction(A[G=G.toLowerCase()]))F=G;d=A[F](d,w).childNodes;A=d.length===1?d[0].parentNode.removeChild(d[0]):B(d,w||f)}return m(A,g)},_creators:{div:function(d,g){g=g?g.createElement("div"):C;g.innerHTML=d;return g}},html:function(d,g,w,A){if(g===r){d=c.get(d);if(s(d))return d.innerHTML}else c.each(c.query(d),function(D){s(D)&&v(D,g,w,A)})},remove:function(d){c.each(c.query(d),function(g){s(g)&&g.parentNode&&g.parentNode.removeChild(g)})}});if(u.gecko||l){var n=i._creators,y=i.create,j=/(?:\/(?:thead|tfoot|caption|col|colgroup)>)+\s*<tbody/,
p={option:"select",td:"tr",tr:"tbody",tbody:"table",col:"colgroup",legend:"fieldset"};for(var z in p)(function(d){n[z]=function(g,w){return y("<"+d+">"+g+"</"+d+">",null,w)}})(p[z]);if(l){n.script=function(d,g){g=g?g.createElement("div"):C;g.innerHTML="-"+d;g.removeChild(g.firstChild);return g};if(l<8)n.tbody=function(d,g){g=y("<table>"+d+"</table>",null,g);var w=g.children.tags("tbody")[0];g.children.length>1&&w&&!j.test(d)&&w.parentNode.removeChild(w);return g}}c.mix(n,{optgroup:n.option,th:n.td,
thead:n.tbody,tfoot:n.tbody,caption:n.tbody,colgroup:n.tbody})}});KISSY.add("dom-insertion",function(c){c.mix(c.DOM,{insertBefore:function(r,m){if((r=c.get(r))&&(m=c.get(m))&&m.parentNode)m.parentNode.insertBefore(r,m);return r},insertAfter:function(r,m){if((r=c.get(r))&&(m=c.get(m))&&m.parentNode)m.nextSibling?m.parentNode.insertBefore(r,m.nextSibling):m.parentNode.appendChild(r);return r}})});
