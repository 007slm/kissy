/*
Copyright 2011, KISSY UI Library v1.20dev
MIT Licensed
build time: ${build.time}
*/
KISSY.add("uibase/align",function(b,i){function c(){}function f(d,a){var e=b.require("node/node"),k=a.charAt(0),l=a.charAt(1),g,h,j;if(d){d=e.one(d);g=d.offset();e=d[0].offsetWidth;h=d[0].offsetHeight}else{g={left:i.scrollLeft(),top:i.scrollTop()};e=i.viewportWidth();h=i.viewportHeight()}j=g.left;g=g.top;if(k==="c")g+=h/2;else if(k==="b")g+=h;if(l==="c")j+=e/2;else if(l==="r")j+=e;return{left:j,top:g}}b.mix(c,{TL:"tl",TC:"tc",TR:"tr",CL:"cl",CC:"cc",CR:"cr",BL:"bl",BC:"bc",BR:"br"});c.ATTRS={align:{}};
c.prototype={_uiSetAlign:function(d){b.isPlainObject(d)&&this.align(d.node,d.points,d.offset)},align:function(d,a,e){var k,l=(this.get("view")||this).get("el");e=e||[0,0];k=l.offset();d=f(d,a[0]);a=f(l,a[1]);a=[a.left-d.left,a.top-d.top];k=[k.left-a[0]+ +e[0],k.top-a[1]+ +e[1]];this.set("x",k[0]);this.set("y",k[1])},center:function(d){this.set("align",{node:d,points:[c.CC,c.CC],offset:[0,0]})}};return c},{requires:["dom"]});
KISSY.add("uibase/base",function(b,i){function c(g){i.apply(this,arguments);for(var h=this.constructor;h;){if(g&&g[a]&&h.HTML_PARSER)if(g[a]=e.one(g[a])){var j=g[a],m=h.HTML_PARSER,n=void 0,o=void 0;for(n in m)if(m.hasOwnProperty(n)){o=m[n];if(b.isFunction(o))this.__set(n,o.call(this,j));else if(b.isString(o))this.__set(n,j.one(o));else b.isArray(o)&&o[0]&&this.__set(n,j.all(o[0]))}}h=h.superclass&&h.superclass.constructor}f(this,"initializer","constructor");g&&g.autoRender&&this.render()}function f(g,
h,j){for(var m=g.constructor,n=[],o,p,s,r;m;){r=[];if(s=m.__ks_exts)for(var q=0;q<s.length;q++)if(o=s[q]){if(j!="constructor")o=o.prototype.hasOwnProperty(j)?o.prototype[j]:null;o&&r.push(o)}if(m.prototype.hasOwnProperty(h)&&(p=m.prototype[h]))r.push(p);r.length&&n.push.apply(n,r.reverse());m=m.superclass&&m.superclass.constructor}for(q=n.length-1;q>=0;q--)n[q]&&n[q].call(g)}function d(g,h){if(!h)return g;for(var j in h)if(b.isObject(h[j])&&b.isObject(g[j]))d(g[j],h[j]);else j in g||(g[j]=h[j])}var a=
"srcNode",e=b.require("node/node"),k=b.require("base/attribute").__capitalFirst,l=function(){};c.HTML_PARSER={};c.ATTRS={render:{valueFn:function(){return document.body},setter:function(g){if(b.isString(g))return e.one(g)}},rendered:{value:false}};b.extend(c,i,{render:function(){if(!this.get("rendered")){this._renderUI();this.fire("renderUI");f(this,"renderUI","__renderUI");this.fire("afterRenderUI");this._bindUI();this.fire("bindUI");f(this,"bindUI","__bindUI");this.fire("afterBindUI");this._syncUI();
this.fire("syncUI");f(this,"syncUI","__syncUI");this.fire("afterSyncUI");this.set("rendered",true)}},_renderUI:l,renderUI:l,_bindUI:function(){var g=this,h=g.__attrs,j,m;for(j in h)if(h.hasOwnProperty(j)){m="_uiSet"+k(j);g[m]&&function(n,o){g.on("after"+k(n)+"Change",function(p){g[o](p.newVal,p)})}(j,m)}},bindUI:l,_syncUI:function(){var g=this.__getDefAttrs(),h;for(h in g)if(g.hasOwnProperty(h)){var j="_uiSet"+k(h);this[j]&&this.get(h)!==undefined&&this[j](this.get(h))}},syncUI:l,destroy:function(){for(var g=
this.constructor,h,j,m;g;){(j=g.prototype.destructor)&&j.apply(this);if(h=g.__ks_exts)for(m=h.length-1;m>=0;m--)(j=h[m]&&h[m].prototype.__destructor)&&j.apply(this);g=g.superclass&&g.superclass.constructor}this.fire("destroy");this.detach()}});c.create=function(g,h,j,m){function n(){c.apply(this,arguments)}if(b.isArray(g)){m=j;j=h;h=g;g=c}g=g||c;if(b.isObject(h)){m=j;j=h;h=[]}b.extend(n,g,j,m);if(h){n.__ks_exts=h;b.each(h,function(o){if(o){b.each(["ATTRS","HTML_PARSER"],function(p){if(o[p]){n[p]=
n[p]||{};d(n[p],o[p])}});b.augment(n,o,false)}})}return n};return c},{requires:["base","dom","node"]});KISSY.add("uibase/box",function(){function b(){}b.ATTRS={html:{view:true},width:{view:true},height:{view:true},elCls:{view:true},elStyle:{view:true},elAttrs:{view:true},elOrder:{},el:{getter:function(){return this.get("view")&&this.get("view").get("el")}}};b.prototype={};return b});
KISSY.add("uibase/boxrender",function(b,i){function c(){}function f(d,a,e,k,l,g){a=a||{};if(e)a.width=e;if(k)a.height=k;e="";for(var h in a)if(a.hasOwnProperty(h))e+=h+":"+a[h]+";";a="";for(var j in g)if(g.hasOwnProperty(j))a+=" "+j+"='"+g[j]+"' ";return"<"+l+(e?" style='"+e+"' ":"")+a+(d?" class='"+d+"' ":"")+">"}b.mix(c,{APPEND:1,INSERT:0});c.ATTRS={el:{setter:function(d){var a=b.require("node/node");if(b.isString(d))return a.one(d)}},elCls:{},elStyle:{},width:{},height:{},elTagName:{value:"div"},
elAttrs:{},elOrder:{value:1},html:{}};c.construct=f;c.HTML_PARSER={el:function(d){return d}};c.prototype={__renderUI:function(){var d=this.get("render"),a=this.get("el");d=new i(d);if(!a){a=new i(f(this.get("elCls"),this.get("elStyle"),this.get("width"),this.get("height"),this.get("elTagName"),this.get("elAttrs")));this.get("elOrder")?d.append(a):d.prepend(a);this.set("el",a)}},_uiSetElAttrs:function(d){this.get("el").attr(d)},_uiSetElCls:function(d){this.get("el").addClass(d)},_uiSetElStyle:function(d){this.get("el").css(d)},
_uiSetWidth:function(d){this.get("el").width(d)},_uiSetHeight:function(d){this.get("el").height(d)},_uiSetHtml:function(d){this.get("el").html(d)},__destructor:function(){var d=this.get("el");if(d){d.detach();d.remove()}}};return c},{requires:["node"]});KISSY.add("uibase/close",function(){function b(){}b.ATTRS={closable:{value:true,view:true}};b.prototype={__bindUI:function(){var i=this,c=i.get("view").get("closeBtn");c&&c.on("click",function(f){i.hide();f.halt()})}};return b});
KISSY.add("uibase/closerender",function(b){function i(){}i.ATTRS={closable:{value:true},closeBtn:{}};i.HTML_PARSER={closeBtn:function(c){return c.one("."+this.get("prefixCls")+"ext-close")}};i.prototype={_uiSetClosable:function(c){var f=this.get("closeBtn");if(f)c?f.css("display",""):f.css("display","none")},__renderUI:function(){var c=b.require("node/node"),f=this.get("closeBtn"),d=this.get("contentEl");if(!f&&d){f=(new c("<a href='#' class='"+this.get("prefixCls")+"ext-close'><span class='"+this.get("prefixCls")+
"ext-close-x'>\u5173\u95ed</span></a>")).appendTo(d);this.set("closeBtn",f)}},__destructor:function(){var c=this.get("closeBtn");c&&c.detach()}};return i});
KISSY.add("uibase/constrain",function(b,i){function c(){}function f(a){var e;if(!a)return e;var k=this.get("view").get("el");if(a!==true){a=d.one(a);e=a.offset();b.mix(e,{maxLeft:e.left+a[0].offsetWidth-k[0].offsetWidth,maxTop:e.top+a[0].offsetHeight-k[0].offsetHeight})}else{a=document.documentElement.clientWidth;e={left:i.scrollLeft(),top:i.scrollTop()};b.mix(e,{maxLeft:e.left+a-k[0].offsetWidth,maxTop:e.top+i.viewportHeight()-k[0].offsetHeight})}return e}var d=b.require("node/node");c.ATTRS={constrain:{value:false}};
c.prototype={__renderUI:function(){var a=this,e=a.__getDefAttrs(),k=e.x;e=e.y;var l=k.setter,g=e.setter;k.setter=function(h){var j=l&&l(h);if(j===undefined)j=h;if(!a.get("constrain"))return j;h=f.call(a,a.get("constrain"));return Math.min(Math.max(j,h.left),h.maxLeft)};e.setter=function(h){var j=g&&g(h);if(j===undefined)j=h;if(!a.get("constrain"))return j;h=f.call(a,a.get("constrain"));return Math.min(Math.max(j,h.top),h.maxTop)};a.addAttr("x",k);a.addAttr("y",e)}};return c},{requires:["dom","node"]});
KISSY.add("uibase/contentbox",function(){function b(){}b.ATTRS={content:{view:true},contentEl:{getter:function(){return this.get("view")&&this.get("view").get("contentEl")}},contentElAttrs:{view:true},contentElStyle:{view:true},contentTagName:{view:true}};b.prototype={};return b});
KISSY.add("uibase/contentboxrender",function(b,i,c){function f(){}f.ATTRS={contentEl:{},contentElAttrs:{},contentElStyle:{},contentTagName:{value:"div"},content:{}};f.HTML_PARSER={contentEl:function(a){return a.one("."+this.get("prefixCls")+"contentbox")}};var d=c.construct;f.prototype={__renderUI:function(){var a=this.get("contentEl"),e=this.get("el");if(!a){var k=b.makeArray(e[0].childNodes);a=(new i(d(this.get("prefixCls")+"contentbox",this.get("contentElStyle"),undefined,undefined,this.get("contentTagName"),
this.get("contentElAttrs")))).appendTo(e);for(e=0;e<k.length;e++)a.append(k[e]);this.set("contentEl",a)}},_uiSetContentElAttrs:function(a){a&&this.get("contentEl").attr(a)},_uiSetContentElStyle:function(a){a&&this.get("contentEl").css(a)},_uiSetContent:function(a){if(b.isString(a))this.get("contentEl").html(a);else if(a!==undefined){this.get("contentEl").html("");this.get("contentEl").append(a)}}};return f},{requires:["node","./boxrender"]});
KISSY.add("uibase/drag",function(b){function i(){}i.ATTRS={handlers:{value:[]},draggable:{value:true}};i.prototype={_uiSetHandlers:function(c){c&&c.length>0&&this.__drag&&this.__drag.set("handlers",c)},__bindUI:function(){var c=b.require("dd/draggable"),f=this.get("view").get("el");if(this.get("draggable")&&c)this.__drag=new c({node:f,handlers:this.get("handlers")})},_uiSetDraggable:function(c){var f=this.__drag;if(f)if(c){f.detach("drag");f.on("drag",this._dragExtAction,this)}else f.detach("drag")},
_dragExtAction:function(c){this.set("xy",[c.left,c.top])},__destructor:function(){var c=this.__drag;c&&c.destroy()}};return i});KISSY.add("uibase/loading",function(){function b(){}b.prototype={loading:function(){this.get("view").loading()},unloading:function(){this.get("view").unloading()}};return b});
KISSY.add("uibase/loadingrender",function(b,i){function c(){}c.prototype={loading:function(){if(!this._loadingExtEl)this._loadingExtEl=(new i("<div class='"+this.get("prefixCls")+"ext-loading' style='position: absolute;border: none;width: 100%;top: 0;left: 0;z-index: 99999;height:100%;*height: expression(this.parentNode.offsetHeight);'>")).appendTo(this.get("el"));this._loadingExtEl.show()},unloading:function(){var f=this._loadingExtEl;f&&f.hide()}};return c},{requires:["node"]});
KISSY.add("uibase/mask",function(){function b(){}b.ATTRS={mask:{value:false}};b.prototype={_uiSetMask:function(i){if(i){this.on("show",this.get("view")._maskExtShow,this.get("view"));this.on("hide",this.get("view")._maskExtHide,this.get("view"))}else{this.detach("show",this.get("view")._maskExtShow,this.get("view"));this.detach("hide",this.get("view")._maskExtHide,this.get("view"))}}};return b},{requires:["ua"]});
KISSY.add("uibase/maskrender",function(b){function i(){var e=b.require("ua"),k=b.require("node/node"),l=b.require("dom");f=(new k("<div class='"+this.get("prefixCls")+"ext-mask'>")).prependTo(document.body);f.css({position:"absolute",left:0,top:0,width:e.ie==6?l.docWidth():"100%",height:l.docHeight()});if(e.ie==6)d=(new k("<iframe style='position:absolute;left:0;top:0;background:red;width:"+l.docWidth()+"px;height:"+l.docHeight()+"px;filter:alpha(opacity=0);z-index:-1;'>")).insertBefore(f);b.Event.on(window,
"resize",function(){var g={width:e.ie==6?l.docWidth():"100%",height:l.docHeight()};d&&d.css(g);f.css(g)});f.unselectable();f.on("mousedown click",function(g){g.halt()})}function c(){}var f,d,a=0;c.prototype={_maskExtShow:function(){f||i.call(this);f.css({"z-index":this.get("zIndex")-1});d&&d.css({"z-index":this.get("zIndex")-1});a++;f.css("display","");d&&d.css("display","")},_maskExtHide:function(){a--;if(a<=0)a=0;if(!a){f&&f.css("display","none");d&&d.css("display","none")}}};return c},{requires:["ua"]});
KISSY.add("uibase/position",function(b,i,c){function f(){}var d=document;f.ATTRS={x:{view:true,valueFn:function(){return this.get("view")&&this.get("view").get("x")}},y:{view:true,valueFn:function(){return this.get("view")&&this.get("view").get("y")}},xy:{setter:function(a){var e=b.makeArray(a);if(e.length){e[0]&&this.set("x",e[0]);e[1]&&this.set("y",e[1])}return a},getter:function(){return[this.get("x"),this.get("y")]}},zIndex:{view:true},visible:{}};f.prototype={_uiSetVisible:function(a){this.get("view").set("visible",
a);this[a?"_bindKey":"_unbindKey"]();this.fire(a?"show":"hide")},_bindKey:function(){c.on(d,"keydown",this._esc,this)},_unbindKey:function(){c.remove(d,"keydown",this._esc,this)},_esc:function(a){a.keyCode===27&&this.hide()},move:function(a,e){if(b.isArray(a)){e=a[1];a=a[0]}this.set("xy",[a,e])},show:function(){this.render();this.set("visible",true)},hide:function(){this.set("visible",false)}};return f},{requires:["dom","event"]});
KISSY.add("uibase/positionrender",function(){function b(){}b.ATTRS={x:{valueFn:function(){return this.get("el")&&this.get("el").offset().left}},y:{valueFn:function(){return this.get("el")&&this.get("el").offset().top}},zIndex:{value:9999},visible:{}};b.prototype={__renderUI:function(){var i=this.get("el");i.addClass(this.get("prefixCls")+"ext-position");i.css({visibility:"hidden",display:"",left:-9999,top:-9999,bottom:"",right:""})},_uiSetZIndex:function(i){this.get("el").css("z-index",i)},_uiSetX:function(i){this.get("el").offset({left:i})},
_uiSetY:function(i){this.get("el").offset({top:i})},_uiSetVisible:function(i){this.get("el").css("visibility",i?"visible":"hidden")},show:function(){this.render();this.set("visible",true)},hide:function(){this.set("visible",false)}};return b});
KISSY.add("uibase/resize",function(b){function i(){}i.ATTRS={resize:{value:{}}};i.prototype={__destructor:function(){self.resizer&&self.resizer.destroy()},_uiSetResize:function(c){var f=b.require("resizable");if(f){this.resizer&&this.resizer.destroy();c.node=this.get("view").get("el");c.autoRender=true;if(c.handlers)this.resizer=new f(c)}}};return i});
KISSY.add("uibase/shimrender",function(b){function i(){}i.ATTRS={shim:{value:true}};i.prototype={_uiSetShim:function(c){var f=b.require("node/node"),d=this.get("el");if(c&&!this.__shimEl){this.__shimEl=new f("<iframe style='position: absolute;border: none;width: expression(this.parentNode.offsetWidth);top: 0;opacity: 0;filter: alpha(opacity=0);left: 0;z-index: -1;height: expression(this.parentNode.offsetHeight);'>");d.prepend(this.__shimEl)}else if(!c&&this.__shimEl){this.__shimEl.remove();delete this.__shimEl}}};
return i});KISSY.add("uibase/stdmod",function(){function b(){}b.ATTRS={header:{getter:function(){return this.get("view")&&this.get("view").get("header")}},body:{getter:function(){return this.get("view")&&this.get("view").get("body")}},footer:{getter:function(){return this.get("view")&&this.get("view").get("footer")}},bodyStyle:{view:true},footerStyle:{view:true},headerStyle:{view:true},headerContent:{view:true},bodyContent:{view:true},footerContent:{view:true}};b.prototype={};return b});
KISSY.add("uibase/stdmodrender",function(b,i){function c(){}function f(a,e){var k=a.get("contentEl"),l=a.get(e);if(!l){l=(new i("<div class='"+a.get("prefixCls")+d+e+"'>")).appendTo(k);a.set(e,l)}}var d="stdmod-";c.ATTRS={header:{},body:{},footer:{},bodyStyle:{},footerStyle:{},headerStyle:{},headerContent:{},bodyContent:{},footerContent:{}};c.HTML_PARSER={header:function(a){return a.one("."+this.get("prefixCls")+d+"header")},body:function(a){return a.one("."+this.get("prefixCls")+d+"body")},footer:function(a){return a.one("."+
this.get("prefixCls")+d+"footer")}};c.prototype={_setStdModContent:function(a,e){if(b.isString(e))this.get(a).html(e);else{this.get(a).html("");this.get(a).append(e)}},_uiSetBodyStyle:function(a){this.get("body").css(a)},_uiSetHeaderStyle:function(a){this.get("header").css(a)},_uiSetFooterStyle:function(a){this.get("footer").css(a)},_uiSetBodyContent:function(a){this._setStdModContent("body",a)},_uiSetHeaderContent:function(a){this._setStdModContent("header",a)},_uiSetFooterContent:function(a){this._setStdModContent("footer",
a)},__renderUI:function(){f(this,"header");f(this,"body");f(this,"footer")}};return c},{requires:["node"]});
KISSY.add("uibase",function(b,i,c,f,d,a,e,k,l,g,h,j,m,n,o,p,s,r,q,t,u){a.Render=e;j.Render=m;n.Render=o;p.Render=s;t.Render=u;f.Render=d;l.Render=g;b.mix(i,{Align:c,Box:f,Close:a,Contrain:k,Contentbox:l,Drag:h,Loading:j,Mask:n,Position:p,Shim:{Render:r},Resize:q,StdMod:t});return b.UIBase=i},{requires:["uibase/base","uibase/align","uibase/box","uibase/boxrender","uibase/close","uibase/closerender","uibase/constrain","uibase/contentbox","uibase/contentboxrender","uibase/drag","uibase/loading","uibase/loadingrender",
"uibase/mask","uibase/maskrender","uibase/position","uibase/positionrender","uibase/shimrender","uibase/resize","uibase/stdmod","uibase/stdmodrender"]});
