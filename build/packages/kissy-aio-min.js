/*
Copyright 2010, KISSY UI Library v1.1.4
MIT Licensed
build time: Sep 13 17:31
*/
(function(c,r,t){if(c[r]===t)c[r]={};r=c[r];var w=c.document,m=location,j=function(e,o,q,u){if(!o||!e)return e;if(q===t)q=true;var k,a,b;if(u&&(b=u.length))for(k=0;k<b;k++){a=u[k];if(a in o)if(q||!(a in e))e[a]=o[a]}else for(a in o)if(q||!(a in e))e[a]=o[a];return e},i=false,g=[],s=false,n=/^#?([\w-]+)$/,h=0;j(r,{version:"1.1.4",__init:function(){this.Env={mods:{},_loadQueue:{}};var e=w.getElementsByTagName("script");this.Config={debug:"",base:e[e.length-1].src.replace(/^(.*)(seed|kissy).*$/i,
"$1"),timeout:10}},ready:function(e){s||this._bindReady();i?e.call(c,this):g.push(e);return this},_bindReady:function(){var e=this,o=w.documentElement.doScroll,q=o?"onreadystatechange":"DOMContentLoaded",u=function(){e._fireReady()};s=true;if(w.readyState==="complete")return u();if(w.addEventListener){var k=function(){w.removeEventListener(q,k,false);u()};w.addEventListener(q,k,false);c.addEventListener("load",u,false)}else{var a=function(){if(w.readyState==="complete"){w.detachEvent(q,a);u()}};w.attachEvent(q,
a);c.attachEvent("onload",u);if(c==c.top){var b=function(){try{o("left");u()}catch(l){setTimeout(b,1)}};b()}}},_fireReady:function(){if(!i){i=true;if(g){for(var e,o=0;e=g[o++];)e.call(c,this);g=null}}},available:function(e,o){if((e=(e+"").match(n)[1])&&r.isFunction(o))var q=1,u=r.later(function(){if(w.getElementById(e)&&(o()||1)||++q>500)u.cancel()},40,true)},mix:j,merge:function(){var e={},o,q=arguments.length;for(o=0;o<q;++o)j(e,arguments[o]);return e},augment:function(){var e=arguments,o=e.length-
2,q=e[0],u=e[o],k=e[o+1],a=1;if(!r.isArray(k)){u=k;k=t;o++}if(!r.isBoolean(u)){u=t;o++}for(;a<o;a++)j(q.prototype,e[a].prototype||e[a],u,k);return q},extend:function(e,o,q,u){if(!o||!e)return e;var k=Object.prototype,a=o.prototype,b=function(l){function d(){}d.prototype=l;return new d}(a);e.prototype=b;b.constructor=e;e.superclass=a;if(o!==Object&&a.constructor===k.constructor)a.constructor=o;q&&j(b,q);u&&j(e,u);return e},namespace:function(){var e=arguments.length,o=null,q,u,k;for(q=0;q<e;++q){k=
(""+arguments[q]).split(".");o=this;for(u=c[k[0]]===o?1:0;u<k.length;++u)o=o[k[u]]=o[k[u]]||{}}return o},app:function(e,o){var q=r.isString(e),u=q?c[e]||{}:e;j(u,this,true,r.__APP_MEMBERS);u.__init();j(u,r.isFunction(o)?o():o);q&&(c[e]=u);return u},log:function(e,o,q){if(r.Config.debug){if(q)e=q+": "+e;if(c.console!==t&&console.log)console[o&&console[o]?o:"log"](e)}},error:function(e){if(r.Config.debug)throw e;},guid:function(e){var o=h++ +"";return e?e+o:o}});r.__init();r.__APP_MEMBERS=["__init",
"namespace"];if(m&&(m.search||"").indexOf("ks-debug")!==-1)r.Config.debug=true})(window,"KISSY");
(function(c,r,t){function w(f){var p=typeof f;return f===null||p!=="object"&&p!=="function"}function m(f){return g.slice.call(f)}var j=document,i=j.documentElement,g=Array.prototype,s=g.indexOf,n=g.lastIndexOf,h=g.filter,e=String.prototype.trim,o=Object.prototype.toString,q=encodeURIComponent,u=decodeURIComponent,k=q("[]"),a=/^\s+|\s+$/g,b=/^(\w+)\[\]$/,l=/\S/;r.mix(r,{isUndefined:function(f){return f===t},isBoolean:function(f){return o.call(f)==="[object Boolean]"},isString:function(f){return o.call(f)===
"[object String]"},isNumber:function(f){return o.call(f)==="[object Number]"&&isFinite(f)},isPlainObject:function(f){return f&&o.call(f)==="[object Object]"&&!f.nodeType&&!f.setInterval},isEmptyObject:function(f){for(var p in f)return false;return true},isFunction:function(f){return o.call(f)==="[object Function]"},isArray:function(f){return o.call(f)==="[object Array]"},trim:e?function(f){return f==t?"":e.call(f)}:function(f){return f==t?"":f.toString().replace(a,"")},substitute:function(f,p,v){if(!r.isString(f)||
!r.isPlainObject(p))return f;return f.replace(v||/\\?\{([^{}]+)\}/g,function(x,A){if(x.charAt(0)==="\\")return x.slice(1);return p[A]!==t?p[A]:""})},each:function(f,p,v){var x,A=0,y=f.length,z=y===t||r.isFunction(f);v=v||c;if(z)for(x in f){if(p.call(v,f[x],x,f)===false)break}else for(x=f[0];A<y&&p.call(v,x,A,f)!==false;x=f[++A]);return f},indexOf:s?function(f,p){return s.call(p,f)}:function(f,p){for(var v=0,x=p.length;v<x;++v)if(p[v]===f)return v;return-1},lastIndexOf:n?function(f,p){return n.call(p,
f)}:function(f,p){for(var v=p.length-1;v>=0;v--)if(p[v]===f)break;return v},unique:function(f,p){p&&f.reverse();f=f.slice();for(var v=0,x,A;v<f.length;){for(A=f[v];(x=r.lastIndexOf(A,f))!==v;)f.splice(x,1);v+=1}p&&f.reverse();return f},inArray:function(f,p){return r.indexOf(f,p)>-1},makeArray:function(f){if(f===null||f===t)return[];if(r.isArray(f))return f;if(typeof f.length!=="number"||r.isString(f)||r.isFunction(f))return[f];return m(f)},filter:h?function(f,p,v){return h.call(f,p,v)}:function(f,
p,v){var x=[];r.each(f,function(A,y,z){p.call(v,A,y,z)&&x.push(A)});return x},param:function(f,p){if(!r.isPlainObject(f))return"";p=p||"&";var v=[],x,A;for(x in f){A=f[x];x=q(x);if(w(A))v.push(x,"=",q(A+""),p);else if(r.isArray(A)&&A.length)for(var y=0,z=A.length;y<z;++y)w(A[y])&&v.push(x,k+"=",q(A[y]+""),p)}v.pop();return v.join("")},unparam:function(f,p){if(typeof f!=="string"||(f=r.trim(f)).length===0)return{};var v={};f=f.split(p||"&");for(var x,A,y,z=0,B=f.length;z<B;++z){p=f[z].split("=");x=
u(p[0]);try{A=u(p[1]||"")}catch(C){A=p[1]||""}if((y=x.match(b))&&y[1]){v[y[1]]=v[y[1]]||[];v[y[1]].push(A)}else v[x]=A}return v},later:function(f,p,v,x,A){p=p||0;x=x||{};var y=f,z=r.makeArray(A),B;if(r.isString(f))y=x[f];y||r.error("method undefined");f=function(){y.apply(x,z)};B=v?setInterval(f,p):setTimeout(f,p);return{id:B,interval:v,cancel:function(){this.interval?clearInterval(B):clearTimeout(B)}}},clone:function(f){var p=f,v,x;if(f&&((v=r.isArray(f))||r.isPlainObject(f))){p=v?[]:{};for(x in f)if(f.hasOwnProperty(x))p[x]=
r.clone(f[x])}return p},now:function(){return(new Date).getTime()},globalEval:function(f){if(f&&l.test(f)){var p=j.getElementsByTagName("head")[0]||i,v=j.createElement("script");v.text=f;p.insertBefore(v,p.firstChild);p.removeChild(v)}}});try{m(i.childNodes)}catch(d){m=function(f){for(var p=[],v=f.length-1;v>=0;v--)p[v]=f[v];return p}}})(window,KISSY);
(function(c,r,t){var w=c.document,m=w.getElementsByTagName("head")[0]||w.documentElement,j=2,i=3,g=4,s=r.mix,n=w.createElement("script").readyState?function(e,o){var q=e.onreadystatechange;e.onreadystatechange=function(){var u=e.readyState;if(u==="loaded"||u==="complete"){e.onreadystatechange=null;q&&q();o.call(this)}}}:function(e,o){e.addEventListener("load",o,false)},h=/\.css(?:\?|$)/i;c={add:function(e,o,q){var u=this.Env.mods,k;if(r.isString(e)&&!q&&r.isPlainObject(o)){k={};k[e]=o;e=k}if(r.isPlainObject(e)){r.each(e,
function(a,b){a.name=b;u[b]&&s(a,u[b],false)});s(u,e)}else{q=q||{};k=u[e]||{};e=q.host||k.host||e;k=u[e]||{};s(k,{name:e,status:j});if(!k.fns)k.fns=[];o&&k.fns.push(o);s(u[e]=k,q);k.attach!==false&&this.__isAttached(k.requires)&&this.__attachMod(k)}return this},use:function(e,o,q){e=e.replace(/\s+/g,"").split(",");q=q||{};var u=this,k=u.Env.mods,a=(q||0).global,b,l=e.length,d,f,p;a&&u.__mixMods(a);if(u.__isAttached(e))o&&o(u);else{for(b=0;b<l&&(d=k[e[b]]);b++)if(d.status!==g){if(q.order&&b>0){if(!d.requires)d.requires=
[];d._requires=d.requires.concat();f=e[b-1];if(!r.inArray(f,d.requires)&&!r.inArray(d.name,k[f].requires||[]))d.requires.push(f)}u.__attach(d,function(){if(!p&&u.__isAttached(e)){p=true;if(d._requires)d.requires=d._requires;o&&o(u)}},a)}return u}},__attach:function(e,o,q){function u(){if(k.__isAttached(a)){e.status===j&&k.__attachMod(e);e.status===g&&o()}}for(var k=this,a=e.requires||[],b=0,l=a.length;b<l;b++)k.__attach(k.Env.mods[a[b]],u,q);k.__buildPath(e);k.__load(e,u,q)},__mixMods:function(e){var o=
this.Env.mods,q=e.Env.mods,u;for(u in q)this.__mixMod(o,q,u,e)},__mixMod:function(e,o,q,u){var k=e[q]||{},a=k.status;r.mix(k,r.clone(o[q]));if(a)k.status=a;u&&this.__buildPath(k,u.Config.base);e[q]=k},__attachMod:function(e){var o=this;if(e.fns){r.each(e.fns,function(q){q&&q(o)});e.fns=t}e.status=g},__isAttached:function(e){for(var o=this.Env.mods,q,u=(e=r.makeArray(e)).length-1;u>=0&&(q=o[e[u]]);u--)if(q.status!==g)return false;return true},__load:function(e,o,q){function u(){k();if(e.status!==i){q&&
a.__mixMod(a.Env.mods,q.Env.mods,e.name,q);if(e.status!==g)e.status=j;o()}}function k(){l[b]=j}var a=this,b=e.fullpath,l=r.Env._loadQueue,d=l[b];e.status=e.status||0;if(e.status<1&&d)e.status=d.nodeName?1:j;if(r.isString(e.cssfullpath)){a.getScript(e.cssfullpath);e.cssfullpath=j}if(e.status<1&&b){e.status=1;d=a.getScript(b,{success:function(){KISSY.log(e.name+" is loaded.","info");u()},error:function(){e.status=i;k()},charset:e.charset});h.test(b)||(l[b]=d)}else e.status===1?n(d,u):o()},__buildPath:function(e,
o){function q(k,a){if(!e[a]&&e[k])e[a]=(o||u.base)+e[k];if(e[a]&&u.debug)e[a]=e[a].replace(/-min/g,"")}var u=this.Config;q("path","fullpath");e.cssfullpath!==j&&q("csspath","cssfullpath")},getScript:function(e,o,q){var u=h.test(e),k=w.createElement(u?"link":"script"),a=o,b,l,d;if(r.isPlainObject(a)){o=a.success;b=a.error;l=a.timeout;q=a.charset}if(u){k.href=e;k.rel="stylesheet"}else{k.src=e;k.async=true}if(q)k.charset=q;if(r.isFunction(o))u?o.call(k):n(k,function(){if(d){d.cancel();d=t}o.call(k)});
if(r.isFunction(b))d=r.later(function(){d=t;b()},(l||this.Config.timeout)*1E3);m.insertBefore(k,m.firstChild);return k}};s(r,c);r.each(c,function(e,o){r.__APP_MEMBERS.push(o)})})(window,KISSY);(function(c){var r={core:{path:"packages/core-min.js",charset:"utf-8"}};c.each(["sizzle","datalazyload","flash","switchable","suggest","overlay","imagezoom"],function(t){r[t]={path:t+"/"+t+"-pkg-min.js",requires:["core"],charset:"utf-8"}});c.add(r)})(KISSY);
KISSY.add("ua",function(c){var r=navigator.userAgent,t="",w="",m,j={},i=function(g){var s=0;return parseFloat(g.replace(/\./g,function(){return s++===0?".":""}))};if((m=r.match(/AppleWebKit\/([\d.]*)/))&&m[1]){j[t="webkit"]=i(m[1]);if((m=r.match(/Chrome\/([\d.]*)/))&&m[1])j[w="chrome"]=i(m[1]);else if((m=r.match(/\/([\d.]*) Safari/))&&m[1])j[w="safari"]=i(m[1]);if(/ Mobile\//.test(r))j.mobile="apple";else if(m=r.match(/NokiaN[^\/]*|Android \d\.\d|webOS\/\d\.\d/))j.mobile=m[0].toLowerCase()}else if((m=
r.match(/Presto\/([\d.]*)/))&&m[1]){j[t="presto"]=i(m[1]);if((m=r.match(/Opera\/([\d.]*)/))&&m[1]){j[w="opera"]=i(m[1]);if((m=r.match(/Opera\/.* Version\/([\d.]*)/))&&m[1])j[w]=i(m[1]);if((m=r.match(/Opera Mini[^;]*/))&&m)j.mobile=m[0].toLowerCase();else if((m=r.match(/Opera Mobi[^;]*/))&&m)j.mobile=m[0]}}else if((m=r.match(/MSIE\s([^;]*)/))&&m[1]){j[t="trident"]=0.1;j[w="ie"]=i(m[1]);if((m=r.match(/Trident\/([\d.]*)/))&&m[1])j[t]=i(m[1])}else if(m=r.match(/Gecko/)){j[t="gecko"]=0.1;if((m=r.match(/rv:([\d.]*)/))&&
m[1])j[t]=i(m[1]);if((m=r.match(/Firefox\/([\d.]*)/))&&m[1])j[w="firefox"]=i(m[1])}j.core=t;j.shell=w;j._numberify=i;c.UA=j});
KISSY.add("ua-extra",function(c){var r=c.UA,t=navigator.userAgent,w,m,j={},i=r._numberify;if(t.match(/360SE/))j[m="se360"]=3;else if(t.match(/Maxthon/)&&(w=window.external)){m="maxthon";try{j[m]=i(w.max_version)}catch(g){j[m]=0.1}}else if(w=t.match(/TencentTraveler\s([\d.]*)/))j[m="tt"]=w[1]?i(w[1]):0.1;else if(t.match(/TheWorld/))j[m="theworld"]=3;else if(w=t.match(/SE\s([\d.]*)/))j[m="sougou"]=w[1]?i(w[1]):0.1;m&&(j.shell=m);c.mix(r,j)});
KISSY.add("dom",function(c,r){function t(w,m){return w&&w.nodeType===m}c.DOM={_isElementNode:function(w){return t(w,1)},_isKSNode:function(w){return c.Node&&t(w,c.Node.TYPE)},_getWin:function(w){return w&&"scrollTo"in w&&w.document?w:t(w,9)?w.defaultView||w.parentWindow:w===r?window:false},_nodeTypeIs:t}});
KISSY.add("selector",function(c,r){function t(a,b){var l,d=[],f,p;b=w(b);if(c.isString(a)){a=c.trim(a);if(u.test(a)){if(a=m(a.slice(1),b))d=[a]}else if(l=k.exec(a)){f=l[1];p=l[2];l=l[3];if(b=f?m(f,b):b)if(l)if(!f||a.indexOf(h)!==-1)d=i(l,p,b);else{if((a=m(f,b))&&n.hasClass(a,l))d=[a]}else if(p)d=j(p,b)}else if(c.ExternalSelector)return c.ExternalSelector(a,b);else g(a)}else if(a&&(a[o]||a[q]))d=a[o]?[a[o]()]:a[q]();else if(a&&(c.isArray(a)||a.item&&!a.nodeType))d=a;else if(a)d=[a];if(d.item)d=c.makeArray(d);
d.each=function(v,x){return c.each(d,v,x)};return d}function w(a){if(a===r)a=s;else if(c.isString(a)&&u.test(a))a=m(a.slice(1),s);else if(a&&a.nodeType!==1&&a.nodeType!==9)a=null;return a}function m(a,b){if(b.nodeType!==9)b=b.ownerDocument;return b.getElementById(a)}function j(a,b){return b.getElementsByTagName(a)}function i(a,b,l){l=a=l.getElementsByClassName(a);var d=0,f=0,p=a.length,v;if(b&&b!==e){l=[];for(b=b.toUpperCase();d<p;++d){v=a[d];if(v.tagName===b)l[f++]=v}}return l}function g(a){c.error("Unsupported selector: "+
a)}var s=document,n=c.DOM,h=" ",e="*",o="getDOMNode",q=o+"s",u=/^#[\w-]+$/,k=/^(?:#([\w-]+))?\s*([\w-]+|\*)?\.?([\w-]+)?$/;(function(){var a=s.createElement("div");a.appendChild(s.createComment(""));if(a.getElementsByTagName(e).length>0)j=function(b,l){l=l.getElementsByTagName(b);if(b===e){b=[];for(var d=0,f=0,p;p=l[d++];)if(p.nodeType===1)b[f++]=p;l=b}return l}})();s.getElementsByClassName||(i=s.querySelectorAll?function(a,b,l){return l.querySelectorAll((b?b:"")+"."+a)}:function(a,b,l){b=l.getElementsByTagName(b||
e);l=[];var d=0,f=0,p=b.length,v,x;for(a=h+a+h;d<p;++d){v=b[d];if((x=v.className)&&(h+x+h).indexOf(a)>-1)l[f++]=v}return l});c.query=t;c.get=function(a,b){return t(a,b)[0]||null};c.mix(n,{query:t,get:c.get,filter:function(a,b){var l=t(a),d,f,p,v=[];if(c.isString(b)&&(d=k.exec(b))&&!d[1]){f=d[2];p=d[3];b=function(x){return!(f&&x.tagName!==f.toUpperCase()||p&&!n.hasClass(x,p))}}if(c.isFunction(b))v=c.filter(l,b);else if(b&&c.ExternalSelector)v=c.ExternalSelector._filter(a,b);else g(b);return v},test:function(a,
b){a=t(a);return n.filter(a,b).length===a.length}})});
KISSY.add("dom-class",function(c,r){function t(i,g,s,n){if(!(g=c.trim(g)))return n?false:r;i=c.query(i);var h=0,e=i.length;g=g.split(m);for(var o;h<e;h++){o=i[h];if(w._isElementNode(o)){o=s(o,g,g.length);if(o!==r)return o}}if(n)return false}var w=c.DOM,m=/[\.\s]\s*\.?/,j=/[\n\t]/g;c.mix(w,{hasClass:function(i,g){return t(i,g,function(s,n,h){if(s=s.className){s=" "+s+" ";for(var e=0,o=true;e<h;e++)if(s.indexOf(" "+n[e]+" ")<0){o=false;break}if(o)return true}},true)},addClass:function(i,g){t(i,g,function(s,
n,h){var e=s.className;if(e){var o=" "+e+" ";e=e;for(var q=0;q<h;q++)if(o.indexOf(" "+n[q]+" ")<0)e+=" "+n[q];s.className=c.trim(e)}else s.className=g})},removeClass:function(i,g){t(i,g,function(s,n,h){var e=s.className;if(e)if(h){e=(" "+e+" ").replace(j," ");for(var o=0,q;o<h;o++)for(q=" "+n[o]+" ";e.indexOf(q)>=0;)e=e.replace(q," ");s.className=c.trim(e)}else s.className=""})},replaceClass:function(i,g,s){w.removeClass(i,g);w.addClass(i,s)},toggleClass:function(i,g,s){var n=c.isBoolean(s),h;t(i,
g,function(e,o,q){for(var u=0,k;u<q;u++){k=o[u];h=n?!s:w.hasClass(e,k);w[h?"removeClass":"addClass"](e,k)}})}})});
KISSY.add("dom-attr",function(c,r){function t(k,a){return a&&a.nodeName.toUpperCase()===k.toUpperCase()}var w=c.UA,m=w.ie,j=m&&m<8,i=document.documentElement.textContent!==r?"textContent":"innerText",g=c.DOM,s=g._isElementNode,n=function(k){return g._nodeTypeIs(k,3)},h=/href|src|style/,e=/href|src|colspan|rowspan/,o=/\r/g,q=/radio|checkbox/,u={readonly:"readOnly"};j&&c.mix(u,{"for":"htmlFor","class":"className"});c.mix(g,{attr:function(k,a,b){if(c.isPlainObject(a))for(var l in a)g.attr(k,l,a[l]);
else if(a=c.trim(a)){a=a.toLowerCase();a=u[a]||a;if(b===r){k=c.get(k);if(!s(k))return r;var d;h.test(a)||(d=k[a]);if(d===r)d=k.getAttribute(a);if(j)if(e.test(a))d=k.getAttribute(a,2);else if(a==="style")d=k.style.cssText;return d===null?r:d}c.each(c.query(k),function(f){if(s(f))if(a==="style")f.style.cssText=b;else{if(a==="checked")f[a]=!!b;f.setAttribute(a,""+b)}})}},removeAttr:function(k,a){c.each(c.query(k),function(b){if(s(b)){g.attr(b,a,"");b.removeAttribute(a)}})},val:function(k,a){if(a===r){var b=
c.get(k);if(!s(b))return r;if(t("option",b))return(b.attributes.value||{}).specified?b.value:b.text;if(t("select",b)){var l=b.selectedIndex;k=b.options;if(l<0)return null;else if(b.type==="select-one")return g.val(k[l]);b=[];for(var d=0,f=k.length;d<f;++d)k[d].selected&&b.push(g.val(k[d]));return b}if(w.webkit&&q.test(b.type))return b.getAttribute("value")===null?"on":b.value;return(b.value||"").replace(o,"")}c.each(c.query(k),function(p){if(t("select",p)){if(c.isNumber(a))a+="";var v=c.makeArray(a),
x=p.options,A;d=0;for(f=x.length;d<f;++d){A=x[d];A.selected=c.inArray(g.val(A),v)}if(!v.length)p.selectedIndex=-1}else if(s(p))p.value=a})},text:function(k,a){if(a===r){k=c.get(k);if(s(k))return k[i]||"";else if(n(k))return k.nodeValue}else c.each(c.query(k),function(b){if(s(b))b[i]=a;else if(n(b))b.nodeValue=a})}})});
KISSY.add("dom-style",function(c,r){function t(a,b){var l=c.get(a),d=b===s?l.offsetWidth:l.offsetHeight;c.each(b===s?["Left","Right"]:["Top","Bottom"],function(f){d-=parseFloat(m._getComputedStyle(l,"padding"+f))||0;d-=parseFloat(m._getComputedStyle(l,"border"+f+"Width"))||0});return d}function w(a,b,l){var d=l;if(l===n&&e.test(b)){d=0;if(m.css(a,"position")==="absolute"){l=a[b==="left"?"offsetLeft":"offsetTop"];if(j.ie===8||j.opera)l-=h(m.css(a.offsetParent,"border-"+b+"-width"))||0;d=l-(h(m.css(a,
"margin-"+b))||0)}}return d}var m=c.DOM,j=c.UA,i=document,g=i.documentElement,s="width",n="auto",h=parseInt,e=/^left|top$/,o=/width|height|top|left|right|bottom|margin|padding/i,q=/-([a-z])/ig,u=function(a,b){return b.toUpperCase()},k={};c.mix(m,{_CUSTOM_STYLES:k,_getComputedStyle:function(a,b){var l="",d=a.ownerDocument;if(a.style)l=d.defaultView.getComputedStyle(a,null)[b];return l},css:function(a,b,l){if(c.isPlainObject(b))for(var d in b)m.css(a,d,b[d]);else{if(b.indexOf("-")>0)b=b.replace(q,u);
b=k[b]||b;if(l===r){a=c.get(a);d="";if(a&&a.style){d=b.get?b.get(a):a.style[b];if(d===""&&!b.get)d=w(a,b,m._getComputedStyle(a,b))}return d===r?"":d}else{if(l===null||l==="")l="";else if(!isNaN(new Number(l))&&o.test(b))l+="px";(b===s||b==="height")&&parseFloat(l)<0||c.each(c.query(a),function(f){if(f&&f.style){b.set?b.set(f,l):(f.style[b]=l);if(l==="")f.style.cssText||f.removeAttribute("style")}})}}},width:function(a,b){if(b===r)return t(a,s);else m.css(a,s,b)},height:function(a,b){if(b===r)return t(a,
"height");else m.css(a,"height",b)},show:function(a){c.query(a).each(function(b){b.style.display=(b._ks_cache||0).display||""})},hide:function(a){c.query(a).each(function(b){var l=b.style,d=l.display;if(d!=="none"){if(d){b._ks_cache=b._ks_cache||{};b._ks_cache.display=d}l.display="none"}})},addStyleSheet:function(a,b){var l;if(b)l=c.get("#"+b);if(!l){l=m.create("<style>",{id:b});c.get("head").appendChild(l);if(l.styleSheet)l.styleSheet.cssText=a;else l.appendChild(i.createTextNode(a))}}});if(g.style.cssFloat!==
r)k["float"]="cssFloat";else if(g.style.styleFloat!==r)k["float"]="styleFloat"});
KISSY.add("dom-style-ie",function(c,r){if(c.UA.ie){var t=c.DOM;c=document;var w=c.documentElement,m=t._CUSTOM_STYLES,j=/^-?\d+(?:px)?$/i,i=/^-?\d/,g=/^width|height$/;try{if(w.style.opacity===r&&w.filters)m.opacity={get:function(n){var h=100;try{h=n.filters["DXImageTransform.Microsoft.Alpha"].opacity}catch(e){try{h=n.filters("alpha").opacity}catch(o){}}return h/100+""},set:function(n,h){var e=n.style;n=(n.currentStyle||0).filter||"";e.zoom=1;if(n)if(n=n.replace(/alpha\(opacity=.+\)/ig,""))n+=", ";
e.filter=n+"alpha(opacity="+h*100+")"}}}catch(s){}if(!(c.defaultView||{}).getComputedStyle&&w.currentStyle)t._getComputedStyle=function(n,h){var e=n.style,o=n.currentStyle[h];if(g.test(h))o=t[h](n)+"px";else if(!j.test(o)&&i.test(o)){var q=e.left,u=n.runtimeStyle.left;n.runtimeStyle.left=n.currentStyle.left;e.left=h==="fontSize"?"1em":o||0;o=e.pixelLeft+"px";e.left=q;n.runtimeStyle.left=u}return o}}});
KISSY.add("dom-offset",function(c,r){function t(v){var x=0,A=0,y=h(v[a]);if(v[p]){v=v[p]();x=v[b];A=v[l];if(j.mobile!=="apple"){x+=m[d](y);A+=m[f](y)}}return{left:x,top:A}}function w(v,x){if(m.css(v,u)==="static")v.style[u]=k;var A=t(v),y={},z,B;for(B in x){z=q(m.css(v,B),10)||0;y[B]=z+x[B]-A[B]}m.css(v,y)}var m=c.DOM,j=c.UA,i=window,g=document,s=m._isElementNode,n=m._nodeTypeIs,h=m._getWin,e=g.compatMode==="CSS1Compat",o=Math.max,q=parseInt,u="position",k="relative",a="ownerDocument",b="left",l=
"top",d="scrollLeft",f="scrollTop",p="getBoundingClientRect";c.mix(m,{offset:function(v,x){if(!(v=c.get(v))||!v[a])return null;if(x===r)return t(v);w(v,x)},scrollIntoView:function(v,x,A,y){if((v=c.get(v))&&v[a]){y=y===r?true:!!y;A=A===r?true:!!A;if(!x||x===i)return v.scrollIntoView(A);x=c.get(x);if(n(x,9))x=h(x);var z=x&&"scrollTo"in x&&x.document,B=m.offset(v),C=z?{left:m.scrollLeft(x),top:m.scrollTop(x)}:m.offset(x),D={left:B[b]-C[b],top:B[l]-C[l]};B=z?m.viewportHeight(x):x.clientHeight;C=z?m.viewportWidth(x):
x.clientWidth;var E=m[d](x),F=m[f](x),G=E+C,M=F+B,I=v.offsetHeight;v=v.offsetWidth;var H=D.left+E-(q(m.css(x,"borderLeftWidth"))||0);D=D.top+F-(q(m.css(x,"borderTopWidth"))||0);var N=H+v,J=D+I,K,L;if(I>B||D<F||A)K=D;else if(J>M)K=J-B;if(y)if(v>C||H<E||A)L=H;else if(N>G)L=N-C;if(z){if(K!==r||L!==r)x.scrollTo(L,K)}else{if(K!==r)x[f]=K;if(L!==r)x[d]=L}}}});c.each(["Left","Top"],function(v,x){var A="scroll"+v;m[A]=function(y){var z=0,B=h(y),C;if(B&&(C=B.document))z=B[x?"pageYOffset":"pageXOffset"]||C.documentElement[A]||
C.body[A];else if(s(y=c.get(y)))z=y[A];return z}});c.each(["Width","Height"],function(v){m["doc"+v]=function(x){x=x||g;return o(e?x.documentElement["scroll"+v]:x.body["scroll"+v],m["viewport"+v](x))};m["viewport"+v]=function(x){var A="inner"+v;x=h(x);var y=x.document;return A in x?x[A]:e?y.documentElement["client"+v]:y.body["client"+v]}})});
KISSY.add("dom-traversal",function(c,r){function t(i,g,s,n){if(!(i=c.get(i)))return null;if(g===r)g=1;var h=null,e,o;if(c.isNumber(g)&&g>=0){if(g===0)return i;e=0;o=g;g=function(){return++e===o}}for(;i=i[s];)if(j(i)&&(!g||m.test(i,g))&&(!n||n(i))){h=i;break}return h}function w(i,g,s){var n=[];var h=i=c.get(i);if(i&&s)h=i.parentNode;if(h){s=0;for(h=h.firstChild;h;h=h.nextSibling)if(j(h)&&h!==i&&(!g||m.test(h,g)))n[s++]=h}return n}var m=c.DOM,j=m._isElementNode;c.mix(m,{parent:function(i,g){return t(i,
g,"parentNode",function(s){return s.nodeType!=11})},next:function(i,g){return t(i,g,"nextSibling")},prev:function(i,g){return t(i,g,"previousSibling")},siblings:function(i,g){return w(i,g,true)},children:function(i,g){return w(i,g)},contains:function(i,g){var s=false;if((i=c.get(i))&&(g=c.get(g)))if(i.contains)return i.contains(g);else if(i.compareDocumentPosition)return!!(i.compareDocumentPosition(g)&16);else for(;!s&&(g=g.parentNode);)s=g==i;return s}})});
KISSY.add("dom-create",function(c,r){function t(y,z){o(y)&&c.isPlainObject(z)&&s.attr(y,z);return y}function w(y,z){var B=null,C;if(y&&(y.push||y.item)&&y[0]){z=z||y[0].ownerDocument;B=z.createDocumentFragment();if(y.item)y=c.makeArray(y);z=0;for(C=y.length;z<C;z++)B.appendChild(y[z])}return B}function m(y){var z=y.cloneNode(true);if(n.ie<8)z.innerHTML=y.innerHTML;return z}function j(y,z,B,C){if(B){var D=c.guid("ks-tmp-"),E=new RegExp(a);z+='<span id="'+D+'"></span>';c.available(D,function(){var F=
c.get("head"),G,M,I,H,N,J;for(E.lastIndex=0;G=E.exec(z);)if((I=(M=G[1])?M.match(l):false)&&I[2]){G=g.createElement("script");G.src=I[2];if((H=M.match(d))&&H[2])G.charset=H[2];G.async=true;F.appendChild(G)}else if((J=G[2])&&J.length>0)c.globalEval(J);(N=g.getElementById(D))&&s.remove(N);c.isFunction(C)&&C()});i(y,z)}else{i(y,z);c.isFunction(C)&&C()}}function i(y,z){z=(z+"").replace(a,"");try{y.innerHTML=z}catch(B){for(;y.firstChild;)y.removeChild(y.firstChild);z&&y.appendChild(s.create(z))}}var g=
document,s=c.DOM,n=c.UA,h=n.ie,e=s._nodeTypeIs,o=s._isElementNode,q=s._isKSNode,u=g.createElement("div"),k=/<(\w+)/,a=/<script([^>]*)>([\s\S]*?)<\/script>/ig,b=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,l=/\ssrc=(['"])(.*?)\1/i,d=/\scharset=(['"])(.*?)\1/i;c.mix(s,{create:function(y,z,B){if(e(y,1)||e(y,3))return m(y);if(q(y))return m(y[0]);if(!(y=c.trim(y)))return null;var C=null;C=s._creators;var D,E="div",F;if(D=b.exec(y))C=(B||g).createElement(D[1]);else{if((D=k.exec(y))&&(F=D[1])&&c.isFunction(C[F=F.toLowerCase()]))E=
F;y=C[E](y,B).childNodes;C=y.length===1?y[0].parentNode.removeChild(y[0]):w(y,B||g)}return t(C,z)},_creators:{div:function(y,z){z=z?z.createElement("div"):u;z.innerHTML=y;return z}},html:function(y,z,B,C){if(z===r){y=c.get(y);if(o(y))return y.innerHTML}else c.each(c.query(y),function(D){o(D)&&j(D,z,B,C)})},remove:function(y){c.each(c.query(y),function(z){o(z)&&z.parentNode&&z.parentNode.removeChild(z)})}});if(n.gecko||h){var f=s._creators,p=s.create,v=/(?:\/(?:thead|tfoot|caption|col|colgroup)>)+\s*<tbody/,
x={option:"select",td:"tr",tr:"tbody",tbody:"table",col:"colgroup",legend:"fieldset"};for(var A in x)(function(y){f[A]=function(z,B){return p("<"+y+">"+z+"</"+y+">",null,B)}})(x[A]);if(h){f.script=function(y,z){z=z?z.createElement("div"):u;z.innerHTML="-"+y;z.removeChild(z.firstChild);return z};if(h<8)f.tbody=function(y,z){z=p("<table>"+y+"</table>",null,z);var B=z.children.tags("tbody")[0];z.children.length>1&&B&&!v.test(y)&&B.parentNode.removeChild(B);return z}}c.mix(f,{optgroup:f.option,th:f.td,
thead:f.tbody,tfoot:f.tbody,caption:f.tbody,colgroup:f.tbody})}});KISSY.add("dom-insertion",function(c){c.mix(c.DOM,{insertBefore:function(r,t){if((r=c.get(r))&&(t=c.get(t))&&t.parentNode)t.parentNode.insertBefore(r,t);return r},insertAfter:function(r,t){if((r=c.get(r))&&(t=c.get(t))&&t.parentNode)t.nextSibling?t.parentNode.insertBefore(r,t.nextSibling):t.parentNode.appendChild(r);return r}})});
KISSY.add("event",function(c,r){function t(k,a,b,l,d){if(c.isString(a))a=c.query(a);if(c.isArray(a)){c.each(a,function(f){u[k](f,b,l,d)});return true}if((b=c.trim(b))&&b.indexOf(e)>0){c.each(b.split(e),function(f){u[k](a,f,l,d)});return true}}function w(k){return i(k)?k[h]:-1}function m(k,a){if(!i(k))return c.error("Text or comment node is not valid event target.");try{k[h]=a}catch(b){c.error(b)}}function j(k){try{k[h]=r;delete k[h]}catch(a){}}function i(k){return k&&k.nodeType!==3&&k.nodeType!==
8}var g=document,s=g.addEventListener?function(k,a,b,l){k.addEventListener&&k.addEventListener(a,b,!!l)}:function(k,a,b){k.attachEvent&&k.attachEvent("on"+a,b)},n=g.removeEventListener?function(k,a,b,l){k.removeEventListener&&k.removeEventListener(a,b,!!l)}:function(k,a,b){k.detachEvent&&k.detachEvent("on"+a,b)},h="ksEventTargetId",e=" ",o=c.now(),q={},u={EVENT_GUID:h,special:{},add:function(k,a,b,l){if(!t("add",k,a,b,l)){var d=w(k),f,p,v,x,A;if(!(d===-1||!a||!c.isFunction(b))){if(!d){m(k,d=o++);
q[d]={target:k,events:{}}}p=q[d].events;if(!p[a]){f=((d=!k.isCustomEventTarget)||k._supportSpecialEvent)&&u.special[a]||{};v=function(y,z){if(!y||!y.fixed){y=new c.EventObject(k,y,a);c.isPlainObject(z)&&c.mix(y,z)}f.setup&&f.setup(y);return(f.handle||u._handle)(k,y,p[a].listeners)};p[a]={handle:v,listeners:[]};x=f.fix||a;A=f.capture;if(d)s(k,x,v,A);else k._addEvent&&k._addEvent(x,v,A)}p[a].listeners.push({fn:b,scope:l||k})}}},remove:function(k,a,b,l){if(!t("remove",k,a,b,l)){var d=w(k),f,p,v,x,A,
y,z;if(d!==-1)if(d&&(f=q[d]))if(f.target===k){l=l||k;f=f.events||{};if(p=f[a]){v=p.listeners;y=v.length;if(c.isFunction(b)&&y){A=x=0;for(z=[];x<y;++x)if(b!==v[x].fn||l!==v[x].scope)z[A++]=v[x];p.listeners=z;y=z.length}if(b===r||y===0){if(k.isCustomEventTarget)k._addEvent&&k._removeEvent(a,p.handle);else{b=u.special[a]||{};n(k,b.fix||a,p.handle)}delete f[a]}}if(a===r||c.isEmptyObject(f)){for(a in f)u.remove(k,a);delete q[d];j(k)}}}},_handle:function(k,a,b){b=b.slice(0);for(var l,d=0,f=b.length;d<f;++d){l=
b[d];l=l.fn.call(l.scope||k,a);if(l===false&&k.isCustomEventTarget||a.isImmediatePropagationStopped)break}return l},_getCache:function(k){return q[k]},_simpleAdd:s,_simpleRemove:n};u.on=u.add;c.Event=u});
KISSY.add("event-object",function(c,r){function t(j,i,g){this.currentTarget=j;this.originalEvent=i||{};if(i){this.type=i.type;this._fix()}else{this.type=g;this.target=j}this.currentTarget=j;this.fixed=true}var w=document,m="altKey attrChange attrName bubbles button cancelable charCode clientX clientY ctrlKey currentTarget data detail eventPhase fromElement handler keyCode layerX layerY metaKey newValue offsetX offsetY originalTarget pageX pageY prevValue relatedNode relatedTarget screenX screenY shiftKey srcElement target toElement view wheelDelta which".split(" ");c.augment(t,
{_fix:function(){var j=this.originalEvent,i=m.length,g,s=this.currentTarget;for(s=s.nodeType===9?s:s.ownerDocument||w;i;){g=m[--i];this[g]=j[g]}if(!this.target)this.target=this.srcElement||w;if(this.target.nodeType===3)this.target=this.target.parentNode;if(!this.relatedTarget&&this.fromElement)this.relatedTarget=this.fromElement===this.target?this.toElement:this.fromElement;if(this.pageX===r&&this.clientX!==r){j=s.documentElement;i=s.body;this.pageX=this.clientX+(j&&j.scrollLeft||i&&i.scrollLeft||
0)-(j&&j.clientLeft||i&&i.clientLeft||0);this.pageY=this.clientY+(j&&j.scrollTop||i&&i.scrollTop||0)-(j&&j.clientTop||i&&i.clientTop||0)}if(this.which===r)this.which=this.charCode!==r?this.charCode:this.keyCode;if(this.metaKey===r)this.metaKey=this.ctrlKey;if(!this.which&&this.button!==r)this.which=this.button&1?1:this.button&2?3:this.button&4?2:0},preventDefault:function(){var j=this.originalEvent;if(j.preventDefault)j.preventDefault();else j.returnValue=false;this.isDefaultPrevented=true},stopPropagation:function(){var j=
this.originalEvent;if(j.stopPropagation)j.stopPropagation();else j.cancelBubble=true;this.isPropagationStopped=true},stopImmediatePropagation:function(){var j=this.originalEvent;j.stopImmediatePropagation?j.stopImmediatePropagation():this.stopPropagation();this.isImmediatePropagationStopped=true},halt:function(j){j?this.stopImmediatePropagation():this.stopPropagation();this.preventDefault()}});c.EventObject=t});
KISSY.add("event-target",function(c,r){var t=c.Event,w=t.EVENT_GUID;c.EventTarget={isCustomEventTarget:true,fire:function(m,j){if((m=((t._getCache(this[w]||-1)||{}).events||{})[m])&&c.isFunction(m.handle))return m.handle(r,j);return this},on:function(m,j,i){t.add(this,m,j,i);return this},detach:function(m,j,i){t.remove(this,m,j,i);return this}}});
KISSY.add("event-mouseenter",function(c){var r=c.Event;c.UA.ie||c.each([{name:"mouseenter",fix:"mouseover"},{name:"mouseleave",fix:"mouseout"}],function(t){r.special[t.name]={fix:t.fix,setup:function(w){w.type=t.name},handle:function(w,m,j){var i=m.relatedTarget;try{for(;i&&i!==w;)i=i.parentNode;i!==w&&r._handle(w,m,j)}catch(g){}}}})});
KISSY.add("event-focusin",function(c){var r=c.Event;document.addEventListener&&c.each([{name:"focusin",fix:"focus"},{name:"focusout",fix:"blur"}],function(t){r.special[t.name]={fix:t.fix,capture:true,setup:function(w){w.type=t.name}}})});
KISSY.add("node",function(c){function r(m,j,i){var g;if(!(this instanceof r))return new r(m,j,i);if(m){if(w(m,1)||w(m,3))g=m;else if(c.isString(m))g=t.create(m,j,i);this[0]=g}else this.length=0}var t=c.DOM,w=t._nodeTypeIs;r.TYPE="-ks-Node";c.augment(r,{length:1,getDOMNode:function(){return this[0]},nodeType:r.TYPE});c.one=function(m,j){return(m=c.get(m,j))?new r(m):null};c.Node=r});
KISSY.add("nodelist",function(c){function r(m){if(!(this instanceof r))return new r(m);w.push.apply(this,m||[])}var t=c.DOM,w=Array.prototype;c.mix(r.prototype,{length:0,item:function(m){var j=null;if(t._isElementNode(this[m]))j=new c.Node(this[m]);return j},getDOMNodes:function(){return w.slice.call(this)},each:function(m,j){var i=this.length,g=0,s;for(s=new c.Node(this[0]);g<i&&m.call(j||s,s,g,this)!==false;s=new c.Node(this[++g]));return this}});c.all=function(m,j){return new r(c.query(m,j,true))};
c.NodeList=r});
KISSY.add("node-attach",function(c,r){function t(k,arguments,a,b){var l=[this[k?e:h]()].concat(c.makeArray(arguments));if(arguments[a]===r)return b.apply(m,l);else{b.apply(m,l);return this}}function w(k,a){c.each(k,function(b){c.each([s,n],function(l,d){l[b]=function(f){switch(a){case o:return function(){return t.call(this,d,arguments,1,f)};case q:return function(){return t.call(this,d,arguments,0,f)};case u:return function(){var p=this[d?e:h]();return(p=f.apply(m,[p].concat(c.makeArray(arguments))))?new (c[c.isArray(p)?
"NodeList":"Node"])(p):null};default:return function(){var p=this[d?e:h]();p=f.apply(m,[p].concat(c.makeArray(arguments)));return p===r?this:p}}}(m[b])})})}var m=c.DOM,j=c.Event,i=m._nodeTypeIs,g=m._isKSNode,s=c.Node.prototype,n=c.NodeList.prototype,h="getDOMNode",e=h+"s",o=1,q=2,u=4;c.mix(s,{one:function(k){return c.one(k,this[0])},all:function(k){return c.all(k,this[0])}});w(["hasClass","addClass","removeClass","replaceClass","toggleClass"]);w(["attr","removeAttr"],o);w(["val","text"],q);w(["css"],
o);w(["width","height"],q);w(["offset"],q);w(["scrollIntoView"]);w(["parent","next","prev","siblings","children"],u);w(["contains"]);w(["html"],q);w(["remove"]);c.each(["insertBefore","insertAfter"],function(k){s[k]=function(a){m[k].call(m,this[0],a);return this}});c.each([s,n],function(k,a){c.mix(k,{append:function(b){b&&c.each(this,function(l){var d;if(a||c.isString(b))d=m.create(b);else{if(i(b,1)||i(b,3))d=b;if(g(b))d=b[0]}l.appendChild(d)});return this},appendTo:function(b){if((b=c.get(b))&&b.appendChild)c.each(this,
function(l){b.appendChild(l)});return this}})});c.each([s,n],function(k){c.mix(k,c.EventTarget,{_supportSpecialEvent:true});k._addEvent=function(a,b,l){for(var d=0,f=this.length;d<f;d++)j._simpleAdd(this[d],a,b,l)};k._removeEvent=function(a,b,l){for(var d=0,f=this.length;d<f;d++)j._simpleRemove(this[d],a,b,l)};delete k.fire})});
KISSY.add("cookie",function(c){function r(j){return c.isString(j)&&j!==""}var t=document,w=encodeURIComponent,m=decodeURIComponent;c.Cookie={get:function(j){var i;if(r(j))if(j=t.cookie.match("(?:^| )"+j+"(?:(?:=([^;]*))|;|$)"))i=j[1]?m(j[1]):"";return i},set:function(j,i,g,s,n,h){i=w(i);var e=g;if(typeof e==="number"){e=new Date;e.setTime(e.getTime()+g*864E5)}if(e instanceof Date)i+="; expires="+e.toUTCString();if(r(s))i+="; domain="+s;if(r(n))i+="; path="+n;if(h)i+="; secure";t.cookie=j+"="+i},remove:function(j,
i,g,s){this.set(j,"",0,i,g,s)}}});
KISSY.add("json",function(c){function r(h){return h<10?"0"+h:h}function t(h){j.lastIndex=0;return j.test(h)?'"'+h.replace(j,function(e){var o=s[e];return typeof o==="string"?o:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+h+'"'}function w(h,e){var o,q,u=i,k,a=e[h];if(a&&typeof a==="object"&&typeof a.toJSON==="function")a=a.toJSON(h);if(typeof n==="function")a=n.call(e,h,a);switch(typeof a){case "string":return t(a);case "number":return isFinite(a)?String(a):"null";case "boolean":case "null":return String(a);
case "object":if(!a)return"null";i+=g;k=[];if(Object.prototype.toString.apply(a)==="[object Array]"){q=a.length;for(h=0;h<q;h+=1)k[h]=w(h,a)||"null";e=k.length===0?"[]":i?"[\n"+i+k.join(",\n"+i)+"\n"+u+"]":"["+k.join(",")+"]";i=u;return e}if(n&&typeof n==="object"){q=n.length;for(h=0;h<q;h+=1){o=n[h];if(typeof o==="string")if(e=w(o,a))k.push(t(o)+(i?": ":":")+e)}}else for(o in a)if(Object.hasOwnProperty.call(a,o))if(e=w(o,a))k.push(t(o)+(i?": ":":")+e);e=k.length===0?"{}":i?"{\n"+i+k.join(",\n"+i)+
"\n"+u+"}":"{"+k.join(",")+"}";i=u;return e}}c=c.JSON=window.JSON||{};if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+r(this.getUTCMonth()+1)+"-"+r(this.getUTCDate())+"T"+r(this.getUTCHours())+":"+r(this.getUTCMinutes())+":"+r(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()}}var m=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
j=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,i,g,s={"\u0008":"\\b","\t":"\\t","\n":"\\n","\u000c":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},n;if(typeof c.stringify!=="function")c.stringify=function(h,e,o){var q;g=i="";if(typeof o==="number")for(q=0;q<o;q+=1)g+=" ";else if(typeof o==="string")g=o;if((n=e)&&typeof e!=="function"&&(typeof e!=="object"||typeof e.length!=="number"))throw new Error("JSON.stringify");return w("",
{"":h})};if(typeof c.parse!=="function")c.parse=function(h,e){function o(q,u){var k,a,b=q[u];if(b&&typeof b==="object")for(k in b)if(Object.hasOwnProperty.call(b,k)){a=o(b,k);if(a!==undefined)b[k]=a;else delete b[k]}return e.call(q,u,b)}h=String(h);m.lastIndex=0;if(m.test(h))h=h.replace(m,function(q){return"\\u"+("0000"+q.charCodeAt(0).toString(16)).slice(-4)});if(/^[\],:{}\s]*$/.test(h.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,
"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){h=eval("("+h+")");return typeof e==="function"?o({"":h},""):h}throw new SyntaxError("JSON.parse");}});
KISSY.add("anim-easing",function(c){var r=Math,t=r.PI,w=r.pow,m=r.sin,j=1.70158,i={easeNone:function(g){return g},easeIn:function(g){return g*g},easeOut:function(g){return(2-g)*g},easeBoth:function(g){return(g*=2)<1?0.5*g*g:0.5*(1- --g*(g-2))},easeInStrong:function(g){return g*g*g*g},easeOutStrong:function(g){return 1- --g*g*g*g},easeBothStrong:function(g){return(g*=2)<1?0.5*g*g*g*g:0.5*(2-(g-=2)*g*g*g)},elasticIn:function(g){if(g===0||g===1)return g;return-(w(2,10*(g-=1))*m((g-0.075)*2*t/0.3))},
elasticOut:function(g){if(g===0||g===1)return g;return w(2,-10*g)*m((g-0.075)*2*t/0.3)+1},elasticBoth:function(g){if(g===0||(g*=2)===2)return g;if(g<1)return-0.5*w(2,10*(g-=1))*m((g-0.1125)*2*t/0.45);return w(2,-10*(g-=1))*m((g-0.1125)*2*t/0.45)*0.5+1},backIn:function(g){if(g===1)g-=0.0010;return g*g*((j+1)*g-j)},backOut:function(g){return(g-=1)*g*((j+1)*g+j)+1},backBoth:function(g){if((g*=2)<1)return 0.5*g*g*(((j*=1.525)+1)*g-j);return 0.5*((g-=2)*g*(((j*=1.525)+1)*g+j)+2)},bounceIn:function(g){return 1-
i.bounceOut(1-g)},bounceOut:function(g){return g<1/2.75?7.5625*g*g:g<2/2.75?7.5625*(g-=1.5/2.75)*g+0.75:g<2.5/2.75?7.5625*(g-=2.25/2.75)*g+0.9375:7.5625*(g-=2.625/2.75)*g+0.984375},bounceBoth:function(g){if(g<0.5)return i.bounceIn(g*2)*0.5;return i.bounceOut(g*2-1)*0.5+0.5}};c.Easing=i});
KISSY.add("anim",function(c,r){function t(k,a,b,l,d){if(k=c.get(k)){if(!(this instanceof t))return new t(k,a,b,l,d);var f=c.isPlainObject(b);a=a;this.domEl=k;if(c.isPlainObject(a))a=c.param(a,";").replace(/=/g,":");this.props=w(a);this.targetStyle=a;if(f)k=c.merge(u,b);else{k=c.clone(u);b&&(k.duration=h(b,10)||1);c.isString(l)&&(l=n[l]);c.isFunction(l)&&(k.easing=l);c.isFunction(d)&&(k.complete=d)}this.config=k;c.isFunction(d)&&this.on(q,d)}}function w(k){var a={},b=o.length,l;e.innerHTML='<div style="'+
k+'"></div>';for(k=e.firstChild.style;b--;)if(l=k[o[b]])a[o[b]]=m(l);return a}function m(k){var a=h(k);k=(k+"").replace(/^[-\d\.]+/,"");return isNaN(a)?{v:k,u:"",f:i}:{v:a,u:k,f:j}}function j(k,a,b){return(k+(a-k)*b).toFixed(3)}function i(k,a,b){for(var l=2,d,f,p=[],v=[];d=3,f=arguments[l-1],l--;)if(g(f,0,4)==="rgb(")for(f=f.match(/\d+/g);d--;)p.push(~~f[d]);else if(g(f,0)==="#"){if(f.length===4)f="#"+g(f,1)+g(f,1)+g(f,2)+g(f,2)+g(f,3)+g(f,3);for(;d--;)p.push(parseInt(g(f,1+d*2,2),16))}else return a;
for(;d--;){l=~~(p[d+3]+(p[d]-p[d+3])*b);v.push(l<0?0:l>255?255:l)}return"rgb("+v.join(",")+")"}function g(k,a,b){return k.substr(a,b||1)}var s=c.DOM,n=c.Easing,h=parseFloat,e=s.create("<div>"),o="backgroundColor borderBottomColor borderBottomWidth borderBottomStyle borderLeftColor borderLeftWidth borderLeftStyle borderRightColor borderRightWidth borderRightStyle borderSpacing borderTopColor borderTopWidth borderTopStyle bottom color font fontFamily fontSize fontWeight height left letterSpacing lineHeight marginBottom marginLeft marginRight marginTop maxHeight maxWidth minHeight minWidth opacity outlineColor outlineOffset outlineWidth paddingBottom paddingLeft paddingRight paddingTop right textIndent top width wordSpacing zIndex".split(" "),
q="complete",u={duration:1,easing:n.easeNone};c.augment(t,c.EventTarget,{run:function(){var k=this,a=k.config,b=k.domEl,l=a.duration*1E3,d=a.easing,f=c.now(),p=f+l,v=k.props,x={},A;for(A in v)x[A]=m(s.css(b,A));if(k.fire("start")!==false){k.stop();k.timer=c.later(a=function(){var y=c.now(),z=y>p?1:(y-f)/l,B,C,D;for(A in v){B=x[A];C=v[A];if(C.v==0)C.u=B.u;if(B.u!==C.u)B.v=0;s.css(b,A,C.f(B.v,C.v,d(z))+C.u)}if(k.fire("step")===false||(D=y>p)){k.stop();D&&k.fire(q)}},13,true);a();return k}},stop:function(k){var a=
this.domEl,b=this.targetStyle;if(this.timer){this.timer.cancel();this.timer=r}if(k){c.UA.ie&&b.indexOf("opacity")>-1&&s.css(a,"opacity",this.props.opacity.v);a.style.cssText+=";"+b;this.fire(q)}return this}});c.Anim=t});KISSY.add("anim-node-plugin",function(c,r){var t=c.Anim;c.each([c.Node.prototype,c.NodeList.prototype],function(w){w.animate=function(){var m=c.makeArray(arguments);c.each(this,function(j){t.apply(r,[j].concat(m)).run()});return this}})});KISSY.add("core");
(function(){function c(a,b,l,d,f,p){f=0;for(var v=d.length;f<v;f++){var x=d[f];if(x){x=x[a];for(var A=false;x;){if(x.sizcache===l){A=d[x.sizset];break}if(x.nodeType===1&&!p){x.sizcache=l;x.sizset=f}if(x.nodeName.toLowerCase()===b){A=x;break}x=x[a]}d[f]=A}}}function r(a,b,l,d,f,p){f=0;for(var v=d.length;f<v;f++){var x=d[f];if(x){x=x[a];for(var A=false;x;){if(x.sizcache===l){A=d[x.sizset];break}if(x.nodeType===1){if(!p){x.sizcache=l;x.sizset=f}if(typeof b!=="string"){if(x===b){A=true;break}}else if(g.filter(b,
[x]).length>0){A=x;break}}x=x[a]}d[f]=A}}}var t=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,w=0,m=Object.prototype.toString,j=false,i=true;[0,0].sort(function(){i=false;return 0});var g=function(a,b,l,d){l=l||[];var f=b=b||document;if(b.nodeType!==1&&b.nodeType!==9)return[];if(!a||typeof a!=="string")return l;var p=[],v,x,A,y,z=true,B=g.isXML(b),C=a,D;do{t.exec("");if(v=t.exec(C)){C=v[3];p.push(v[1]);if(v[2]){y=
v[3];break}}}while(v);if(p.length>1&&n.exec(a))if(p.length===2&&s.relative[p[0]])x=k(p[0]+p[1],b);else for(x=s.relative[p[0]]?[b]:g(p.shift(),b);p.length;){a=p.shift();if(s.relative[a])a+=p.shift();x=k(a,x)}else{if(!d&&p.length>1&&b.nodeType===9&&!B&&s.match.ID.test(p[0])&&!s.match.ID.test(p[p.length-1])){v=g.find(p.shift(),b,B);b=v.expr?g.filter(v.expr,v.set)[0]:v.set[0]}if(b){v=d?{expr:p.pop(),set:o(d)}:g.find(p.pop(),p.length===1&&(p[0]==="~"||p[0]==="+")&&b.parentNode?b.parentNode:b,B);x=v.expr?
g.filter(v.expr,v.set):v.set;if(p.length>0)A=o(x);else z=false;for(;p.length;){v=D=p.pop();if(s.relative[D])v=p.pop();else D="";if(v==null)v=b;s.relative[D](A,v,B)}}else A=[]}A||(A=x);A||g.error(D||a);if(m.call(A)==="[object Array]")if(z)if(b&&b.nodeType===1)for(a=0;A[a]!=null;a++){if(A[a]&&(A[a]===true||A[a].nodeType===1&&g.contains(b,A[a])))l.push(x[a])}else for(a=0;A[a]!=null;a++)A[a]&&A[a].nodeType===1&&l.push(x[a]);else l.push.apply(l,A);else o(A,l);if(y){g(y,f,l,d);g.uniqueSort(l)}return l};
g.uniqueSort=function(a){if(u){j=i;a.sort(u);if(j)for(var b=1;b<a.length;b++)a[b]===a[b-1]&&a.splice(b--,1)}return a};g.matches=function(a,b){return g(a,null,null,b)};g.find=function(a,b,l){var d;if(!a)return[];for(var f=0,p=s.order.length;f<p;f++){var v=s.order[f],x;if(x=s.leftMatch[v].exec(a)){var A=x[1];x.splice(1,1);if(A.substr(A.length-1)!=="\\"){x[1]=(x[1]||"").replace(/\\/g,"");d=s.find[v](x,b,l);if(d!=null){a=a.replace(s.match[v],"");break}}}}d||(d=b.getElementsByTagName("*"));return{set:d,
expr:a}};g.filter=function(a,b,l,d){for(var f=a,p=[],v=b,x,A,y=b&&b[0]&&g.isXML(b[0]);a&&b.length;){for(var z in s.filter)if((x=s.leftMatch[z].exec(a))!=null&&x[2]){var B=s.filter[z],C,D;D=x[1];A=false;x.splice(1,1);if(D.substr(D.length-1)!=="\\"){if(v===p)p=[];if(s.preFilter[z])if(x=s.preFilter[z](x,v,l,p,d,y)){if(x===true)continue}else A=C=true;if(x)for(var E=0;(D=v[E])!=null;E++)if(D){C=B(D,x,E,v);var F=d^!!C;if(l&&C!=null)if(F)A=true;else v[E]=false;else if(F){p.push(D);A=true}}if(C!==undefined){l||
(v=p);a=a.replace(s.match[z],"");if(!A)return[];break}}}if(a===f)if(A==null)g.error(a);else break;f=a}return v};g.error=function(a){throw"Syntax error, unrecognized expression: "+a;};var s=g.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(['"]*)(.*?)\3|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\((even|odd|[\dn+\-]*)\))?/,
POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(a){return a.getAttribute("href")}},relative:{"+":function(a,b){var l=typeof b==="string",d=l&&!/\W/.test(b);l=l&&!d;if(d)b=b.toLowerCase();d=0;for(var f=a.length,p;d<f;d++)if(p=a[d]){for(;(p=p.previousSibling)&&p.nodeType!==1;);a[d]=l||p&&p.nodeName.toLowerCase()===
b?p||false:p===b}l&&g.filter(b,a,true)},">":function(a,b){var l=typeof b==="string",d,f=0,p=a.length;if(l&&!/\W/.test(b))for(b=b.toLowerCase();f<p;f++){if(d=a[f]){l=d.parentNode;a[f]=l.nodeName.toLowerCase()===b?l:false}}else{for(;f<p;f++)if(d=a[f])a[f]=l?d.parentNode:d.parentNode===b;l&&g.filter(b,a,true)}},"":function(a,b,l){var d=w++,f=r,p;if(typeof b==="string"&&!/\W/.test(b)){p=b=b.toLowerCase();f=c}f("parentNode",b,d,a,p,l)},"~":function(a,b,l){var d=w++,f=r,p;if(typeof b==="string"&&!/\W/.test(b)){p=
b=b.toLowerCase();f=c}f("previousSibling",b,d,a,p,l)}},find:{ID:function(a,b,l){if(typeof b.getElementById!=="undefined"&&!l)return(a=b.getElementById(a[1]))?[a]:[]},NAME:function(a,b){if(typeof b.getElementsByName!=="undefined"){var l=[];b=b.getElementsByName(a[1]);for(var d=0,f=b.length;d<f;d++)b[d].getAttribute("name")===a[1]&&l.push(b[d]);return l.length===0?null:l}},TAG:function(a,b){return b.getElementsByTagName(a[1])}},preFilter:{CLASS:function(a,b,l,d,f,p){a=" "+a[1].replace(/\\/g,"")+" ";
if(p)return a;p=0;for(var v;(v=b[p])!=null;p++)if(v)if(f^(v.className&&(" "+v.className+" ").replace(/[\t\n]/g," ").indexOf(a)>=0))l||d.push(v);else if(l)b[p]=false;return false},ID:function(a){return a[1].replace(/\\/g,"")},TAG:function(a){return a[1].toLowerCase()},CHILD:function(a){if(a[1]==="nth"){var b=/(-?)(\d*)n((?:\+|-)?\d*)/.exec(a[2]==="even"&&"2n"||a[2]==="odd"&&"2n+1"||!/\D/.test(a[2])&&"0n+"+a[2]||a[2]);a[2]=b[1]+(b[2]||1)-0;a[3]=b[3]-0}a[0]=w++;return a},ATTR:function(a,b,l,d,f,p){b=
a[1].replace(/\\/g,"");if(!p&&s.attrMap[b])a[1]=s.attrMap[b];if(a[2]==="~=")a[4]=" "+a[4]+" ";return a},PSEUDO:function(a,b,l,d,f){if(a[1]==="not")if((t.exec(a[3])||"").length>1||/^\w/.test(a[3]))a[3]=g(a[3],null,null,b);else{a=g.filter(a[3],b,l,true^f);l||d.push.apply(d,a);return false}else if(s.match.POS.test(a[0])||s.match.CHILD.test(a[0]))return true;return a},POS:function(a){a.unshift(true);return a}},filters:{enabled:function(a){return a.disabled===false&&a.type!=="hidden"},disabled:function(a){return a.disabled===
true},checked:function(a){return a.checked===true},selected:function(a){return a.selected===true},parent:function(a){return!!a.firstChild},empty:function(a){return!a.firstChild},has:function(a,b,l){return!!g(l[3],a).length},header:function(a){return/h\d/i.test(a.nodeName)},text:function(a){return"text"===a.type},radio:function(a){return"radio"===a.type},checkbox:function(a){return"checkbox"===a.type},file:function(a){return"file"===a.type},password:function(a){return"password"===a.type},submit:function(a){return"submit"===
a.type},image:function(a){return"image"===a.type},reset:function(a){return"reset"===a.type},button:function(a){return"button"===a.type||a.nodeName.toLowerCase()==="button"},input:function(a){return/input|select|textarea|button/i.test(a.nodeName)}},setFilters:{first:function(a,b){return b===0},last:function(a,b,l,d){return b===d.length-1},even:function(a,b){return b%2===0},odd:function(a,b){return b%2===1},lt:function(a,b,l){return b<l[3]-0},gt:function(a,b,l){return b>l[3]-0},nth:function(a,b,l){return l[3]-
0===b},eq:function(a,b,l){return l[3]-0===b}},filter:{PSEUDO:function(a,b,l,d){var f=b[1],p=s.filters[f];if(p)return p(a,l,b,d);else if(f==="contains")return(a.textContent||a.innerText||g.getText([a])||"").indexOf(b[3])>=0;else if(f==="not"){b=b[3];l=0;for(d=b.length;l<d;l++)if(b[l]===a)return false;return true}else g.error("Syntax error, unrecognized expression: "+f)},CHILD:function(a,b){var l=b[1],d=a;switch(l){case "only":case "first":for(;d=d.previousSibling;)if(d.nodeType===1)return false;if(l===
"first")return true;d=a;case "last":for(;d=d.nextSibling;)if(d.nodeType===1)return false;return true;case "nth":l=b[2];var f=b[3];if(l===1&&f===0)return true;b=b[0];var p=a.parentNode;if(p&&(p.sizcache!==b||!a.nodeIndex)){var v=0;for(d=p.firstChild;d;d=d.nextSibling)if(d.nodeType===1)d.nodeIndex=++v;p.sizcache=b}a=a.nodeIndex-f;return l===0?a===0:a%l===0&&a/l>=0}},ID:function(a,b){return a.nodeType===1&&a.getAttribute("id")===b},TAG:function(a,b){return b==="*"&&a.nodeType===1||a.nodeName.toLowerCase()===
b},CLASS:function(a,b){return(" "+(a.className||a.getAttribute("class"))+" ").indexOf(b)>-1},ATTR:function(a,b){var l=b[1];a=s.attrHandle[l]?s.attrHandle[l](a):a[l]!=null?a[l]:a.getAttribute(l);l=a+"";var d=b[2];b=b[4];return a==null?d==="!=":d==="="?l===b:d==="*="?l.indexOf(b)>=0:d==="~="?(" "+l+" ").indexOf(b)>=0:!b?l&&a!==false:d==="!="?l!==b:d==="^="?l.indexOf(b)===0:d==="$="?l.substr(l.length-b.length)===b:d==="|="?l===b||l.substr(0,b.length+1)===b+"-":false},POS:function(a,b,l,d){var f=s.setFilters[b[2]];
if(f)return f(a,l,b,d)}}},n=s.match.POS,h=function(a,b){return"\\"+(b-0+1)};for(var e in s.match){s.match[e]=new RegExp(s.match[e].source+/(?![^\[]*\])(?![^\(]*\))/.source);s.leftMatch[e]=new RegExp(/(^(?:.|\r|\n)*?)/.source+s.match[e].source.replace(/\\(\d+)/g,h))}var o=function(a,b){a=Array.prototype.slice.call(a,0);if(b){b.push.apply(b,a);return b}return a};try{Array.prototype.slice.call(document.documentElement.childNodes,0)}catch(q){o=function(a,b){b=b||[];var l=0;if(m.call(a)==="[object Array]")Array.prototype.push.apply(b,
a);else if(typeof a.length==="number")for(var d=a.length;l<d;l++)b.push(a[l]);else for(;a[l];l++)b.push(a[l]);return b}}var u;if(document.documentElement.compareDocumentPosition)u=function(a,b){if(!a.compareDocumentPosition||!b.compareDocumentPosition){if(a==b)j=true;return a.compareDocumentPosition?-1:1}a=a.compareDocumentPosition(b)&4?-1:a===b?0:1;if(a===0)j=true;return a};else if("sourceIndex"in document.documentElement)u=function(a,b){if(!a.sourceIndex||!b.sourceIndex){if(a==b)j=true;return a.sourceIndex?
-1:1}a=a.sourceIndex-b.sourceIndex;if(a===0)j=true;return a};else if(document.createRange)u=function(a,b){if(!a.ownerDocument||!b.ownerDocument){if(a==b)j=true;return a.ownerDocument?-1:1}var l=a.ownerDocument.createRange(),d=b.ownerDocument.createRange();l.setStart(a,0);l.setEnd(a,0);d.setStart(b,0);d.setEnd(b,0);a=l.compareBoundaryPoints(Range.START_TO_END,d);if(a===0)j=true;return a};g.getText=function(a){for(var b="",l,d=0;a[d];d++){l=a[d];if(l.nodeType===3||l.nodeType===4)b+=l.nodeValue;else if(l.nodeType!==
8)b+=g.getText(l.childNodes)}return b};(function(){var a=document.createElement("div"),b="script"+(new Date).getTime();a.innerHTML="<a name='"+b+"'/>";var l=document.documentElement;l.insertBefore(a,l.firstChild);if(document.getElementById(b)){s.find.ID=function(d,f,p){if(typeof f.getElementById!=="undefined"&&!p)return(f=f.getElementById(d[1]))?f.id===d[1]||typeof f.getAttributeNode!=="undefined"&&f.getAttributeNode("id").nodeValue===d[1]?[f]:undefined:[]};s.filter.ID=function(d,f){var p=typeof d.getAttributeNode!==
"undefined"&&d.getAttributeNode("id");return d.nodeType===1&&p&&p.nodeValue===f}}l.removeChild(a);l=a=null})();(function(){var a=document.createElement("div");a.appendChild(document.createComment(""));if(a.getElementsByTagName("*").length>0)s.find.TAG=function(b,l){l=l.getElementsByTagName(b[1]);if(b[1]==="*"){b=[];for(var d=0;l[d];d++)l[d].nodeType===1&&b.push(l[d]);l=b}return l};a.innerHTML="<a href='#'></a>";if(a.firstChild&&typeof a.firstChild.getAttribute!=="undefined"&&a.firstChild.getAttribute("href")!==
"#")s.attrHandle.href=function(b){return b.getAttribute("href",2)};a=null})();document.querySelectorAll&&function(){var a=g,b=document.createElement("div");b.innerHTML="<p class='TEST'></p>";if(!(b.querySelectorAll&&b.querySelectorAll(".TEST").length===0)){g=function(d,f,p,v){f=f||document;if(!v&&f.nodeType===9&&!g.isXML(f))try{return o(f.querySelectorAll(d),p)}catch(x){}return a(d,f,p,v)};for(var l in a)g[l]=a[l];b=null}}();(function(){var a=document.createElement("div");a.innerHTML="<div class='test e'></div><div class='test'></div>";
if(!(!a.getElementsByClassName||a.getElementsByClassName("e").length===0)){a.lastChild.className="e";if(a.getElementsByClassName("e").length!==1){s.order.splice(1,0,"CLASS");s.find.CLASS=function(b,l,d){if(typeof l.getElementsByClassName!=="undefined"&&!d)return l.getElementsByClassName(b[1])};a=null}}})();g.contains=document.compareDocumentPosition?function(a,b){return!!(a.compareDocumentPosition(b)&16)}:function(a,b){return a!==b&&(a.contains?a.contains(b):true)};g.isXML=function(a){return(a=(a?
a.ownerDocument||a:0).documentElement)?a.nodeName!=="HTML":false};var k=function(a,b){var l=[],d="",f;for(b=b.nodeType?[b]:b;f=s.match.PSEUDO.exec(a);){d+=f[0];a=a.replace(s.match.PSEUDO,"")}a=s.relative[a]?a+"*":a;f=0;for(var p=b.length;f<p;f++)g(a,b[f],l);return g.filter(d,l)};KISSY.add("sizzle",function(a){a.ExternalSelector=g;a.ExternalSelector._filter=function(b,l){return g.matches(l,a.query(b))}},{requires:["core"]})})();
KISSY.add("datalazyload",function(c,r){function t(h,e){if(!(this instanceof t))return new t(h,e);if(e===r){e=h;h=[i]}c.isArray(h)||(h=[c.get(h)||i]);this.containers=h;this.config=c.merge(n,e);this.callbacks={els:[],fns:[]};this._init()}var w=c.DOM,m=c.Event,j=window,i=document,g="scroll",s="resize",n={mod:"manual",diff:"default",placeholder:"none"};c.augment(t,{_init:function(){this.threshold=this._getThreshold();this._filterItems();this._initLoadEvent()},_filterItems:function(){var h=this.containers,
e,o,q,u=[],k=[];e=0;for(o=h.length;e<o;++e){q=c.query("img",h[e]);u=u.concat(c.filter(q,this._filterImg,this));q=c.query("textarea",h[e]);k=k.concat(c.filter(q,this._filterArea,this))}this.images=u;this.areaes=k},_filterImg:function(h){var e=h.getAttribute("data-ks-lazyload"),o=this.threshold,q=this.config.placeholder;if(this.config.mod==="manual"){if(e){if(q!=="none")h.src=q;return true}}else if(w.offset(h).top>o&&!e){w.attr(h,"data-ks-lazyload",h.src);if(q!=="none")h.src=q;else h.removeAttribute("src");
return true}},_filterArea:function(h){return w.hasClass(h,"ks-datalazyload")},_initLoadEvent:function(){function h(){o||(o=c.later(function(){e();o=null},100))}function e(){q._loadItems();if(q._getItemsLength()===0){m.remove(j,g,h);m.remove(j,s,h)}}var o,q=this;m.on(j,g,h);m.on(j,s,function(){q.threshold=q._getThreshold();h()});q._getItemsLength()&&c.ready(function(){e()})},_loadItems:function(){this._loadImgs();this._loadAreas();this._fireCallbacks()},_loadImgs:function(){this.images=c.filter(this.images,
this._loadImg,this)},_loadImg:function(h){var e=this.threshold+w.scrollTop();if(w.offset(h).top<=e)this._loadImgSrc(h);else return true},_loadImgSrc:function(h,e){e=e||"data-ks-lazyload";var o=h.getAttribute(e);if(o&&h.src!=o){h.src=o;h.removeAttribute(e)}},_loadAreas:function(){this.areaes=c.filter(this.areaes,this._loadArea,this)},_loadArea:function(h){var e=w.css(h,"display")==="none";if(w.offset(e?h.parentNode:h).top<=this.threshold+w.scrollTop())this._loadAreaData(h.parentNode,h);else return true},
_loadAreaData:function(h,e){e.style.display="none";e.className="";var o=w.create("<div>");h.insertBefore(o,e);w.html(o,e.value,true)},_fireCallbacks:function(){var h=this.callbacks,e=h.els,o=h.fns,q=this.threshold+w.scrollTop(),u,k,a,b=[],l=[];for(u=0;(k=e[u])&&(a=o[u++]);)if(w.offset(k).top<=q)a.call(k);else{b.push(k);l.push(a)}h.els=b;h.fns=l},addCallback:function(h,e){var o=this.callbacks;if((h=c.get(h))&&c.isFunction(e)){o.els.push(h);o.fns.push(e)}},_getThreshold:function(){var h=this.config.diff,
e=w.viewportHeight();return h==="default"?2*e:e+ +h},_getItemsLength:function(){return this.images.length+this.areaes.length+this.callbacks.els.length},loadCustomLazyData:function(h,e){var o=this,q,u;c.isArray(h)||(h=[c.get(h)]);c.each(h,function(k){switch(e){case "img-src":u=k.nodeName==="IMG"?[k]:c.query("img",k);c.each(u,function(a){o._loadImgSrc(a,"data-ks-lazyload-custom")});break;default:(q=c.get("textarea",k))&&w.hasClass(q,"ks-datalazyload-custom")&&o._loadAreaData(k,q)}})}});c.mix(t,t.prototype,
true,["loadCustomLazyData","_loadImgSrc","_loadAreaData"]);c.DataLazyload=t},{requires:["core"]});KISSY.add("flash",function(c){c.Flash={swfs:{},length:0}},{requires:["core"]});
KISSY.add("flash-ua",function(c){function r(){var n;if(navigator.plugins&&navigator.mimeTypes.length)n=(navigator.plugins["Shockwave Flash"]||0).description;else if(window.ActiveXObject)try{n=(new ActiveXObject("ShockwaveFlash.ShockwaveFlash")).GetVariable("$version")}catch(h){}if(n)return t(n)}function t(n){return n.match(/(\d)+/g)}function w(n){var h=c.isString(n)?t(n):n;n=n;if(c.isArray(h))n=parseFloat(h[0]+"."+m(h[1],3)+m(h[2],5));return n||0}function m(n,h){for(var e=(n+"").length;e++<h;)n="0"+
n;return n}var j=c.UA,i,g,s=true;j.fpv=function(n){if(n||s){s=false;i=r();g=w(i)}return i};j.fpvGEQ=function(n,h){s&&j.fpv(h);return!!g&&g>=w(n)}},{host:"flash"});
KISSY.add("flash-embed",function(c){function r(n,h,e){var o=w.create("<param>");w.attr(o,{name:h,value:e});n.appendChild(o)}var t=c.UA,w=c.DOM,m=c.Flash,j=/object|embed/i,i=encodeURIComponent,g={wmode:"",allowscriptaccess:"",allownetworking:"",allowfullscreen:"",play:"false",loop:"",menu:"",quality:"",scale:"",salign:"",bgcolor:"",devicefont:"",base:"",swliveconnect:"",seamlesstabbing:""},s={params:{},attrs:{width:215,height:138},version:9};c.mix(m,{fpv:t.fpv,fpvGEQ:t.fpvGEQ,add:function(n,h,e){var o,
q;h=m._normalize(h);h=c.merge(s,h);h.attrs=c.merge(s.attrs,h.attrs);if(n=c.get(n)){if(!n.id)n.id=c.guid("ks-flash-");q=h.attrs.id=n.id;if(t.fpv()){if(!t.fpvGEQ(h.version)){this._callback(e,0,q,n);if(!((o=h.xi)&&c.isString(o)))return;h.src=o}if(j.test(n.nodeName))this._register(n,h,e);else h.src?this._embed(n,h,e):this._callback(e,-3,q,n)}else this._callback(e,-1,q,n)}else this._callback(e,-2)},get:function(n){return m.swfs[n]},remove:function(n){if(n=m.get("#"+n)){w.remove(n);delete m.swfs[n.id];
m.length-=1}},contains:function(n){var h=m.swfs,e,o=false;if(c.isString(n))o=n in h;else for(e in h)if(h[e]===n){o=true;break}return o},_register:function(n,h,e){h=h.attrs.id;if(t.gecko||t.opera)n=c.query("object",n)[0]||n;m._addSWF(h,n);m._callback(e,1,h,n)},_embed:function(n,h,e){var o=m._createSWF(h.src,h.attrs,h.params);if(t.ie)n.outerHTML=o.outerHTML;else n.parentNode.replaceChild(o,n);n=c.get("#"+n.id);m._register(n,h,e)},_callback:function(n,h,e,o){h&&c.isFunction(n)&&n({status:h,id:e,swf:o})},
_addSWF:function(n,h){if(n&&h){m.swfs[n]=h;m.length+=1}},_createSWF:function(n,h,e){var o=w.create("<object>"),q;w.attr(o,h);if(t.ie){w.attr(o,"classid","clsid:d27cdb6e-ae6d-11cf-96b8-444553540000");r(o,"movie",n)}else w.attr(o,{type:"application/x-shockwave-flash",data:n,name:h.id});for(q in e)q in g&&r(o,q,e[q]);e.flashvars&&r(o,"flashvars",m.toFlashVars(e.flashvars));return o},_normalize:function(n){var h,e,o,q=n;if(c.isPlainObject(n)){q={};for(o in n){h=o.toLowerCase();e=n[o];if(h!=="flashvars")e=
m._normalize(e);q[h]=e}}return q},toFlashVars:function(n){if(!c.isPlainObject(n))return"";var h,e,o=[];for(h in n){e=n[h];if(c.isString(e))e=i(e);else{e=c.JSON.stringify(e);if(!e)continue;e=e.replace(/:"([^"]+)/g,function(q,u){return':"'+i(u)})}o.push(h+"="+e)}return o.join("&").replace(/\"/g,"'")}})},{host:"flash"});
KISSY.add("switchable",function(c,r){function t(j,i){i=i||{};if(!("markupType"in i))if(i.panelCls)i.markupType=1;else if(i.panels)i.markupType=2;i=c.merge(t.Config,i);this.container=c.get(j);this.config=i;this.activeIndex=i.activeIndex;this._init()}var w=c.DOM,m=c.Event;t.Config={markupType:0,navCls:"ks-switchable-nav",contentCls:"ks-switchable-content",triggerCls:"ks-switchable-trigger",panelCls:"ks-switchable-panel",triggers:[],panels:[],hasTriggers:true,triggerType:"mouse",delay:0.1,activeIndex:0,
activeTriggerCls:"ks-active",steps:1,viewSize:[]};t.Plugins=[];c.augment(t,c.EventTarget,{_init:function(){var j=this,i=j.config;j._parseMarkup();i.switchTo&&j.switchTo(i.switchTo);i.hasTriggers&&j._bindTriggers();c.each(t.Plugins,function(g){g.init&&g.init(j)});j.fire("init")},_parseMarkup:function(){var j=this.container,i=this.config,g,s=[],n=[];switch(i.markupType){case 0:if(g=c.get("."+i.navCls,j))s=w.children(g);g=c.get("."+i.contentCls,j);n=w.children(g);break;case 1:s=c.query("."+i.triggerCls,
j);n=c.query("."+i.panelCls,j);break;case 2:s=i.triggers;n=i.panels;break}j=n.length;this.length=j/i.steps;if(i.hasTriggers&&j>0&&s.length===0)s=this._generateTriggersMarkup(this.length);this.triggers=c.makeArray(s);this.panels=c.makeArray(n);this.content=g||n[0].parentNode},_generateTriggersMarkup:function(j){var i=this.config,g=w.create("<ul>"),s,n;g.className=i.navCls;for(n=0;n<j;n++){s=w.create("<li>");if(n===this.activeIndex)s.className=i.activeTriggerCls;s.innerHTML=n+1;g.appendChild(s)}this.container.appendChild(g);
return w.children(g)},_bindTriggers:function(){var j=this,i=j.config,g=j.triggers,s,n,h=g.length;for(n=0;n<h;n++)(function(e){s=g[e];m.on(s,"click",function(){j._onFocusTrigger(e)});if(i.triggerType==="mouse"){m.on(s,"mouseenter",function(){j._onMouseEnterTrigger(e)});m.on(s,"mouseleave",function(){j._onMouseLeaveTrigger(e)})}})(n)},_onFocusTrigger:function(j){if(this._triggerIsValid(j)){this._cancelSwitchTimer();this.switchTo(j)}},_onMouseEnterTrigger:function(j){var i=this;if(i._triggerIsValid(j))i.switchTimer=
c.later(function(){i.switchTo(j)},i.config.delay*1E3)},_onMouseLeaveTrigger:function(){this._cancelSwitchTimer()},_triggerIsValid:function(j){return this.activeIndex!==j},_cancelSwitchTimer:function(){if(this.switchTimer){this.switchTimer.cancel();this.switchTimer=r}},switchTo:function(j,i){var g=this.config,s=this.triggers,n=this.panels,h=this.activeIndex,e=g.steps,o=h*e,q=j*e;if(!this._triggerIsValid(j))return this;if(this.fire("beforeSwitch",{toIndex:j})===false)return this;if(g.hasTriggers)this._switchTrigger(h>
-1?s[h]:null,s[j]);if(i===r)i=j>h?"forward":"backward";this._switchView(n.slice(o,o+e),n.slice(q,q+e),j,i);this.activeIndex=j;return this},_switchTrigger:function(j,i){var g=this.config.activeTriggerCls;j&&w.removeClass(j,g);w.addClass(i,g)},_switchView:function(j,i,g){w.css(j,"display","none");w.css(i,"display","block");this._fireOnSwitch(g)},_fireOnSwitch:function(j){this.fire("switch",{currentIndex:j})},prev:function(){var j=this.activeIndex;this.switchTo(j>0?j-1:this.length-1,"backward")},next:function(){var j=
this.activeIndex;this.switchTo(j<this.length-1?j+1:0,"forward")}});c.Switchable=t},{requires:["core"]});
KISSY.add("autoplay",function(c,r){var t=c.Event,w=c.Switchable;c.mix(w.Config,{autoplay:false,interval:5,pauseOnHover:true});w.Plugins.push({name:"autoplay",init:function(m){function j(){s=c.later(function(){m.paused||m.switchTo(m.activeIndex<m.length-1?m.activeIndex+1:0,"forward")},g,true)}var i=m.config,g=i.interval*1E3,s;if(i.autoplay){if(i.pauseOnHover){t.on(m.container,"mouseenter",function(){if(s){s.cancel();s=r}m.paused=true});t.on(m.container,"mouseleave",function(){m.paused=false;j()})}j()}}})},
{host:"switchable"});
KISSY.add("effect",function(c,r){var t=c.DOM,w=c.Anim,m=c.Switchable,j;c.mix(m.Config,{effect:"none",duration:0.5,easing:"easeNone"});m.Effects={none:function(i,g,s){t.css(i,"display","none");t.css(g,"display","block");s()},fade:function(i,g,s){i.length!==1&&c.error("fade effect only supports steps == 1.");var n=this,h=n.config,e=i[0],o=g[0];n.anim&&n.anim.stop(true);t.css(o,"opacity",1);n.anim=(new w(e,{opacity:0},h.duration,h.easing,function(){n.anim=r;t.css(o,"z-index",9);t.css(e,"z-index",1);
s()})).run()},scroll:function(i,g,s,n){var h=this;i=h.config;g=i.effect==="scrollx";var e={};e[g?"left":"top"]=-(h.viewSize[g?0:1]*n)+"px";h.anim&&h.anim.stop();h.anim=(new w(h.content,e,i.duration,i.easing,function(){h.anim=r;s()})).run()}};j=m.Effects;j.scrollx=j.scrolly=j.scroll;m.Plugins.push({name:"effect",init:function(i){var g=i.config,s=g.effect,n=i.panels,h=i.content,e=g.steps,o=i.activeIndex,q=n.length;i.viewSize=[g.viewSize[0]||n[0].offsetWidth*e,g.viewSize[1]||n[0].offsetHeight*e];if(s!==
"none"){c.each(n,function(b){t.css(b,"display","block")});switch(s){case "scrollx":case "scrolly":t.css(h,"position","absolute");t.css(h.parentNode,"position","relative");if(s==="scrollx"){t.css(n,"float","left");t.width(h,i.viewSize[0]*(q/e))}break;case "fade":var u=o*e,k=u+e-1,a;c.each(n,function(b,l){a=l>=u&&l<=k;t.css(b,{opacity:a?1:0,position:"absolute",zIndex:a?9:1})});break}}}});c.augment(m,{_switchView:function(i,g,s,n){var h=this,e=h.config.effect;(c.isFunction(e)?e:j[e]).call(h,i,g,function(){h._fireOnSwitch(s)},
s,n)}})},{host:"switchable"});
KISSY.add("circular",function(c,r){function t(a,b,l,d,f){var p=this;a=p.config;b=p.length;var v=p.activeIndex,x=a.scrollType===u,A=x?s:n,y=p.viewSize[x?0:1];x=-y*d;var z={},B,C=f===q;if(B=C&&v===0&&d===b-1||f===o&&v===b-1&&d===0)x=w.call(p,p.panels,d,C,A,y);z[A]=x+e;p.anim&&p.anim.stop();p.anim=(new c.Anim(p.content,z,a.duration,a.easing,function(){B&&m.call(p,p.panels,d,C,A,y);p.anim=r;l()})).run()}function w(a,b,l,d,f){var p=this.config.steps;b=this.length;var v=l?b-1:0,x=(v+1)*p;for(p=v*p;p<x;p++){j.css(a[p],
i,g);j.css(a[p],d,(l?-1:1)*f*b)}return l?f:-f*b}function m(a,b,l,d,f){var p=this.config.steps;b=this.length;var v=l?b-1:0,x=(v+1)*p;for(p=v*p;p<x;p++){j.css(a[p],i,h);j.css(a[p],d,h)}j.css(this.content,d,l?-f*(b-1):h)}var j=c.DOM,i="position",g="relative",s="left",n="top",h="",e="px",o="forward",q="backward",u="scrollx",k=c.Switchable;c.mix(k.Config,{circular:false});k.Plugins.push({name:"circular",init:function(a){a=a.config;if(a.circular&&(a.effect===u||a.effect==="scrolly")){a.scrollType=a.effect;
a.effect=t}}})},{host:"switchable"});
KISSY.add("lazyload",function(c){var r=c.DOM,t="beforeSwitch",w="img-src",m="area-data",j={},i=c.Switchable;j[w]="data-ks-lazyload-custom";j[m]="ks-datalazyload-custom";c.mix(i.Config,{lazyDataType:m});i.Plugins.push({name:"lazyload",init:function(g){function s(u){var k=e.steps;u=u.toIndex*k;h.loadCustomLazyData(g.panels.slice(u,u+k),o);n()&&g.detach(t,s)}function n(){var u,k,a,b=o===w;if(u=b?"img":o===m?"textarea":""){u=c.query(u,g.container);k=0;for(a=u.length;k<a;k++)if(b?r.attr(u[k],q):r.hasClass(u[k],
q))return false}return true}var h=c.DataLazyload,e=g.config,o=e.lazyDataType,q=j[o];!h||!o||!q||g.on(t,s)}})},{host:"switchable"});KISSY.add("autorender",function(c){c.Switchable.autoRender=function(r,t){r="."+(r||"KS_Widget");c.query(r,t).each(function(w){var m=w.getAttribute("data-widget-type"),j;if(m&&"Switchable Tabs Slide Carousel Accordion".indexOf(m)>-1)try{if(j=w.getAttribute("data-widget-config"))j=j.replace(/'/g,'"');new c[m](w,c.JSON.parse(j))}catch(i){}})}},{host:"switchable"});
KISSY.add("tabs",function(c){function r(t,w){if(!(this instanceof r))return new r(t,w);r.superclass.constructor.call(this,t,w)}c.extend(r,c.Switchable);c.Tabs=r},{host:"switchable"});KISSY.add("slide",function(c){function r(w,m){if(!(this instanceof r))return new r(w,m);r.superclass.constructor.call(this,w,c.merge(t,m))}var t={autoplay:true,circular:true};c.extend(r,c.Switchable);c.Slide=r},{host:"switchable"});
KISSY.add("carousel",function(c,r){function t(h,e){var o=this;if(!(o instanceof t))return new t(h,e);o.on("init",function(){w(o)});t.superclass.constructor.call(o,h,c.merge(n,e))}function w(h){var e=h.config,o=e.disableBtnCls;c.each(["prev","next"],function(q){var u=h[q+"Btn"]=c.get(i+e[q+"BtnCls"],h.container);j.on(u,"click",function(k){k.preventDefault();m.hasClass(u,o)||h[q]()})});e.circular||h.on("switch",function(q){q=q.currentIndex;q=q===0?h[g]:q===h.length-1?h[s]:r;m.removeClass([h[g],h[s]],
o);q&&m.addClass(q,o)});j.on(h.panels,"click focus",function(){h.fire("itemSelected",{item:this})})}var m=c.DOM,j=c.Event,i=".",g="prevBtn",s="nextBtn",n={circular:true,prevBtnCls:"ks-switchable-prev-btn",nextBtnCls:"ks-switchable-next-btn",disableBtnCls:"ks-switchable-disable-btn"};c.extend(t,c.Switchable);c.Carousel=t},{host:"switchable"});
KISSY.add("accordion",function(c){function r(m,j){if(!(this instanceof r))return new r(m,j);r.superclass.constructor.call(this,m,c.merge(w,j));if(this.config.multiple)this._switchTrigger=function(){}}var t=c.DOM,w={markupType:1,triggerType:"click",multiple:false};c.extend(r,c.Switchable);c.Accordion=r;c.augment(r,{_triggerIsValid:function(m){return this.activeIndex!==m||this.config.multiple},_switchView:function(m,j,i){var g=this.config,s=j[0];if(g.multiple){t.toggleClass(this.triggers[i],g.activeTriggerCls);
t.css(s,"display",s.style.display=="none"?"block":"none");this._fireOnSwitch(i)}else r.superclass._switchView.call(this,m,j,i)}})},{host:"switchable"});
KISSY.add("suggest",function(c,r){function t(d,f,p){if(!(this instanceof t))return new t(d,f,p);this.textInput=c.get(d);f+=f.indexOf("?")===-1?"?":"&";this.dataSource=f+"code=utf-8&callback="+q;this.config=c.merge(l,p);this.queryParams=this.query=u;this._dataCache={};this._init()}function w(d){d.style.visibility=u}function m(d){d.style.visibility=k}function j(d,f){if(f.nodeType===1){i.html(d,u);d.appendChild(f)}else i.html(d,f)}var i=c.DOM,g=c.Event,s=window,n=document,h,e=c.get("head"),o=c.UA.ie,
q="g_ks_suggest_callback",u="",k="hidden",a=parseInt,b=/^(input|button|a)$/i,l={containerCls:u,resultFormat:"%result%",closeBtnText:"\u5173\u95ed",shim:o===6,submitOnSelect:true};c.augment(t,c.EventTarget,{_init:function(){h=n.body;this._initTextInput();this._initContainer();this.config.shim&&this._initShim();this._initStyle();this._initEvent()},_initTextInput:function(){var d=this,f=d.textInput,p=false,v=0;i.attr(f,"autocomplete","off");d.config.autoFocus&&f.focus();g.on(f,"keydown",function(x){x=
x.keyCode;if(x===27){d.hide();f.value=d.query}else if(x>32&&x<41)if(f.value){if(x===40||x===38)if(v++===0){d._isRunning&&d.stop();p=true;d._selectItem(x===40)}else if(v==3)v=0}else f.blur();else if(x===13){f.blur();if(p)if(f.value==d._getSelectedItemKey())if(d.fire("itemSelect")===false)return;d._submitForm()}else{d._isRunning||d.start();p=false}});g.on(f,"keyup",function(){v=0});g.on(f,"blur",function(){d.stop();c.later(function(){d._focusing||d.hide()},0)})},_initContainer:function(){var d=i.create("<div>",
{"class":"ks-suggest-container "+this.config.containerCls,style:"position:absolute;visibility:hidden"}),f=i.create("<div>",{"class":"ks-suggest-content"}),p=i.create("<div>",{"class":"ks-suggest-footer"});d.appendChild(f);d.appendChild(p);h.insertBefore(d,h.firstChild);this.container=d;this.content=f;this.footer=p;this._initContainerEvent()},_setContainerRegion:function(){var d=this.textInput,f=i.offset(d),p=this.container;i.offset(p,{left:f.left,top:f.top+d.offsetHeight-1});i.width(p,this.config.containerWidth||
d.offsetWidth-2)},_initContainerEvent:function(){var d=this,f=d.textInput,p=d.container,v=d.content,x=d.footer,A,y;g.on(v,"mousemove",function(z){z=z.target;if(z.nodeName!=="LI")z=i.parent(z,"li");if(i.contains(v,z))if(z!==d.selectedItem){d._removeSelectedItem();d._setSelectedItem(z)}});g.on(v,"mousedown",function(z){z=z.target;if(z.nodeName!=="LI")z=i.parent(z,"li");A=z});g.on(p,"mousedown",function(z){if(!b.test(z.target.nodeName)){f.onbeforedeactivate=function(){s.event.returnValue=false;f.onbeforedeactivate=
null};z.preventDefault()}});g.on(v,"mouseup",function(z){var B=z.target;if(!(z.which>2)){if(B.nodeName!=="LI")B=i.parent(B,"li");if(B==A)if(i.contains(v,B)){d._updateInputFromSelectItem(B);if(d.fire("itemSelect")!==false){f.blur();d._submitForm()}}}});g.on(x,"focusin",function(){d._focusing=true;d._removeSelectedItem();y=false});g.on(x,"focusout",function(){d._focusing=false;c.later(function(){if(y)d.hide();else d._focusing||d.textInput.focus()},0)});g.on(d.container,"mouseleave",function(){y=true});
g.on(x,"click",function(z){i.hasClass(z.target,"ks-suggest-closebtn")&&d.hide()})},_submitForm:function(){if(this.config.submitOnSelect){var d=this.textInput.form;if(d)if(this.fire("beforeSubmit",{form:d})!==false){if(n.createEvent){var f=n.createEvent("MouseEvents");f.initEvent("submit",true,false);d.dispatchEvent(f)}else n.createEventObject&&d.fireEvent("onsubmit");d.submit()}}},_initShim:function(){var d=i.create("<iframe>",{src:"about:blank","class":"ks-suggest-shim",style:"position:absolute;visibility:hidden;border:none"});
this.container.shim=d;h.insertBefore(d,h.firstChild)},_setShimRegion:function(){var d=this.container,f=d.style,p=d.shim;p&&i.css(p,{left:a(f.left)-2,top:f.top,width:a(f.width)+2,height:i.height(d)-2})},_initStyle:function(){c.get("#ks-suggest-style")||i.addStyleSheet(".ks-suggest-container{background:white;border:1px solid #999;z-index:99999}.ks-suggest-shim{z-index:99998}.ks-suggest-container li{color:#404040;padding:1px 0 2px;font-size:12px;line-height:18px;float:left;width:100%}.ks-suggest-container .ks-selected{background-color:#39F;cursor:default}.ks-suggest-key{float:left;text-align:left;padding-left:5px}.ks-suggest-result{float:right;text-align:right;padding-right:5px;color:green}.ks-suggest-container .ks-selected span{color:#FFF;cursor:default}.ks-suggest-footer{padding:0 5px 5px}.ks-suggest-closebtn{float:right}.ks-suggest-container li,.ks-suggest-footer{overflow:hidden;zoom:1;clear:both}.ks-suggest-container{*margin-left:2px;_margin-left:-2px;_margin-top:-3px}",
"ks-suggest-style")},_initEvent:function(){var d=this;g.on(s,"resize",function(){d._setContainerRegion();d._setShimRegion()})},start:function(){var d=this;if(d.fire("beforeStart")!==false){t.focusInstance=d;d._timer=c.later(function(){d._updateContent();d._timer=c.later(arguments.callee,200)},200);d._isRunning=true}},stop:function(){t.focusInstance=r;this._timer&&this._timer.cancel();this._isRunning=false},show:function(){if(!this.isVisible()){var d=this.container,f=d.shim;this._setContainerRegion();
w(d);if(f){this._setShimRegion();w(f)}}},hide:function(){if(this.isVisible()){var d=this.container,f=d.shim;f&&m(f);m(d)}},isVisible:function(){return this.container.style.visibility!=k},_updateContent:function(){var d=this.textInput;if(d.value!=this.query){d=this.query=d.value;if(c.trim(d))if(this._dataCache[d]!==r){this._fillContainer(this._dataCache[d]);this._displayContainer()}else this._requestData();else{this._fillContainer();this.hide()}}},_requestData:function(){var d=this,f;if(!o)d.dataScript=
r;if(!d.dataScript){f=n.createElement("script");f.charset="utf-8";f.async=true;e.insertBefore(f,e.firstChild);d.dataScript=f;if(!o){var p=c.now();d._latestScriptTime=p;i.attr(f,"data-time",p);g.on(f,"load",function(){d._scriptDataIsOut=i.attr(f,"data-time")!=d._latestScriptTime})}}d.queryParams="q="+encodeURIComponent(d.query);if(d.fire("beforeDataRequest")!==false)d.dataScript.src=d.dataSource+"&"+d.queryParams},_handleResponse:function(d){var f=u,p,v,x,A;if(!this._scriptDataIsOut){this.returnedData=
d;if(this.fire("dataReturn",{data:d})!==false){d=this._formatData(this.returnedData);if((p=d.length)>0){v=i.create("<ol>");for(f=0;f<p;++f){x=d[f];x=this._formatItem(A=x.key,x.result);i.attr(x,"key",A);i.addClass(x,f%2?"ks-even":"ks-odd");v.appendChild(x)}f=v}this._fillContainer(f);if(this.fire("beforeShow")!==false){this._dataCache[this.query]=i.html(this.content);this._displayContainer()}}}},_formatData:function(d){var f=[],p,v,x,A=0;if(!d)return f;if(c.isArray(d.result))d=d.result;if(!(p=d.length))return f;
for(x=0;x<p;++x){v=d[x];if(c.isString(v))f[A++]={key:v};else if(c.isArray(v)&&v.length>1)f[A++]={key:v[0],result:v[1]}}return f},_formatItem:function(d,f){var p=i.create("<li>"),v=i.create("<span>",{"class":"ks-suggest-key"});i.html(v,d);p.appendChild(v);if(f){d=this.config.resultFormat.replace("%result%",f);if(c.trim(d)){f=i.create("<span>",{"class":"ks-suggest-result"});i.html(f,d);p.appendChild(f)}}return p},_fillContainer:function(d,f){this._fillContent(d||u);this._fillFooter(f||u)},_fillContent:function(d){j(this.content,
d);this.selectedItem=r},_fillFooter:function(d){var f=this.config,p=this.footer;j(p,d);if(f.closeBtn){d=i.create("<a>",{"class":"ks-suggest-closebtn",href:"javascript: void(0)",target:"_self"});i.html(d,f.closeBtnText);p.appendChild(d)}this.fire("updateFooter",{footer:p,query:this.query});i.css(p,"display",i.text(p)?u:"none")},_displayContainer:function(){c.trim(i.text(this.container))?this.show():this.hide()},_selectItem:function(d){var f=c.query("li",this.container);if(f.length!==0)if(this.isVisible()){if(this.selectedItem){d=
i[d?"next":"prev"](this.selectedItem);if(!d)this.textInput.value=this.query}else d=f[d?0:f.length-1];this._removeSelectedItem();if(d){this._setSelectedItem(d);this._updateInputFromSelectItem()}}else this.show()},_removeSelectedItem:function(){i.removeClass(this.selectedItem,"ks-selected");this.selectedItem=r},_setSelectedItem:function(d){i.addClass(d,"ks-selected");this.selectedItem=d;this.textInput.focus()},_getSelectedItemKey:function(){if(!this.selectedItem)return u;return i.attr(this.selectedItem,
"key")},_updateInputFromSelectItem:function(){this.textInput.value=this._getSelectedItemKey(this.selectedItem)||this.query}});s[q]=function(d){t.focusInstance&&c.later(function(){t.focusInstance._handleResponse(d)},0)};t.version=1.1;c.Suggest=t},{requires:["core"]});
KISSY.add("mask",function(c,r){function t(e){if(!(this instanceof t))return new t(e);e=c.merge(h,e);var o=e.shim,q=o?n:s+e.style,u=o?0:e.opacity,k=w("<iframe>",q,u,!o);if(!o&&i)this.layer=w("<div>",q,u,true);this.config=e;this.iframe=k}function w(e,o,q,u){e=j.create(e);j.attr(e,"style",o);j.css(e,"opacity",q);if(u){j.height(e,j.docHeight());g&&j.width(e,j.docWidth())}document.body.appendChild(e);return e}function m(e,o,q){if(e){j.width(e,o);j.height(e,q)}}var j=c.DOM,i=c.UA.ie,g=i===6,s="position:absolute;left:0;top:0;width:100%;border:0;background:black;z-index:9998;display:none;",
n="position:absolute;z-index:9997;border:0;display:none;",h={shim:false,opacity:0.6,style:""};c.augment(t,{show:function(){j.show([this.iframe,this.layer])},hide:function(){j.hide([this.iframe,this.layer])},toggle:function(){this[j.css(this.iframe,"display")!=="none"?"hide":"show"]()},setSize:function(e,o){m(this.iframe,e,o);m(this.layer,e,o)},setOffset:function(e,o){var q=e;if(o!==r)q={left:e,top:o};j.offset([this.iframe,this.layer],q)}});c.Mask=t});
KISSY.add("overlay",function(c,r){function t(n,h){h=h||{};if(c.isPlainObject(n))h=n;else h.container=n;this.container=c.get(h.container);this.trigger=c.get(h.trigger);h.align=c.merge(c.clone(g.align),h.align);this.config=c.merge(g,h);this._init()}var w=document,m=c.DOM,j=c.Event,i={TL:"tl",TC:"tc",TR:"tr",LC:"cl",CC:"cc",RC:"cr",BL:"bl",BC:"bc",BR:"br"},g={container:null,containerCls:"ks-overlay",bdCls:"ks-overlay-bd",trigger:null,triggerType:"click",width:0,height:0,zIndex:9999,xy:null,align:{node:null,
points:[i.CC,i.CC],offset:[0,0]},mask:false,shim:c.UA.ie===6},s;c.augment(t,c.EventTarget,{_init:function(){this.trigger&&this._bindTrigger()},_bindTrigger:function(){this.config.triggerType==="mouse"?this._bindTriggerMouse():this._bindTriggerClick()},_bindTriggerMouse:function(){var n=this,h=n.trigger,e;j.on(h,"mouseenter",function(){n._clearHiddenTimer();e=c.later(function(){n.show();e=r},100)});j.on(h,"mouseleave",function(){if(e){e.cancel();e=r}n._setHiddenTimer()})},_bindContainerMouse:function(){var n=
this;j.on(n.container,"mouseleave",function(){n._setHiddenTimer()});j.on(n.container,"mouseenter",function(){n._clearHiddenTimer()})},_setHiddenTimer:function(){var n=this;n._hiddenTimer=c.later(function(){n.hide()},120)},_clearHiddenTimer:function(){if(this._hiddenTimer){this._hiddenTimer.cancel();this._hiddenTimer=r}},_bindTriggerClick:function(){var n=this;j.on(n.trigger,"click",function(h){h.halt();n.show()})},show:function(){this._firstShow()},_firstShow:function(){this._prepareMarkup();this._realShow();
this._firstShow=this._realShow},_realShow:function(){this._toggle(false);this._setPosition()},_toggle:function(n){n||m.css(this.container,"display","block");m.css(this.container,"visibility",n?"hidden":"");this.shim&&this.shim.toggle();if(this.config.mask)s[n?"hide":"show"]();this[n?"_unbindUI":"_bindUI"]();this.fire(n?"hide":"show")},hide:function(){this._toggle(true)},_prepareMarkup:function(){var n=this.config,h=this.container;if(n.mask&&!s)s=new c.Mask;if(n.shim)this.shim=new c.Mask({shim:true});
if(h){this.body=c.get("."+n.bdCls,h)||h;h.style.cssText+="visibility:hidden;position:absolute;"}else{h=this.container=m.create(c.substitute('<div class="{containerCls}" style="visibility:hidden;position:absolute;"><div class="{bdCls}">{content}</div></div>',n));this.body=m.children(h)[0];w.body.appendChild(h)}m.css(h,"zIndex",n.zIndex);this.setBody(n.content);this._setSize();n.triggerType==="mouse"&&this._bindContainerMouse()},_setSize:function(n,h){var e=this.config;n=n||e.width;h=h||e.height;n&&
m.width(this.container,n);h&&m.height(this.container,h);this.shim&&this.shim.setSize(n,h)},_setPosition:function(){var n=this.config.xy;n?this.move(n):this.align()},move:function(n,h){if(c.isArray(n)){h=n[1];n=n[0]}n={left:n,top:h};m.offset(this.container,n);this.shim&&this.shim.setOffset(n)},align:function(n,h,e){var o=this.config.align;n=n||o.node;n=n==="trigger"?this.trigger:c.get(n);h=h||o.points;e=e===r?o.offset:e;o=m.offset(this.container);n=this._getAlignOffset(n,h[0]);h=this._getAlignOffset(this.container,
h[1]);h=[h.left-n.left,h.top-n.top];this.move(o.left-h[0]+ +e[0],o.top-h[1]+ +e[1])},_getAlignOffset:function(n,h){var e=h.charAt(0);h=h.charAt(1);var o,q,u;if(n){o=m.offset(n);q=n.offsetWidth;n=n.offsetHeight}else{o={left:m.scrollLeft(),top:m.scrollTop()};q=m.viewportWidth();n=m.viewportHeight()}u=o.left;o=o.top;if(e==="c")o+=n/2;else if(e==="b")o+=n;if(h==="c")u+=q/2;else if(h==="r")u+=q;return{left:u,top:o}},center:function(){this.move((m.viewportWidth()-m.width(this.container))/2+m.scrollLeft(),
(m.viewportHeight()-m.height(this.container))/2+m.scrollTop())},_bindUI:function(){j.on(w,"keydown",this._esc,this)},_unbindUI:function(){j.remove(w,"keydown",this._esc,this)},_esc:function(n){n.keyCode===27&&this.hide()},setBody:function(n){this._setContent("body",n)},_setContent:function(n,h){c.isString(h)&&m.html(this[n],h)}});c.Overlay=t});
KISSY.add("popup",function(c){function r(w,m){if(!(this instanceof r))return new r(w,m);m=m||{};if(c.isPlainObject(w))m=w;else m.container=w;m.align=c.merge(c.clone(t.align),m.align);r.superclass.constructor.call(this,c.merge(t,m))}var t={triggerType:"mouse",align:{node:"trigger",points:["cr","ct"],offset:[10,0]}};c.extend(r,c.Overlay);c.Popup=r},{host:"overlay"});
KISSY.add("dialog",function(c){function r(j,i){if(!(this instanceof r))return new r(j,i);i=i||{};if(c.isPlainObject(j))i=j;else i.container=j;i.align=c.merge(c.clone(m.align),i.align);r.superclass.constructor.call(this,c.merge(m,i));this.manager=c.DialogManager;this.manager.register(this)}var t=c.DOM,w=c.Event,m={header:"",footer:"",containerCls:"ks-overlay ks-dialog",hdCls:"ks-dialog-hd",bdCls:"ks-dialog-bd",ftCls:"ks-dialog-ft",closeBtnCls:"ks-dialog-close",width:400,height:300,closable:true};c.extend(r,
c.Overlay);c.Dialog=r;c.augment(r,c.EventTarget,{_prepareMarkup:function(){var j=this.config;r.superclass._prepareMarkup.call(this);this.header=c.get("."+j.hdCls,this.container);if(!this.header){this.header=t.create("<div>",{"class":j.hdCls});t.insertBefore(this.header,this.body)}this.setHeader(j.header);if(j.footer){this.footer=c.get("."+j.ftCls,this.container);if(!this.footer){this.footer=t.create("<div>",{"class":j.ftCls});this.container.appendChild(this.footer)}this.setFooter(j.footer)}j.closable&&
this._initClose()},_initClose:function(){var j=this,i=t.create("<div>",{"class":j.config.closeBtnCls});t.html(i,"close");w.on(i,"click",function(g){g.halt();j.hide()});j.header.appendChild(i)},setHeader:function(j){this._setContent("header",j)},setFooter:function(j){this._setContent("footer",j)}});c.DialogManager={register:function(j){j instanceof r&&this._dialog.push(j)},_dialog:[],hideAll:function(){c.each(this._dialog,function(j){j&&j.hide()})}}},{host:"overlay"});
KISSY.add("imagezoom",function(c,r){function t(q,u){var k=this,a;if(!(k instanceof t))return new t(q,u);if(k.image=q=c.get(q)){k.config=u=c.merge(o,u);if(!u.bigImageSrc)if((a=g.attr(q,"data-ks-imagezoom"))&&h.test(a))u.bigImageSrc=a;u.offset=c.makeArray(u.offset);if(u.preload)(new Image).src=u.bigImageSrc;w(q,function(){k._init()})}}function w(q,u){q.complete?u():s.on(q,"load",u)}function m(q){return{width:q.clientWidth,height:q.clientHeight}}function j(q){return g.create(n,{"class":q,style:"position:absolute"})}
var i=document,g=c.DOM,s=c.Event,n="<div>",h=/^.+\.(jpg|png|gif)$/i,e=Math.round,o={type:"standard",bigImageSrc:"",bigImageSize:[900,900],offset:10,preload:true,timeout:120,timeoutMsg:"\u56fe\u7247\u6682\u4e0d\u53ef\u7528",lensSize:[200,200],lensIcon:true};c.augment(t,c.EventTarget,{_init:function(){this._renderUI();this._bindUI()},_renderUI:function(){var q=this.config,u=this.image;this.imgRegion=c.merge(g.offset(u),m(u));this._renderLens();q.lensIcon&&this._renderIcon()},_renderLens:function(){var q=
this.config,u=j("ks-imagezoom-lens");g.width(u,q.lensSize[0]);g.height(u,q.lensSize[1]);g.hide(u);i.body.appendChild(u);this.lens=u},_renderIcon:function(){var q=this.imgRegion,u=j("ks-imagezoom-icon");i.body.appendChild(u);g.offset(u,{left:q.left+q.width-g.width(u),top:q.top+q.height-g.height(u)});this.lensIcon=u},_bindUI:function(){var q=this,u;s.on(q.image,"mouseenter",function(){u=c.later(function(){q.viewer||q._createViewer();q.show()},100)});s.on(q.image,"mouseleave",function(){if(u){u.cancel();
u=r}})},_createViewer:function(){var q=this,u=q.config,k,a,b;k=j("ks-imagezoom-viewer");a=g.create("<img>",{src:u.bigImageSrc});k.appendChild(a);i.body.appendChild(k);q.bigImage=a;q.viewer=k;if(!a.complete){b=c.later(function(){a.complete||q._showTimeoutMsg();b=r},u.timeout*1E3);w(a,function(){if(b){b.cancel();b=r}q._setViewerRegion()})}q._setViewerRegion()},_setViewerRegion:function(){var q=this.config,u=this.viewer,k=this.imgRegion,a=q.lensSize,b,l,d,f=this.bigImage,p;p=f?{width:q.bigImageSize[0],
height:q.bigImageSize[1]}:m(f);d=e(p.height*a[1]/k.height);a=e(p.width*a[0]/k.width);if(f){b=k.left+k.width+(q.offset[0]||0);l=k.top+(q.offset[1]||0)}if(a){g.width(u,a);g.height(u,d)}b!==r&&g.offset(u,{left:b,top:l})},_onMouseMove:function(q){var u=this.viewer,k=this.lens,a=this.imgRegion,b=a.left,l=a.top,d=a.width;a=a.height;var f=this.config.lensSize,p=f[0],v=f[1];if(q.pageX>b&&q.pageX<b+d&&q.pageY>l&&q.pageY<l+a){f=q.pageX-p/2;q=q.pageY-v/2;if(f<=b)f=b;else if(f>=d+b-p)f=d+b-p;if(q<=l)q=l;else if(q>=
a+l-v)q=a+l-v;k&&g.offset(k,{left:f,top:q});k=m(this.bigImage);u.scrollLeft=e((f-b)*k.width/d);u.scrollTop=e((q-l)*k.height/a)}else this.hide()},_showTimeoutMsg:function(){var q=this.config,u=this.viewer,k=c.get("p",u);if(!k){k=g.create("<p>");u.appendChild(k)}g.html(k,q.timeoutMsg)},show:function(){g.show([this.lens,this.viewer]);g.hide(this.lensIcon);s.on(i.body,"mousemove",this._onMouseMove,this)},hide:function(){g.hide([this.lens,this.viewer]);g.show(this.lensIcon);s.remove(i.body,"mousemove",
this._onMouseMove,this)}});c.ImageZoom=t});
