/*
Copyright 2010, KISSY UI Library v1.1.0pre
MIT Licensed
build time: ${build.time}
*/
KISSY.add("json",function(g){function u(b){return b<10?"0"+b:b}function m(b){n.lastIndex=0;return n.test(b)?'"'+b.replace(n,function(d){var h=j[d];return typeof h==="string"?h:"\\u"+("0000"+d.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+b+'"'}function t(b,d){var h,p,v=k,r,a=d[b];if(a&&typeof a==="object"&&typeof a.toJSON==="function")a=a.toJSON(b);if(typeof f==="function")a=f.call(d,b,a);switch(typeof a){case "string":return m(a);case "number":return isFinite(a)?String(a):"null";case "boolean":case "null":return String(a);
case "object":if(!a)return"null";k+=c;r=[];if(Object.prototype.toString.apply(a)==="[object Array]"){p=a.length;for(b=0;b<p;b+=1)r[b]=t(b,a)||"null";d=r.length===0?"[]":k?"[\n"+k+r.join(",\n"+k)+"\n"+v+"]":"["+r.join(",")+"]";k=v;return d}if(f&&typeof f==="object"){p=f.length;for(b=0;b<p;b+=1){h=f[b];if(typeof h==="string")if(d=t(h,a))r.push(m(h)+(k?": ":":")+d)}}else for(h in a)if(Object.hasOwnProperty.call(a,h))if(d=t(h,a))r.push(m(h)+(k?": ":":")+d);d=r.length===0?"{}":k?"{\n"+k+r.join(",\n"+k)+
"\n"+v+"}":"{"+r.join(",")+"}";k=v;return d}}g=g.JSON=window.JSON||{};if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+u(this.getUTCMonth()+1)+"-"+u(this.getUTCDate())+"T"+u(this.getUTCHours())+":"+u(this.getUTCMinutes())+":"+u(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()}}var s=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
n=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,k,c,j={"\u0008":"\\b","\t":"\\t","\n":"\\n","\u000c":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},f;if(typeof g.stringify!=="function")g.stringify=function(b,d,h){var p;c=k="";if(typeof h==="number")for(p=0;p<h;p+=1)c+=" ";else if(typeof h==="string")c=h;if((f=d)&&typeof d!=="function"&&(typeof d!=="object"||typeof d.length!=="number"))throw new Error("JSON.stringify");return t("",
{"":b})};if(typeof g.parse!=="function")g.parse=function(b,d){function h(p,v){var r,a,e=p[v];if(e&&typeof e==="object")for(r in e)if(Object.hasOwnProperty.call(e,r)){a=h(e,r);if(a!==undefined)e[r]=a;else delete e[r]}return d.call(p,v,e)}b=String(b);s.lastIndex=0;if(s.test(b))b=b.replace(s,function(p){return"\\u"+("0000"+p.charCodeAt(0).toString(16)).slice(-4)});if(/^[\],:{}\s]*$/.test(b.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,
"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){b=eval("("+b+")");return typeof d==="function"?h({"":b},""):b}throw new SyntaxError("JSON.parse");}});
(function(){function g(a,e,i,l,q,o){q=0;for(var x=l.length;q<x;q++){var w=l[q];if(w){w=w[a];for(var y=false;w;){if(w.sizcache===i){y=l[w.sizset];break}if(w.nodeType===1&&!o){w.sizcache=i;w.sizset=q}if(w.nodeName.toLowerCase()===e){y=w;break}w=w[a]}l[q]=y}}}function u(a,e,i,l,q,o){q=0;for(var x=l.length;q<x;q++){var w=l[q];if(w){w=w[a];for(var y=false;w;){if(w.sizcache===i){y=l[w.sizset];break}if(w.nodeType===1){if(!o){w.sizcache=i;w.sizset=q}if(typeof e!=="string"){if(w===e){y=true;break}}else if(c.filter(e,
[w]).length>0){y=w;break}}w=w[a]}l[q]=y}}}var m=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,t=0,s=Object.prototype.toString,n=false,k=true;[0,0].sort(function(){k=false;return 0});var c=function(a,e,i,l){i=i||[];var q=e=e||document;if(e.nodeType!==1&&e.nodeType!==9)return[];if(!a||typeof a!=="string")return i;var o=[],x,w,y,C,D=true,B=c.isXML(e),z=a,A;do{m.exec("");if(x=m.exec(z)){z=x[3];o.push(x[1]);if(x[2]){C=
x[3];break}}}while(x);if(o.length>1&&f.exec(a))if(o.length===2&&j.relative[o[0]])w=r(o[0]+o[1],e);else for(w=j.relative[o[0]]?[e]:c(o.shift(),e);o.length;){a=o.shift();if(j.relative[a])a+=o.shift();w=r(a,w)}else{if(!l&&o.length>1&&e.nodeType===9&&!B&&j.match.ID.test(o[0])&&!j.match.ID.test(o[o.length-1])){x=c.find(o.shift(),e,B);e=x.expr?c.filter(x.expr,x.set)[0]:x.set[0]}if(e){x=l?{expr:o.pop(),set:h(l)}:c.find(o.pop(),o.length===1&&(o[0]==="~"||o[0]==="+")&&e.parentNode?e.parentNode:e,B);w=x.expr?
c.filter(x.expr,x.set):x.set;if(o.length>0)y=h(w);else D=false;for(;o.length;){x=A=o.pop();if(j.relative[A])x=o.pop();else A="";if(x==null)x=e;j.relative[A](y,x,B)}}else y=[]}y||(y=w);y||c.error(A||a);if(s.call(y)==="[object Array]")if(D)if(e&&e.nodeType===1)for(a=0;y[a]!=null;a++){if(y[a]&&(y[a]===true||y[a].nodeType===1&&c.contains(e,y[a])))i.push(w[a])}else for(a=0;y[a]!=null;a++)y[a]&&y[a].nodeType===1&&i.push(w[a]);else i.push.apply(i,y);else h(y,i);if(C){c(C,q,i,l);c.uniqueSort(i)}return i};
c.uniqueSort=function(a){if(v){n=k;a.sort(v);if(n)for(var e=1;e<a.length;e++)a[e]===a[e-1]&&a.splice(e--,1)}return a};c.matches=function(a,e){return c(a,null,null,e)};c.find=function(a,e,i){var l;if(!a)return[];for(var q=0,o=j.order.length;q<o;q++){var x=j.order[q],w;if(w=j.leftMatch[x].exec(a)){var y=w[1];w.splice(1,1);if(y.substr(y.length-1)!=="\\"){w[1]=(w[1]||"").replace(/\\/g,"");l=j.find[x](w,e,i);if(l!=null){a=a.replace(j.match[x],"");break}}}}l||(l=e.getElementsByTagName("*"));return{set:l,
expr:a}};c.filter=function(a,e,i,l){for(var q=a,o=[],x=e,w,y,C=e&&e[0]&&c.isXML(e[0]);a&&e.length;){for(var D in j.filter)if((w=j.leftMatch[D].exec(a))!=null&&w[2]){var B=j.filter[D],z,A;A=w[1];y=false;w.splice(1,1);if(A.substr(A.length-1)!=="\\"){if(x===o)o=[];if(j.preFilter[D])if(w=j.preFilter[D](w,x,i,o,l,C)){if(w===true)continue}else y=z=true;if(w)for(var E=0;(A=x[E])!=null;E++)if(A){z=B(A,w,E,x);var F=l^!!z;if(i&&z!=null)if(F)y=true;else x[E]=false;else if(F){o.push(A);y=true}}if(z!==undefined){i||
(x=o);a=a.replace(j.match[D],"");if(!y)return[];break}}}if(a===q)if(y==null)c.error(a);else break;q=a}return x};c.error=function(a){throw"Syntax error, unrecognized expression: "+a;};var j=c.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(['"]*)(.*?)\3|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\((even|odd|[\dn+\-]*)\))?/,
POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(a){return a.getAttribute("href")}},relative:{"+":function(a,e){var i=typeof e==="string",l=i&&!/\W/.test(e);i=i&&!l;if(l)e=e.toLowerCase();l=0;for(var q=a.length,o;l<q;l++)if(o=a[l]){for(;(o=o.previousSibling)&&o.nodeType!==1;);a[l]=i||o&&o.nodeName.toLowerCase()===
e?o||false:o===e}i&&c.filter(e,a,true)},">":function(a,e){var i=typeof e==="string",l,q=0,o=a.length;if(i&&!/\W/.test(e))for(e=e.toLowerCase();q<o;q++){if(l=a[q]){i=l.parentNode;a[q]=i.nodeName.toLowerCase()===e?i:false}}else{for(;q<o;q++)if(l=a[q])a[q]=i?l.parentNode:l.parentNode===e;i&&c.filter(e,a,true)}},"":function(a,e,i){var l=t++,q=u,o;if(typeof e==="string"&&!/\W/.test(e)){o=e=e.toLowerCase();q=g}q("parentNode",e,l,a,o,i)},"~":function(a,e,i){var l=t++,q=u,o;if(typeof e==="string"&&!/\W/.test(e)){o=
e=e.toLowerCase();q=g}q("previousSibling",e,l,a,o,i)}},find:{ID:function(a,e,i){if(typeof e.getElementById!=="undefined"&&!i)return(a=e.getElementById(a[1]))?[a]:[]},NAME:function(a,e){if(typeof e.getElementsByName!=="undefined"){var i=[];e=e.getElementsByName(a[1]);for(var l=0,q=e.length;l<q;l++)e[l].getAttribute("name")===a[1]&&i.push(e[l]);return i.length===0?null:i}},TAG:function(a,e){return e.getElementsByTagName(a[1])}},preFilter:{CLASS:function(a,e,i,l,q,o){a=" "+a[1].replace(/\\/g,"")+" ";
if(o)return a;o=0;for(var x;(x=e[o])!=null;o++)if(x)if(q^(x.className&&(" "+x.className+" ").replace(/[\t\n]/g," ").indexOf(a)>=0))i||l.push(x);else if(i)e[o]=false;return false},ID:function(a){return a[1].replace(/\\/g,"")},TAG:function(a){return a[1].toLowerCase()},CHILD:function(a){if(a[1]==="nth"){var e=/(-?)(\d*)n((?:\+|-)?\d*)/.exec(a[2]==="even"&&"2n"||a[2]==="odd"&&"2n+1"||!/\D/.test(a[2])&&"0n+"+a[2]||a[2]);a[2]=e[1]+(e[2]||1)-0;a[3]=e[3]-0}a[0]=t++;return a},ATTR:function(a,e,i,l,q,o){e=
a[1].replace(/\\/g,"");if(!o&&j.attrMap[e])a[1]=j.attrMap[e];if(a[2]==="~=")a[4]=" "+a[4]+" ";return a},PSEUDO:function(a,e,i,l,q){if(a[1]==="not")if((m.exec(a[3])||"").length>1||/^\w/.test(a[3]))a[3]=c(a[3],null,null,e);else{a=c.filter(a[3],e,i,true^q);i||l.push.apply(l,a);return false}else if(j.match.POS.test(a[0])||j.match.CHILD.test(a[0]))return true;return a},POS:function(a){a.unshift(true);return a}},filters:{enabled:function(a){return a.disabled===false&&a.type!=="hidden"},disabled:function(a){return a.disabled===
true},checked:function(a){return a.checked===true},selected:function(a){return a.selected===true},parent:function(a){return!!a.firstChild},empty:function(a){return!a.firstChild},has:function(a,e,i){return!!c(i[3],a).length},header:function(a){return/h\d/i.test(a.nodeName)},text:function(a){return"text"===a.type},radio:function(a){return"radio"===a.type},checkbox:function(a){return"checkbox"===a.type},file:function(a){return"file"===a.type},password:function(a){return"password"===a.type},submit:function(a){return"submit"===
a.type},image:function(a){return"image"===a.type},reset:function(a){return"reset"===a.type},button:function(a){return"button"===a.type||a.nodeName.toLowerCase()==="button"},input:function(a){return/input|select|textarea|button/i.test(a.nodeName)}},setFilters:{first:function(a,e){return e===0},last:function(a,e,i,l){return e===l.length-1},even:function(a,e){return e%2===0},odd:function(a,e){return e%2===1},lt:function(a,e,i){return e<i[3]-0},gt:function(a,e,i){return e>i[3]-0},nth:function(a,e,i){return i[3]-
0===e},eq:function(a,e,i){return i[3]-0===e}},filter:{PSEUDO:function(a,e,i,l){var q=e[1],o=j.filters[q];if(o)return o(a,i,e,l);else if(q==="contains")return(a.textContent||a.innerText||c.getText([a])||"").indexOf(e[3])>=0;else if(q==="not"){e=e[3];i=0;for(l=e.length;i<l;i++)if(e[i]===a)return false;return true}else c.error("Syntax error, unrecognized expression: "+q)},CHILD:function(a,e){var i=e[1],l=a;switch(i){case "only":case "first":for(;l=l.previousSibling;)if(l.nodeType===1)return false;if(i===
"first")return true;l=a;case "last":for(;l=l.nextSibling;)if(l.nodeType===1)return false;return true;case "nth":i=e[2];var q=e[3];if(i===1&&q===0)return true;e=e[0];var o=a.parentNode;if(o&&(o.sizcache!==e||!a.nodeIndex)){var x=0;for(l=o.firstChild;l;l=l.nextSibling)if(l.nodeType===1)l.nodeIndex=++x;o.sizcache=e}a=a.nodeIndex-q;return i===0?a===0:a%i===0&&a/i>=0}},ID:function(a,e){return a.nodeType===1&&a.getAttribute("id")===e},TAG:function(a,e){return e==="*"&&a.nodeType===1||a.nodeName.toLowerCase()===
e},CLASS:function(a,e){return(" "+(a.className||a.getAttribute("class"))+" ").indexOf(e)>-1},ATTR:function(a,e){var i=e[1];a=j.attrHandle[i]?j.attrHandle[i](a):a[i]!=null?a[i]:a.getAttribute(i);i=a+"";var l=e[2];e=e[4];return a==null?l==="!=":l==="="?i===e:l==="*="?i.indexOf(e)>=0:l==="~="?(" "+i+" ").indexOf(e)>=0:!e?i&&a!==false:l==="!="?i!==e:l==="^="?i.indexOf(e)===0:l==="$="?i.substr(i.length-e.length)===e:l==="|="?i===e||i.substr(0,e.length+1)===e+"-":false},POS:function(a,e,i,l){var q=j.setFilters[e[2]];
if(q)return q(a,i,e,l)}}},f=j.match.POS,b=function(a,e){return"\\"+(e-0+1)};for(var d in j.match){j.match[d]=new RegExp(j.match[d].source+/(?![^\[]*\])(?![^\(]*\))/.source);j.leftMatch[d]=new RegExp(/(^(?:.|\r|\n)*?)/.source+j.match[d].source.replace(/\\(\d+)/g,b))}var h=function(a,e){a=Array.prototype.slice.call(a,0);if(e){e.push.apply(e,a);return e}return a};try{Array.prototype.slice.call(document.documentElement.childNodes,0)}catch(p){h=function(a,e){e=e||[];var i=0;if(s.call(a)==="[object Array]")Array.prototype.push.apply(e,
a);else if(typeof a.length==="number")for(var l=a.length;i<l;i++)e.push(a[i]);else for(;a[i];i++)e.push(a[i]);return e}}var v;if(document.documentElement.compareDocumentPosition)v=function(a,e){if(!a.compareDocumentPosition||!e.compareDocumentPosition){if(a==e)n=true;return a.compareDocumentPosition?-1:1}a=a.compareDocumentPosition(e)&4?-1:a===e?0:1;if(a===0)n=true;return a};else if("sourceIndex"in document.documentElement)v=function(a,e){if(!a.sourceIndex||!e.sourceIndex){if(a==e)n=true;return a.sourceIndex?
-1:1}a=a.sourceIndex-e.sourceIndex;if(a===0)n=true;return a};else if(document.createRange)v=function(a,e){if(!a.ownerDocument||!e.ownerDocument){if(a==e)n=true;return a.ownerDocument?-1:1}var i=a.ownerDocument.createRange(),l=e.ownerDocument.createRange();i.setStart(a,0);i.setEnd(a,0);l.setStart(e,0);l.setEnd(e,0);a=i.compareBoundaryPoints(Range.START_TO_END,l);if(a===0)n=true;return a};c.getText=function(a){for(var e="",i,l=0;a[l];l++){i=a[l];if(i.nodeType===3||i.nodeType===4)e+=i.nodeValue;else if(i.nodeType!==
8)e+=c.getText(i.childNodes)}return e};(function(){var a=document.createElement("div"),e="script"+(new Date).getTime();a.innerHTML="<a name='"+e+"'/>";var i=document.documentElement;i.insertBefore(a,i.firstChild);if(document.getElementById(e)){j.find.ID=function(l,q,o){if(typeof q.getElementById!=="undefined"&&!o)return(q=q.getElementById(l[1]))?q.id===l[1]||typeof q.getAttributeNode!=="undefined"&&q.getAttributeNode("id").nodeValue===l[1]?[q]:undefined:[]};j.filter.ID=function(l,q){var o=typeof l.getAttributeNode!==
"undefined"&&l.getAttributeNode("id");return l.nodeType===1&&o&&o.nodeValue===q}}i.removeChild(a);i=a=null})();(function(){var a=document.createElement("div");a.appendChild(document.createComment(""));if(a.getElementsByTagName("*").length>0)j.find.TAG=function(e,i){i=i.getElementsByTagName(e[1]);if(e[1]==="*"){e=[];for(var l=0;i[l];l++)i[l].nodeType===1&&e.push(i[l]);i=e}return i};a.innerHTML="<a href='#'></a>";if(a.firstChild&&typeof a.firstChild.getAttribute!=="undefined"&&a.firstChild.getAttribute("href")!==
"#")j.attrHandle.href=function(e){return e.getAttribute("href",2)};a=null})();document.querySelectorAll&&function(){var a=c,e=document.createElement("div");e.innerHTML="<p class='TEST'></p>";if(!(e.querySelectorAll&&e.querySelectorAll(".TEST").length===0)){c=function(l,q,o,x){q=q||document;if(!x&&q.nodeType===9&&!c.isXML(q))try{return h(q.querySelectorAll(l),o)}catch(w){}return a(l,q,o,x)};for(var i in a)c[i]=a[i];e=null}}();(function(){var a=document.createElement("div");a.innerHTML="<div class='test e'></div><div class='test'></div>";
if(!(!a.getElementsByClassName||a.getElementsByClassName("e").length===0)){a.lastChild.className="e";if(a.getElementsByClassName("e").length!==1){j.order.splice(1,0,"CLASS");j.find.CLASS=function(e,i,l){if(typeof i.getElementsByClassName!=="undefined"&&!l)return i.getElementsByClassName(e[1])};a=null}}})();c.contains=document.compareDocumentPosition?function(a,e){return!!(a.compareDocumentPosition(e)&16)}:function(a,e){return a!==e&&(a.contains?a.contains(e):true)};c.isXML=function(a){return(a=(a?
a.ownerDocument||a:0).documentElement)?a.nodeName!=="HTML":false};var r=function(a,e){var i=[],l="",q;for(e=e.nodeType?[e]:e;q=j.match.PSEUDO.exec(a);){l+=q[0];a=a.replace(j.match.PSEUDO,"")}a=j.relative[a]?a+"*":a;q=0;for(var o=e.length;q<o;q++)c(a,e[q],i);return c.filter(l,i)};KISSY.ExternalSelector=c;KISSY.ExternalSelector._filter=function(a,e){return c.matches(e,KISSY.query(a))}})();
KISSY.add("anim-easing",function(g){var u=Math,m=u.PI,t=u.pow,s=u.sin,n=1.70158,k={easeNone:function(c){return c},easeIn:function(c){return c*c},easeOut:function(c){return(2-c)*c},easeBoth:function(c){return(c*=2)<1?0.5*c*c:0.5*(1- --c*(c-2))},easeInStrong:function(c){return c*c*c*c},easeOutStrong:function(c){return 1- --c*c*c*c},easeBothStrong:function(c){return(c*=2)<1?0.5*c*c*c*c:0.5*(2-(c-=2)*c*c*c)},elasticIn:function(c){if(c===0||c===1)return c;return-(t(2,10*(c-=1))*s((c-0.075)*2*m/0.3))},
elasticOut:function(c){if(c===0||c===1)return c;return t(2,-10*c)*s((c-0.075)*2*m/0.3)+1},elasticBoth:function(c){if(c===0||(c*=2)===2)return c;if(c<1)return-0.5*t(2,10*(c-=1))*s((c-0.1125)*2*m/0.45);return t(2,-10*(c-=1))*s((c-0.1125)*2*m/0.45)*0.5+1},backIn:function(c){if(c===1)c-=0.0010;return c*c*((n+1)*c-n)},backOut:function(c){return(c-=1)*c*((n+1)*c+n)+1},backBoth:function(c){if((c*=2)<1)return 0.5*c*c*(((n*=1.525)+1)*c-n);return 0.5*((c-=2)*c*(((n*=1.525)+1)*c+n)+2)},bounceIn:function(c){return 1-
k.bounceOut(1-c)},bounceOut:function(c){return c<1/2.75?7.5625*c*c:c<2/2.75?7.5625*(c-=1.5/2.75)*c+0.75:c<2.5/2.75?7.5625*(c-=2.25/2.75)*c+0.9375:7.5625*(c-=2.625/2.75)*c+0.984375},bounceBoth:function(c){if(c<0.5)return k.bounceIn(c*2)*0.5;return k.bounceOut(c*2-1)*0.5+0.5}};g.Easing=k});
KISSY.add("anim",function(g,u){function m(r,a,e,i,l){if(r=g.get(r)){if(!(this instanceof m))return new m(r,a,e,i,l);var q=g.isPlainObject(e);a=a;this.domEl=r;if(g.isPlainObject(a))a=g.param(a,";").replace(/=/g,":");this.props=t(a);this.targetStyle=a;if(q)r=g.merge(v,e);else{r=g.clone(v);e&&(r.duration=b(e,10)||1);g.isString(i)&&(i=f[i]);g.isFunction(i)&&(r.easing=i);g.isFunction(l)&&(r.complete=l)}this.config=r;g.isFunction(l)&&this.on(p,l)}}function t(r){var a={},e=h.length,i;d.innerHTML='<div style="'+
r+'"></div>';for(r=d.firstChild.style;e--;)if(i=r[h[e]])a[h[e]]=s(i);return a}function s(r){var a=b(r);r=(r+"").replace(/^[-\d\.]+/,"");return isNaN(a)?{v:r,u:"",f:k}:{v:a,u:r,f:n}}function n(r,a,e){return(r+(a-r)*e).toFixed(3)}function k(r,a,e){for(var i=2,l,q,o=[],x=[];l=3,q=arguments[i-1],i--;)if(c(q,0,4)==="rgb(")for(q=q.match(/\d+/g);l--;)o.push(~~q[l]);else if(c(q,0)==="#"){if(q.length===4)q="#"+c(q,1)+c(q,1)+c(q,2)+c(q,2)+c(q,3)+c(q,3);for(;l--;)o.push(parseInt(c(q,1+l*2,2),16))}else return a;
for(;l--;){i=~~(o[l+3]+(o[l]-o[l+3])*e);x.push(i<0?0:i>255?255:i)}return"rgb("+x.join(",")+")"}function c(r,a,e){return r.substr(a,e||1)}var j=g.DOM,f=g.Easing,b=parseFloat,d=j.create("<div>"),h="backgroundColor borderBottomColor borderBottomWidth borderBottomStyle borderLeftColor borderLeftWidth borderLeftStyle borderRightColor borderRightWidth borderRightStyle borderSpacing borderTopColor borderTopWidth borderTopStyle bottom color font fontFamily fontSize fontWeight height left letterSpacing lineHeight marginBottom marginLeft marginRight marginTop maxHeight maxWidth minHeight minWidth opacity outlineColor outlineOffset outlineWidth paddingBottom paddingLeft paddingRight paddingTop right textIndent top width wordSpacing zIndex".split(" "),
p="complete",v={duration:1,easing:f.easeNone};g.augment(m,g.EventTarget,{run:function(){var r=this,a=r.config,e=r.domEl,i=a.duration*1E3,l=a.easing,q=g.now(),o=q+i,x=r.props,w={},y;for(y in x)w[y]=s(j.css(e,y));if(r.fire("start")!==false){r.stop();r.timer=g.later(a=function(){var C=g.now(),D=C>o?1:(C-q)/i,B,z,A;for(y in x){B=w[y];z=x[y];if(z.v==0)z.u=B.u;if(B.u!==z.u)B.v=0;j.css(e,y,z.f(B.v,z.v,l(D))+z.u)}if(r.fire("step")===false||(A=C>o)){r.stop();A&&r.fire(p)}},13,true);a();return r}},stop:function(r){var a=
this.domEl,e=this.targetStyle;if(this.timer){this.timer.cancel();this.timer=u}if(r){g.UA.ie&&e.indexOf("opacity")>-1&&j.css(a,"opacity",this.props.opacity.v);a.style.cssText+=";"+e;this.fire(p)}return this}});g.Anim=m});KISSY.add("anim-node-plugin",function(g,u){var m=g.Anim;g.each([g.Node.prototype,g.NodeList.prototype],function(t){t.animate=function(){var s=g.makeArray(arguments);g.each(this,function(n){m.apply(u,[n].concat(s)).run()});return this}})});
KISSY.add("datalazyload",function(g,u){function m(b,d){if(!(this instanceof m))return new m(b,d);if(d===u){d=b;b=[k]}g.isArray(b)||(b=[g.get(b)||k]);this.containers=b;this.config=g.merge(f,d);this._init()}var t=g.DOM,s=g.Event,n=window,k=document,c="scroll",j="resize",f={mod:"manual",diff:"default",placeholder:"none"};g.augment(m,{_init:function(){this.threshold=this._getThreshold();this._filterItems();this._getItemsLength()&&this._initLoadEvent()},_filterItems:function(){var b=this.containers,d,
h,p,v=[],r=[];d=0;for(h=b.length;d<h;++d){p=g.query("img",b[d]);v=v.concat(g.filter(p,this._filterImg,this));p=g.query("textarea",b[d]);r=r.concat(g.filter(p,this._filterArea,this))}this.images=v;this.areas=r},_filterImg:function(b){var d=b.getAttribute("data-ks-lazyload"),h=this.threshold,p=this.config.placeholder;if(this.config.mod==="manual"){if(d){if(p!=="none")b.src=p;return true}}else if(t.offset(b).top>h&&!d){t.attr(b,"data-ks-lazyload",b.src);if(p!=="none")b.src=p;else b.removeAttribute("src");
return true}},_filterArea:function(b){return t.hasClass(b,"ks-datalazyload")},_initLoadEvent:function(){function b(){h||(h=setTimeout(function(){d();h=null},100))}function d(){p._loadItems();if(p._getItemsLength()===0){s.remove(n,c,b);s.remove(n,j,b)}}var h,p=this;s.on(n,c,b);s.on(n,j,function(){p.threshold=p._getThreshold();b()});p._getItemsLength()&&g.ready(function(){d()})},_loadItems:function(){this._loadImgs();this._loadAreas()},_loadImgs:function(){this.images=g.filter(this.images,this._loadImg,
this)},_loadImg:function(b){var d=this.threshold+t.scrollTop();if(t.offset(b).top<=d)this._loadImgSrc(b);else return true},_loadImgSrc:function(b,d){d=d||"data-ks-lazyload";var h=b.getAttribute(d);if(h&&b.src!=h){b.src=h;b.removeAttribute(d)}},_loadAreas:function(){this.areas=g.filter(this.areas,this._loadArea,this)},_loadArea:function(b){var d=t.offset(b).top;if(!d&&t.css(b,"none")=="none")d=t.offset(b.parentNode).top;if(d<=this.threshold+t.scrollTop())this._loadAreaData(b.parentNode,b);else return true},
_loadAreaData:function(b,d){d.style.display="none";d.className="";var h=t.create("<div>");b.insertBefore(h,d);t.html(h,d.value,true)},_getThreshold:function(){var b=this.config.diff,d=t.viewportHeight();return b==="default"?2*d:d+b},_getItemsLength:function(){return this.images.length+this.areas.length},loadCustomLazyData:function(b,d){var h=this,p,v;g.isArray(b)||(b=[g.get(b)]);g.each(b,function(r){switch(d){case "img-src":v=r.nodeName==="IMG"?[r]:g.query("img",r);g.each(v,function(a){h._loadImgSrc(a,
"data-ks-lazyload-custom")});break;default:(p=g.get("textarea",r))&&t.hasClass(p,"ks-datalazyload-custom")&&h._loadAreaData(r,p)}})}});g.mix(m,m.prototype,true,["loadCustomLazyData","_loadImgSrc","_loadAreaData"]);g.DataLazyload=m});
KISSY.add("flash-ua",function(g){function u(){var f;if(navigator.plugins&&navigator.mimeTypes.length)f=(navigator.plugins["Shockwave Flash"]||0).description;else if(window.ActiveXObject)try{f=(new ActiveXObject("ShockwaveFlash.ShockwaveFlash")).GetVariable("$version")}catch(b){}if(f)return m(f)}function m(f){return f.match(/(\d)+/g)}function t(f){var b=g.isString(f)?m(f):f;f=f;if(g.isArray(b))f=parseFloat(b[0]+"."+s(b[1],3)+s(b[2],5));return f||0}function s(f,b){for(var d=(f+"").length;d++<b;)f="0"+
f;return f}var n=g.UA,k,c,j=true;n.fpv=function(f){if(f||j){j=false;k=u();c=t(k)}return k};n.fpvGEQ=function(f,b){j&&n.fpv(b);return!!c&&c>=t(f)}});KISSY.add("flash",function(g){g.Flash={swfs:{length:0}}});
KISSY.add("flash-embed",function(g){function u(f,b,d){var h=t.create("<param>");t.attr(h,{name:b,value:d});f.appendChild(h)}var m=g.UA,t=g.DOM,s=g.Flash,n=/object|embed/i,k=encodeURIComponent,c={wmode:"",allowscriptaccess:"",allownetworking:"",allowfullscreen:"",play:"false",loop:"",menu:"",quality:"",scale:"",salign:"",bgcolor:"",devicefont:"",base:"",swliveconnect:"",seamlesstabbing:""},j={params:{},attrs:{width:215,height:138},version:9};g.mix(s,{fpv:m.fpv,fpvGEQ:m.fpvGEQ,len:function(){return s.swfs.length},
add:function(f,b,d){var h,p;b=s._normalize(b);b=g.merge(j,b);b.attrs=g.merge(j.attrs,b.attrs);if(f=g.get(f)){if(!f.id)f.id=g.guid("ks-flash-");p=b.attrs.id="#"+f.id;if(m.fpv()){if(!m.fpvGEQ(b.version)){this._callback(d,0,p,f);if(!((h=b.xi)&&g.isString(h)))return;b.src=h}if(n.test(f.nodeName))this._register(f,b,d);else b.src?this._embed(f,b,d):this._callback(d,-3,p,f)}else this._callback(d,-1,p,f)}else this._callback(d,-2)},get:function(f){return s.swfs[f]},remove:function(f){if(f=s.get(f)){t.remove(f);
delete s.swfs["#"+f.id];s.swfs.length-=1}},contains:function(f){var b=s.swfs,d,h=false;if(g.isString(f))h=f in b;else for(d in b)if(b[d]===f){h=true;break}return h},_register:function(f,b,d){b=b.attrs.id;s._addSWF(b,f);s._callback(d,1,b,f)},_embed:function(f,b,d){var h=s._createSWF(b.src,b.attrs,b.params);if(m.ie)f.outerHTML=h.outerHTML;else f.parentNode.replaceChild(h,f);s._register(f,b,d)},_callback:function(f,b,d,h){b&&g.isFunction(f)&&f({status:b,id:d,swf:h})},_addSWF:function(f,b){if(f&&b){s.swfs[f]=
b;s.swfs.length+=1}},_createSWF:function(f,b,d){var h=t.create("<object>"),p;t.attr(h,b);if(m.ie){t.attr(h,"classid","clsid:d27cdb6e-ae6d-11cf-96b8-444553540000");u(h,"movie",f)}else t.attr(h,{type:"application/x-shockwave-flash",data:f,name:b.id});for(p in d)p in c&&u(h,p,d[p]);d.flashvars&&u(h,"flashvars",s.toFlashVars(d.flashvars));return h},_normalize:function(f){var b,d,h,p=f;if(g.isPlainObject(f)){p={};for(h in f){b=h.toLowerCase();d=f[h];if(b!=="flashvars")d=s._normalize(d);p[b]=d}}return p},
toFlashVars:function(f){if(!g.isPlainObject(f))return"";var b,d,h=[];for(b in f){d=f[b];if(g.isString(d))d='"'+k(d)+'"';else{d=g.JSON.stringify(d);if(!d)continue;d=d.replace(/:"([^"]+)/g,function(p,v){return':"'+k(v)})}h.push(b+"="+d)}return h.join("&")}})});
KISSY.add("switchable",function(g,u){function m(n,k){k=k||{};if(!("markupType"in k))if(k.panelCls)k.markupType=1;else if(k.panels)k.markupType=2;k=g.merge(m.Config,k);this.container=g.get(n);this.config=k;this.activeIndex=k.activeIndex;this._init()}var t=g.DOM,s=g.Event;m.Config={markupType:0,navCls:"ks-switchable-nav",contentCls:"ks-switchable-content",triggerCls:"ks-switchable-trigger",panelCls:"ks-switchable-panel",triggers:[],panels:[],hasTriggers:true,triggerType:"mouse",delay:0.1,activeIndex:0,
activeTriggerCls:"ks-active",steps:1,viewSize:[]};m.Plugins=[];g.augment(m,g.EventTarget,{_init:function(){var n=this,k=n.config;if(n.fire("beforeInit")!==false){n._parseMarkup();k.hasTriggers&&n._bindTriggers();g.each(m.Plugins,function(c){c.init&&c.init(n)});n.fire("init")}},_parseMarkup:function(){var n=this.container,k=this.config,c,j=[],f=[];switch(k.markupType){case 0:if(c=g.get("."+k.navCls,n))j=t.children(c);c=g.get("."+k.contentCls,n);f=t.children(c);break;case 1:j=g.query("."+k.triggerCls,
n);f=g.query("."+k.panelCls,n);break;case 2:j=k.triggers;f=k.panels;break}n=f.length;this.length=n/k.steps;if(k.hasTriggers&&n>0&&j.length===0)j=this._generateTriggersMarkup(this.length);this.triggers=g.makeArray(j);this.panels=g.makeArray(f);this.content=c||f[0].parentNode},_generateTriggersMarkup:function(n){var k=this.config,c=t.create("<ul>"),j,f;c.className=k.navCls;for(f=0;f<n;f++){j=t.create("<li>");if(f===this.activeIndex)j.className=k.activeTriggerCls;j.innerHTML=f+1;c.appendChild(j)}this.container.appendChild(c);
return t.children(c)},_bindTriggers:function(){var n=this,k=n.config,c=n.triggers,j,f,b=c.length;for(f=0;f<b;f++)(function(d){j=c[d];s.on(j,"click focus",function(){n._onFocusTrigger(d)});if(k.triggerType==="mouse"){s.on(j,"mouseenter",function(){n._onMouseEnterTrigger(d)});s.on(j,"mouseleave",function(){n._onMouseLeaveTrigger(d)})}})(f)},_onFocusTrigger:function(n){if(this._triggerIsValid()){this._cancelSwitchTimer();this.switchTo(n)}},_onMouseEnterTrigger:function(n){var k=this;if(k._triggerIsValid())k.switchTimer=
g.later(function(){k.switchTo(n)},k.config.delay*1E3)},_onMouseLeaveTrigger:function(){this._cancelSwitchTimer()},_triggerIsValid:function(n){return this.activeIndex!==n},_cancelSwitchTimer:function(){if(this.switchTimer){this.switchTimer.cancel();this.switchTimer=u}},switchTo:function(n,k){var c=this.config,j=this.triggers,f=this.panels,b=this.activeIndex,d=c.steps,h=b*d,p=n*d;if(!this._triggerIsValid())return this;if(this.fire("beforeSwitch",{toIndex:n})===false)return this;if(c.hasTriggers)this._switchTrigger(b>
-1?j[b]:null,j[n]);if(k===u)k=n>b?"forward":"backward";this._switchView(f.slice(h,h+d),f.slice(p,p+d),n,k);this.activeIndex=n;return this},_switchTrigger:function(n,k){var c=this.config.activeTriggerCls;n&&t.removeClass(n,c);t.addClass(k,c)},_switchView:function(n,k,c){t.css(n,"display","none");t.css(k,"display","block");this._fireOnSwitch(c)},_fireOnSwitch:function(n){this.fire("switch",{currentIndex:n})},prev:function(){var n=this.activeIndex;this.switchTo(n>0?n-1:this.length-1,"backward")},next:function(){var n=
this.activeIndex;this.switchTo(n<this.length-1?n+1:0,"forward")}});g.Switchable=m});
KISSY.add("switchable-autoplay",function(g,u){var m=g.Event,t=g.Switchable;g.mix(t.Config,{autoplay:false,interval:5,pauseOnHover:true});t.Plugins.push({name:"autoplay",init:function(s){var n=s.config,k=n.interval*1E3,c;if(n.autoplay){if(n.pauseOnHover){m.on(s.container,"mouseenter",function(){if(c){c.cancel();c=u}s.paused=true});m.on(s.container,"mouseleave",function(){c=g.later(function(){s.paused=false;c=u},k)})}s.autoplayTimer=g.later(function(){s.paused||s.switchTo(s.activeIndex<s.length-1?s.activeIndex+
1:0,"forward")},k,true)}}})});
KISSY.add("switchable-effect",function(g,u){var m=g.DOM,t=g.Anim,s=g.Switchable,n;g.mix(s.Config,{effect:"none",duration:0.5,easing:"easeNone"});s.Effects={none:function(k,c,j){m.css(k,"display","none");m.css(c,"display","block");j()},fade:function(k,c,j){k.length!==1&&g.error("fade effect only supports steps == 1.");var f=this,b=f.config,d=k[0],h=c[0];f.anim&&f.anim.stop(true);m.css(h,"opacity",1);f.anim=(new t(d,{opacity:0},b.duration,b.easing,function(){f.anim=u;m.css(h,"z-index",9);m.css(d,"z-index",
1);j()})).run()},scroll:function(k,c,j,f){var b=this;k=b.config;c=k.effect==="scrollx";var d={};d[c?"left":"top"]=-(b.viewSize[c?0:1]*f)+"px";b.anim&&b.anim.stop();b.anim=(new t(b.content,d,k.duration,k.easing,function(){b.anim=u;j()})).run()}};n=s.Effects;n.scrollx=n.scrolly=n.scroll;s.Plugins.push({name:"effect",init:function(k){var c=k.config,j=c.effect,f=k.panels,b=k.content,d=c.steps,h=k.activeIndex,p=f.length;k.viewSize=[c.viewSize[0]||f[0].offsetWidth*d,c.viewSize[1]||f[0].offsetHeight*d];
if(j!=="none"){g.each(f,function(e){m.css(e,"display","block")});switch(j){case "scrollx":case "scrolly":m.css(b,"position","absolute");m.css(b.parentNode,"position","relative");if(j==="scrollx"){m.css(f,"float","left");m.width(b,k.viewSize[0]*(p/d))}break;case "fade":var v=h*d,r=v+d-1,a;g.each(f,function(e,i){a=i>=v&&i<=r;m.css(e,{opacity:a?1:0,position:"absolute",zIndex:a?9:1})});break}}}});g.augment(s,{_switchView:function(k,c,j,f){var b=this,d=b.config.effect;(g.isFunction(d)?d:n[d]).call(b,k,
c,function(){b._fireOnSwitch(j)},j,f)}})});
KISSY.add("switchable-circular",function(g,u){function m(a,e,i,l,q){var o=this;a=o.config;e=o.length;var x=o.activeIndex,w=a.scrollType===v,y=w?j:f,C=o.viewSize[w?0:1];w=-C*l;var D={},B,z=q===p;if(B=z&&x===0&&l===e-1||q===h&&x===e-1&&l===0)w=t.call(o,o.panels,l,z,y,C);D[y]=w+d;o.anim&&o.anim.stop();o.anim=(new g.Anim(o.content,D,a.duration,a.easing,function(){B&&s.call(o,o.panels,l,z,y,C);o.anim=u;i()})).run()}function t(a,e,i,l,q){var o=this.config.steps;e=this.length;var x=i?e-1:0,w=(x+1)*o;for(o=
x*o;o<w;o++){n.css(a[o],k,c);n.css(a[o],l,(i?-1:1)*q*e)}return i?q:-q*e}function s(a,e,i,l,q){var o=this.config.steps;e=this.length;var x=i?e-1:0,w=(x+1)*o;for(o=x*o;o<w;o++){n.css(a[o],k,b);n.css(a[o],l,b)}n.css(this.content,l,i?-q*(e-1):b)}var n=g.DOM,k="position",c="relative",j="left",f="top",b="",d="px",h="forward",p="backward",v="scrollx",r=g.Switchable;g.mix(r.Config,{circular:false});r.Plugins.push({name:"circular",init:function(a){a=a.config;if(a.circular&&(a.effect===v||a.effect==="scrolly")){a.scrollType=
a.effect;a.effect=m}}})});
KISSY.add("switchable-lazyload",function(g){var u=g.DOM,m="beforeSwitch",t="img-src",s="area-data",n={},k=g.Switchable;n[t]="data-ks-lazyload-custom";n[s]="ks-datalazyload-custom";g.mix(k.Config,{lazyDataType:s});k.Plugins.push({name:"lazyload",init:function(c){function j(v){var r=d.steps;v=v.toIndex*r;b.loadCustomLazyData(c.panels.slice(v,v+r),h);f()&&c.detach(m,j)}function f(){var v,r,a,e=h===t;if(v=e?"img":h===s?"textarea":""){v=g.query(v,c.container);r=0;for(a=v.length;r<a;r++)if(e?u.attr(v[r],
p):u.hasClass(v[r],p))return false}return true}var b=g.DataLazyload,d=c.config,h=d.lazyDataType,p=n[h];!b||!h||!p||c.on(m,j)}})});
KISSY.add("switchable-countdown",function(g,u){var m=g.DOM,t=g.Event,s=g.Anim,n=g.Switchable;g.mix(n.Config,{countdown:false,countdownStyle:"width: 0"});n.Plugins.push({name:"countdown",init:function(k){function c(r){j();p=(new s(d[r],h,b-1)).run()}function j(){if(p){p.stop();p=u}if(v){v.stop();v=u}}var f=k.config,b=f.interval,d=[],h=f.countdownStyle,p,v;if(!(!f.autoplay||!f.hasTriggers||!f.countdown)){g.each(k.triggers,function(r,a){r.innerHTML='<div class="ks-switchable-trigger-mask"></div><div class="ks-switchable-trigger-content">'+
r.innerHTML+"</div>";d[a]=r.firstChild});f.pauseOnHover&&t.on(k.container,"mouseenter",function(){j();v=(new s(d[k.activeIndex],h,b/10,"easeOut")).run()});k.on("beforeSwitch",function(r){j();m.removeAttr(d[k.activeIndex],"style");k.paused&&m.css(d[r.toIndex],"visibility","hidden")});k.on("switch",function(r){k.paused||c(r.currentIndex)});c(k.activeIndex)}}})});
KISSY.add("switchable-autorender",function(g){g.Switchable.autoRender=function(u,m,t){m="."+(m||"KS_");t=t||"data-ks-switchable";g.each(["Switchable","Tabs","Slide","Carousel","Accordion"],function(s){g.each(g.query(m+s,u),function(n){try{var k=n.getAttribute(t);if(k)k=k.replace(/'/g,'"');new g[s](n,g.JSON.parse(k))}catch(c){g.log("Switchable.autoRender: "+c,"warn")}})})}});
KISSY.add("tabs",function(g){function u(m,t){if(!(this instanceof u))return new u(m,t);u.superclass.constructor.call(this,m,t)}g.extend(u,g.Switchable);g.Tabs=u});KISSY.add("slide",function(g){function u(t,s){if(!(this instanceof u))return new u(t,s);u.superclass.constructor.call(this,t,g.merge(m,s))}var m={autoplay:true,circular:true};g.extend(u,g.Switchable);g.Slide=u});
KISSY.add("carousel",function(g,u){function m(b,d){var h=this;if(!(h instanceof m))return new m(b,d);h.on("init",function(){t(h)});m.superclass.constructor.call(h,b,g.merge(f,d))}function t(b){var d=b.config,h=d.disableBtnCls;g.each(["prev","next"],function(p){var v=b[p+"Btn"]=g.get(k+d[p+"BtnCls"],b.container);n.on(v,"click",function(r){r.preventDefault();s.hasClass(v,h)||b[p]()})});d.circular||b.on("switch",function(p){p=p.currentIndex;p=p===0?b[c]:p===b.length-1?b[j]:u;s.removeClass([b[c],b[j]],
h);p&&s.addClass(p,h)});n.on(b.panels,"click focus",function(){b.fire("itemSelected",{item:this})})}var s=g.DOM,n=g.Event,k=".",c="prevBtn",j="nextBtn",f={circular:true,prevBtnCls:"ks-switchable-prev-btn",nextBtnCls:"ks-switchable-next-btn",disableBtnCls:"ks-switchable-disable-btn"};g.extend(m,g.Switchable);g.Carousel=m});
KISSY.add("accordion",function(g){function u(s,n){if(!(this instanceof u))return new u(s,n);u.superclass.constructor.call(this,s,g.merge(t,n))}var m=g.DOM,t={markupType:1,triggerType:"click",multiple:false};g.extend(u,g.Switchable);g.Accordion=u;g.augment(u,{_triggerIsValid:function(s){return this.activeIndex!==s||this.config.multiple},_switchView:function(s,n,k){var c=this.config,j=n[0];if(c.multiple){m.toggleClass(this.triggers[k],c.activeTriggerCls);m.css(j,"display",j.style.display=="none"?"block":
"none");this._fireOnSwitch(k)}else u.superclass._switchView.call(this,s,n,k)}})});
KISSY.add("suggest",function(g,u){function m(b,d,h){if(!(this instanceof m))return new m(b,d,h);this.textInput=g.get(b);this.dataSource=d;this.JSONDataSource=g.isPlainObject(d)?d:null;this.returnedData=null;this.config=g.merge(f,h||{});this.container=null;this.queryParams=this.query="";this._timer=null;this._isRunning=false;this.dataScript=null;this._dataCache={};this._latestScriptTime="";this._onKeyboardSelecting=this._scriptDataIsOut=false;this.selectedItem=null;this._init()}var t=g.DOM,s=g.Event,
n=window,k=document,c=k.getElementsByTagName("head")[0],j=g.UA.ie,f={containerCls:"",containerWidth:"",resultFormat:"\u7ea6%result%\u6761\u7ed3\u679c",showCloseBtn:false,closeBtnText:"\u5173\u95ed",useShim:j===6,timerDelay:200,autoFocus:false,submitFormOnClickSelect:true};g.augment(m,g.EventTarget,{_init:function(){this._initTextInput();this._initContainer();this.config.useShim&&this._initShim();this._initStyle();this._initResizeEvent()},_initTextInput:function(){var b=this;b.textInput.setAttribute("autocomplete",
"off");s.on(b.textInput,"blur",function(){b.stop();b.hide()});b.config.autoFocus&&b.textInput.focus();var d=0;s.on(b.textInput,"keydown",function(h){h=h.keyCode;switch(h){case 27:b.hide();b.textInput.value=b.query;b.query.length===0&&b.textInput.blur();break;case 13:b.textInput.blur();b._onKeyboardSelecting&&b.textInput.value==b._getSelectedItemKey()&&b.fire("itemSelect");b._submitForm();break;case 40:case 38:if(d++==0){b._isRunning&&b.stop();b._onKeyboardSelecting=true;b.selectItem(h===40)}else if(d==
3)d=0;break}if(h!=40&&h!=38){b._isRunning||b.start();b._onKeyboardSelecting=false}});s.on(b.textInput,"keyup",function(){d=0})},_initContainer:function(){var b=k.createElement("div"),d=this.config.containerCls;b.className="ks-suggest-container";if(d)b.className+=" "+d;b.style.position="absolute";b.style.visibility="hidden";this.container=b;this._setContainerRegion();this._initContainerEvent();k.body.insertBefore(b,k.body.firstChild)},_setContainerRegion:function(){var b=this.textInput,d=t.offset(b),
h=this.container;t.offset(h,{left:d.left,top:d.top+b.offsetHeight-1});t.width(h,this.config.containerWidth||b.offsetWidth-2)},_initContainerEvent:function(){var b=this;s.on(b.container,"mousemove",function(h){h=h.target;if(h.nodeName!=="LI")h=t.parent(h,".li");if(t.contains(b.container,h))if(h!==b.selectedItem){b._removeSelectedItem();b._setSelectedItem(h)}});var d=null;s.on(b.container,"mousedown",function(h){d=h.target;b.textInput.onbeforedeactivate=function(){n.event.returnValue=false;b.textInput.onbeforedeactivate=
null};return false});s.on(b.container,"mouseup",function(h){if(b._isInContainer([h.pageX,h.pageY])){h=h.target;if(h==d)if(h.className=="ks-suggest-close-btn")b.hide();else{if(h.nodeName!="LI")h=t.parent(h,".li");if(t.contains(b.container,h)){b._updateInputFromSelectItem(h);b.fire("itemSelect");b.textInput.blur();b._submitForm()}}}})},_submitForm:function(){if(this.config.submitFormOnClickSelect){var b=this.textInput.form;if(b){if(k.createEvent){var d=k.createEvent("MouseEvents");d.initEvent("submit",
true,false);b.dispatchEvent(d)}else k.createEventObject&&b.fireEvent("onsubmit");b.submit()}}},_isInContainer:function(b){var d=this._getContainerRegion();return b[0]>=d.left&&b[0]<=d.right&&b[1]>=d.top&&b[1]<=d.bottom},_initShim:function(){var b=k.createElement("iframe");b.src="about:blank";b.className="ks-suggest-shim";b.style.position="absolute";b.style.visibility="hidden";b.style.border="none";this.container.shim=b;this._setShimRegion();k.body.insertBefore(b,k.body.firstChild)},_setShimRegion:function(){var b=
this.container,d=b.shim;if(d){d.style.left=parseInt(b.style.left)-2+"px";d.style.top=b.style.top;d.style.width=parseInt(b.style.width)+2+"px"}},_initStyle:function(){g.get("#ks-suggest-style")||t.addStyleSheet(".ks-suggest-container{background:white;border:1px solid #999;z-index:99999}.ks-suggest-shim{z-index:99998}.ks-suggest-container li{color:#404040;padding:1px 0 2px;font-size:12px;line-height:18px;float:left;width:100%}.ks-suggest-container li.selected{background-color:#39F;cursor:default}.ks-suggest-key{float:left;text-align:left;padding-left:5px}.ks-suggest-result{float:right;text-align:right;padding-right:5px;color:green}.ks-suggest-container li.selected span{color:#FFF;cursor:default}.ks-suggest-bottom{padding:0 5px 5px}.ks-suggest-close-btn{float:right}.ks-suggest-container li,.suggest-bottom{overflow:hidden;zoom:1;clear:both}.ks-suggest-container{*margin-left:2px;_margin-left:-2px;_margin-top:-3px}",
"ks-suggest-style")},_initResizeEvent:function(){var b=this,d;s.on(n,"resize",function(){d&&clearTimeout(d);d=setTimeout(function(){b._setContainerRegion();b._setShimRegion()},50)})},start:function(){var b=this;m.focusInstance=b;b._timer=setTimeout(function(){b.updateContent();b._timer=setTimeout(arguments.callee,b.config.timerDelay)},b.config.timerDelay);b._isRunning=true},stop:function(){m.focusInstance=null;clearTimeout(this._timer);this._isRunning=false},show:function(){if(!this.isVisible()){var b=
this.container,d=b.shim;b.style.visibility="";if(d){if(!d.style.height)d.style.height=b.offsetHeight-2+"px";d.style.visibility=""}}},hide:function(){if(this.isVisible()){var b=this.container,d=b.shim;if(d)d.style.visibility="hidden";b.style.visibility="hidden"}},isVisible:function(){return this.container.style.visibility!="hidden"},updateContent:function(){if(this._needUpdate()){this._updateQueryValueFromInput();var b=this.query;if(g.trim(b).length)if(this._dataCache[b]!==u){this.returnedData="using cache";
this._fillContainer(this._dataCache[b]);this._displayContainer()}else this.JSONDataSource?this.handleResponse(this.JSONDataSource[b]):this.requestData();else{this._fillContainer("");this.hide()}}},_needUpdate:function(){return this.textInput.value!=this.query},requestData:function(){var b=this;if(!j)b.dataScript=null;if(!b.dataScript){var d=k.createElement("script");d.charset="utf-8";c.insertBefore(d,c.firstChild);b.dataScript=d;if(!j){var h=(new Date).getTime();b._latestScriptTime=h;d.setAttribute("time",
h);s.on(d,"load",function(){b._scriptDataIsOut=d.getAttribute("time")!=b._latestScriptTime})}}b.queryParams="q="+encodeURIComponent(b.query)+"&code=utf-8&callback=g_ks_suggest_callback";b.fire("dataRequest");b.dataScript.src=b.dataSource+"?"+b.queryParams},handleResponse:function(b){if(!this._scriptDataIsOut){this.returnedData=b;this.fire("dataReturn");this.returnedData=this.formatData(this.returnedData);var d="";b=this.returnedData.length;if(b>0){d=k.createElement("ol");for(var h=0;h<b;++h){var p=
this.returnedData[h],v=this.formatItem(p.key,p.result);v.setAttribute("key",p.key);t.addClass(v,h%2?"even":"odd");d.appendChild(v)}d=d}this._fillContainer(d);b>0&&this.appendBottom();g.trim(this.container.innerHTML)&&this.fire("show");this._dataCache[this.query]=this.container.innerHTML;this._displayContainer()}},formatData:function(b){var d=[];if(!b)return d;if(g.isArray(b.result))b=b.result;var h=b.length;if(!h)return d;for(var p,v=0;v<h;++v){p=b[v];d[v]=typeof p==="string"?{key:p}:g.isArray(p)&&
p.length>=2?{key:p[0],result:p[1]}:p}return d},formatItem:function(b,d){var h=k.createElement("li"),p=k.createElement("span");p.className="ks-suggest-key";p.appendChild(k.createTextNode(b));h.appendChild(p);if(d!==u){b=this.config.resultFormat.replace("%result%",d);if(g.trim(b)){d=k.createElement("span");d.className="ks-suggest-result";d.appendChild(k.createTextNode(b));h.appendChild(d)}}return h},appendBottom:function(){var b=k.createElement("div");b.className="ks-suggest-bottom";if(this.config.showCloseBtn){var d=
k.createElement("a");d.href="javascript: void(0)";d.setAttribute("target","_self");d.className="ks-suggest-close-btn";d.appendChild(k.createTextNode(this.config.closeBtnText));b.appendChild(d)}g.trim(b.innerHTML)&&this.container.appendChild(b)},_fillContainer:function(b){if(b.nodeType==1){this.container.innerHTML="";this.container.appendChild(b)}else this.container.innerHTML=b;this.selectedItem=null},_displayContainer:function(){g.trim(this.container.innerHTML)?this.show():this.hide()},selectItem:function(b){var d=
this.container.getElementsByTagName("li");if(d.length!=0)if(this.isVisible()){if(this.selectedItem){b=t[b?"next":"prev"](this.selectedItem);if(!b)this.textInput.value=this.query}else b=d[b?0:d.length-1];this._removeSelectedItem();if(b){this._setSelectedItem(b);this._updateInputFromSelectItem()}}else this.show()},_removeSelectedItem:function(){t.removeClass(this.selectedItem,"selected");this.selectedItem=null},_setSelectedItem:function(b){t.addClass(b,"selected");this.selectedItem=b},_getSelectedItemKey:function(){if(!this.selectedItem)return"";
return this.selectedItem.getAttribute("key")},_updateQueryValueFromInput:function(){this.query=this.textInput.value},_updateInputFromSelectItem:function(){this.textInput.value=this._getSelectedItemKey(this.selectedItem)},_getContainerRegion:function(){var b=this.container,d=t.offset(b),h=d.left;d=d.top;return{left:h,top:d,right:h+b.offsetWidth-1,bottom:d+b.offsetHeight-1}}});n.g_ks_suggest_callback=function(b){m.focusInstance&&setTimeout(function(){m.focusInstance.handleResponse(b)},0)};g.Suggest=
m});
KISSY.add("imagezoom",function(g){function u(c,j){var f=this;if(!(f instanceof u))return new u(c,j);f.image=typeof c==="string"?g.get(c):c;if(f.image){f.origin=null;f.viewer=null;f.bigImage=null;f.config=g.merge(k,j);f.glass=null;f.zoomIcon=null;f.imageReady=false;f.bigImageReady=false;f.timer=null;f.image.onload=function(){if(!f.imageReady){f.imageReady=!f.imageReady;f._init()}};if(!f.imageReady&&f.image.complete&&f.getSize(f.image).height){f.imageReady=!f.imageReady;f._init()}}}var m=g.DOM,t=g.Event,
s=["top","right","bottom","left"],n=["default","glass","follow"],k={type:"default",bigImageSrc:"",bigImageSize:{height:900,width:900},position:"right",offset:10,preload:true,timeout:6E3,glassSize:{height:100,width:100},zoomIcon:true};g.augment(u,{_init:function(){var c=this,j=c.image;c._initContainer();var f=c.config,b=c.glass,d=c.zoomIcon;if(f.bigImageSrc){if(f.preload)(new Image).src=f.bigImageSrc}else f.bigImageSrc=m.attr(j,"src");t.on(c.origin,"mouseenter",function(h){b&&m.removeClass(b,"hidden");
d&&m.addClass(d,"hidden");if(c.viewer)m.removeClass(c.viewer,"hidden");else{c._createZoom(h);c.fire("firstHover")}c.timer=setTimeout(function(){c.bigImageReady||c.showMsg()},c.config.timeout)});t.on(c.origin,"mouseleave",function(){b&&m.addClass(b,"hidden");d&&m.removeClass(d,"hidden");c.viewer&&m.addClass(c.viewer,"hidden");c.timer&&clearTimeout(c.timer)});t.on(c,"firstHover",function(){})},_initContainer:function(){var c=this.config,j,f=this.image;if(m.parent(f).nodeName.toLowerCase()==="a")f=m.parent(f);
j=m.create("<div>");m.addClass(j,"ks-imagezoom-magnifier");m.parent(f).insertBefore(j,f);j.appendChild(f);this.origin=j;if(n[1]==c.type){f=m.create("<div>");m.addClass(f,"ks-imagezoom-glass");m.addClass(f,"hidden");m.css(f,"height",c.glassSize.height+"px");m.css(f,"width",c.glassSize.width+"px");j.appendChild(f);this.glass=f}if(c.zoomIcon){c=m.create("<div>");m.addClass(c,"ks-imagezoom-icon");j.appendChild(c);this.zoomIcon=c}},_createZoom:function(c){var j=this,f=j.config,b;b=m.create("<div>");m.addClass(b,
"ks-imagezoom-viewer");m.addClass(b,"ks-imagezoom-viewer-bk");var d=m.create("<img>");m.attr(d,"src",f.bigImageSrc);b.appendChild(d);n[2]==f.type?j.origin.appendChild(b):m.get("body").appendChild(b);j.bigImage=d;j.viewer=b;j._updateViewer(c,false);j._zoom();j.bigImage.onload=function(){if(!j.bigImageReady){j.bigImageReady=!j.bigImageReady;j._updateViewer(c,true)}};if(!j.bigImageReady&&j.bigImage.complete&&j.getSize(j.bigImage).height){j.bigImageReady=!j.bigImageReady;j._updateViewer(c,true)}},_zoom:function(){var c=
this,j=c.config,f=c.glass,b=c.viewer;t.on(c.origin,"mousemove",function(d){d=c.getGlassOffset(d);if(f){m.css(f,"left",d.left+"px");m.css(f,"top",d.top+"px")}var h=c.getSize(c.image),p=c.getSize(c.bigImage),v=0,r=0,a=Math.round(d.left*p.width/h.width);h=Math.round(d.top*p.height/h.height);if(n[2]==j.type){r=c.getSize(f);v=r.width/2;r=r.height/2}b.scrollLeft=a+v;b.scrollTop=h+r;if(n[2]==j.type){m.css(b,"left",d.left+"px");m.css(b,"top",d.top+"px")}})},_updateViewer:function(c,j){if(j){this.timer&&clearTimeout(this.timer);
this.hideMsg()}var f=this.image,b=this.viewer,d=this.config,h=m.offset(f),p=this.getSize(this.glass),v;if(n[2]==d.type){j=this.getMousePoint(c);d=j.y-h.top;v=j.x-h.left-p.width/2;h=d-p.height/2;j=p.height;p=p.width}else{var r;f=this.getSize(f);var a=this.origin;v=parseInt(m.css(b,"borderTopWidth"));c=parseInt(m.css(b,"borderLeftWidth"));r=j?this.getSize(this.bigImage):d.bigImageSize;j=Math.round(r.height*p.height/f.height);p=Math.round(r.width*p.width/f.width);if(s[0]==d.position){(c=parseInt(m.css(a,
"marginTop")))||(c=0);v=h.top-j-v-d.offset+c;h=h.left}else if(s[2]==d.position){v=f.height+h.top+d.offset;h=h.left}else if(s[3]==d.position){(f=parseInt(m.css(a,"marginLeft")))||(f=0);v=h.top;h=h.left-p-c-d.offset+f}else{v=h.top;h=h.left+f.width+d.offset}}m.css(b,"height",j+"px");m.css(b,"width",p+"px");m.offset(b,{left:h,top:v})},getGlassOffset:function(c){var j=this.image,f={left:0,top:0},b=m.offset(j);c=this.getMousePoint(c);var d=this.getSize(this.glass),h=this.getSize(j);f.left=c.x-b.left-d.width/
2;var p=j=0;if(n[2]==this.config.type){j=d.width/2;p=d.height/2}if(f.left<-j)f.left=0;else if(f.left>h.width-d.width+j)f.left=h.width-d.width;f.top=c.y-b.top-d.height/2;if(f.top<-p)f.top=0;else if(f.top>h.height-d.height+p)f.top=h.height-d.height;return f},getSize:function(c){if(!c)return this.config.glassSize;return{width:c.clientWidth,height:c.clientHeight}},getMousePoint:function(c){return{x:c.pageX,y:c.pageY}},showMsg:function(){var c=g.get("b",this.viewer);if(!c){c=m.create("<b>");this.viewer.appendChild(c);
m.removeClass(this.viewer,"ks-imagezoom-viewer-bk")}m.html(c,"\u037c\u01ac\ufffd\u0772\ufffd\ufffd\ufffd\ufffd\ufffd")},hideMsg:function(){var c=g.get("b",this.viewer);m.html(c,"");m.addClass(this.viewer,"ks-imagezoom-viewer-bk")}},g.EventTarget);g.ImageZoom=u});
