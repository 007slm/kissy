/*
Copyright 2010, KISSY UI Library v1.1.0
MIT Licensed
build time: Aug 2 22:52
*/
KISSY.add("json",function(f){function v(d){return d<10?"0"+d:d}function r(d){k.lastIndex=0;return k.test(d)?'"'+d.replace(k,function(g){var o=m[g];return typeof o==="string"?o:"\\u"+("0000"+g.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+d+'"'}function s(d,g){var o,t,x=j,p,a=g[d];if(a&&typeof a==="object"&&typeof a.toJSON==="function")a=a.toJSON(d);if(typeof i==="function")a=i.call(g,d,a);switch(typeof a){case "string":return r(a);case "number":return isFinite(a)?String(a):"null";case "boolean":case "null":return String(a);
case "object":if(!a)return"null";j+=c;p=[];if(Object.prototype.toString.apply(a)==="[object Array]"){t=a.length;for(d=0;d<t;d+=1)p[d]=s(d,a)||"null";g=p.length===0?"[]":j?"[\n"+j+p.join(",\n"+j)+"\n"+x+"]":"["+p.join(",")+"]";j=x;return g}if(i&&typeof i==="object"){t=i.length;for(d=0;d<t;d+=1){o=i[d];if(typeof o==="string")if(g=s(o,a))p.push(r(o)+(j?": ":":")+g)}}else for(o in a)if(Object.hasOwnProperty.call(a,o))if(g=s(o,a))p.push(r(o)+(j?": ":":")+g);g=p.length===0?"{}":j?"{\n"+j+p.join(",\n"+j)+
"\n"+x+"}":"{"+p.join(",")+"}";j=x;return g}}f=f.JSON=window.JSON||{};if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+v(this.getUTCMonth()+1)+"-"+v(this.getUTCDate())+"T"+v(this.getUTCHours())+":"+v(this.getUTCMinutes())+":"+v(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()}}var q=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
k=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,j,c,m={"\u0008":"\\b","\t":"\\t","\n":"\\n","\u000c":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},i;if(typeof f.stringify!=="function")f.stringify=function(d,g,o){var t;c=j="";if(typeof o==="number")for(t=0;t<o;t+=1)c+=" ";else if(typeof o==="string")c=o;if((i=g)&&typeof g!=="function"&&(typeof g!=="object"||typeof g.length!=="number"))throw new Error("JSON.stringify");return s("",
{"":d})};if(typeof f.parse!=="function")f.parse=function(d,g){function o(t,x){var p,a,b=t[x];if(b&&typeof b==="object")for(p in b)if(Object.hasOwnProperty.call(b,p)){a=o(b,p);if(a!==undefined)b[p]=a;else delete b[p]}return g.call(t,x,b)}d=String(d);q.lastIndex=0;if(q.test(d))d=d.replace(q,function(t){return"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)});if(/^[\],:{}\s]*$/.test(d.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,
"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){d=eval("("+d+")");return typeof g==="function"?o({"":d},""):d}throw new SyntaxError("JSON.parse");}});
(function(){function f(a,b,e,h,n,l){n=0;for(var w=h.length;n<w;n++){var u=h[n];if(u){u=u[a];for(var y=false;u;){if(u.sizcache===e){y=h[u.sizset];break}if(u.nodeType===1&&!l){u.sizcache=e;u.sizset=n}if(u.nodeName.toLowerCase()===b){y=u;break}u=u[a]}h[n]=y}}}function v(a,b,e,h,n,l){n=0;for(var w=h.length;n<w;n++){var u=h[n];if(u){u=u[a];for(var y=false;u;){if(u.sizcache===e){y=h[u.sizset];break}if(u.nodeType===1){if(!l){u.sizcache=e;u.sizset=n}if(typeof b!=="string"){if(u===b){y=true;break}}else if(c.filter(b,
[u]).length>0){y=u;break}}u=u[a]}h[n]=y}}}var r=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,s=0,q=Object.prototype.toString,k=false,j=true;[0,0].sort(function(){j=false;return 0});var c=function(a,b,e,h){e=e||[];var n=b=b||document;if(b.nodeType!==1&&b.nodeType!==9)return[];if(!a||typeof a!=="string")return e;var l=[],w,u,y,C,D=true,B=c.isXML(b),z=a,A;do{r.exec("");if(w=r.exec(z)){z=w[3];l.push(w[1]);if(w[2]){C=
w[3];break}}}while(w);if(l.length>1&&i.exec(a))if(l.length===2&&m.relative[l[0]])u=p(l[0]+l[1],b);else for(u=m.relative[l[0]]?[b]:c(l.shift(),b);l.length;){a=l.shift();if(m.relative[a])a+=l.shift();u=p(a,u)}else{if(!h&&l.length>1&&b.nodeType===9&&!B&&m.match.ID.test(l[0])&&!m.match.ID.test(l[l.length-1])){w=c.find(l.shift(),b,B);b=w.expr?c.filter(w.expr,w.set)[0]:w.set[0]}if(b){w=h?{expr:l.pop(),set:o(h)}:c.find(l.pop(),l.length===1&&(l[0]==="~"||l[0]==="+")&&b.parentNode?b.parentNode:b,B);u=w.expr?
c.filter(w.expr,w.set):w.set;if(l.length>0)y=o(u);else D=false;for(;l.length;){w=A=l.pop();if(m.relative[A])w=l.pop();else A="";if(w==null)w=b;m.relative[A](y,w,B)}}else y=[]}y||(y=u);y||c.error(A||a);if(q.call(y)==="[object Array]")if(D)if(b&&b.nodeType===1)for(a=0;y[a]!=null;a++){if(y[a]&&(y[a]===true||y[a].nodeType===1&&c.contains(b,y[a])))e.push(u[a])}else for(a=0;y[a]!=null;a++)y[a]&&y[a].nodeType===1&&e.push(u[a]);else e.push.apply(e,y);else o(y,e);if(C){c(C,n,e,h);c.uniqueSort(e)}return e};
c.uniqueSort=function(a){if(x){k=j;a.sort(x);if(k)for(var b=1;b<a.length;b++)a[b]===a[b-1]&&a.splice(b--,1)}return a};c.matches=function(a,b){return c(a,null,null,b)};c.find=function(a,b,e){var h;if(!a)return[];for(var n=0,l=m.order.length;n<l;n++){var w=m.order[n],u;if(u=m.leftMatch[w].exec(a)){var y=u[1];u.splice(1,1);if(y.substr(y.length-1)!=="\\"){u[1]=(u[1]||"").replace(/\\/g,"");h=m.find[w](u,b,e);if(h!=null){a=a.replace(m.match[w],"");break}}}}h||(h=b.getElementsByTagName("*"));return{set:h,
expr:a}};c.filter=function(a,b,e,h){for(var n=a,l=[],w=b,u,y,C=b&&b[0]&&c.isXML(b[0]);a&&b.length;){for(var D in m.filter)if((u=m.leftMatch[D].exec(a))!=null&&u[2]){var B=m.filter[D],z,A;A=u[1];y=false;u.splice(1,1);if(A.substr(A.length-1)!=="\\"){if(w===l)l=[];if(m.preFilter[D])if(u=m.preFilter[D](u,w,e,l,h,C)){if(u===true)continue}else y=z=true;if(u)for(var E=0;(A=w[E])!=null;E++)if(A){z=B(A,u,E,w);var F=h^!!z;if(e&&z!=null)if(F)y=true;else w[E]=false;else if(F){l.push(A);y=true}}if(z!==undefined){e||
(w=l);a=a.replace(m.match[D],"");if(!y)return[];break}}}if(a===n)if(y==null)c.error(a);else break;n=a}return w};c.error=function(a){throw"Syntax error, unrecognized expression: "+a;};var m=c.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(['"]*)(.*?)\3|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\((even|odd|[\dn+\-]*)\))?/,
POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(a){return a.getAttribute("href")}},relative:{"+":function(a,b){var e=typeof b==="string",h=e&&!/\W/.test(b);e=e&&!h;if(h)b=b.toLowerCase();h=0;for(var n=a.length,l;h<n;h++)if(l=a[h]){for(;(l=l.previousSibling)&&l.nodeType!==1;);a[h]=e||l&&l.nodeName.toLowerCase()===
b?l||false:l===b}e&&c.filter(b,a,true)},">":function(a,b){var e=typeof b==="string",h,n=0,l=a.length;if(e&&!/\W/.test(b))for(b=b.toLowerCase();n<l;n++){if(h=a[n]){e=h.parentNode;a[n]=e.nodeName.toLowerCase()===b?e:false}}else{for(;n<l;n++)if(h=a[n])a[n]=e?h.parentNode:h.parentNode===b;e&&c.filter(b,a,true)}},"":function(a,b,e){var h=s++,n=v,l;if(typeof b==="string"&&!/\W/.test(b)){l=b=b.toLowerCase();n=f}n("parentNode",b,h,a,l,e)},"~":function(a,b,e){var h=s++,n=v,l;if(typeof b==="string"&&!/\W/.test(b)){l=
b=b.toLowerCase();n=f}n("previousSibling",b,h,a,l,e)}},find:{ID:function(a,b,e){if(typeof b.getElementById!=="undefined"&&!e)return(a=b.getElementById(a[1]))?[a]:[]},NAME:function(a,b){if(typeof b.getElementsByName!=="undefined"){var e=[];b=b.getElementsByName(a[1]);for(var h=0,n=b.length;h<n;h++)b[h].getAttribute("name")===a[1]&&e.push(b[h]);return e.length===0?null:e}},TAG:function(a,b){return b.getElementsByTagName(a[1])}},preFilter:{CLASS:function(a,b,e,h,n,l){a=" "+a[1].replace(/\\/g,"")+" ";
if(l)return a;l=0;for(var w;(w=b[l])!=null;l++)if(w)if(n^(w.className&&(" "+w.className+" ").replace(/[\t\n]/g," ").indexOf(a)>=0))e||h.push(w);else if(e)b[l]=false;return false},ID:function(a){return a[1].replace(/\\/g,"")},TAG:function(a){return a[1].toLowerCase()},CHILD:function(a){if(a[1]==="nth"){var b=/(-?)(\d*)n((?:\+|-)?\d*)/.exec(a[2]==="even"&&"2n"||a[2]==="odd"&&"2n+1"||!/\D/.test(a[2])&&"0n+"+a[2]||a[2]);a[2]=b[1]+(b[2]||1)-0;a[3]=b[3]-0}a[0]=s++;return a},ATTR:function(a,b,e,h,n,l){b=
a[1].replace(/\\/g,"");if(!l&&m.attrMap[b])a[1]=m.attrMap[b];if(a[2]==="~=")a[4]=" "+a[4]+" ";return a},PSEUDO:function(a,b,e,h,n){if(a[1]==="not")if((r.exec(a[3])||"").length>1||/^\w/.test(a[3]))a[3]=c(a[3],null,null,b);else{a=c.filter(a[3],b,e,true^n);e||h.push.apply(h,a);return false}else if(m.match.POS.test(a[0])||m.match.CHILD.test(a[0]))return true;return a},POS:function(a){a.unshift(true);return a}},filters:{enabled:function(a){return a.disabled===false&&a.type!=="hidden"},disabled:function(a){return a.disabled===
true},checked:function(a){return a.checked===true},selected:function(a){return a.selected===true},parent:function(a){return!!a.firstChild},empty:function(a){return!a.firstChild},has:function(a,b,e){return!!c(e[3],a).length},header:function(a){return/h\d/i.test(a.nodeName)},text:function(a){return"text"===a.type},radio:function(a){return"radio"===a.type},checkbox:function(a){return"checkbox"===a.type},file:function(a){return"file"===a.type},password:function(a){return"password"===a.type},submit:function(a){return"submit"===
a.type},image:function(a){return"image"===a.type},reset:function(a){return"reset"===a.type},button:function(a){return"button"===a.type||a.nodeName.toLowerCase()==="button"},input:function(a){return/input|select|textarea|button/i.test(a.nodeName)}},setFilters:{first:function(a,b){return b===0},last:function(a,b,e,h){return b===h.length-1},even:function(a,b){return b%2===0},odd:function(a,b){return b%2===1},lt:function(a,b,e){return b<e[3]-0},gt:function(a,b,e){return b>e[3]-0},nth:function(a,b,e){return e[3]-
0===b},eq:function(a,b,e){return e[3]-0===b}},filter:{PSEUDO:function(a,b,e,h){var n=b[1],l=m.filters[n];if(l)return l(a,e,b,h);else if(n==="contains")return(a.textContent||a.innerText||c.getText([a])||"").indexOf(b[3])>=0;else if(n==="not"){b=b[3];e=0;for(h=b.length;e<h;e++)if(b[e]===a)return false;return true}else c.error("Syntax error, unrecognized expression: "+n)},CHILD:function(a,b){var e=b[1],h=a;switch(e){case "only":case "first":for(;h=h.previousSibling;)if(h.nodeType===1)return false;if(e===
"first")return true;h=a;case "last":for(;h=h.nextSibling;)if(h.nodeType===1)return false;return true;case "nth":e=b[2];var n=b[3];if(e===1&&n===0)return true;b=b[0];var l=a.parentNode;if(l&&(l.sizcache!==b||!a.nodeIndex)){var w=0;for(h=l.firstChild;h;h=h.nextSibling)if(h.nodeType===1)h.nodeIndex=++w;l.sizcache=b}a=a.nodeIndex-n;return e===0?a===0:a%e===0&&a/e>=0}},ID:function(a,b){return a.nodeType===1&&a.getAttribute("id")===b},TAG:function(a,b){return b==="*"&&a.nodeType===1||a.nodeName.toLowerCase()===
b},CLASS:function(a,b){return(" "+(a.className||a.getAttribute("class"))+" ").indexOf(b)>-1},ATTR:function(a,b){var e=b[1];a=m.attrHandle[e]?m.attrHandle[e](a):a[e]!=null?a[e]:a.getAttribute(e);e=a+"";var h=b[2];b=b[4];return a==null?h==="!=":h==="="?e===b:h==="*="?e.indexOf(b)>=0:h==="~="?(" "+e+" ").indexOf(b)>=0:!b?e&&a!==false:h==="!="?e!==b:h==="^="?e.indexOf(b)===0:h==="$="?e.substr(e.length-b.length)===b:h==="|="?e===b||e.substr(0,b.length+1)===b+"-":false},POS:function(a,b,e,h){var n=m.setFilters[b[2]];
if(n)return n(a,e,b,h)}}},i=m.match.POS,d=function(a,b){return"\\"+(b-0+1)};for(var g in m.match){m.match[g]=new RegExp(m.match[g].source+/(?![^\[]*\])(?![^\(]*\))/.source);m.leftMatch[g]=new RegExp(/(^(?:.|\r|\n)*?)/.source+m.match[g].source.replace(/\\(\d+)/g,d))}var o=function(a,b){a=Array.prototype.slice.call(a,0);if(b){b.push.apply(b,a);return b}return a};try{Array.prototype.slice.call(document.documentElement.childNodes,0)}catch(t){o=function(a,b){b=b||[];var e=0;if(q.call(a)==="[object Array]")Array.prototype.push.apply(b,
a);else if(typeof a.length==="number")for(var h=a.length;e<h;e++)b.push(a[e]);else for(;a[e];e++)b.push(a[e]);return b}}var x;if(document.documentElement.compareDocumentPosition)x=function(a,b){if(!a.compareDocumentPosition||!b.compareDocumentPosition){if(a==b)k=true;return a.compareDocumentPosition?-1:1}a=a.compareDocumentPosition(b)&4?-1:a===b?0:1;if(a===0)k=true;return a};else if("sourceIndex"in document.documentElement)x=function(a,b){if(!a.sourceIndex||!b.sourceIndex){if(a==b)k=true;return a.sourceIndex?
-1:1}a=a.sourceIndex-b.sourceIndex;if(a===0)k=true;return a};else if(document.createRange)x=function(a,b){if(!a.ownerDocument||!b.ownerDocument){if(a==b)k=true;return a.ownerDocument?-1:1}var e=a.ownerDocument.createRange(),h=b.ownerDocument.createRange();e.setStart(a,0);e.setEnd(a,0);h.setStart(b,0);h.setEnd(b,0);a=e.compareBoundaryPoints(Range.START_TO_END,h);if(a===0)k=true;return a};c.getText=function(a){for(var b="",e,h=0;a[h];h++){e=a[h];if(e.nodeType===3||e.nodeType===4)b+=e.nodeValue;else if(e.nodeType!==
8)b+=c.getText(e.childNodes)}return b};(function(){var a=document.createElement("div"),b="script"+(new Date).getTime();a.innerHTML="<a name='"+b+"'/>";var e=document.documentElement;e.insertBefore(a,e.firstChild);if(document.getElementById(b)){m.find.ID=function(h,n,l){if(typeof n.getElementById!=="undefined"&&!l)return(n=n.getElementById(h[1]))?n.id===h[1]||typeof n.getAttributeNode!=="undefined"&&n.getAttributeNode("id").nodeValue===h[1]?[n]:undefined:[]};m.filter.ID=function(h,n){var l=typeof h.getAttributeNode!==
"undefined"&&h.getAttributeNode("id");return h.nodeType===1&&l&&l.nodeValue===n}}e.removeChild(a);e=a=null})();(function(){var a=document.createElement("div");a.appendChild(document.createComment(""));if(a.getElementsByTagName("*").length>0)m.find.TAG=function(b,e){e=e.getElementsByTagName(b[1]);if(b[1]==="*"){b=[];for(var h=0;e[h];h++)e[h].nodeType===1&&b.push(e[h]);e=b}return e};a.innerHTML="<a href='#'></a>";if(a.firstChild&&typeof a.firstChild.getAttribute!=="undefined"&&a.firstChild.getAttribute("href")!==
"#")m.attrHandle.href=function(b){return b.getAttribute("href",2)};a=null})();document.querySelectorAll&&function(){var a=c,b=document.createElement("div");b.innerHTML="<p class='TEST'></p>";if(!(b.querySelectorAll&&b.querySelectorAll(".TEST").length===0)){c=function(h,n,l,w){n=n||document;if(!w&&n.nodeType===9&&!c.isXML(n))try{return o(n.querySelectorAll(h),l)}catch(u){}return a(h,n,l,w)};for(var e in a)c[e]=a[e];b=null}}();(function(){var a=document.createElement("div");a.innerHTML="<div class='test e'></div><div class='test'></div>";
if(!(!a.getElementsByClassName||a.getElementsByClassName("e").length===0)){a.lastChild.className="e";if(a.getElementsByClassName("e").length!==1){m.order.splice(1,0,"CLASS");m.find.CLASS=function(b,e,h){if(typeof e.getElementsByClassName!=="undefined"&&!h)return e.getElementsByClassName(b[1])};a=null}}})();c.contains=document.compareDocumentPosition?function(a,b){return!!(a.compareDocumentPosition(b)&16)}:function(a,b){return a!==b&&(a.contains?a.contains(b):true)};c.isXML=function(a){return(a=(a?
a.ownerDocument||a:0).documentElement)?a.nodeName!=="HTML":false};var p=function(a,b){var e=[],h="",n;for(b=b.nodeType?[b]:b;n=m.match.PSEUDO.exec(a);){h+=n[0];a=a.replace(m.match.PSEUDO,"")}a=m.relative[a]?a+"*":a;n=0;for(var l=b.length;n<l;n++)c(a,b[n],e);return c.filter(h,e)};KISSY.ExternalSelector=c;KISSY.ExternalSelector._filter=function(a,b){return c.matches(b,KISSY.query(a))}})();
KISSY.add("anim-easing",function(f){var v=Math,r=v.PI,s=v.pow,q=v.sin,k=1.70158,j={easeNone:function(c){return c},easeIn:function(c){return c*c},easeOut:function(c){return(2-c)*c},easeBoth:function(c){return(c*=2)<1?0.5*c*c:0.5*(1- --c*(c-2))},easeInStrong:function(c){return c*c*c*c},easeOutStrong:function(c){return 1- --c*c*c*c},easeBothStrong:function(c){return(c*=2)<1?0.5*c*c*c*c:0.5*(2-(c-=2)*c*c*c)},elasticIn:function(c){if(c===0||c===1)return c;return-(s(2,10*(c-=1))*q((c-0.075)*2*r/0.3))},
elasticOut:function(c){if(c===0||c===1)return c;return s(2,-10*c)*q((c-0.075)*2*r/0.3)+1},elasticBoth:function(c){if(c===0||(c*=2)===2)return c;if(c<1)return-0.5*s(2,10*(c-=1))*q((c-0.1125)*2*r/0.45);return s(2,-10*(c-=1))*q((c-0.1125)*2*r/0.45)*0.5+1},backIn:function(c){if(c===1)c-=0.0010;return c*c*((k+1)*c-k)},backOut:function(c){return(c-=1)*c*((k+1)*c+k)+1},backBoth:function(c){if((c*=2)<1)return 0.5*c*c*(((k*=1.525)+1)*c-k);return 0.5*((c-=2)*c*(((k*=1.525)+1)*c+k)+2)},bounceIn:function(c){return 1-
j.bounceOut(1-c)},bounceOut:function(c){return c<1/2.75?7.5625*c*c:c<2/2.75?7.5625*(c-=1.5/2.75)*c+0.75:c<2.5/2.75?7.5625*(c-=2.25/2.75)*c+0.9375:7.5625*(c-=2.625/2.75)*c+0.984375},bounceBoth:function(c){if(c<0.5)return j.bounceIn(c*2)*0.5;return j.bounceOut(c*2-1)*0.5+0.5}};f.Easing=j});
KISSY.add("anim",function(f,v){function r(p,a,b,e,h){if(p=f.get(p)){if(!(this instanceof r))return new r(p,a,b,e,h);var n=f.isPlainObject(b);a=a;this.domEl=p;if(f.isPlainObject(a))a=f.param(a,";").replace(/=/g,":");this.props=s(a);this.targetStyle=a;if(n)p=f.merge(x,b);else{p=f.clone(x);b&&(p.duration=d(b,10)||1);f.isString(e)&&(e=i[e]);f.isFunction(e)&&(p.easing=e);f.isFunction(h)&&(p.complete=h)}this.config=p;f.isFunction(h)&&this.on(t,h)}}function s(p){var a={},b=o.length,e;g.innerHTML='<div style="'+
p+'"></div>';for(p=g.firstChild.style;b--;)if(e=p[o[b]])a[o[b]]=q(e);return a}function q(p){var a=d(p);p=(p+"").replace(/^[-\d\.]+/,"");return isNaN(a)?{v:p,u:"",f:j}:{v:a,u:p,f:k}}function k(p,a,b){return(p+(a-p)*b).toFixed(3)}function j(p,a,b){for(var e=2,h,n,l=[],w=[];h=3,n=arguments[e-1],e--;)if(c(n,0,4)==="rgb(")for(n=n.match(/\d+/g);h--;)l.push(~~n[h]);else if(c(n,0)==="#"){if(n.length===4)n="#"+c(n,1)+c(n,1)+c(n,2)+c(n,2)+c(n,3)+c(n,3);for(;h--;)l.push(parseInt(c(n,1+h*2,2),16))}else return a;
for(;h--;){e=~~(l[h+3]+(l[h]-l[h+3])*b);w.push(e<0?0:e>255?255:e)}return"rgb("+w.join(",")+")"}function c(p,a,b){return p.substr(a,b||1)}var m=f.DOM,i=f.Easing,d=parseFloat,g=m.create("<div>"),o="backgroundColor borderBottomColor borderBottomWidth borderBottomStyle borderLeftColor borderLeftWidth borderLeftStyle borderRightColor borderRightWidth borderRightStyle borderSpacing borderTopColor borderTopWidth borderTopStyle bottom color font fontFamily fontSize fontWeight height left letterSpacing lineHeight marginBottom marginLeft marginRight marginTop maxHeight maxWidth minHeight minWidth opacity outlineColor outlineOffset outlineWidth paddingBottom paddingLeft paddingRight paddingTop right textIndent top width wordSpacing zIndex".split(" "),
t="complete",x={duration:1,easing:i.easeNone};f.augment(r,f.EventTarget,{run:function(){var p=this,a=p.config,b=p.domEl,e=a.duration*1E3,h=a.easing,n=f.now(),l=n+e,w=p.props,u={},y;for(y in w)u[y]=q(m.css(b,y));if(p.fire("start")!==false){p.stop();p.timer=f.later(a=function(){var C=f.now(),D=C>l?1:(C-n)/e,B,z,A;for(y in w){B=u[y];z=w[y];if(z.v==0)z.u=B.u;if(B.u!==z.u)B.v=0;m.css(b,y,z.f(B.v,z.v,h(D))+z.u)}if(p.fire("step")===false||(A=C>l)){p.stop();A&&p.fire(t)}},13,true);a();return p}},stop:function(p){var a=
this.domEl,b=this.targetStyle;if(this.timer){this.timer.cancel();this.timer=v}if(p){f.UA.ie&&b.indexOf("opacity")>-1&&m.css(a,"opacity",this.props.opacity.v);a.style.cssText+=";"+b;this.fire(t)}return this}});f.Anim=r});KISSY.add("anim-node-plugin",function(f,v){var r=f.Anim;f.each([f.Node.prototype,f.NodeList.prototype],function(s){s.animate=function(){var q=f.makeArray(arguments);f.each(this,function(k){r.apply(v,[k].concat(q)).run()});return this}})});
KISSY.add("datalazyload",function(f,v){function r(d,g){if(!(this instanceof r))return new r(d,g);if(g===v){g=d;d=[j]}f.isArray(d)||(d=[f.get(d)||j]);this.containers=d;this.config=f.merge(i,g);this._init()}var s=f.DOM,q=f.Event,k=window,j=document,c="scroll",m="resize",i={mod:"manual",diff:"default",placeholder:"none"};f.augment(r,{_init:function(){this.threshold=this._getThreshold();this._filterItems();this._getItemsLength()&&this._initLoadEvent()},_filterItems:function(){var d=this.containers,g,
o,t,x=[],p=[];g=0;for(o=d.length;g<o;++g){t=f.query("img",d[g]);x=x.concat(f.filter(t,this._filterImg,this));t=f.query("textarea",d[g]);p=p.concat(f.filter(t,this._filterArea,this))}this.images=x;this.areas=p},_filterImg:function(d){var g=d.getAttribute("data-ks-lazyload"),o=this.threshold,t=this.config.placeholder;if(this.config.mod==="manual"){if(g){if(t!=="none")d.src=t;return true}}else if(s.offset(d).top>o&&!g){s.attr(d,"data-ks-lazyload",d.src);if(t!=="none")d.src=t;else d.removeAttribute("src");
return true}},_filterArea:function(d){return s.hasClass(d,"ks-datalazyload")},_initLoadEvent:function(){function d(){o||(o=setTimeout(function(){g();o=null},100))}function g(){t._loadItems();if(t._getItemsLength()===0){q.remove(k,c,d);q.remove(k,m,d)}}var o,t=this;q.on(k,c,d);q.on(k,m,function(){t.threshold=t._getThreshold();d()});t._getItemsLength()&&f.ready(function(){g()})},_loadItems:function(){this._loadImgs();this._loadAreas()},_loadImgs:function(){this.images=f.filter(this.images,this._loadImg,
this)},_loadImg:function(d){var g=this.threshold+s.scrollTop();if(s.offset(d).top<=g)this._loadImgSrc(d);else return true},_loadImgSrc:function(d,g){g=g||"data-ks-lazyload";var o=d.getAttribute(g);if(o&&d.src!=o){d.src=o;d.removeAttribute(g)}},_loadAreas:function(){this.areas=f.filter(this.areas,this._loadArea,this)},_loadArea:function(d){var g=s.offset(d).top;if(!g&&s.css(d,"none")=="none")g=s.offset(d.parentNode).top;if(g<=this.threshold+s.scrollTop())this._loadAreaData(d.parentNode,d);else return true},
_loadAreaData:function(d,g){g.style.display="none";g.className="";var o=s.create("<div>");d.insertBefore(o,g);s.html(o,g.value,true)},_getThreshold:function(){var d=this.config.diff,g=s.viewportHeight();return d==="default"?2*g:g+d},_getItemsLength:function(){return this.images.length+this.areas.length},loadCustomLazyData:function(d,g){var o=this,t,x;f.isArray(d)||(d=[f.get(d)]);f.each(d,function(p){switch(g){case "img-src":x=p.nodeName==="IMG"?[p]:f.query("img",p);f.each(x,function(a){o._loadImgSrc(a,
"data-ks-lazyload-custom")});break;default:(t=f.get("textarea",p))&&s.hasClass(t,"ks-datalazyload-custom")&&o._loadAreaData(p,t)}})}});f.mix(r,r.prototype,true,["loadCustomLazyData","_loadImgSrc","_loadAreaData"]);f.DataLazyload=r});
KISSY.add("flash-ua",function(f){function v(){var i;if(navigator.plugins&&navigator.mimeTypes.length)i=(navigator.plugins["Shockwave Flash"]||0).description;else if(window.ActiveXObject)try{i=(new ActiveXObject("ShockwaveFlash.ShockwaveFlash")).GetVariable("$version")}catch(d){}if(i)return r(i)}function r(i){return i.match(/(\d)+/g)}function s(i){var d=f.isString(i)?r(i):i;i=i;if(f.isArray(d))i=parseFloat(d[0]+"."+q(d[1],3)+q(d[2],5));return i||0}function q(i,d){for(var g=(i+"").length;g++<d;)i="0"+
i;return i}var k=f.UA,j,c,m=true;k.fpv=function(i){if(i||m){m=false;j=v();c=s(j)}return j};k.fpvGEQ=function(i,d){m&&k.fpv(d);return!!c&&c>=s(i)}});KISSY.add("flash",function(f){f.Flash={swfs:{length:0}}});
KISSY.add("flash-embed",function(f){function v(i,d,g){var o=s.create("<param>");s.attr(o,{name:d,value:g});i.appendChild(o)}var r=f.UA,s=f.DOM,q=f.Flash,k=/object|embed/i,j=encodeURIComponent,c={wmode:"",allowscriptaccess:"",allownetworking:"",allowfullscreen:"",play:"false",loop:"",menu:"",quality:"",scale:"",salign:"",bgcolor:"",devicefont:"",base:"",swliveconnect:"",seamlesstabbing:""},m={params:{},attrs:{width:215,height:138},version:9};f.mix(q,{fpv:r.fpv,fpvGEQ:r.fpvGEQ,len:function(){return q.swfs.length},
add:function(i,d,g){var o,t;d=q._normalize(d);d=f.merge(m,d);d.attrs=f.merge(m.attrs,d.attrs);if(i=f.get(i)){if(!i.id)i.id=f.guid("ks-flash-");t=d.attrs.id="#"+i.id;if(r.fpv()){if(!r.fpvGEQ(d.version)){this._callback(g,0,t,i);if(!((o=d.xi)&&f.isString(o)))return;d.src=o}if(k.test(i.nodeName))this._register(i,d,g);else d.src?this._embed(i,d,g):this._callback(g,-3,t,i)}else this._callback(g,-1,t,i)}else this._callback(g,-2)},get:function(i){return q.swfs[i]},remove:function(i){if(i=q.get(i)){s.remove(i);
delete q.swfs["#"+i.id];q.swfs.length-=1}},contains:function(i){var d=q.swfs,g,o=false;if(f.isString(i))o=i in d;else for(g in d)if(d[g]===i){o=true;break}return o},_register:function(i,d,g){d=d.attrs.id;q._addSWF(d,i);q._callback(g,1,d,i)},_embed:function(i,d,g){var o=q._createSWF(d.src,d.attrs,d.params);if(r.ie)i.outerHTML=o.outerHTML;else i.parentNode.replaceChild(o,i);q._register(i,d,g)},_callback:function(i,d,g,o){d&&f.isFunction(i)&&i({status:d,id:g,swf:o})},_addSWF:function(i,d){if(i&&d){q.swfs[i]=
d;q.swfs.length+=1}},_createSWF:function(i,d,g){var o=s.create("<object>"),t;s.attr(o,d);if(r.ie){s.attr(o,"classid","clsid:d27cdb6e-ae6d-11cf-96b8-444553540000");v(o,"movie",i)}else s.attr(o,{type:"application/x-shockwave-flash",data:i,name:d.id});for(t in g)t in c&&v(o,t,g[t]);g.flashvars&&v(o,"flashvars",q.toFlashVars(g.flashvars));return o},_normalize:function(i){var d,g,o,t=i;if(f.isPlainObject(i)){t={};for(o in i){d=o.toLowerCase();g=i[o];if(d!=="flashvars")g=q._normalize(g);t[d]=g}}return t},
toFlashVars:function(i){if(!f.isPlainObject(i))return"";var d,g,o=[];for(d in i){g=i[d];if(f.isString(g))g='"'+j(g)+'"';else{g=f.JSON.stringify(g);if(!g)continue;g=g.replace(/:"([^"]+)/g,function(t,x){return':"'+j(x)})}o.push(d+"="+g)}return o.join("&")}})});
KISSY.add("switchable",function(f,v){function r(k,j){j=j||{};if(!("markupType"in j))if(j.panelCls)j.markupType=1;else if(j.panels)j.markupType=2;j=f.merge(r.Config,j);this.container=f.get(k);this.config=j;this.activeIndex=j.activeIndex;this._init()}var s=f.DOM,q=f.Event;r.Config={markupType:0,navCls:"ks-switchable-nav",contentCls:"ks-switchable-content",triggerCls:"ks-switchable-trigger",panelCls:"ks-switchable-panel",triggers:[],panels:[],hasTriggers:true,triggerType:"mouse",delay:0.1,activeIndex:0,
activeTriggerCls:"ks-active",steps:1,viewSize:[]};r.Plugins=[];f.augment(r,f.EventTarget,{_init:function(){var k=this,j=k.config;if(k.fire("beforeInit")!==false){k._parseMarkup();j.hasTriggers&&k._bindTriggers();f.each(r.Plugins,function(c){c.init&&c.init(k)});k.fire("init")}},_parseMarkup:function(){var k=this.container,j=this.config,c,m=[],i=[];switch(j.markupType){case 0:if(c=f.get("."+j.navCls,k))m=s.children(c);c=f.get("."+j.contentCls,k);i=s.children(c);break;case 1:m=f.query("."+j.triggerCls,
k);i=f.query("."+j.panelCls,k);break;case 2:m=j.triggers;i=j.panels;break}k=i.length;this.length=k/j.steps;if(j.hasTriggers&&k>0&&m.length===0)m=this._generateTriggersMarkup(this.length);this.triggers=f.makeArray(m);this.panels=f.makeArray(i);this.content=c||i[0].parentNode},_generateTriggersMarkup:function(k){var j=this.config,c=s.create("<ul>"),m,i;c.className=j.navCls;for(i=0;i<k;i++){m=s.create("<li>");if(i===this.activeIndex)m.className=j.activeTriggerCls;m.innerHTML=i+1;c.appendChild(m)}this.container.appendChild(c);
return s.children(c)},_bindTriggers:function(){var k=this,j=k.config,c=k.triggers,m,i,d=c.length;for(i=0;i<d;i++)(function(g){m=c[g];q.on(m,"click focus",function(){k._onFocusTrigger(g)});if(j.triggerType==="mouse"){q.on(m,"mouseenter",function(){k._onMouseEnterTrigger(g)});q.on(m,"mouseleave",function(){k._onMouseLeaveTrigger(g)})}})(i)},_onFocusTrigger:function(k){if(this._triggerIsValid()){this._cancelSwitchTimer();this.switchTo(k)}},_onMouseEnterTrigger:function(k){var j=this;if(j._triggerIsValid())j.switchTimer=
f.later(function(){j.switchTo(k)},j.config.delay*1E3)},_onMouseLeaveTrigger:function(){this._cancelSwitchTimer()},_triggerIsValid:function(k){return this.activeIndex!==k},_cancelSwitchTimer:function(){if(this.switchTimer){this.switchTimer.cancel();this.switchTimer=v}},switchTo:function(k,j){var c=this.config,m=this.triggers,i=this.panels,d=this.activeIndex,g=c.steps,o=d*g,t=k*g;if(!this._triggerIsValid())return this;if(this.fire("beforeSwitch",{toIndex:k})===false)return this;if(c.hasTriggers)this._switchTrigger(d>
-1?m[d]:null,m[k]);if(j===v)j=k>d?"forward":"backward";this._switchView(i.slice(o,o+g),i.slice(t,t+g),k,j);this.activeIndex=k;return this},_switchTrigger:function(k,j){var c=this.config.activeTriggerCls;k&&s.removeClass(k,c);s.addClass(j,c)},_switchView:function(k,j,c){s.css(k,"display","none");s.css(j,"display","block");this._fireOnSwitch(c)},_fireOnSwitch:function(k){this.fire("switch",{currentIndex:k})},prev:function(){var k=this.activeIndex;this.switchTo(k>0?k-1:this.length-1,"backward")},next:function(){var k=
this.activeIndex;this.switchTo(k<this.length-1?k+1:0,"forward")}});f.Switchable=r});
KISSY.add("switchable-autoplay",function(f,v){var r=f.Event,s=f.Switchable;f.mix(s.Config,{autoplay:false,interval:5,pauseOnHover:true});s.Plugins.push({name:"autoplay",init:function(q){function k(){m=f.later(function(){q.paused||q.switchTo(q.activeIndex<q.length-1?q.activeIndex+1:0,"forward")},c,true)}var j=q.config,c=j.interval*1E3,m;if(j.autoplay){if(j.pauseOnHover){r.on(q.container,"mouseenter",function(){if(m){m.cancel();m=v}q.paused=true});r.on(q.container,"mouseleave",function(){q.paused=false;
k()})}k()}}})});
KISSY.add("switchable-effect",function(f,v){var r=f.DOM,s=f.Anim,q=f.Switchable,k;f.mix(q.Config,{effect:"none",duration:0.5,easing:"easeNone"});q.Effects={none:function(j,c,m){r.css(j,"display","none");r.css(c,"display","block");m()},fade:function(j,c,m){j.length!==1&&f.error("fade effect only supports steps == 1.");var i=this,d=i.config,g=j[0],o=c[0];i.anim&&i.anim.stop(true);r.css(o,"opacity",1);i.anim=(new s(g,{opacity:0},d.duration,d.easing,function(){i.anim=v;r.css(o,"z-index",9);r.css(g,"z-index",
1);m()})).run()},scroll:function(j,c,m,i){var d=this;j=d.config;c=j.effect==="scrollx";var g={};g[c?"left":"top"]=-(d.viewSize[c?0:1]*i)+"px";d.anim&&d.anim.stop();d.anim=(new s(d.content,g,j.duration,j.easing,function(){d.anim=v;m()})).run()}};k=q.Effects;k.scrollx=k.scrolly=k.scroll;q.Plugins.push({name:"effect",init:function(j){var c=j.config,m=c.effect,i=j.panels,d=j.content,g=c.steps,o=j.activeIndex,t=i.length;j.viewSize=[c.viewSize[0]||i[0].offsetWidth*g,c.viewSize[1]||i[0].offsetHeight*g];
if(m!=="none"){f.each(i,function(b){r.css(b,"display","block")});switch(m){case "scrollx":case "scrolly":r.css(d,"position","absolute");r.css(d.parentNode,"position","relative");if(m==="scrollx"){r.css(i,"float","left");r.width(d,j.viewSize[0]*(t/g))}break;case "fade":var x=o*g,p=x+g-1,a;f.each(i,function(b,e){a=e>=x&&e<=p;r.css(b,{opacity:a?1:0,position:"absolute",zIndex:a?9:1})});break}}}});f.augment(q,{_switchView:function(j,c,m,i){var d=this,g=d.config.effect;(f.isFunction(g)?g:k[g]).call(d,j,
c,function(){d._fireOnSwitch(m)},m,i)}})});
KISSY.add("switchable-circular",function(f,v){function r(a,b,e,h,n){var l=this;a=l.config;b=l.length;var w=l.activeIndex,u=a.scrollType===x,y=u?m:i,C=l.viewSize[u?0:1];u=-C*h;var D={},B,z=n===t;if(B=z&&w===0&&h===b-1||n===o&&w===b-1&&h===0)u=s.call(l,l.panels,h,z,y,C);D[y]=u+g;l.anim&&l.anim.stop();l.anim=(new f.Anim(l.content,D,a.duration,a.easing,function(){B&&q.call(l,l.panels,h,z,y,C);l.anim=v;e()})).run()}function s(a,b,e,h,n){var l=this.config.steps;b=this.length;var w=e?b-1:0,u=(w+1)*l;for(l=
w*l;l<u;l++){k.css(a[l],j,c);k.css(a[l],h,(e?-1:1)*n*b)}return e?n:-n*b}function q(a,b,e,h,n){var l=this.config.steps;b=this.length;var w=e?b-1:0,u=(w+1)*l;for(l=w*l;l<u;l++){k.css(a[l],j,d);k.css(a[l],h,d)}k.css(this.content,h,e?-n*(b-1):d)}var k=f.DOM,j="position",c="relative",m="left",i="top",d="",g="px",o="forward",t="backward",x="scrollx",p=f.Switchable;f.mix(p.Config,{circular:false});p.Plugins.push({name:"circular",init:function(a){a=a.config;if(a.circular&&(a.effect===x||a.effect==="scrolly")){a.scrollType=
a.effect;a.effect=r}}})});
KISSY.add("switchable-lazyload",function(f){var v=f.DOM,r="beforeSwitch",s="img-src",q="area-data",k={},j=f.Switchable;k[s]="data-ks-lazyload-custom";k[q]="ks-datalazyload-custom";f.mix(j.Config,{lazyDataType:q});j.Plugins.push({name:"lazyload",init:function(c){function m(x){var p=g.steps;x=x.toIndex*p;d.loadCustomLazyData(c.panels.slice(x,x+p),o);i()&&c.detach(r,m)}function i(){var x,p,a,b=o===s;if(x=b?"img":o===q?"textarea":""){x=f.query(x,c.container);p=0;for(a=x.length;p<a;p++)if(b?v.attr(x[p],
t):v.hasClass(x[p],t))return false}return true}var d=f.DataLazyload,g=c.config,o=g.lazyDataType,t=k[o];!d||!o||!t||c.on(r,m)}})});
KISSY.add("switchable-countdown",function(f,v){var r=f.DOM,s=f.Event,q=f.Anim,k=f.Switchable;f.mix(k.Config,{countdown:false,countdownFromStyle:"",countdownToStyle:"width: 0"});k.Plugins.push({name:"countdown",init:function(j){function c(p){if(p===v)p=j.activeIndex;m();x=(new q(g[p],t,d-0.5)).run()}function m(){if(x){x.stop();x=v}}var i=j.config,d=i.interval,g=[],o=i.countdownFromStyle,t=i.countdownToStyle,x;if(!(!i.autoplay||!i.hasTriggers||!i.countdown)){f.each(j.triggers,function(p,a){p.innerHTML=
'<div class="ks-switchable-trigger-mask"></div><div class="ks-switchable-trigger-content">'+p.innerHTML+"</div>";g[a]=p.firstChild});if(i.pauseOnHover){s.on(j.container,"mouseenter",function(){m();var p=g[j.activeIndex];if(o)x=(new q(p,o,0.2,"easeOut")).run();else r.removeAttr(p,"style")});s.on(j.container,"mouseleave",function(){m();r.removeAttr(g[j.activeIndex],"style");setTimeout(function(){c()},200)})}j.on("beforeSwitch",function(){m();r.removeAttr(g[j.activeIndex],"style")});j.on("switch",function(p){j.paused||
c(p.currentIndex)});c()}}})});KISSY.add("switchable-autorender",function(f){f.Switchable.autoRender=function(v,r,s){r="."+(r||"KS_");s=s||"data-ks-switchable";f.each(["Switchable","Tabs","Slide","Carousel","Accordion"],function(q){f.each(f.query(r+q,v),function(k){try{var j=k.getAttribute(s);if(j)j=j.replace(/'/g,'"');new f[q](k,f.JSON.parse(j))}catch(c){f.log("Switchable.autoRender: "+c,"warn")}})})}});
KISSY.add("tabs",function(f){function v(r,s){if(!(this instanceof v))return new v(r,s);v.superclass.constructor.call(this,r,s)}f.extend(v,f.Switchable);f.Tabs=v});KISSY.add("slide",function(f){function v(s,q){if(!(this instanceof v))return new v(s,q);v.superclass.constructor.call(this,s,f.merge(r,q))}var r={autoplay:true,circular:true};f.extend(v,f.Switchable);f.Slide=v});
KISSY.add("carousel",function(f,v){function r(d,g){var o=this;if(!(o instanceof r))return new r(d,g);o.on("init",function(){s(o)});r.superclass.constructor.call(o,d,f.merge(i,g))}function s(d){var g=d.config,o=g.disableBtnCls;f.each(["prev","next"],function(t){var x=d[t+"Btn"]=f.get(j+g[t+"BtnCls"],d.container);k.on(x,"click",function(p){p.preventDefault();q.hasClass(x,o)||d[t]()})});g.circular||d.on("switch",function(t){t=t.currentIndex;t=t===0?d[c]:t===d.length-1?d[m]:v;q.removeClass([d[c],d[m]],
o);t&&q.addClass(t,o)});k.on(d.panels,"click focus",function(){d.fire("itemSelected",{item:this})})}var q=f.DOM,k=f.Event,j=".",c="prevBtn",m="nextBtn",i={circular:true,prevBtnCls:"ks-switchable-prev-btn",nextBtnCls:"ks-switchable-next-btn",disableBtnCls:"ks-switchable-disable-btn"};f.extend(r,f.Switchable);f.Carousel=r});
KISSY.add("accordion",function(f){function v(q,k){if(!(this instanceof v))return new v(q,k);v.superclass.constructor.call(this,q,f.merge(s,k))}var r=f.DOM,s={markupType:1,triggerType:"click",multiple:false};f.extend(v,f.Switchable);f.Accordion=v;f.augment(v,{_triggerIsValid:function(q){return this.activeIndex!==q||this.config.multiple},_switchView:function(q,k,j){var c=this.config,m=k[0];if(c.multiple){r.toggleClass(this.triggers[j],c.activeTriggerCls);r.css(m,"display",m.style.display=="none"?"block":
"none");this._fireOnSwitch(j)}else v.superclass._switchView.call(this,q,k,j)}})});
