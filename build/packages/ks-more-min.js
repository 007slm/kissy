/*
Copyright 2010, KISSY UI Library v1.1.0pre
MIT Licensed
build time: ${build.time}
*/
KISSY.add("json",function(g){function w(b){return b<10?"0"+b:b}function t(b){j.lastIndex=0;return j.test(b)?'"'+b.replace(j,function(d){var e=m[d];return typeof e==="string"?e:"\\u"+("0000"+d.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+b+'"'}function q(b,d){var e,n,r=i,x,a=d[b];if(a&&typeof a==="object"&&typeof a.toJSON==="function")a=a.toJSON(b);if(typeof p==="function")a=p.call(d,b,a);switch(typeof a){case "string":return t(a);case "number":return isFinite(a)?String(a):"null";case "boolean":case "null":return String(a);
case "object":if(!a)return"null";i+=k;x=[];if(Object.prototype.toString.apply(a)==="[object Array]"){n=a.length;for(b=0;b<n;b+=1)x[b]=q(b,a)||"null";d=x.length===0?"[]":i?"[\n"+i+x.join(",\n"+i)+"\n"+r+"]":"["+x.join(",")+"]";i=r;return d}if(p&&typeof p==="object"){n=p.length;for(b=0;b<n;b+=1){e=p[b];if(typeof e==="string")if(d=q(e,a))x.push(t(e)+(i?": ":":")+d)}}else for(e in a)if(Object.hasOwnProperty.call(a,e))if(d=q(e,a))x.push(t(e)+(i?": ":":")+d);d=x.length===0?"{}":i?"{\n"+i+x.join(",\n"+i)+
"\n"+r+"}":"{"+x.join(",")+"}";i=r;return d}}g=g.JSON=window.JSON||{};if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+w(this.getUTCMonth()+1)+"-"+w(this.getUTCDate())+"T"+w(this.getUTCHours())+":"+w(this.getUTCMinutes())+":"+w(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()}}var s=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
j=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,i,k,m={"\u0008":"\\b","\t":"\\t","\n":"\\n","\u000c":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},p;if(typeof g.stringify!=="function")g.stringify=function(b,d,e){var n;k=i="";if(typeof e==="number")for(n=0;n<e;n+=1)k+=" ";else if(typeof e==="string")k=e;if((p=d)&&typeof d!=="function"&&(typeof d!=="object"||typeof d.length!=="number"))throw new Error("JSON.stringify");return q("",
{"":b})};if(typeof g.parse!=="function")g.parse=function(b,d){function e(n,r){var x,a,c=n[r];if(c&&typeof c==="object")for(x in c)if(Object.hasOwnProperty.call(c,x)){a=e(c,x);if(a!==undefined)c[x]=a;else delete c[x]}return d.call(n,r,c)}b=String(b);s.lastIndex=0;if(s.test(b))b=b.replace(s,function(n){return"\\u"+("0000"+n.charCodeAt(0).toString(16)).slice(-4)});if(/^[\],:{}\s]*$/.test(b.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,
"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){b=eval("("+b+")");return typeof d==="function"?e({"":b},""):b}throw new SyntaxError("JSON.parse");}});
(function(){function g(a,c,f,h,o,l){o=0;for(var v=h.length;o<v;o++){var u=h[o];if(u){u=u[a];for(var y=false;u;){if(u.sizcache===f){y=h[u.sizset];break}if(u.nodeType===1&&!l){u.sizcache=f;u.sizset=o}if(u.nodeName.toLowerCase()===c){y=u;break}u=u[a]}h[o]=y}}}function w(a,c,f,h,o,l){o=0;for(var v=h.length;o<v;o++){var u=h[o];if(u){u=u[a];for(var y=false;u;){if(u.sizcache===f){y=h[u.sizset];break}if(u.nodeType===1){if(!l){u.sizcache=f;u.sizset=o}if(typeof c!=="string"){if(u===c){y=true;break}}else if(k.filter(c,
[u]).length>0){y=u;break}}u=u[a]}h[o]=y}}}var t=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,q=0,s=Object.prototype.toString,j=false,i=true;[0,0].sort(function(){i=false;return 0});var k=function(a,c,f,h){f=f||[];var o=c=c||document;if(c.nodeType!==1&&c.nodeType!==9)return[];if(!a||typeof a!=="string")return f;var l=[],v,u,y,C,B=true,D=k.isXML(c),A=a,z;do{t.exec("");if(v=t.exec(A)){A=v[3];l.push(v[1]);if(v[2]){C=
v[3];break}}}while(v);if(l.length>1&&p.exec(a))if(l.length===2&&m.relative[l[0]])u=x(l[0]+l[1],c);else for(u=m.relative[l[0]]?[c]:k(l.shift(),c);l.length;){a=l.shift();if(m.relative[a])a+=l.shift();u=x(a,u)}else{if(!h&&l.length>1&&c.nodeType===9&&!D&&m.match.ID.test(l[0])&&!m.match.ID.test(l[l.length-1])){v=k.find(l.shift(),c,D);c=v.expr?k.filter(v.expr,v.set)[0]:v.set[0]}if(c){v=h?{expr:l.pop(),set:e(h)}:k.find(l.pop(),l.length===1&&(l[0]==="~"||l[0]==="+")&&c.parentNode?c.parentNode:c,D);u=v.expr?
k.filter(v.expr,v.set):v.set;if(l.length>0)y=e(u);else B=false;for(;l.length;){v=z=l.pop();if(m.relative[z])v=l.pop();else z="";if(v==null)v=c;m.relative[z](y,v,D)}}else y=[]}y||(y=u);y||k.error(z||a);if(s.call(y)==="[object Array]")if(B)if(c&&c.nodeType===1)for(a=0;y[a]!=null;a++){if(y[a]&&(y[a]===true||y[a].nodeType===1&&k.contains(c,y[a])))f.push(u[a])}else for(a=0;y[a]!=null;a++)y[a]&&y[a].nodeType===1&&f.push(u[a]);else f.push.apply(f,y);else e(y,f);if(C){k(C,o,f,h);k.uniqueSort(f)}return f};
k.uniqueSort=function(a){if(r){j=i;a.sort(r);if(j)for(var c=1;c<a.length;c++)a[c]===a[c-1]&&a.splice(c--,1)}return a};k.matches=function(a,c){return k(a,null,null,c)};k.find=function(a,c,f){var h;if(!a)return[];for(var o=0,l=m.order.length;o<l;o++){var v=m.order[o],u;if(u=m.leftMatch[v].exec(a)){var y=u[1];u.splice(1,1);if(y.substr(y.length-1)!=="\\"){u[1]=(u[1]||"").replace(/\\/g,"");h=m.find[v](u,c,f);if(h!=null){a=a.replace(m.match[v],"");break}}}}h||(h=c.getElementsByTagName("*"));return{set:h,
expr:a}};k.filter=function(a,c,f,h){for(var o=a,l=[],v=c,u,y,C=c&&c[0]&&k.isXML(c[0]);a&&c.length;){for(var B in m.filter)if((u=m.leftMatch[B].exec(a))!=null&&u[2]){var D=m.filter[B],A,z;z=u[1];y=false;u.splice(1,1);if(z.substr(z.length-1)!=="\\"){if(v===l)l=[];if(m.preFilter[B])if(u=m.preFilter[B](u,v,f,l,h,C)){if(u===true)continue}else y=A=true;if(u)for(var E=0;(z=v[E])!=null;E++)if(z){A=D(z,u,E,v);var F=h^!!A;if(f&&A!=null)if(F)y=true;else v[E]=false;else if(F){l.push(z);y=true}}if(A!==undefined){f||
(v=l);a=a.replace(m.match[B],"");if(!y)return[];break}}}if(a===o)if(y==null)k.error(a);else break;o=a}return v};k.error=function(a){throw"Syntax error, unrecognized expression: "+a;};var m=k.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(['"]*)(.*?)\3|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\((even|odd|[\dn+\-]*)\))?/,
POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(a){return a.getAttribute("href")}},relative:{"+":function(a,c){var f=typeof c==="string",h=f&&!/\W/.test(c);f=f&&!h;if(h)c=c.toLowerCase();h=0;for(var o=a.length,l;h<o;h++)if(l=a[h]){for(;(l=l.previousSibling)&&l.nodeType!==1;);a[h]=f||l&&l.nodeName.toLowerCase()===
c?l||false:l===c}f&&k.filter(c,a,true)},">":function(a,c){var f=typeof c==="string",h,o=0,l=a.length;if(f&&!/\W/.test(c))for(c=c.toLowerCase();o<l;o++){if(h=a[o]){f=h.parentNode;a[o]=f.nodeName.toLowerCase()===c?f:false}}else{for(;o<l;o++)if(h=a[o])a[o]=f?h.parentNode:h.parentNode===c;f&&k.filter(c,a,true)}},"":function(a,c,f){var h=q++,o=w,l;if(typeof c==="string"&&!/\W/.test(c)){l=c=c.toLowerCase();o=g}o("parentNode",c,h,a,l,f)},"~":function(a,c,f){var h=q++,o=w,l;if(typeof c==="string"&&!/\W/.test(c)){l=
c=c.toLowerCase();o=g}o("previousSibling",c,h,a,l,f)}},find:{ID:function(a,c,f){if(typeof c.getElementById!=="undefined"&&!f)return(a=c.getElementById(a[1]))?[a]:[]},NAME:function(a,c){if(typeof c.getElementsByName!=="undefined"){var f=[];c=c.getElementsByName(a[1]);for(var h=0,o=c.length;h<o;h++)c[h].getAttribute("name")===a[1]&&f.push(c[h]);return f.length===0?null:f}},TAG:function(a,c){return c.getElementsByTagName(a[1])}},preFilter:{CLASS:function(a,c,f,h,o,l){a=" "+a[1].replace(/\\/g,"")+" ";
if(l)return a;l=0;for(var v;(v=c[l])!=null;l++)if(v)if(o^(v.className&&(" "+v.className+" ").replace(/[\t\n]/g," ").indexOf(a)>=0))f||h.push(v);else if(f)c[l]=false;return false},ID:function(a){return a[1].replace(/\\/g,"")},TAG:function(a){return a[1].toLowerCase()},CHILD:function(a){if(a[1]==="nth"){var c=/(-?)(\d*)n((?:\+|-)?\d*)/.exec(a[2]==="even"&&"2n"||a[2]==="odd"&&"2n+1"||!/\D/.test(a[2])&&"0n+"+a[2]||a[2]);a[2]=c[1]+(c[2]||1)-0;a[3]=c[3]-0}a[0]=q++;return a},ATTR:function(a,c,f,h,o,l){c=
a[1].replace(/\\/g,"");if(!l&&m.attrMap[c])a[1]=m.attrMap[c];if(a[2]==="~=")a[4]=" "+a[4]+" ";return a},PSEUDO:function(a,c,f,h,o){if(a[1]==="not")if((t.exec(a[3])||"").length>1||/^\w/.test(a[3]))a[3]=k(a[3],null,null,c);else{a=k.filter(a[3],c,f,true^o);f||h.push.apply(h,a);return false}else if(m.match.POS.test(a[0])||m.match.CHILD.test(a[0]))return true;return a},POS:function(a){a.unshift(true);return a}},filters:{enabled:function(a){return a.disabled===false&&a.type!=="hidden"},disabled:function(a){return a.disabled===
true},checked:function(a){return a.checked===true},selected:function(a){return a.selected===true},parent:function(a){return!!a.firstChild},empty:function(a){return!a.firstChild},has:function(a,c,f){return!!k(f[3],a).length},header:function(a){return/h\d/i.test(a.nodeName)},text:function(a){return"text"===a.type},radio:function(a){return"radio"===a.type},checkbox:function(a){return"checkbox"===a.type},file:function(a){return"file"===a.type},password:function(a){return"password"===a.type},submit:function(a){return"submit"===
a.type},image:function(a){return"image"===a.type},reset:function(a){return"reset"===a.type},button:function(a){return"button"===a.type||a.nodeName.toLowerCase()==="button"},input:function(a){return/input|select|textarea|button/i.test(a.nodeName)}},setFilters:{first:function(a,c){return c===0},last:function(a,c,f,h){return c===h.length-1},even:function(a,c){return c%2===0},odd:function(a,c){return c%2===1},lt:function(a,c,f){return c<f[3]-0},gt:function(a,c,f){return c>f[3]-0},nth:function(a,c,f){return f[3]-
0===c},eq:function(a,c,f){return f[3]-0===c}},filter:{PSEUDO:function(a,c,f,h){var o=c[1],l=m.filters[o];if(l)return l(a,f,c,h);else if(o==="contains")return(a.textContent||a.innerText||k.getText([a])||"").indexOf(c[3])>=0;else if(o==="not"){c=c[3];f=0;for(h=c.length;f<h;f++)if(c[f]===a)return false;return true}else k.error("Syntax error, unrecognized expression: "+o)},CHILD:function(a,c){var f=c[1],h=a;switch(f){case "only":case "first":for(;h=h.previousSibling;)if(h.nodeType===1)return false;if(f===
"first")return true;h=a;case "last":for(;h=h.nextSibling;)if(h.nodeType===1)return false;return true;case "nth":f=c[2];var o=c[3];if(f===1&&o===0)return true;c=c[0];var l=a.parentNode;if(l&&(l.sizcache!==c||!a.nodeIndex)){var v=0;for(h=l.firstChild;h;h=h.nextSibling)if(h.nodeType===1)h.nodeIndex=++v;l.sizcache=c}a=a.nodeIndex-o;return f===0?a===0:a%f===0&&a/f>=0}},ID:function(a,c){return a.nodeType===1&&a.getAttribute("id")===c},TAG:function(a,c){return c==="*"&&a.nodeType===1||a.nodeName.toLowerCase()===
c},CLASS:function(a,c){return(" "+(a.className||a.getAttribute("class"))+" ").indexOf(c)>-1},ATTR:function(a,c){var f=c[1];a=m.attrHandle[f]?m.attrHandle[f](a):a[f]!=null?a[f]:a.getAttribute(f);f=a+"";var h=c[2];c=c[4];return a==null?h==="!=":h==="="?f===c:h==="*="?f.indexOf(c)>=0:h==="~="?(" "+f+" ").indexOf(c)>=0:!c?f&&a!==false:h==="!="?f!==c:h==="^="?f.indexOf(c)===0:h==="$="?f.substr(f.length-c.length)===c:h==="|="?f===c||f.substr(0,c.length+1)===c+"-":false},POS:function(a,c,f,h){var o=m.setFilters[c[2]];
if(o)return o(a,f,c,h)}}},p=m.match.POS,b=function(a,c){return"\\"+(c-0+1)};for(var d in m.match){m.match[d]=new RegExp(m.match[d].source+/(?![^\[]*\])(?![^\(]*\))/.source);m.leftMatch[d]=new RegExp(/(^(?:.|\r|\n)*?)/.source+m.match[d].source.replace(/\\(\d+)/g,b))}var e=function(a,c){a=Array.prototype.slice.call(a,0);if(c){c.push.apply(c,a);return c}return a};try{Array.prototype.slice.call(document.documentElement.childNodes,0)}catch(n){e=function(a,c){c=c||[];var f=0;if(s.call(a)==="[object Array]")Array.prototype.push.apply(c,
a);else if(typeof a.length==="number")for(var h=a.length;f<h;f++)c.push(a[f]);else for(;a[f];f++)c.push(a[f]);return c}}var r;if(document.documentElement.compareDocumentPosition)r=function(a,c){if(!a.compareDocumentPosition||!c.compareDocumentPosition){if(a==c)j=true;return a.compareDocumentPosition?-1:1}a=a.compareDocumentPosition(c)&4?-1:a===c?0:1;if(a===0)j=true;return a};else if("sourceIndex"in document.documentElement)r=function(a,c){if(!a.sourceIndex||!c.sourceIndex){if(a==c)j=true;return a.sourceIndex?
-1:1}a=a.sourceIndex-c.sourceIndex;if(a===0)j=true;return a};else if(document.createRange)r=function(a,c){if(!a.ownerDocument||!c.ownerDocument){if(a==c)j=true;return a.ownerDocument?-1:1}var f=a.ownerDocument.createRange(),h=c.ownerDocument.createRange();f.setStart(a,0);f.setEnd(a,0);h.setStart(c,0);h.setEnd(c,0);a=f.compareBoundaryPoints(Range.START_TO_END,h);if(a===0)j=true;return a};k.getText=function(a){for(var c="",f,h=0;a[h];h++){f=a[h];if(f.nodeType===3||f.nodeType===4)c+=f.nodeValue;else if(f.nodeType!==
8)c+=k.getText(f.childNodes)}return c};(function(){var a=document.createElement("div"),c="script"+(new Date).getTime();a.innerHTML="<a name='"+c+"'/>";var f=document.documentElement;f.insertBefore(a,f.firstChild);if(document.getElementById(c)){m.find.ID=function(h,o,l){if(typeof o.getElementById!=="undefined"&&!l)return(o=o.getElementById(h[1]))?o.id===h[1]||typeof o.getAttributeNode!=="undefined"&&o.getAttributeNode("id").nodeValue===h[1]?[o]:undefined:[]};m.filter.ID=function(h,o){var l=typeof h.getAttributeNode!==
"undefined"&&h.getAttributeNode("id");return h.nodeType===1&&l&&l.nodeValue===o}}f.removeChild(a);f=a=null})();(function(){var a=document.createElement("div");a.appendChild(document.createComment(""));if(a.getElementsByTagName("*").length>0)m.find.TAG=function(c,f){f=f.getElementsByTagName(c[1]);if(c[1]==="*"){c=[];for(var h=0;f[h];h++)f[h].nodeType===1&&c.push(f[h]);f=c}return f};a.innerHTML="<a href='#'></a>";if(a.firstChild&&typeof a.firstChild.getAttribute!=="undefined"&&a.firstChild.getAttribute("href")!==
"#")m.attrHandle.href=function(c){return c.getAttribute("href",2)};a=null})();document.querySelectorAll&&function(){var a=k,c=document.createElement("div");c.innerHTML="<p class='TEST'></p>";if(!(c.querySelectorAll&&c.querySelectorAll(".TEST").length===0)){k=function(h,o,l,v){o=o||document;if(!v&&o.nodeType===9&&!k.isXML(o))try{return e(o.querySelectorAll(h),l)}catch(u){}return a(h,o,l,v)};for(var f in a)k[f]=a[f];c=null}}();(function(){var a=document.createElement("div");a.innerHTML="<div class='test e'></div><div class='test'></div>";
if(!(!a.getElementsByClassName||a.getElementsByClassName("e").length===0)){a.lastChild.className="e";if(a.getElementsByClassName("e").length!==1){m.order.splice(1,0,"CLASS");m.find.CLASS=function(c,f,h){if(typeof f.getElementsByClassName!=="undefined"&&!h)return f.getElementsByClassName(c[1])};a=null}}})();k.contains=document.compareDocumentPosition?function(a,c){return!!(a.compareDocumentPosition(c)&16)}:function(a,c){return a!==c&&(a.contains?a.contains(c):true)};k.isXML=function(a){return(a=(a?
a.ownerDocument||a:0).documentElement)?a.nodeName!=="HTML":false};var x=function(a,c){var f=[],h="",o;for(c=c.nodeType?[c]:c;o=m.match.PSEUDO.exec(a);){h+=o[0];a=a.replace(m.match.PSEUDO,"")}a=m.relative[a]?a+"*":a;o=0;for(var l=c.length;o<l;o++)k(a,c[o],f);return k.filter(h,f)};KISSY.ExternalSelector=k;KISSY.ExternalSelector._filter=function(a,c){return k.matches(c,KISSY.query(a))}})();
KISSY.add("datalazyload",function(g,w){function t(d,e){if(!(this instanceof t))return new t(d,e);if(e===w){e=d;d=[i]}g.isArray(d)||(d=[g.get(d)||i]);this.containers=d;this.config=g.merge(b,e);this._init()}var q=g.DOM,s=g.Event,j=window,i=document,k={AUTO:"auto",MANUAL:"manual"},m="scroll",p="resize",b={mod:k.MANUAL,diff:"default",placeholder:"none"};g.augment(t,{_init:function(){this.threshold=this._getThreshold();this._filterItems();this._getItemsLength()&&this._initLoadEvent()},_filterItems:function(){var d=
this.containers,e,n,r,x=[],a=[];e=0;for(n=d.length;e<n;++e){r=g.query("img",d[e]);x=x.concat(g.filter(r,this._filterImg,this));r=g.query("textarea",d[e]);a=a.concat(g.filter(r,this._filterArea,this))}this.images=x;this.areas=a},_filterImg:function(d){var e=d.getAttribute("data-lazyload-src"),n=this.threshold,r=this.config.placeholder;if(this.config.mod===k.MANUAL){if(e){if(r!=="none")d.src=r;return true}}else if(q.offset(d).top>n&&!e){q.attr(d,"data-lazyload-src",d.src);if(r!=="none")d.src=r;else d.removeAttribute("src");
return true}},_filterArea:function(d){return q.hasClass(d,"ks-datalazyload")},_initLoadEvent:function(){function d(){n||(n=setTimeout(function(){e();n=null},100))}function e(){r._loadItems();if(r._getItemsLength()===0){s.remove(j,m,d);s.remove(j,p,d)}}var n,r=this;s.on(j,m,d);s.on(j,p,function(){r.threshold=r._getThreshold();d()});r._getItemsLength()&&g.ready(function(){e()})},_loadItems:function(){this._loadImgs();this._loadAreas()},_loadImgs:function(){this.images=g.filter(this.images,this._loadImg,
this)},_loadImg:function(d){var e=this.threshold+q.scrollTop();if(q.offset(d).top<=e)this._loadImgSrc(d);else return true},_loadImgSrc:function(d,e){e=e||"data-lazyload-src";var n=d.getAttribute(e);if(n&&d.src!=n){d.src=n;d.removeAttribute(e)}},_loadAreas:function(){this.areas=g.filter(this.areas,this._loadArea,this)},_loadArea:function(d){var e=q.offset(d).top;if(!e&&q.css(d,"none")=="none")e=q.offset(d.parentNode).top;if(e<=this.threshold+q.scrollTop())this._loadAreaData(d.parentNode,d);else return true},
_loadAreaData:function(d,e){e.style.display="none";e.className="";var n=q.create("<div>");d.insertBefore(n,e);q.html(n,e.value,true)},_getThreshold:function(){var d=this.config.diff,e=q.viewportHeight();return d==="default"?2*e:e+d},_getItemsLength:function(){return this.images.length+this.areas.length},loadCustomLazyData:function(d,e,n){var r=this,x,a;g.isArray(d)||(d=[g.get(d)]);g.each(d,function(c){switch(e){case "textarea-data":if((x=g.get("textarea",c))&&q.hasClass(x,n||"ks-datalazyload-custom"))r._loadAreaData(c,
x);break;default:a=c.nodeName==="IMG"?[c]:g.query("img",c);g.each(a,function(f){r._loadImgSrc(f,n||"data-lazyload-src-custom")})}})}});g.mix(t,t.prototype,true,["loadCustomLazyData","_loadImgSrc","_loadAreaData"]);g.DataLazyload=t});
KISSY.add("switchable",function(g,w){function t(j,i){i=i||{};if(!("markupType"in i))if(i.panelCls)i.markupType=1;else if(i.panels)i.markupType=2;i=g.merge(t.Config,i);this.container=g.get(j);this.config=i;this.activeIndex=i.activeIndex;this._init()}var q=g.DOM,s=g.Event;t.Config={markupType:0,navCls:"ks-switchable-nav",contentCls:"ks-switchable-content",triggerCls:"ks-switchable-trigger",panelCls:"ks-switchable-panel",triggers:[],panels:[],hasTriggers:true,triggerType:"mouse",delay:0.1,activeIndex:0,
activeTriggerCls:"active",steps:1,viewSize:[]};t.Plugins=[];g.augment(t,g.EventTarget,{_init:function(){var j=this,i=j.config;if(j.fire("beforeInit")!==false){j._parseMarkup();i.hasTriggers&&j._bindTriggers();g.each(t.Plugins,function(k){k.init&&k.init(j)});j.fire("init")}},_parseMarkup:function(){var j=this.container,i=this.config,k,m=[],p=[];switch(i.markupType){case 0:if(k=g.get("."+i.navCls,j))m=q.children(k);k=g.get("."+i.contentCls,j);p=q.children(k);break;case 1:m=g.query("."+i.triggerCls,
j);p=g.query("."+i.panelCls,j);break;case 2:m=i.triggers;p=i.panels;break}j=p.length;this.length=j/i.steps;if(i.hasTriggers&&j>0&&m.length===0)m=this._generateTriggersMarkup(this.length);this.triggers=g.makeArray(m);this.panels=g.makeArray(p);this.content=k||p[0].parentNode},_generateTriggersMarkup:function(j){var i=this.config,k=q.create("<ul>"),m,p;k.className=i.navCls;for(p=0;p<j;p++){m=q.create("<li>");if(p===this.activeIndex)m.className=i.activeTriggerCls;m.innerHTML=p+1;k.appendChild(m)}this.container.appendChild(k);
return q.children(k)},_bindTriggers:function(){var j=this,i=j.config,k=j.triggers,m,p,b=k.length;for(p=0;p<b;p++)(function(d){m=k[d];s.on(m,"click focus",function(){j._onFocusTrigger(d)});if(i.triggerType==="mouse"){s.on(m,"mouseenter",function(){j._onMouseEnterTrigger(d)});s.on(m,"mouseleave",function(){j._onMouseLeaveTrigger(d)})}})(p)},_onFocusTrigger:function(j){if(this._triggerIsValid()){this._cancelSwitchTimer();this.switchTo(j)}},_onMouseEnterTrigger:function(j){var i=this;if(i._triggerIsValid())i.switchTimer=
g.later(function(){i.switchTo(j)},i.config.delay*1E3)},_onMouseLeaveTrigger:function(){this._cancelSwitchTimer()},_triggerIsValid:function(j){return this.activeIndex!==j},_cancelSwitchTimer:function(){if(this.switchTimer){this.switchTimer.cancel();this.switchTimer=w}},switchTo:function(j,i){var k=this.config,m=this.triggers,p=this.panels,b=this.activeIndex,d=k.steps,e=b*d,n=j*d;if(!this._triggerIsValid())return this;if(this.fire("beforeSwitch",{toIndex:j})===false)return this;if(k.hasTriggers)this._switchTrigger(b>
-1?m[b]:null,m[j]);if(i===w)i=j>b?"forward":"backward";this._switchView(p.slice(e,e+d),p.slice(n,n+d),j,i);this.activeIndex=j;return this},_switchTrigger:function(j,i){var k=this.config.activeTriggerCls;j&&q.removeClass(j,k);q.addClass(i,k)},_switchView:function(j,i,k){q.css(j,"display","none");q.css(i,"display","block");this._fireOnSwitch(k)},_fireOnSwitch:function(j){this.fire("switch",{currentIndex:j})},prev:function(){var j=this.activeIndex;this.switchTo(j>0?j-1:this.length-1,"backward")},next:function(){var j=
this.activeIndex;this.switchTo(j<this.length-1?j+1:0,"forward")}});g.Switchable=t});
KISSY.add("switchable-autoplay",function(g,w){var t=g.Event,q=g.Switchable;g.mix(q.Config,{autoplay:false,interval:5,pauseOnHover:true});q.Plugins.push({name:"autoplay",init:function(s){var j=s.config,i=j.interval*1E3,k;if(j.autoplay){if(j.pauseOnHover){t.on(s.container,"mouseenter",function(){if(k){k.cancel();k=w}s.paused=true});t.on(s.container,"mouseleave",function(){k=g.later(function(){s.paused=false;k=w},i)})}s.autoplayTimer=g.later(function(){s.paused||s.switchTo(s.activeIndex<s.length-1?s.activeIndex+
1:0,"forward")},i,true)}}})});
KISSY.add("switchable-effect",function(g,w){var t=g.DOM,q=g.Anim,s=g.Switchable,j;g.mix(s.Config,{effect:"none",duration:0.5,easing:"easeNone"});s.Effects={none:function(i,k,m){t.css(i,"display","none");t.css(k,"display","block");m()},fade:function(i,k,m){i.length!==1&&g.error("fade effect only supports steps == 1.");var p=this,b=p.config,d=i[0],e=k[0];p.anim&&p.anim.stop(true);t.css(e,"opacity",1);p.anim=(new q(d,{opacity:0},b.duration,b.easing,function(){p.anim=w;t.css(e,"z-index",9);t.css(d,"z-index",
1);m()})).run()},scroll:function(i,k,m,p){var b=this;i=b.config;k=i.effect==="scrollx";var d={};d[k?"left":"top"]=-(b.viewSize[k?0:1]*p)+"px";b.anim&&b.anim.stop();b.anim=(new q(b.content,d,i.duration,i.easing,function(){b.anim=w;m()})).run()}};j=s.Effects;j.scrollx=j.scrolly=j.scroll;s.Plugins.push({name:"effect",init:function(i){var k=i.config,m=k.effect,p=i.panels,b=i.content,d=k.steps,e=i.activeIndex,n=p.length;i.viewSize=[k.viewSize[0]||p[0].offsetWidth*d,k.viewSize[1]||p[0].offsetHeight*d];
if(m!=="none"){g.each(p,function(c){t.css(c,"display","block")});switch(m){case "scrollx":case "scrolly":t.css(b,"position","absolute");t.css(b.parentNode,"position","relative");if(m==="scrollx"){t.css(p,"float","left");t.width(b,i.viewSize[0]*(n/d))}break;case "fade":var r=e*d,x=r+d-1,a;g.each(p,function(c,f){a=f>=r&&f<=x;t.css(c,{opacity:a?1:0,position:"absolute",zIndex:a?9:1})});break}}}});g.augment(s,{_switchView:function(i,k,m,p){var b=this,d=b.config.effect;(g.isFunction(d)?d:j[d]).call(b,i,
k,function(){b._fireOnSwitch(m)},m,p)}})});
KISSY.add("switchable-circular",function(g,w){function t(a,c,f,h,o){var l=this;a=l.config;c=l.length;var v=l.activeIndex,u=a.scrollType===r,y=u?m:p,C=l.viewSize[u?0:1];u=-C*h;var B={},D,A=o===n;if(D=A&&v===0&&h===c-1||o===e&&v===c-1&&h===0)u=q.call(l,l.panels,h,A,y,C);B[y]=u+d;l.anim&&l.anim.stop();l.anim=(new g.Anim(l.content,B,a.duration,a.easing,function(){D&&s.call(l,l.panels,h,A,y,C);l.anim=w;f()})).run()}function q(a,c,f,h,o){var l=this.config.steps;c=this.length;var v=f?c-1:0,u=(v+1)*l;for(l=
v*l;l<u;l++){j.css(a[l],i,k);j.css(a[l],h,(f?-1:1)*o*c)}return f?o:-o*c}function s(a,c,f,h,o){var l=this.config.steps;c=this.length;var v=f?c-1:0,u=(v+1)*l;for(l=v*l;l<u;l++){j.css(a[l],i,b);j.css(a[l],h,b)}j.css(this.content,h,f?-o*(c-1):b)}var j=g.DOM,i="position",k="relative",m="left",p="top",b="",d="px",e="forward",n="backward",r="scrollx",x=g.Switchable;g.mix(x.Config,{circular:false});x.Plugins.push({name:"circular",init:function(a){a=a.config;if(a.circular&&(a.effect===r||a.effect==="scrolly")){a.scrollType=
a.effect;a.effect=t}}})});
KISSY.add("switchable-lazyload",function(g){var w=g.DOM,t="beforeSwitch",q="img-src",s="textarea-data",j={},i=g.Switchable;j[q]="data-lazyload-src-custom";j[s]="ks-datalazyload-custom";g.mix(i.Config,{lazyDataType:"",lazyDataFlag:""});i.Plugins.push({name:"lazyload",init:function(k){function m(r){var x=d.steps;r=r.toIndex*x;b.loadCustomLazyData(k.panels.slice(r,r+x),e,n);p()&&k.detach(t,m)}function p(){var r,x,a,c=e===q;if(r=c?"img":e===s?"textarea":""){r=g.query(r,k.container);x=0;for(a=r.length;x<
a;x++)if(c?w.attr(r[x],n):w.hasClass(r[x],n))return false}return true}var b=g.DataLazyload,d=k.config,e=d.lazyDataType,n=d.lazyDataFlag||j[e];!b||!e||!n||k.on(t,m)}})});KISSY.add("tabs",function(g){function w(t,q){if(!(this instanceof w))return new w(t,q);w.superclass.constructor.call(this,t,q)}g.extend(w,g.Switchable);g.Tabs=w});
KISSY.add("slide",function(g){function w(q,s){if(!(this instanceof w))return new w(q,s);w.superclass.constructor.call(this,q,g.merge(t,s))}var t={autoplay:true,circular:true};g.extend(w,g.Switchable);g.Slide=w});
KISSY.add("carousel",function(g,w){function t(b,d){var e=this;if(!(e instanceof t))return new t(b,d);e.on("init",function(){q(e)});t.superclass.constructor.call(e,b,g.merge(p,d))}function q(b){var d=b.config,e=d.disableBtnCls;g.each(["prev","next"],function(n){var r=b[n+"Btn"]=g.get(i+d[n+"BtnCls"],b.container);j.on(r,"click",function(x){x.preventDefault();s.hasClass(r,e)||b[n]()})});d.circular||b.on("switch",function(n){n=n.currentIndex;n=n===0?b[k]:n===b.length-1?b[m]:w;s.removeClass([b[k],b[m]],
e);n&&s.addClass(n,e)});j.on(b.panels,"click focus",function(){b.fire("itemSelected",{item:this})})}var s=g.DOM,j=g.Event,i=".",k="prevBtn",m="nextBtn",p={circular:true,prevBtnCls:"ks-switchable-prev-btn",nextBtnCls:"ks-switchable-next-btn",disableBtnCls:"ks-switchable-disable-btn"};g.extend(t,g.Switchable);g.Carousel=t});
KISSY.add("accordion",function(g){function w(s,j){if(!(this instanceof w))return new w(s,j);w.superclass.constructor.call(this,s,g.merge(q,j))}var t=g.DOM,q={triggerType:"click",multiple:false};g.extend(w,g.Switchable);g.Accordion=w;g.augment(w,{_triggerIsValid:function(s){return this.activeIndex!==s||this.config.multiple},_switchView:function(s,j,i){var k=this.config,m=j[0];if(k.multiple){t.toggleClass(this.triggers[i],k.activeTriggerCls);t.css(m,"display",m.style.display=="none"?"block":"none");
this._fireOnSwitch(i)}else w.superclass._switchView.call(this,s,j,i)}})});
KISSY.add("suggest",function(g,w){function t(b,d,e){if(!(this instanceof t))return new t(b,d,e);this.textInput=g.get(b);this.dataSource=d;this.JSONDataSource=g.isPlainObject(d)?d:null;this.returnedData=null;this.config=g.merge(p,e||{});this.container=null;this.queryParams=this.query="";this._timer=null;this._isRunning=false;this.dataScript=null;this._dataCache={};this._latestScriptTime="";this._onKeyboardSelecting=this._scriptDataIsOut=false;this.selectedItem=null;this._init()}var q=g.DOM,s=g.Event,
j=window,i=document,k=i.getElementsByTagName("head")[0],m=g.UA.ie,p={containerCls:"",containerWidth:"",resultFormat:"\u7ea6%result%\u6761\u7ed3\u679c",showCloseBtn:false,closeBtnText:"\u5173\u95ed",useShim:m===6,timerDelay:200,autoFocus:false,submitFormOnClickSelect:true};g.augment(t,g.EventTarget,{_init:function(){this._initTextInput();this._initContainer();this.config.useShim&&this._initShim();this._initStyle();this._initResizeEvent()},_initTextInput:function(){var b=this;b.textInput.setAttribute("autocomplete",
"off");s.on(b.textInput,"blur",function(){b.stop();b.hide()});b.config.autoFocus&&b.textInput.focus();var d=0;s.on(b.textInput,"keydown",function(e){e=e.keyCode;switch(e){case 27:b.hide();b.textInput.value=b.query;b.query.length===0&&b.textInput.blur();break;case 13:b.textInput.blur();b._onKeyboardSelecting&&b.textInput.value==b._getSelectedItemKey()&&b.fire("itemSelect");b._submitForm();break;case 40:case 38:if(d++==0){b._isRunning&&b.stop();b._onKeyboardSelecting=true;b.selectItem(e===40)}else if(d==
3)d=0;break}if(e!=40&&e!=38){b._isRunning||b.start();b._onKeyboardSelecting=false}});s.on(b.textInput,"keyup",function(){d=0})},_initContainer:function(){var b=i.createElement("div"),d=this.config.containerCls;b.className="ks-suggest-container";if(d)b.className+=" "+d;b.style.position="absolute";b.style.visibility="hidden";this.container=b;this._setContainerRegion();this._initContainerEvent();i.body.insertBefore(b,i.body.firstChild)},_setContainerRegion:function(){var b=this.textInput,d=q.offset(b),
e=this.container;q.offset(e,{left:d.left,top:d.top+b.offsetHeight-1});q.width(e,this.config.containerWidth||b.offsetWidth-2)},_initContainerEvent:function(){var b=this;s.on(b.container,"mousemove",function(e){e=e.target;if(e.nodeName!=="LI")e=q.parent(e,".li");if(q.contains(b.container,e))if(e!==b.selectedItem){b._removeSelectedItem();b._setSelectedItem(e)}});var d=null;s.on(b.container,"mousedown",function(e){d=e.target;b.textInput.onbeforedeactivate=function(){j.event.returnValue=false;b.textInput.onbeforedeactivate=
null};return false});s.on(b.container,"mouseup",function(e){if(b._isInContainer([e.pageX,e.pageY])){e=e.target;if(e==d)if(e.className=="ks-suggest-close-btn")b.hide();else{if(e.nodeName!="LI")e=q.parent(e,".li");if(q.contains(b.container,e)){b._updateInputFromSelectItem(e);b.fire("itemSelect");b.textInput.blur();b._submitForm()}}}})},_submitForm:function(){if(this.config.submitFormOnClickSelect){var b=this.textInput.form;if(b){if(i.createEvent){var d=i.createEvent("MouseEvents");d.initEvent("submit",
true,false);b.dispatchEvent(d)}else i.createEventObject&&b.fireEvent("onsubmit");b.submit()}}},_isInContainer:function(b){var d=this._getContainerRegion();return b[0]>=d.left&&b[0]<=d.right&&b[1]>=d.top&&b[1]<=d.bottom},_initShim:function(){var b=i.createElement("iframe");b.src="about:blank";b.className="ks-suggest-shim";b.style.position="absolute";b.style.visibility="hidden";b.style.border="none";this.container.shim=b;this._setShimRegion();i.body.insertBefore(b,i.body.firstChild)},_setShimRegion:function(){var b=
this.container,d=b.shim;if(d){d.style.left=parseInt(b.style.left)-2+"px";d.style.top=b.style.top;d.style.width=parseInt(b.style.width)+2+"px"}},_initStyle:function(){g.get("#ks-suggest-style")||q.addStyleSheet(".ks-suggest-container{background:white;border:1px solid #999;z-index:99999}.ks-suggest-shim{z-index:99998}.ks-suggest-container li{color:#404040;padding:1px 0 2px;font-size:12px;line-height:18px;float:left;width:100%}.ks-suggest-container li.selected{background-color:#39F;cursor:default}.ks-suggest-key{float:left;text-align:left;padding-left:5px}.ks-suggest-result{float:right;text-align:right;padding-right:5px;color:green}.ks-suggest-container li.selected span{color:#FFF;cursor:default}.ks-suggest-bottom{padding:0 5px 5px}.ks-suggest-close-btn{float:right}.ks-suggest-container li,.suggest-bottom{overflow:hidden;zoom:1;clear:both}.ks-suggest-container{*margin-left:2px;_margin-left:-2px;_margin-top:-3px}",
"ks-suggest-style")},_initResizeEvent:function(){var b=this,d;s.on(j,"resize",function(){d&&clearTimeout(d);d=setTimeout(function(){b._setContainerRegion();b._setShimRegion()},50)})},start:function(){var b=this;t.focusInstance=b;b._timer=setTimeout(function(){b.updateContent();b._timer=setTimeout(arguments.callee,b.config.timerDelay)},b.config.timerDelay);b._isRunning=true},stop:function(){t.focusInstance=null;clearTimeout(this._timer);this._isRunning=false},show:function(){if(!this.isVisible()){var b=
this.container,d=b.shim;b.style.visibility="";if(d){if(!d.style.height)d.style.height=b.offsetHeight-2+"px";d.style.visibility=""}}},hide:function(){if(this.isVisible()){var b=this.container,d=b.shim;if(d)d.style.visibility="hidden";b.style.visibility="hidden"}},isVisible:function(){return this.container.style.visibility!="hidden"},updateContent:function(){if(this._needUpdate()){this._updateQueryValueFromInput();var b=this.query;if(g.trim(b).length)if(this._dataCache[b]!==w){this.returnedData="using cache";
this._fillContainer(this._dataCache[b]);this._displayContainer()}else this.JSONDataSource?this.handleResponse(this.JSONDataSource[b]):this.requestData();else{this._fillContainer("");this.hide()}}},_needUpdate:function(){return this.textInput.value!=this.query},requestData:function(){var b=this;if(!m)b.dataScript=null;if(!b.dataScript){var d=i.createElement("script");d.charset="utf-8";k.insertBefore(d,k.firstChild);b.dataScript=d;if(!m){var e=(new Date).getTime();b._latestScriptTime=e;d.setAttribute("time",
e);s.on(d,"load",function(){b._scriptDataIsOut=d.getAttribute("time")!=b._latestScriptTime})}}b.queryParams="q="+encodeURIComponent(b.query)+"&code=utf-8&callback=g_ks_suggest_callback";b.fire("dataRequest");b.dataScript.src=b.dataSource+"?"+b.queryParams},handleResponse:function(b){if(!this._scriptDataIsOut){this.returnedData=b;this.fire("dataReturn");this.returnedData=this.formatData(this.returnedData);var d="";b=this.returnedData.length;if(b>0){d=i.createElement("ol");for(var e=0;e<b;++e){var n=
this.returnedData[e],r=this.formatItem(n.key,n.result);r.setAttribute("key",n.key);q.addClass(r,e%2?"even":"odd");d.appendChild(r)}d=d}this._fillContainer(d);b>0&&this.appendBottom();g.trim(this.container.innerHTML)&&this.fire("show");this._dataCache[this.query]=this.container.innerHTML;this._displayContainer()}},formatData:function(b){var d=[];if(!b)return d;if(g.isArray(b.result))b=b.result;var e=b.length;if(!e)return d;for(var n,r=0;r<e;++r){n=b[r];d[r]=typeof n==="string"?{key:n}:g.isArray(n)&&
n.length>=2?{key:n[0],result:n[1]}:n}return d},formatItem:function(b,d){var e=i.createElement("li"),n=i.createElement("span");n.className="ks-suggest-key";n.appendChild(i.createTextNode(b));e.appendChild(n);if(d!==w){b=this.config.resultFormat.replace("%result%",d);if(g.trim(b)){d=i.createElement("span");d.className="ks-suggest-result";d.appendChild(i.createTextNode(b));e.appendChild(d)}}return e},appendBottom:function(){var b=i.createElement("div");b.className="ks-suggest-bottom";if(this.config.showCloseBtn){var d=
i.createElement("a");d.href="javascript: void(0)";d.setAttribute("target","_self");d.className="ks-suggest-close-btn";d.appendChild(i.createTextNode(this.config.closeBtnText));b.appendChild(d)}g.trim(b.innerHTML)&&this.container.appendChild(b)},_fillContainer:function(b){if(b.nodeType==1){this.container.innerHTML="";this.container.appendChild(b)}else this.container.innerHTML=b;this.selectedItem=null},_displayContainer:function(){g.trim(this.container.innerHTML)?this.show():this.hide()},selectItem:function(b){var d=
this.container.getElementsByTagName("li");if(d.length!=0)if(this.isVisible()){if(this.selectedItem){b=q[b?"next":"prev"](this.selectedItem);if(!b)this.textInput.value=this.query}else b=d[b?0:d.length-1];this._removeSelectedItem();if(b){this._setSelectedItem(b);this._updateInputFromSelectItem()}}else this.show()},_removeSelectedItem:function(){q.removeClass(this.selectedItem,"selected");this.selectedItem=null},_setSelectedItem:function(b){q.addClass(b,"selected");this.selectedItem=b},_getSelectedItemKey:function(){if(!this.selectedItem)return"";
return this.selectedItem.getAttribute("key")},_updateQueryValueFromInput:function(){this.query=this.textInput.value},_updateInputFromSelectItem:function(){this.textInput.value=this._getSelectedItemKey(this.selectedItem)},_getContainerRegion:function(){var b=this.container,d=q.offset(b),e=d.left;d=d.top;return{left:e,top:d,right:e+b.offsetWidth-1,bottom:d+b.offsetHeight-1}}});j.g_ks_suggest_callback=function(b){t.focusInstance&&setTimeout(function(){t.focusInstance.handleResponse(b)},0)};g.Suggest=
t});
KISSY.add("flash-ua",function(g){function w(){var p;if(navigator.plugins&&navigator.mimeTypes.length)p=(navigator.plugins["Shockwave Flash"]||0).description;else if(window.ActiveXObject)try{p=(new ActiveXObject("ShockwaveFlash.ShockwaveFlash")).GetVariable("$version")}catch(b){}if(p)return t(p)}function t(p){return p.match(/(\d)+/g)}function q(p){var b=g.isString(p)?t(p):p;p=p;if(g.isArray(b))p=parseFloat(b[0]+"."+s(b[1],3)+s(b[2],5));return p||0}function s(p,b){for(var d=(p+"").length;d++<b;)p="0"+
p;return p}var j=g.UA,i,k,m=true;j.fpv=function(p){if(p||m){m=false;i=w();k=q(i)}return i};j.fpvGEQ=function(p,b){m&&j.fpv(b);return!!k&&k>=q(p)}});KISSY.add("flash",function(g){g.Flash={swfs:{length:0}}});
KISSY.add("flash-embed",function(g){function w(b,d,e){var n=s.create("<param>");s.attr(n,{name:d,value:e});b.appendChild(n)}function t(b){if(g.isString(b))return k(b);return g.JSON.stringify(b).replace(/:"([^"]+)/g,function(d,e){return':"'+k(e)})}var q=g.UA,s=g.DOM,j=g.Flash,i=/object|embed/i,k=encodeURIComponent,m={wmode:"",allowscriptaccess:"",allownetworking:"",allowfullscreen:"",play:"false",loop:"",menu:"",quality:"",scale:"",salign:"",bgcolor:"",devicefont:"",base:"",swliveconnect:"",seamlesstabbing:""},
p={params:{},attrs:{width:215,height:138},version:9};g.mix(j,{fpv:q.fpv,fpvGEQ:q.fpvGEQ,len:function(){return j.swfs.length},add:function(b,d,e){var n,r;d=g.merge(p,d);d.attrs=g.merge(p.attrs,d.attrs);if(b=g.get(b)){if(!b.id)b.id=g.guid("ks-flash-");r=d.attrs.id="#"+b.id;if(q.fpv()){if(!q.fpvGEQ(d.version)){this._callback(e,0,r,b);if(!((n=d.xi)&&g.isString(n)))return;d.src=n}if(i.test(b.nodeName))this._register(b,d,e);else d.src?this._embed(b,d,e):this._callback(e,-3,r,b)}else this._callback(e,-1,
r,b)}else this._callback(e,-2)},get:function(b){return j.swfs[b]},remove:function(b){if(b=j.get(b)){s.remove(b);delete j.swfs["#"+b.id];j.swfs.length-=1}},contains:function(b){var d=j.swfs,e,n=false;if(g.isString(b))n=b in d;else for(e in d)if(d[e]===b){n=true;break}return n},_register:function(b,d,e){d=d.attrs.id;j._addSWF(d,b);j._callback(e,1,d,b)},_embed:function(b,d,e){var n=j._createSWF(d.src,d.attrs,d.params);if(q.ie)b.outerHTML=n.outerHTML;else b.parentNode.replaceChild(n,b);j._register(b,
d,e)},_callback:function(b,d,e,n){d&&g.isFunction(b)&&b({status:d,id:e,swf:n})},_addSWF:function(b,d){if(b&&d){j.swfs[b]=d;j.swfs.length+=1}},_createSWF:function(b,d,e){var n=s.create("<object>"),r;s.attr(n,d);if(q.ie){s.attr(n,"classid","clsid:d27cdb6e-ae6d-11cf-96b8-444553540000");w(n,"movie",b)}else s.attr(n,{type:"application/x-shockwave-flash",data:b,name:d.id});for(r in e)r in m&&w(n,r,e[r]);e.flashvars&&w(n,"flashvars",t(e.flashvars));return n}})});
