/*
Copyright 2010, KISSY UI Library v1.1.0pre
MIT Licensed
build time: ${build.time}
*/
(function(e,t,m){if(e[t]===m)e[t]={};t=e[t];var s=e.document,p=function(g,b,f,k){if(!b||!g)return g;if(f===m)f=true;var u,v,q;if(k&&(q=k.length))for(u=0;u<q;u++){v=k[u];if(v in b)if(f||!(v in g))g[v]=b[v]}else for(v in b)if(f||!(v in g))g[v]=b[v];return g},n=false,i=[],d=false,l=/^#?([\w-]+)$/;p(t,{version:"1.1.0pre",_init:function(){this.Env={mods:{},guid:0}},add:function(g,b){this.Env.mods[g]={name:g,fn:b};b(this);return this},ready:function(g){d||this._bindReady();n?g.call(e,this):i.push(g);return this},
_bindReady:function(){var g=this,b=s.documentElement.doScroll,f=b?"onreadystatechange":"DOMContentLoaded",k=function(){g._fireReady()};d=true;if(s.readyState==="complete")return k();if(s.addEventListener){var u=function(){s.removeEventListener(f,u,false);k()};s.addEventListener(f,u,false);e.addEventListener("load",k,false)}else{var v=function(){if(s.readyState==="complete"){s.detachEvent(f,v);k()}};s.attachEvent(f,v);e.attachEvent("onload",k);if(e==e.top){var q=function(){try{b("left");k()}catch(a){setTimeout(q,
1)}};q()}}},_fireReady:function(){if(!n){n=true;if(i){for(var g,b=0;g=i[b++];)g.call(e,this);i=null}}},available:function(g,b){if((g=(g+"").match(l)[1])&&t.isFunction(b))var f=1,k=t.later(function(){if(s.getElementById(g)&&(b()||1)||++f>500)k.cancel()},40,true)},mix:p,merge:function(){var g={},b,f=arguments.length;for(b=0;b<f;++b)p(g,arguments[b]);return g},augment:function(){var g=arguments,b=g.length-2,f=g[0],k=g[b],u=g[b+1],v=1;if(!t.isArray(u)){k=u;u=m;b++}if(!t.isBoolean(k)){k=m;b++}for(;v<b;v++)p(f.prototype,
g[v].prototype||g[v],k,u);return f},extend:function(g,b,f,k){if(!b||!g)return g;var u=Object.prototype,v=b.prototype,q=function(a){function c(){}c.prototype=a;return new c}(v);g.prototype=q;q.constructor=g;g.superclass=v;if(b!==Object&&v.constructor===u.constructor)v.constructor=b;f&&p(q,f);k&&p(g,k);return g},namespace:function(){var g=arguments.length,b=null,f,k,u;for(f=0;f<g;++f){u=(""+arguments[f]).split(".");b=this;for(k=e[u[0]]===b?1:0;k<u.length;++k)b=b[u[k]]=b[u[k]]||{}}return b},app:function(g,
b){var f=e[g]||{};p(f,this,true,["_init","add","namespace"]);f._init();return p(e[g]=f,typeof b==="function"?b():b)},log:function(g,b,f){if(this.Config.debug){if(f)g=f+": "+g;if(e.console!==m&&console.log)console[b&&console[b]?b:"log"](g)}return this},error:function(g){if(this.Config.debug)throw g;},guid:function(g){var b=this.Env.guid++ +"";return g?g+b:b}});t._init();t.Config={debug:""}})(window,"KISSY");
KISSY.add("kissy-lang",function(e,t){function m(a){var c=typeof a;return a===null||c!=="object"&&c!=="function"}var s=window,p=document,n=location,i=Array.prototype,d=i.indexOf,l=i.filter,g=String.prototype.trim,b=Object.prototype.toString,f=encodeURIComponent,k=decodeURIComponent,u=/^\s+|\s+$/g,v=/^(\w+)\[\]$/,q=/\S/;e.mix(e,{isUndefined:function(a){return a===t},isBoolean:function(a){return typeof a==="boolean"},isString:function(a){return typeof a==="string"},isNumber:function(a){return typeof a===
"number"&&isFinite(a)},isPlainObject:function(a){return a&&b.call(a)==="[object Object]"&&!a.nodeType&&!a.setInterval},isEmptyObject:function(a){for(var c in a)return false;return true},isFunction:function(a){return b.call(a)==="[object Function]"},isArray:function(a){return b.call(a)==="[object Array]"},trim:g?function(a){return a==t?"":g.call(a)}:function(a){return a==t?"":a.toString().replace(u,"")},each:function(a,c,h){for(var j=a&&a.length||0,r=0;r<j;++r)c.call(h||s,a[r],r,a)},indexOf:d?function(a,
c){return d.call(c,a)}:function(a,c){for(var h=0,j=c.length;h<j;++h)if(c[h]===a)return h;return-1},inArray:function(a,c){return e.indexOf(a,c)>-1},makeArray:function(a){if(a===null||a===t)return[];if(e.isArray(a))return a;if(typeof a.length!=="number"||typeof a==="string"||e.isFunction(a))return[a];if(a.item&&e.UA.ie){for(var c=[],h=0,j=a.length;h<j;++h)c[h]=a[h];return c}return i.slice.call(a)},filter:l?function(a,c,h){return l.call(a,c,h)}:function(a,c,h){var j=[];e.each(a,function(r,o,w){c.call(h,
r,o,w)&&j.push(r)});return j},param:function(a,c){if(!e.isPlainObject(a))return"";c=c||"&";var h=[],j,r;for(j in a){r=a[j];j=f(j);if(m(r))h.push(j,"=",f(r+""),c);else if(e.isArray(r)&&r.length)for(var o=0,w=r.length;o<w;++o)m(r[o])&&h.push(j,"[]=",f(r[o]+""),c)}h.pop();return h.join("")},unparam:function(a,c){if(typeof a!=="string"||(a=e.trim(a)).length===0)return{};var h={};a=a.split(c||"&");for(var j,r,o,w=0,x=a.length;w<x;++w){c=a[w].split("=");j=k(c[0]);try{r=k(c[1]||"")}catch(A){r=c[1]||""}if((o=
j.match(v))&&o[1]){h[o[1]]=h[o[1]]||[];h[o[1]].push(r)}else h[j]=r}return h},later:function(a,c,h,j,r){c=c||0;j=j||{};var o=a,w=e.makeArray(r),x;if(typeof a==="string")o=j[a];o||e.error("method undefined");a=function(){o.apply(j,w)};x=h?setInterval(a,c):setTimeout(a,c);return{id:x,interval:h,cancel:function(){this.interval?clearInterval(x):clearTimeout(x)}}},clone:function(a){var c=a,h,j;if(a&&((h=e.isArray(a))||e.isPlainObject(a))){c=h?[]:{};for(j in a)if(a.hasOwnProperty(j))c[j]=e.clone(a[j])}return c},
now:function(){return(new Date).getTime()},globalEval:function(a){if(a&&q.test(a)){var c=p.getElementsByTagName("head")[0]||p.documentElement,h=p.createElement("script");h.text=a;c.insertBefore(h,c.firstChild);c.removeChild(h)}}});if(n&&n.search&&n.search.indexOf("ks-debug")!==-1)e.Config.debug=true});
KISSY.add("kissy-ua",function(e){var t=navigator.userAgent,m,s={webkit:0,chrome:0,safari:0,gecko:0,firefox:0,ie:0,opera:0,mobile:""},p=function(n){var i=0;return parseFloat(n.replace(/\./g,function(){return i++===0?".":""}))};if((m=t.match(/AppleWebKit\/([\d.]*)/))&&m[1]){s.webkit=p(m[1]);if((m=t.match(/Chrome\/([\d.]*)/))&&m[1])s.chrome=p(m[1]);else if((m=t.match(/\/([\d.]*) Safari/))&&m[1])s.safari=p(m[1]);if(/ Mobile\//.test(t))s.mobile="Apple";else if(m=t.match(/NokiaN[^\/]*|Android \d\.\d|webOS\/\d\.\d/))s.mobile=
m[0]}else if((m=t.match(/Opera\/.* Version\/([\d.]*)/))&&m[1]){s.opera=p(m[1]);if(t.match(/Opera Mini[^;]*/))s.mobile=m[0]}else if((m=t.match(/MSIE\s([^;]*)/))&&m[1])s.ie=p(m[1]);else if(m=t.match(/Gecko/)){s.gecko=1;if((m=t.match(/rv:([\d.]*)/))&&m[1])s.gecko=p(m[1]);if((m=t.match(/Firefox\/([\d.]*)/))&&m[1])s.firefox=p(m[1])}e.UA=s});
KISSY.add("dom",function(e){var t={_isSupportedNode:function(m){return t._isElementNode(m)||t._isTextNode(m)},_isElementNode:function(m){return m&&m.nodeType===1},_isTextNode:function(m){return m&&m.nodeType===3},_isKSNode:function(m){return m&&e.Node&&m.nodeType===e.Node.TYPE}};e.DOM=t});
KISSY.add("selector",function(e,t){function m(a,c){var h,j=[],r,o;c=s(c);if(e.isString(a)){a=e.trim(a);if(v.test(a)){if(a=p(a.slice(1),c))j=[a]}else if(h=q.exec(a)){r=h[1];o=h[2];h=h[3];if(c=r?p(r,c):c)if(h)if(!r||a.indexOf(b)!==-1)j=i(h,o,c);else{if((a=p(r,c))&&g.hasClass(a,h))j=[a]}else if(o)j=n(o,c)}else if(e.ExternalSelector)return e.ExternalSelector(a,c);else d(a)}else if(a&&(a[k]||a[u]))j=a[k]?[a[k]()]:a[u]();else if(a&&a.nodeType)j=[a];else if(a&&(e.isArray(a)||a.item))j=a;if(j.item)j=e.makeArray(j);
return j}function s(a){if(a===t)a=l;else if(e.isString(a)&&v.test(a))a=p(a.slice(1),l);else if(a&&a.nodeType!==1&&a.nodeType!==9)a=null;return a}function p(a,c){if(c.nodeType!==9)c=c.ownerDocument;return c.getElementById(a)}function n(a,c){return c.getElementsByTagName(a)}function i(a,c,h){h=a=h.getElementsByClassName(a);var j=0,r=0,o=a.length,w;if(c&&c!==f){h=[];for(c=c.toUpperCase();j<o;++j){w=a[j];if(w.tagName===c)h[r++]=w}}return h}function d(a){e.error("Unsupported selector: "+a)}var l=document,
g=e.DOM,b=" ",f="*",k="getDOMNode",u=k+"s",v=/^#[\w-]+$/,q=/^(?:#([\w-]+))?\s*([\w-]+|\*)?\.?([\w-]+)?$/;(function(){var a=l.createElement("div");a.appendChild(l.createComment(""));if(a.getElementsByTagName(f).length>0)n=function(c,h){h=h.getElementsByTagName(c);if(c===f){c=[];for(var j=0,r=0,o;o=h[j++];)if(o.nodeType===1)c[r++]=o;h=c}return h}})();l.getElementsByClassName||(i=l.querySelectorAll?function(a,c,h){return h.querySelectorAll((c?c:"")+"."+a)}:function(a,c,h){c=h.getElementsByTagName(c||
f);h=[];var j=0,r=0,o=c.length,w,x;for(a=b+a+b;j<o;++j){w=c[j];if((x=w.className)&&(b+x+b).indexOf(a)>-1)h[r++]=w}return h});e.query=m;e.get=function(a,c){return m(a,c)[0]||null};e.mix(g,{query:m,get:e.get,filter:function(a,c){var h=m(a),j,r,o,w=[];if(e.isString(c)&&(j=q.exec(c))&&!j[1]){r=j[2];o=j[3];c=function(x){return!(r&&x.tagName!==r.toUpperCase()||o&&!g.hasClass(x,o))}}if(e.isFunction(c))w=e.filter(h,c);else if(c&&e.ExternalSelector)w=e.ExternalSelector._filter(a,c);else d(c);return w},test:function(a,
c){a=m(a);return g.filter(a,c).length===a.length}})});
KISSY.add("dom-class",function(e,t){function m(i,d,l,g){if(!(d=e.trim(d)))return g?false:t;i=e.query(i);var b=0,f=i.length;d=d.split(p);for(var k;b<f;b++){k=i[b];if(s._isElementNode(k)){k=l(k,d,d.length);if(k!==t)return k}}if(g)return false}var s=e.DOM,p=/[\.\s]\s*\.?/,n=/[\n\t]/g;e.mix(s,{hasClass:function(i,d){return m(i,d,function(l,g,b){if(l=l.className){l=" "+l+" ";for(var f=0,k=true;f<b;f++)if(l.indexOf(" "+g[f]+" ")<0){k=false;break}if(k)return true}},true)},addClass:function(i,d){m(i,d,function(l,
g,b){var f=l.className;if(f){var k=" "+f+" ";f=f;for(var u=0;u<b;u++)if(k.indexOf(" "+g[u]+" ")<0)f+=" "+g[u];l.className=e.trim(f)}else l.className=d})},removeClass:function(i,d){m(i,d,function(l,g,b){var f=l.className;if(f)if(b){f=(" "+f+" ").replace(n," ");for(var k=0,u;k<b;k++)for(u=" "+g[k]+" ";f.indexOf(u)>=0;)f=f.replace(u," ");l.className=e.trim(f)}else l.className=""})},replaceClass:function(i,d,l){s.removeClass(i,d);s.addClass(i,l)},toggleClass:function(i,d,l){var g=e.isBoolean(l),b;m(i,
d,function(f,k,u){for(var v=0,q;v<u;v++){q=k[v];b=g?!l:s.hasClass(f,q);s[b?"removeClass":"addClass"](f,q)}})}})});
KISSY.add("dom-attr",function(e,t){function m(q,a){return a&&a.nodeName.toUpperCase()===q.toUpperCase()}var s=e.UA,p=s.ie,n=p&&p<8,i=document.documentElement.textContent!==t?"textContent":"innerText",d=e.DOM,l=d._isElementNode,g=d._isTextNode,b=/href|src|style/,f=/href|src|colspan|rowspan/,k=/\r/g,u=/radio|checkbox/,v={readonly:"readOnly"};n&&e.mix(v,{"for":"htmlFor","class":"className"});e.mix(d,{attr:function(q,a,c){if(e.isPlainObject(a))for(var h in a)d.attr(q,h,a[h]);else if(a=e.trim(a)){a=a.toLowerCase();
a=v[a]||a;if(c===t){q=e.get(q);if(!l(q))return t;var j;b.test(a)||(j=q[a]);if(j===t)j=q.getAttribute(a);if(n)if(f.test(a))j=q.getAttribute(a,2);else if(a==="style")j=q.style.cssText;return j===null?t:j}e.each(e.query(q),function(r){if(l(r))if(n&&a==="style")r.style.cssText=c;else{if(a==="checked")r[a]=!!c;r.setAttribute(a,""+c)}})}},removeAttr:function(q,a){e.each(e.query(q),function(c){if(l(c)){d.attr(c,a,"");c.removeAttribute(a)}})},val:function(q,a){if(a===t){var c=e.get(q);if(!l(c))return t;if(m("option",
c))return(c.attributes.value||{}).specified?c.value:c.text;if(m("select",c)){var h=c.selectedIndex;q=c.options;if(h<0)return null;else if(c.type==="select-one")return d.val(q[h]);c=[];for(var j=0,r=q.length;j<r;++j)q[j].selected&&c.push(d.val(q[j]));return c}if(s.webkit&&u.test(c.type))return c.getAttribute("value")===null?"on":c.value;return(c.value||"").replace(k,"")}e.each(e.query(q),function(o){if(m("select",o)){if(e.isNumber(a))a+="";var w=e.makeArray(a),x=o.options,A;j=0;for(r=x.length;j<r;++j){A=
x[j];A.selected=e.inArray(d.val(A),w)}if(!w.length)o.selectedIndex=-1}else if(l(o))o.value=a})},text:function(q,a){if(a===t){q=e.get(q);if(l(q))return q[i]||"";else if(g(q))return q.nodeValue}else e.each(e.query(q),function(c){if(l(c))c[i]=a;else if(g(c))c.nodeValue=a})}})});
KISSY.add("dom-style",function(e,t){function m(a,c){var h=e.get(a),j=c===l?h.offsetWidth:h.offsetHeight;e.each(c===l?["Left","Right"]:["Top","Bottom"],function(r){j-=parseFloat(p._getComputedStyle(h,"padding"+r))||0;j-=parseFloat(p._getComputedStyle(h,"border"+r+"Width"))||0});return j}function s(a,c,h){var j=h;if(h===g&&f.test(c)){j=0;if(p.css(a,"position")==="absolute"){h=a[c==="left"?"offsetLeft":"offsetTop"];if(n.ie===8||n.opera)h-=b(p.css(a.offsetParent,"border-"+c+"-width"))||0;j=h-(b(p.css(a,
"margin-"+c))||0)}}return j}var p=e.DOM,n=e.UA,i=document,d=i.documentElement,l="width",g="auto",b=parseInt,f=/^left|top$/,k=/width|height|top|left|right|bottom|margin|padding/i,u=/-([a-z])/ig,v=function(a,c){return c.toUpperCase()},q={};e.mix(p,{_CUSTOM_STYLES:q,_getComputedStyle:function(a,c){var h="",j=a.ownerDocument;if(a.style)h=j.defaultView.getComputedStyle(a,null)[c];return h},css:function(a,c,h){if(e.isPlainObject(c))for(var j in c)p.css(a,j,c[j]);else{if(c.indexOf("-")>0)c=c.replace(u,v);
c=q[c]||c;if(h===t){a=e.get(a);j="";if(a&&a.style){j=c.get?c.get(a):a.style[c];if(j===""&&!c.get)j=s(a,c,p._getComputedStyle(a,c))}return j===t?"":j}else{if(h===null||h==="")h="";else if(!isNaN(new Number(h))&&k.test(c))h+="px";(c===l||c==="height")&&parseFloat(h)<0||e.each(e.query(a),function(r){if(r&&r.style){c.set?c.set(r,h):(r.style[c]=h);if(h==="")r.style.cssText||r.removeAttribute("style")}})}}},width:function(a,c){if(c===t)return m(a,l);else p.css(a,l,c)},height:function(a,c){if(c===t)return m(a,
"height");else p.css(a,"height",c)},addStyleSheet:function(a,c){var h;if(c)h=e.get(c);h||(h=p.create("<style>",{id:c}));e.get("head").appendChild(h);if(h.styleSheet)h.styleSheet.cssText=a;else h.appendChild(i.createTextNode(a))}});if(d.style.cssFloat!==t)q["float"]="cssFloat";else if(d.style.styleFloat!==t)q["float"]="styleFloat"});
KISSY.add("dom-style-ie",function(e,t){if(e.UA.ie){var m=e.DOM,s=document,p=s.documentElement,n=m._CUSTOM_STYLES,i=/^-?\d+(?:px)?$/i,d=/^-?\d/,l=/^width|height$/;try{if(p.style.opacity===t&&p.filters)n.opacity={get:function(b){var f=100;try{f=b.filters["DXImageTransform.Microsoft.Alpha"].opacity}catch(k){try{f=b.filters("alpha").opacity}catch(u){}}return f/100+""},set:function(b,f){b=b.style;b.zoom=1;b.filter="alpha(opacity="+f*100+")"}}}catch(g){e.log("IE filters ActiveX is disabled. ex = "+g)}if(!(s.defaultView||
{}).getComputedStyle&&p.currentStyle)m._getComputedStyle=function(b,f){var k=b.style,u=b.currentStyle[f];if(l.test(f))u=m[f](b)+"px";else if(!i.test(u)&&d.test(u)){var v=k.left,q=b.runtimeStyle.left;b.runtimeStyle.left=b.currentStyle.left;k.left=f==="fontSize"?"1em":u||0;u=k.pixelLeft+"px";k.left=v;b.runtimeStyle.left=q}return u}}});
KISSY.add("dom-offset",function(e,t){function m(o){var w=0,x=0,A=p(o[q]);if(o[r]){o=o[r]();w=o[a]+n[h](A);x=o[c]+n[j](A)}return{left:w,top:x}}function s(o,w){if(n.css(o,k)==="static")o.style[k]=u;var x=m(o),A={},y,z;for(z in w){y=f(n.css(o,z),10)||0;A[z]=y+w[z]-x[z]}n.css(o,A)}function p(o){return o&&"scrollTo"in o&&o[v]?o:o&&o.nodeType===9?o.defaultView||o.parentWindow:false}var n=e.DOM,i=window,d=document,l=n._isElementNode,g=d.compatMode==="CSS1Compat",b=Math.max,f=parseInt,k="position",u="relative",
v="document",q="ownerDocument",a="left",c="top",h="scrollLeft",j="scrollTop",r="getBoundingClientRect";e.mix(n,{offset:function(o,w){if(!(o=e.get(o))||!o[q])return null;if(w===t)return m(o);s(o,w)},scrollIntoView:function(o,w,x,A){if((o=e.get(o))&&o[q]){w=e.get(w);A=A===t?true:!!A;x=x===t?true:!!x;if(!l(w))return o.scrollIntoView(x);var y=n.offset(o),z=n.offset(w),B={left:y[a]-z[a],top:y[c]-z[c]};y=w.clientHeight;z=w.clientWidth;var C=n[h](w),D=n[j](w),E=C+z,F=D+y,G=o.offsetHeight;o=o.offsetWidth;
var H=B.left+C-(f(n.css(w,"borderLeftWidth"))||0);B=B.top+D-(f(n.css(w,"borderTopWidth"))||0);var I=H+o,J=B+G;if(G>y||B<D||x)w[j]=B;else if(J>F)w[j]=J-y;if(A)if(o>z||H<C||x)w[h]=H;else if(I>E)w[h]=I-z}}});e.each(["Left","Top"],function(o,w){var x="scroll"+o;n[x]=function(A){var y=0,z=A===t?i:p(A),B;if(z&&(B=z[v]))y=z[w?"pageYOffset":"pageXOffset"]||B.documentElement[x]||B.body[x];else if(l(A=e.get(A)))y=A[x];return y}});e.each(["Width","Height"],function(o){n["doc"+o]=function(w){w=w||d;return b(g?
w.documentElement["scroll"+o]:w.body["scroll"+o],n["viewport"+o](w))};n["viewport"+o]=function(w){var x="inner"+o;w=p(w)||i;var A=w[v];return x in w?w[x]:g?A.documentElement["client"+o]:A.body["client"+o]}})});
KISSY.add("dom-traversal",function(e,t){function m(i,d,l,g){if(!(i=e.get(i)))return null;if(d===t)d=1;var b=null,f,k;if(e.isNumber(d)&&d>=0){if(d===0)return i;f=0;k=d;d=function(){return++f===k}}for(;i=i[l];)if(n(i)&&(!d||p.test(i,d))&&(!g||g(i))){b=i;break}return b}function s(i,d,l){var g=[];var b=i=e.get(i);if(i&&l)b=i.parentNode;if(b){l=0;for(b=b.firstChild;b;b=b.nextSibling)if(n(b)&&b!==i&&(!d||p.test(b,d)))g[l++]=b}return g}var p=e.DOM,n=p._isElementNode;e.mix(p,{parent:function(i,d){return m(i,
d,"parentNode",function(l){return l.nodeType!=11})},next:function(i,d){return m(i,d,"nextSibling")},prev:function(i,d){return m(i,d,"previousSibling")},siblings:function(i,d){return s(i,d,true)},children:function(i,d){return s(i,d)},contains:function(i,d){var l=false;if((i=e.get(i))&&(d=e.get(d)))if(i.contains)return i.contains(d);else if(i.compareDocumentPosition)return!!(i.compareDocumentPosition(d)&16);else for(;!l&&(d=d.parentNode);)l=d==i;return l}})});
KISSY.add("dom-create",function(e,t){function m(y,z){k(y)&&e.isPlainObject(z)&&l.attr(y,z);return y}function s(y,z){var B=null,C;if(y&&(y.push||y.item)&&y[0]){z=z||y[0].ownerDocument;B=z.createDocumentFragment();if(y.item)y=e.makeArray(y);z=0;for(C=y.length;z<C;z++)B.appendChild(y[z])}else e.log("Unable to convert "+y+" to fragment.");return B}function p(y){var z=y.cloneNode(true);if(g.ie<8)z.innerHTML=y.innerHTML;return z}function n(y,z,B,C){if(B){var D=e.guid("ks-tmp-"),E=new RegExp(a);z+='<span id="'+
D+'"></span>';e.available(D,function(){var F=e.get("head"),G,H,I,J,L,K;for(E.lastIndex=0;G=E.exec(z);)if((I=(H=G[1])?H.match(h):false)&&I[2]){G=d.createElement("script");G.src=I[2];if((J=H.match(j))&&J[2])G.charset=J[2];G.async=true;F.appendChild(G)}else if((K=G[2])&&K.length>0)e.globalEval(K);(L=d.getElementById(D))&&l.remove(L);e.isFunction(C)&&C()});i(y,z)}else{i(y,z);e.isFunction(C)&&C()}}function i(y,z){z=z.replace(a,"");try{y.innerHTML=z}catch(B){for(;y.firstChild;)y.removeChild(y.firstChild);
z&&y.appendChild(l.create(z))}}var d=document,l=e.DOM,g=e.UA,b=g.ie,f=l._isSupportedNode,k=l._isElementNode,u=l._isKSNode,v=d.createElement("div"),q=/<(\w+)/,a=/<script([^>]*)>([\s\S]*?)<\/script>/ig,c=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,h=/\ssrc=(['"])(.*?)\1/i,j=/\scharset=(['"])(.*?)\1/i;e.mix(l,{create:function(y,z,B){if(f(y))return p(y);if(u(y))return p(y[0]);if(!(y=e.trim(y)))return null;var C=null;C=l._creators;var D,E="div",F;if(D=c.exec(y))C=(B||d).createElement(D[1]);else{if((D=q.exec(y))&&(F=
D[1])&&e.isFunction(C[F=F.toLowerCase()]))E=F;y=C[E](y,B).childNodes;C=y.length===1?y[0].parentNode.removeChild(y[0]):s(y,B||d)}return m(C,z)},_creators:{div:function(y,z){z=z?z.createElement("div"):v;z.innerHTML=y;return z}},html:function(y,z,B,C){if(z===t){y=e.get(y);if(k(y))return y.innerHTML}else e.each(e.query(y),function(D){k(D)&&n(D,z,B,C)})},remove:function(y){e.each(e.query(y),function(z){k(z)&&z.parentNode&&z.parentNode.removeChild(z)})}});if(g.gecko||b){var r=l._creators,o=l.create,w=/(?:\/(?:thead|tfoot|caption|col|colgroup)>)+\s*<tbody/,
x={option:"select",td:"tr",tr:"tbody",tbody:"table",col:"colgroup",legend:"fieldset"};for(var A in x)(function(y){r[A]=function(z,B){return o("<"+y+">"+z+"</"+y+">",null,B)}})(x[A]);if(b){r.script=function(y,z){z=z?z.createElement("div"):v;z.innerHTML="-"+y;z.removeChild(z.firstChild);return z};if(b<8)r.tbody=function(y,z){z=o("<table>"+y+"</table>",null,z);var B=z.children.tags("tbody")[0];z.children.length>1&&B&&!w.test(y)&&B.parentNode.removeChild(B);return z}}e.mix(r,{optgroup:r.option,th:r.td,
thead:r.tbody,tfoot:r.tbody,caption:r.tbody,colgroup:r.tbody})}});KISSY.add("dom-insertion",function(e){e.mix(e.DOM,{insertBefore:function(t,m){if((t=e.get(t))&&(m=e.get(m))&&m.parentNode)m.parentNode.insertBefore(t,m);return t},insertAfter:function(t,m){if((t=e.get(t))&&(m=e.get(m))&&m.parentNode)m.nextSibling?m.parentNode.insertBefore(t,m.nextSibling):m.parentNode.appendChild(t);return t}})});
KISSY.add("event",function(e,t){function m(a,c,h,j,r){if(e.isString(c))c=e.query(c);if(e.isArray(c)){e.each(c,function(o){q[a](o,h,j,r)});return true}if((h=e.trim(h))&&h.indexOf(k)>0){e.each(h.split(k),function(o){q[a](c,o,j,r)});return true}}function s(a){return i(a)?a[f]:-1}function p(a,c){if(!i(a))return e.error("Text or comment node is not valid event target.");try{a[f]=c}catch(h){e.error(h)}}function n(a){try{a[f]=t;delete a[f]}catch(c){}}function i(a){return a&&a.nodeType!==3&&a.nodeType!==
8}var d=window,l=document,g=l.addEventListener?function(a,c,h,j){a.addEventListener&&a.addEventListener(c,h,!!j)}:function(a,c,h){a.attachEvent&&a.attachEvent("on"+c,h)},b=l.removeEventListener?function(a,c,h,j){a.removeEventListener&&a.removeEventListener(c,h,!!j)}:function(a,c,h){a.detachEvent&&a.detachEvent("on"+c,h)},f="ksEventTargetId",k=" ",u=e.now(),v={},q={EVENT_GUID:f,special:{},add:function(a,c,h,j){if(!m("add",a,c,h,j)){var r=s(a),o,w;if(!(r===-1||!c||!e.isFunction(h))){if(!r){p(a,r=u++);
v[r]={target:a,events:{}}}w=v[r].events;o=!a.isCustomEventTarget&&q.special[c]||{};if(!w[c]){r=function(x,A){if(!x||!x.fixed){x=new e.EventObject(a,x,c);e.isPlainObject(A)&&e.mix(x,A)}o.setup&&o.setup(x);return(o.handle||q._handle)(a,x,w[c].listeners)};w[c]={handle:r,listeners:[]};if(a.isCustomEventTarget)a._addEvent&&a._addEvent(c,r);else g(a,o.fix||c,r,o.capture)}w[c].listeners.push({fn:h,scope:j})}}},remove:function(a,c,h){if(!m("remove",a,c,h)){var j=s(a),r,o,w,x,A,y;if(j!==-1)if(j&&(r=v[j]))if(r.target===
a){r=r.events||{};if(o=r[c]){w=o.listeners;A=w.length;if(e.isFunction(h)&&A&&e.inArray(h,w)){y=[];for(x=0;x<A;++x)h!==w[x]&&y.push(w[x]);A=y.length}if(h===t||A===0){if(a.isCustomEventTarget)a._addEvent&&a._removeEvent(c,o.handle);else b(a,c,o.handle);delete r[c]}}if(c===t||e.isEmptyObject(r)){for(c in r)q.remove(a,c);delete v[j];n(a)}}}},_handle:function(a,c,h){h=h.slice(0);for(var j,r=0,o=h.length;r<o;++r){j=h[r];j=j.fn.call(j.scope||a,c);if(j===false&&a.isCustomEventTarget||c.isImmediatePropagationStopped)break}return j},
_getCache:function(a){return v[a]},_simpleAdd:g,_simpleRemove:b};q.on=q.add;e.Event=q;d.attachEvent&&!d.addEventListener&&d.attachEvent("onunload",function(){var a,c;for(a in v)if(c=v[a].target)try{q.remove(c)}catch(h){}})});
KISSY.add("event-object",function(e,t){function m(n,i,d){this.currentTarget=n;this.originalEvent=i||{};if(i){this.type=i.type;this._fix()}else{this.type=d;this.target=n}this.fixed=true}var s=document,p="altKey attrChange attrName bubbles button cancelable charCode clientX clientY ctrlKey currentTarget data detail eventPhase fromElement handler keyCode layerX layerY metaKey newValue offsetX offsetY originalTarget pageX pageY prevValue relatedNode relatedTarget screenX screenY shiftKey srcElement target toElement view wheelDelta which".split(" ");e.mix(m.prototype,
{_fix:function(){for(var n=this.originalEvent,i=p.length,d;i;){d=p[--i];this[d]=n[d]}if(!this.target)this.target=this.srcElement||s;if(this.target.nodeType===3)this.target=this.target.parentNode;if(!this.relatedTarget&&this.fromElement)this.relatedTarget=this.fromElement===this.target?this.toElement:this.fromElement;if(this.pageX===t&&this.clientX!==t){n=s.documentElement;i=s.body;this.pageX=this.clientX+(n&&n.scrollLeft||i&&i.scrollLeft||0)-(n&&n.clientLeft||i&&i.clientLeft||0);this.pageY=this.clientY+
(n&&n.scrollTop||i&&i.scrollTop||0)-(n&&n.clientTop||i&&i.clientTop||0)}if(this.which===t)this.which=this.charCode!==t?this.charCode:this.keyCode;if(this.metaKey===t)this.metaKey=this.ctrlKey;if(!this.which&&this.button!==t)this.which=this.button&1?1:this.button&2?3:this.button&4?2:0},preventDefault:function(){var n=this.originalEvent;if(n.preventDefault)n.preventDefault();else n.returnValue=false;this.isDefaultPrevented=true},stopPropagation:function(){var n=this.originalEvent;if(n.stopPropagation)n.stopPropagation();
else n.cancelBubble=true;this.isPropagationStopped=true},stopImmediatePropagation:function(){var n=this.originalEvent;n.stopImmediatePropagation?n.stopImmediatePropagation():this.stopPropagation();this.isImmediatePropagationStopped=true},halt:function(n){n?this.stopImmediatePropagation():this.stopPropagation();this.preventDefault()}});e.EventObject=m});
KISSY.add("event-target",function(e,t){var m=e.Event,s=m.EVENT_GUID;e.EventTarget={isCustomEventTarget:true,fire:function(p,n){if((p=((m._getCache(this[s]||-1)||{}).events||{})[p])&&e.isFunction(p.handle))return p.handle(t,n)},on:function(p,n,i){m.add(this,p,n,i)},detach:function(p,n){m.remove(this,p,n)}}});
KISSY.add("event-mouseenter",function(e){var t=e.Event;e.UA.ie||e.each([{name:"mouseenter",fix:"mouseover"},{name:"mouseleave",fix:"mouseout"}],function(m){t.special[m.name]={fix:m.fix,setup:function(s){s.type=m.name},handle:function(s,p,n){var i=p.relatedTarget;try{for(;i&&i!==s;)i=i.parentNode;i!==s&&t._handle(s,p,n)}catch(d){}}}})});
KISSY.add("event-focusin",function(e){var t=e.Event;document.addEventListener&&e.each([{name:"focusin",fix:"focus"},{name:"focusout",fix:"blur"}],function(m){t.special[m.name]={fix:m.fix,capture:true,setup:function(s){s.type=m.name}}})});
KISSY.add("node",function(e){function t(s,p,n){var i;if(!(this instanceof t))return new t(s,p,n);if(s){if(m._isSupportedNode(s))i=s;else if(typeof s==="string")i=m.create(s,p,n);this[0]=i}else this.length=0}var m=e.DOM;t.TYPE="-ks-Node";e.augment(t,{length:1,getDOMNode:function(){return this[0]},nodeType:t.TYPE});e.one=function(s,p){return(s=e.get(s,p))?new t(s):null};e.Node=t});
KISSY.add("nodelist",function(e){function t(p){if(!(this instanceof t))return new t(p);s.push.apply(this,p||[])}var m=e.DOM,s=Array.prototype;e.mix(t.prototype,{length:0,item:function(p){var n=null;if(m._isElementNode(this[p]))n=new e.Node(this[p]);return n},getDOMNodes:function(){return s.slice.call(this)},each:function(p,n){for(var i=this.length,d=0,l;d<i;++d){l=new e.Node(this[d]);p.call(n||l,l,d,this)}return this}});e.all=function(p,n){return new t(e.query(p,n,true))};e.NodeList=t});
KISSY.add("node-attach",function(e,t){function m(u,arguments,v,q){var a=[this[u?g:l]()].concat(e.makeArray(arguments));if(arguments[v]===t)return q.apply(p,a);else{q.apply(p,a);return this}}function s(u,v){e.each(u,function(q){e.each([i,d],function(a,c){a[q]=function(h){switch(v){case b:return function(){return m.call(this,c,arguments,1,h)};case f:return function(){return m.call(this,c,arguments,0,h)};case k:return function(){var j=this[c?g:l]();return(j=h.apply(p,[j].concat(e.makeArray(arguments))))?
new (e[e.isArray(j)?"NodeList":"Node"])(j):null};default:return function(){var j=this[c?g:l]();j=h.apply(p,[j].concat(e.makeArray(arguments)));return j===t?this:j}}}(p[q])})})}var p=e.DOM,n=e.Event,i=e.Node.prototype,d=e.NodeList.prototype,l="getDOMNode",g=l+"s",b=1,f=2,k=4;e.mix(i,{one:function(u){return e.one(u,this[0])},all:function(u){return e.all(u,this[0])}});s(["hasClass","addClass","removeClass","replaceClass","toggleClass"]);s(["attr","removeAttr"],b);s(["val","text"],f);s(["css"],b);s(["width",
"height"],f);s(["offset"],f);s(["scrollIntoView"]);s(["parent","next","prev","siblings","children"],k);s(["contains"]);s(["html"],f);s(["remove"]);e.each(["insertBefore","insertAfter"],function(u){i[u]=function(v){p[u].call(p,this[0],v);return this}});e.each([i,d],function(u){e.mix(u,{append:function(v){v&&e.each(this,function(q){q.appendChild(p.create(v))});return this},appendTo:function(v){if((v=e.get(v))&&v.appendChild)e.each(this,function(q){v.appendChild(q)});return this}})});e.each([i,d],function(u){e.mix(u,
e.EventTarget);u._addEvent=function(v,q){for(var a=0,c=this.length;a<c;a++)n._simpleAdd(this[a],v,q)};u._removeEvent=function(v,q){for(var a=0,c=this.length;a<c;a++)n._simpleRemove(this[a],v,q)};delete u.fire})});
KISSY.add("ajax",function(e){e.Ajax=e.Ajax||{};var t=document,m=t.createElement("script").readyState?function(i,d){i.onreadystatechange=function(){var l=i.readyState;if(l==="loaded"||l==="complete"){i.onreadystatechange=null;d.call(this)}}}:function(i,d){i.onload=d},s=0,p=function(){return s++},n=function(i){try{return!i.status&&location.protocol==="file:"||i.status>=200&&i.status<300||i.status===304||i.status===1223||i.status===0}catch(d){}return false};e.Ajax.io=function(i){var d={url:location.href,
global:true,type:"GET",contentType:"application/x-www-form-urlencoded",async:true,data:null,xhr:window.XMLHttpRequest&&(window.location.protocol!=="file:"||!window.ActiveXObject)?function(){return new window.XMLHttpRequest}:function(){try{return new window.ActiveXObject("Microsoft.XMLHTTP")}catch(c){}},accepts:{xml:"application/xml, text/xml",html:"text/html",script:"text/javascript, application/javascript",json:"application/json, text/javascript",text:"text/plain",_default:"*/*"},complete:new Function,
success:new Function,failure:new Function,args:null};e.mix(d,i);var l,g;i=/=\?(&|$)/;var b=/\?/,f=d.type.toUpperCase();if(d.data&&typeof d.data!=="string"){var k="";for(var u in d.data)k+="&"+u+"="+d.data[u];d.data=k.replace(/^&/i,"")}if(d.dataType==="jsonp"){if(f==="GET")i.test(d.url)||(d.url+=(b.test(d.url)?"&":"?")+(d.jsonp||"callback")+"=?");else if(!d.data||!i.test(d.data))d.data=(d.data?d.data+"&":"")+(d.jsonp||"callback")+"=?";d.dataType="json";l="jsonp"+e.now();if(d.data)d.data=(d.data+"").replace(i,
"="+l+"$1");d.url=d.url.replace(i,"="+l+"$1");d.dataType="script";window[l]=window[l]||function(c){d.success(p(),c,d.args);d.complete(p(),c,d.args)}}if(d.data&&f==="GET")d.url+=(b.test(d.url)?"&":"?")+d.data;if(d.dataType==="script")l?e.Ajax.getScript(d.url,new Function):e.Ajax.getScript(d.url,function(){d.complete(p(),d.args);d.success(p(),d.args)});else{var v=false,q=d.xhr();q.open(f,d.url,d.async);try{if(d.data||d&&d.contentType)q.setRequestHeader("Content-Type",d.contentType);q.setRequestHeader("Accept",
d.dataType&&d.accepts[d.dataType]?d.accepts[d.dataType]+", */*":d.accepts._default)}catch(a){}q.onreadystatechange=function(c){if(!q||q.readyState===0||c==="abort"){v||d.complete(p(),q,d.args);v=true;if(q)q.onreadystatechange=new Function}else if(!v&&q&&(q.readyState===4||c==="timeout")){v=true;q.onreadystatechange=new Function;g=c==="timeout"?"timeout":!n(q)?"error":"success";if(g==="success")l||d.success(p(),q,d.args);else d.failure(p(),q,d.args);d.complete(p(),q,d.args);c==="timeout"&&q.abort();
if(d.async)q=null}};q.send(f==="POST"?d.data:null);return q}};e.mix(e.Ajax,{get:function(i,d){d.type="get";d.url=i;e.Ajax(d)},post:function(i,d){d.type="post";d.url=i;e.Ajax(d)},getScript:function(i,d,l){var g=e.get("head")||t.documentElement,b=t.createElement("script");b.src=i;if(l)b.charset=l;b.async=true;e.isFunction(d)&&m(b,d);g.appendChild(b)}});e.io=e.Ajax.io});
KISSY.add("cookie",function(e){function t(n){return e.isString(n)&&n!==""}var m=document,s=encodeURIComponent,p=decodeURIComponent;e.Cookie={get:function(n){var i;if(t(n))if(n=m.cookie.match("(?:^| )"+n+"(?:(?:=([^;]*))|;|$)"))i=n[1]?p(n[1]):"";return i},set:function(n,i,d,l,g,b){i=s(i);var f=d;if(typeof f==="number"){f=new Date;f.setTime(f.getTime()+d*864E5)}if(f instanceof Date)i+="; expires="+f.toUTCString();if(t(l))i+="; domain="+l;if(t(g))i+="; path="+g;if(b)i+="; secure";m.cookie=n+"="+i},remove:function(n,
i,d,l){this.set(n,"",0,i,d,l)}}});
KISSY.add("json",function(e){function t(b){return b<10?"0"+b:b}function m(b){n.lastIndex=0;return n.test(b)?'"'+b.replace(n,function(f){var k=l[f];return typeof k==="string"?k:"\\u"+("0000"+f.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+b+'"'}function s(b,f){var k,u,v=i,q,a=f[b];if(a&&typeof a==="object"&&typeof a.toJSON==="function")a=a.toJSON(b);if(typeof g==="function")a=g.call(f,b,a);switch(typeof a){case "string":return m(a);case "number":return isFinite(a)?String(a):"null";case "boolean":case "null":return String(a);
case "object":if(!a)return"null";i+=d;q=[];if(Object.prototype.toString.apply(a)==="[object Array]"){u=a.length;for(b=0;b<u;b+=1)q[b]=s(b,a)||"null";f=q.length===0?"[]":i?"[\n"+i+q.join(",\n"+i)+"\n"+v+"]":"["+q.join(",")+"]";i=v;return f}if(g&&typeof g==="object"){u=g.length;for(b=0;b<u;b+=1){k=g[b];if(typeof k==="string")if(f=s(k,a))q.push(m(k)+(i?": ":":")+f)}}else for(k in a)if(Object.hasOwnProperty.call(a,k))if(f=s(k,a))q.push(m(k)+(i?": ":":")+f);f=q.length===0?"{}":i?"{\n"+i+q.join(",\n"+i)+
"\n"+v+"}":"{"+q.join(",")+"}";i=v;return f}}e=e.JSON=window.JSON||{};if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+t(this.getUTCMonth()+1)+"-"+t(this.getUTCDate())+"T"+t(this.getUTCHours())+":"+t(this.getUTCMinutes())+":"+t(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()}}var p=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
n=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,i,d,l={"\u0008":"\\b","\t":"\\t","\n":"\\n","\u000c":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},g;if(typeof e.stringify!=="function")e.stringify=function(b,f,k){var u;d=i="";if(typeof k==="number")for(u=0;u<k;u+=1)d+=" ";else if(typeof k==="string")d=k;if((g=f)&&typeof f!=="function"&&(typeof f!=="object"||typeof f.length!=="number"))throw new Error("JSON.stringify");return s("",
{"":b})};if(typeof e.parse!=="function")e.parse=function(b,f){function k(u,v){var q,a,c=u[v];if(c&&typeof c==="object")for(q in c)if(Object.hasOwnProperty.call(c,q)){a=k(c,q);if(a!==undefined)c[q]=a;else delete c[q]}return f.call(u,v,c)}b=String(b);p.lastIndex=0;if(p.test(b))b=b.replace(p,function(u){return"\\u"+("0000"+u.charCodeAt(0).toString(16)).slice(-4)});if(/^[\],:{}\s]*$/.test(b.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,
"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){b=eval("("+b+")");return typeof f==="function"?k({"":b},""):b}throw new SyntaxError("JSON.parse");}});
(function(){function e(a,c,h,j,r,o){r=0;for(var w=j.length;r<w;r++){var x=j[r];if(x){x=x[a];for(var A=false;x;){if(x.sizcache===h){A=j[x.sizset];break}if(x.nodeType===1&&!o){x.sizcache=h;x.sizset=r}if(x.nodeName.toLowerCase()===c){A=x;break}x=x[a]}j[r]=A}}}function t(a,c,h,j,r,o){r=0;for(var w=j.length;r<w;r++){var x=j[r];if(x){x=x[a];for(var A=false;x;){if(x.sizcache===h){A=j[x.sizset];break}if(x.nodeType===1){if(!o){x.sizcache=h;x.sizset=r}if(typeof c!=="string"){if(x===c){A=true;break}}else if(d.filter(c,
[x]).length>0){A=x;break}}x=x[a]}j[r]=A}}}var m=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,s=0,p=Object.prototype.toString,n=false,i=true;[0,0].sort(function(){i=false;return 0});var d=function(a,c,h,j){h=h||[];var r=c=c||document;if(c.nodeType!==1&&c.nodeType!==9)return[];if(!a||typeof a!=="string")return h;var o=[],w,x,A,y,z=true,B=d.isXML(c),C=a,D;do{m.exec("");if(w=m.exec(C)){C=w[3];o.push(w[1]);if(w[2]){y=
w[3];break}}}while(w);if(o.length>1&&g.exec(a))if(o.length===2&&l.relative[o[0]])x=q(o[0]+o[1],c);else for(x=l.relative[o[0]]?[c]:d(o.shift(),c);o.length;){a=o.shift();if(l.relative[a])a+=o.shift();x=q(a,x)}else{if(!j&&o.length>1&&c.nodeType===9&&!B&&l.match.ID.test(o[0])&&!l.match.ID.test(o[o.length-1])){w=d.find(o.shift(),c,B);c=w.expr?d.filter(w.expr,w.set)[0]:w.set[0]}if(c){w=j?{expr:o.pop(),set:k(j)}:d.find(o.pop(),o.length===1&&(o[0]==="~"||o[0]==="+")&&c.parentNode?c.parentNode:c,B);x=w.expr?
d.filter(w.expr,w.set):w.set;if(o.length>0)A=k(x);else z=false;for(;o.length;){w=D=o.pop();if(l.relative[D])w=o.pop();else D="";if(w==null)w=c;l.relative[D](A,w,B)}}else A=[]}A||(A=x);A||d.error(D||a);if(p.call(A)==="[object Array]")if(z)if(c&&c.nodeType===1)for(a=0;A[a]!=null;a++){if(A[a]&&(A[a]===true||A[a].nodeType===1&&d.contains(c,A[a])))h.push(x[a])}else for(a=0;A[a]!=null;a++)A[a]&&A[a].nodeType===1&&h.push(x[a]);else h.push.apply(h,A);else k(A,h);if(y){d(y,r,h,j);d.uniqueSort(h)}return h};
d.uniqueSort=function(a){if(v){n=i;a.sort(v);if(n)for(var c=1;c<a.length;c++)a[c]===a[c-1]&&a.splice(c--,1)}return a};d.matches=function(a,c){return d(a,null,null,c)};d.find=function(a,c,h){var j;if(!a)return[];for(var r=0,o=l.order.length;r<o;r++){var w=l.order[r],x;if(x=l.leftMatch[w].exec(a)){var A=x[1];x.splice(1,1);if(A.substr(A.length-1)!=="\\"){x[1]=(x[1]||"").replace(/\\/g,"");j=l.find[w](x,c,h);if(j!=null){a=a.replace(l.match[w],"");break}}}}j||(j=c.getElementsByTagName("*"));return{set:j,
expr:a}};d.filter=function(a,c,h,j){for(var r=a,o=[],w=c,x,A,y=c&&c[0]&&d.isXML(c[0]);a&&c.length;){for(var z in l.filter)if((x=l.leftMatch[z].exec(a))!=null&&x[2]){var B=l.filter[z],C,D;D=x[1];A=false;x.splice(1,1);if(D.substr(D.length-1)!=="\\"){if(w===o)o=[];if(l.preFilter[z])if(x=l.preFilter[z](x,w,h,o,j,y)){if(x===true)continue}else A=C=true;if(x)for(var E=0;(D=w[E])!=null;E++)if(D){C=B(D,x,E,w);var F=j^!!C;if(h&&C!=null)if(F)A=true;else w[E]=false;else if(F){o.push(D);A=true}}if(C!==undefined){h||
(w=o);a=a.replace(l.match[z],"");if(!A)return[];break}}}if(a===r)if(A==null)d.error(a);else break;r=a}return w};d.error=function(a){throw"Syntax error, unrecognized expression: "+a;};var l=d.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(['"]*)(.*?)\3|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\((even|odd|[\dn+\-]*)\))?/,
POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(a){return a.getAttribute("href")}},relative:{"+":function(a,c){var h=typeof c==="string",j=h&&!/\W/.test(c);h=h&&!j;if(j)c=c.toLowerCase();j=0;for(var r=a.length,o;j<r;j++)if(o=a[j]){for(;(o=o.previousSibling)&&o.nodeType!==1;);a[j]=h||o&&o.nodeName.toLowerCase()===
c?o||false:o===c}h&&d.filter(c,a,true)},">":function(a,c){var h=typeof c==="string",j,r=0,o=a.length;if(h&&!/\W/.test(c))for(c=c.toLowerCase();r<o;r++){if(j=a[r]){h=j.parentNode;a[r]=h.nodeName.toLowerCase()===c?h:false}}else{for(;r<o;r++)if(j=a[r])a[r]=h?j.parentNode:j.parentNode===c;h&&d.filter(c,a,true)}},"":function(a,c,h){var j=s++,r=t,o;if(typeof c==="string"&&!/\W/.test(c)){o=c=c.toLowerCase();r=e}r("parentNode",c,j,a,o,h)},"~":function(a,c,h){var j=s++,r=t,o;if(typeof c==="string"&&!/\W/.test(c)){o=
c=c.toLowerCase();r=e}r("previousSibling",c,j,a,o,h)}},find:{ID:function(a,c,h){if(typeof c.getElementById!=="undefined"&&!h)return(a=c.getElementById(a[1]))?[a]:[]},NAME:function(a,c){if(typeof c.getElementsByName!=="undefined"){var h=[];c=c.getElementsByName(a[1]);for(var j=0,r=c.length;j<r;j++)c[j].getAttribute("name")===a[1]&&h.push(c[j]);return h.length===0?null:h}},TAG:function(a,c){return c.getElementsByTagName(a[1])}},preFilter:{CLASS:function(a,c,h,j,r,o){a=" "+a[1].replace(/\\/g,"")+" ";
if(o)return a;o=0;for(var w;(w=c[o])!=null;o++)if(w)if(r^(w.className&&(" "+w.className+" ").replace(/[\t\n]/g," ").indexOf(a)>=0))h||j.push(w);else if(h)c[o]=false;return false},ID:function(a){return a[1].replace(/\\/g,"")},TAG:function(a){return a[1].toLowerCase()},CHILD:function(a){if(a[1]==="nth"){var c=/(-?)(\d*)n((?:\+|-)?\d*)/.exec(a[2]==="even"&&"2n"||a[2]==="odd"&&"2n+1"||!/\D/.test(a[2])&&"0n+"+a[2]||a[2]);a[2]=c[1]+(c[2]||1)-0;a[3]=c[3]-0}a[0]=s++;return a},ATTR:function(a,c,h,j,r,o){c=
a[1].replace(/\\/g,"");if(!o&&l.attrMap[c])a[1]=l.attrMap[c];if(a[2]==="~=")a[4]=" "+a[4]+" ";return a},PSEUDO:function(a,c,h,j,r){if(a[1]==="not")if((m.exec(a[3])||"").length>1||/^\w/.test(a[3]))a[3]=d(a[3],null,null,c);else{a=d.filter(a[3],c,h,true^r);h||j.push.apply(j,a);return false}else if(l.match.POS.test(a[0])||l.match.CHILD.test(a[0]))return true;return a},POS:function(a){a.unshift(true);return a}},filters:{enabled:function(a){return a.disabled===false&&a.type!=="hidden"},disabled:function(a){return a.disabled===
true},checked:function(a){return a.checked===true},selected:function(a){return a.selected===true},parent:function(a){return!!a.firstChild},empty:function(a){return!a.firstChild},has:function(a,c,h){return!!d(h[3],a).length},header:function(a){return/h\d/i.test(a.nodeName)},text:function(a){return"text"===a.type},radio:function(a){return"radio"===a.type},checkbox:function(a){return"checkbox"===a.type},file:function(a){return"file"===a.type},password:function(a){return"password"===a.type},submit:function(a){return"submit"===
a.type},image:function(a){return"image"===a.type},reset:function(a){return"reset"===a.type},button:function(a){return"button"===a.type||a.nodeName.toLowerCase()==="button"},input:function(a){return/input|select|textarea|button/i.test(a.nodeName)}},setFilters:{first:function(a,c){return c===0},last:function(a,c,h,j){return c===j.length-1},even:function(a,c){return c%2===0},odd:function(a,c){return c%2===1},lt:function(a,c,h){return c<h[3]-0},gt:function(a,c,h){return c>h[3]-0},nth:function(a,c,h){return h[3]-
0===c},eq:function(a,c,h){return h[3]-0===c}},filter:{PSEUDO:function(a,c,h,j){var r=c[1],o=l.filters[r];if(o)return o(a,h,c,j);else if(r==="contains")return(a.textContent||a.innerText||d.getText([a])||"").indexOf(c[3])>=0;else if(r==="not"){c=c[3];h=0;for(j=c.length;h<j;h++)if(c[h]===a)return false;return true}else d.error("Syntax error, unrecognized expression: "+r)},CHILD:function(a,c){var h=c[1],j=a;switch(h){case "only":case "first":for(;j=j.previousSibling;)if(j.nodeType===1)return false;if(h===
"first")return true;j=a;case "last":for(;j=j.nextSibling;)if(j.nodeType===1)return false;return true;case "nth":h=c[2];var r=c[3];if(h===1&&r===0)return true;c=c[0];var o=a.parentNode;if(o&&(o.sizcache!==c||!a.nodeIndex)){var w=0;for(j=o.firstChild;j;j=j.nextSibling)if(j.nodeType===1)j.nodeIndex=++w;o.sizcache=c}a=a.nodeIndex-r;return h===0?a===0:a%h===0&&a/h>=0}},ID:function(a,c){return a.nodeType===1&&a.getAttribute("id")===c},TAG:function(a,c){return c==="*"&&a.nodeType===1||a.nodeName.toLowerCase()===
c},CLASS:function(a,c){return(" "+(a.className||a.getAttribute("class"))+" ").indexOf(c)>-1},ATTR:function(a,c){var h=c[1];a=l.attrHandle[h]?l.attrHandle[h](a):a[h]!=null?a[h]:a.getAttribute(h);h=a+"";var j=c[2];c=c[4];return a==null?j==="!=":j==="="?h===c:j==="*="?h.indexOf(c)>=0:j==="~="?(" "+h+" ").indexOf(c)>=0:!c?h&&a!==false:j==="!="?h!==c:j==="^="?h.indexOf(c)===0:j==="$="?h.substr(h.length-c.length)===c:j==="|="?h===c||h.substr(0,c.length+1)===c+"-":false},POS:function(a,c,h,j){var r=l.setFilters[c[2]];
if(r)return r(a,h,c,j)}}},g=l.match.POS,b=function(a,c){return"\\"+(c-0+1)};for(var f in l.match){l.match[f]=new RegExp(l.match[f].source+/(?![^\[]*\])(?![^\(]*\))/.source);l.leftMatch[f]=new RegExp(/(^(?:.|\r|\n)*?)/.source+l.match[f].source.replace(/\\(\d+)/g,b))}var k=function(a,c){a=Array.prototype.slice.call(a,0);if(c){c.push.apply(c,a);return c}return a};try{Array.prototype.slice.call(document.documentElement.childNodes,0)}catch(u){k=function(a,c){c=c||[];var h=0;if(p.call(a)==="[object Array]")Array.prototype.push.apply(c,
a);else if(typeof a.length==="number")for(var j=a.length;h<j;h++)c.push(a[h]);else for(;a[h];h++)c.push(a[h]);return c}}var v;if(document.documentElement.compareDocumentPosition)v=function(a,c){if(!a.compareDocumentPosition||!c.compareDocumentPosition){if(a==c)n=true;return a.compareDocumentPosition?-1:1}a=a.compareDocumentPosition(c)&4?-1:a===c?0:1;if(a===0)n=true;return a};else if("sourceIndex"in document.documentElement)v=function(a,c){if(!a.sourceIndex||!c.sourceIndex){if(a==c)n=true;return a.sourceIndex?
-1:1}a=a.sourceIndex-c.sourceIndex;if(a===0)n=true;return a};else if(document.createRange)v=function(a,c){if(!a.ownerDocument||!c.ownerDocument){if(a==c)n=true;return a.ownerDocument?-1:1}var h=a.ownerDocument.createRange(),j=c.ownerDocument.createRange();h.setStart(a,0);h.setEnd(a,0);j.setStart(c,0);j.setEnd(c,0);a=h.compareBoundaryPoints(Range.START_TO_END,j);if(a===0)n=true;return a};d.getText=function(a){for(var c="",h,j=0;a[j];j++){h=a[j];if(h.nodeType===3||h.nodeType===4)c+=h.nodeValue;else if(h.nodeType!==
8)c+=d.getText(h.childNodes)}return c};(function(){var a=document.createElement("div"),c="script"+(new Date).getTime();a.innerHTML="<a name='"+c+"'/>";var h=document.documentElement;h.insertBefore(a,h.firstChild);if(document.getElementById(c)){l.find.ID=function(j,r,o){if(typeof r.getElementById!=="undefined"&&!o)return(r=r.getElementById(j[1]))?r.id===j[1]||typeof r.getAttributeNode!=="undefined"&&r.getAttributeNode("id").nodeValue===j[1]?[r]:undefined:[]};l.filter.ID=function(j,r){var o=typeof j.getAttributeNode!==
"undefined"&&j.getAttributeNode("id");return j.nodeType===1&&o&&o.nodeValue===r}}h.removeChild(a);h=a=null})();(function(){var a=document.createElement("div");a.appendChild(document.createComment(""));if(a.getElementsByTagName("*").length>0)l.find.TAG=function(c,h){h=h.getElementsByTagName(c[1]);if(c[1]==="*"){c=[];for(var j=0;h[j];j++)h[j].nodeType===1&&c.push(h[j]);h=c}return h};a.innerHTML="<a href='#'></a>";if(a.firstChild&&typeof a.firstChild.getAttribute!=="undefined"&&a.firstChild.getAttribute("href")!==
"#")l.attrHandle.href=function(c){return c.getAttribute("href",2)};a=null})();document.querySelectorAll&&function(){var a=d,c=document.createElement("div");c.innerHTML="<p class='TEST'></p>";if(!(c.querySelectorAll&&c.querySelectorAll(".TEST").length===0)){d=function(j,r,o,w){r=r||document;if(!w&&r.nodeType===9&&!d.isXML(r))try{return k(r.querySelectorAll(j),o)}catch(x){}return a(j,r,o,w)};for(var h in a)d[h]=a[h];c=null}}();(function(){var a=document.createElement("div");a.innerHTML="<div class='test e'></div><div class='test'></div>";
if(!(!a.getElementsByClassName||a.getElementsByClassName("e").length===0)){a.lastChild.className="e";if(a.getElementsByClassName("e").length!==1){l.order.splice(1,0,"CLASS");l.find.CLASS=function(c,h,j){if(typeof h.getElementsByClassName!=="undefined"&&!j)return h.getElementsByClassName(c[1])};a=null}}})();d.contains=document.compareDocumentPosition?function(a,c){return!!(a.compareDocumentPosition(c)&16)}:function(a,c){return a!==c&&(a.contains?a.contains(c):true)};d.isXML=function(a){return(a=(a?
a.ownerDocument||a:0).documentElement)?a.nodeName!=="HTML":false};var q=function(a,c){var h=[],j="",r;for(c=c.nodeType?[c]:c;r=l.match.PSEUDO.exec(a);){j+=r[0];a=a.replace(l.match.PSEUDO,"")}a=l.relative[a]?a+"*":a;r=0;for(var o=c.length;r<o;r++)d(a,c[r],h);return d.filter(j,h)};KISSY.ExternalSelector=d;KISSY.ExternalSelector._filter=function(a,c){return d.matches(c,KISSY.query(a))}})();
KISSY.add("anim-easing",function(e){var t=Math,m=t.PI,s=t.pow,p=t.sin,n=1.70158,i={easeNone:function(d){return d},easeIn:function(d){return d*d},easeOut:function(d){return(2-d)*d},easeBoth:function(d){return(d*=2)<1?0.5*d*d:0.5*(1- --d*(d-2))},easeInStrong:function(d){return d*d*d*d},easeOutStrong:function(d){return 1- --d*d*d*d},easeBothStrong:function(d){return(d*=2)<1?0.5*d*d*d*d:0.5*(2-(d-=2)*d*d*d)},elasticIn:function(d){if(d===0||d===1)return d;return-(s(2,10*(d-=1))*p((d-0.075)*2*m/0.3))},
elasticOut:function(d){if(d===0||d===1)return d;return s(2,-10*d)*p((d-0.075)*2*m/0.3)+1},elasticBoth:function(d){if(d===0||(d*=2)===2)return d;if(d<1)return-0.5*s(2,10*(d-=1))*p((d-0.1125)*2*m/0.45);return s(2,-10*(d-=1))*p((d-0.1125)*2*m/0.45)*0.5+1},backIn:function(d){if(d===1)d-=0.0010;return d*d*((n+1)*d-n)},backOut:function(d){return(d-=1)*d*((n+1)*d+n)+1},backBoth:function(d){if((d*=2)<1)return 0.5*d*d*(((n*=1.525)+1)*d-n);return 0.5*((d-=2)*d*(((n*=1.525)+1)*d+n)+2)},bounceIn:function(d){return 1-
i.bounceOut(1-d)},bounceOut:function(d){return d<1/2.75?7.5625*d*d:d<2/2.75?7.5625*(d-=1.5/2.75)*d+0.75:d<2.5/2.75?7.5625*(d-=2.25/2.75)*d+0.9375:7.5625*(d-=2.625/2.75)*d+0.984375},bounceBoth:function(d){if(d<0.5)return i.bounceIn(d*2)*0.5;return i.bounceOut(d*2-1)*0.5+0.5}};e.Easing=i});
KISSY.add("anim",function(e,t){function m(q,a,c,h,j){if(q=e.get(q)){if(!(this instanceof m))return new m(q,a,c,h,j);var r=e.isPlainObject(c);a=a;this.domEl=q;if(e.isPlainObject(a))a=e.param(a,";").replace(/=/g,":");this.props=s(a);this.targetStyle=a;if(r)q=e.merge(v,c);else{q=e.clone(v);c&&(q.duration=b(c,10)||1);e.isString(h)&&(h=g[h]);e.isFunction(h)&&(q.easing=h);e.isFunction(j)&&(q.complete=j)}this.config=q;e.isFunction(j)&&this.on(u,j)}}function s(q){var a={},c=k.length,h;f.innerHTML='<div style="'+
q+'"></div>';for(q=f.firstChild.style;c--;)if(h=q[k[c]])a[k[c]]=p(h);return a}function p(q){var a=b(q);q=(q+"").replace(/^[-\d\.]+/,"");return isNaN(a)?{v:q,u:"",f:i}:{v:a,u:q,f:n}}function n(q,a,c){return(q+(a-q)*c).toFixed(3)}function i(q,a,c){for(var h=2,j,r,o=[],w=[];j=3,r=arguments[h-1],h--;)if(d(r,0,4)==="rgb(")for(r=r.match(/\d+/g);j--;)o.push(~~r[j]);else if(d(r,0)==="#"){if(r.length===4)r="#"+d(r,1)+d(r,1)+d(r,2)+d(r,2)+d(r,3)+d(r,3);for(;j--;)o.push(parseInt(d(r,1+j*2,2),16))}else return a;
for(;j--;){h=~~(o[j+3]+(o[j]-o[j+3])*c);w.push(h<0?0:h>255?255:h)}return"rgb("+w.join(",")+")"}function d(q,a,c){return q.substr(a,c||1)}var l=e.DOM,g=e.Easing,b=parseFloat,f=l.create("<div>"),k="backgroundColor borderBottomColor borderBottomWidth borderBottomStyle borderLeftColor borderLeftWidth borderLeftStyle borderRightColor borderRightWidth borderRightStyle borderSpacing borderTopColor borderTopWidth borderTopStyle bottom color font fontFamily fontSize fontWeight height left letterSpacing lineHeight marginBottom marginLeft marginRight marginTop maxHeight maxWidth minHeight minWidth opacity outlineColor outlineOffset outlineWidth paddingBottom paddingLeft paddingRight paddingTop right textIndent top width wordSpacing zIndex".split(" "),
u="complete",v={duration:1,easing:g.easeNone};e.augment(m,e.EventTarget,{run:function(){var q=this,a=q.config,c=q.domEl,h=a.duration*1E3,j=a.easing,r=e.now(),o=r+h,w=q.props,x={},A;for(A in w)x[A]=p(l.css(c,A));if(q.fire("start")!==false){q.stop();q.timer=e.later(a=function(){var y=e.now(),z=y>o?1:(y-r)/h,B,C,D;for(A in w){B=x[A];C=w[A];if(C.v==0)C.u=B.u;if(B.u!==C.u)B.v=0;l.css(c,A,C.f(B.v,C.v,j(z))+C.u)}if(q.fire("step")===false||(D=y>o)){q.stop();D&&q.fire(u)}},13,true);a();return q}},stop:function(q){var a=
this.domEl,c=this.targetStyle;if(this.timer){this.timer.cancel();this.timer=t}if(q){e.UA.ie&&c.indexOf("opacity")>-1&&l.css(a,"opacity",this.props.opacity.v);a.style.cssText+=";"+c;this.fire(u)}return this}});e.Anim=m});KISSY.add("anim-node-plugin",function(e,t){var m=e.Anim;e.each([e.Node.prototype,e.NodeList.prototype],function(s){s.animate=function(){var p=e.makeArray(arguments);e.each(this,function(n){m.apply(t,[n].concat(p)).run()});return this}})});
KISSY.add("datalazyload",function(e,t){function m(b,f){if(!(this instanceof m))return new m(b,f);if(f===t){f=b;b=[i]}e.isArray(b)||(b=[e.get(b)||i]);this.containers=b;this.config=e.merge(g,f);this._init()}var s=e.DOM,p=e.Event,n=window,i=document,d="scroll",l="resize",g={mod:"manual",diff:"default",placeholder:"none"};e.augment(m,{_init:function(){this.threshold=this._getThreshold();this._filterItems();this._getItemsLength()&&this._initLoadEvent()},_filterItems:function(){var b=this.containers,f,
k,u,v=[],q=[];f=0;for(k=b.length;f<k;++f){u=e.query("img",b[f]);v=v.concat(e.filter(u,this._filterImg,this));u=e.query("textarea",b[f]);q=q.concat(e.filter(u,this._filterArea,this))}this.images=v;this.areas=q},_filterImg:function(b){var f=b.getAttribute("data-ks-lazyload"),k=this.threshold,u=this.config.placeholder;if(this.config.mod==="manual"){if(f){if(u!=="none")b.src=u;return true}}else if(s.offset(b).top>k&&!f){s.attr(b,"data-ks-lazyload",b.src);if(u!=="none")b.src=u;else b.removeAttribute("src");
return true}},_filterArea:function(b){return s.hasClass(b,"ks-datalazyload")},_initLoadEvent:function(){function b(){k||(k=setTimeout(function(){f();k=null},100))}function f(){u._loadItems();if(u._getItemsLength()===0){p.remove(n,d,b);p.remove(n,l,b)}}var k,u=this;p.on(n,d,b);p.on(n,l,function(){u.threshold=u._getThreshold();b()});u._getItemsLength()&&e.ready(function(){f()})},_loadItems:function(){this._loadImgs();this._loadAreas()},_loadImgs:function(){this.images=e.filter(this.images,this._loadImg,
this)},_loadImg:function(b){var f=this.threshold+s.scrollTop();if(s.offset(b).top<=f)this._loadImgSrc(b);else return true},_loadImgSrc:function(b,f){f=f||"data-ks-lazyload";var k=b.getAttribute(f);if(k&&b.src!=k){b.src=k;b.removeAttribute(f)}},_loadAreas:function(){this.areas=e.filter(this.areas,this._loadArea,this)},_loadArea:function(b){var f=s.offset(b).top;if(!f&&s.css(b,"none")=="none")f=s.offset(b.parentNode).top;if(f<=this.threshold+s.scrollTop())this._loadAreaData(b.parentNode,b);else return true},
_loadAreaData:function(b,f){f.style.display="none";f.className="";var k=s.create("<div>");b.insertBefore(k,f);s.html(k,f.value,true)},_getThreshold:function(){var b=this.config.diff,f=s.viewportHeight();return b==="default"?2*f:f+b},_getItemsLength:function(){return this.images.length+this.areas.length},loadCustomLazyData:function(b,f){var k=this,u,v;e.isArray(b)||(b=[e.get(b)]);e.each(b,function(q){switch(f){case "img-src":v=q.nodeName==="IMG"?[q]:e.query("img",q);e.each(v,function(a){k._loadImgSrc(a,
"data-ks-lazyload-custom")});break;default:(u=e.get("textarea",q))&&s.hasClass(u,"ks-datalazyload-custom")&&k._loadAreaData(q,u)}})}});e.mix(m,m.prototype,true,["loadCustomLazyData","_loadImgSrc","_loadAreaData"]);e.DataLazyload=m});
KISSY.add("flash-ua",function(e){function t(){var g;if(navigator.plugins&&navigator.mimeTypes.length)g=(navigator.plugins["Shockwave Flash"]||0).description;else if(window.ActiveXObject)try{g=(new ActiveXObject("ShockwaveFlash.ShockwaveFlash")).GetVariable("$version")}catch(b){}if(g)return m(g)}function m(g){return g.match(/(\d)+/g)}function s(g){var b=e.isString(g)?m(g):g;g=g;if(e.isArray(b))g=parseFloat(b[0]+"."+p(b[1],3)+p(b[2],5));return g||0}function p(g,b){for(var f=(g+"").length;f++<b;)g="0"+
g;return g}var n=e.UA,i,d,l=true;n.fpv=function(g){if(g||l){l=false;i=t();d=s(i)}return i};n.fpvGEQ=function(g,b){l&&n.fpv(b);return!!d&&d>=s(g)}});KISSY.add("flash",function(e){e.Flash={swfs:{length:0}}});
KISSY.add("flash-embed",function(e){function t(g,b,f){var k=s.create("<param>");s.attr(k,{name:b,value:f});g.appendChild(k)}var m=e.UA,s=e.DOM,p=e.Flash,n=/object|embed/i,i=encodeURIComponent,d={wmode:"",allowscriptaccess:"",allownetworking:"",allowfullscreen:"",play:"false",loop:"",menu:"",quality:"",scale:"",salign:"",bgcolor:"",devicefont:"",base:"",swliveconnect:"",seamlesstabbing:""},l={params:{},attrs:{width:215,height:138},version:9};e.mix(p,{fpv:m.fpv,fpvGEQ:m.fpvGEQ,len:function(){return p.swfs.length},
add:function(g,b,f){var k,u;b=p._normalize(b);b=e.merge(l,b);b.attrs=e.merge(l.attrs,b.attrs);if(g=e.get(g)){if(!g.id)g.id=e.guid("ks-flash-");u=b.attrs.id="#"+g.id;if(m.fpv()){if(!m.fpvGEQ(b.version)){this._callback(f,0,u,g);if(!((k=b.xi)&&e.isString(k)))return;b.src=k}if(n.test(g.nodeName))this._register(g,b,f);else b.src?this._embed(g,b,f):this._callback(f,-3,u,g)}else this._callback(f,-1,u,g)}else this._callback(f,-2)},get:function(g){return p.swfs[g]},remove:function(g){if(g=p.get(g)){s.remove(g);
delete p.swfs["#"+g.id];p.swfs.length-=1}},contains:function(g){var b=p.swfs,f,k=false;if(e.isString(g))k=g in b;else for(f in b)if(b[f]===g){k=true;break}return k},_register:function(g,b,f){b=b.attrs.id;p._addSWF(b,g);p._callback(f,1,b,g)},_embed:function(g,b,f){var k=p._createSWF(b.src,b.attrs,b.params);if(m.ie)g.outerHTML=k.outerHTML;else g.parentNode.replaceChild(k,g);p._register(g,b,f)},_callback:function(g,b,f,k){b&&e.isFunction(g)&&g({status:b,id:f,swf:k})},_addSWF:function(g,b){if(g&&b){p.swfs[g]=
b;p.swfs.length+=1}},_createSWF:function(g,b,f){var k=s.create("<object>"),u;s.attr(k,b);if(m.ie){s.attr(k,"classid","clsid:d27cdb6e-ae6d-11cf-96b8-444553540000");t(k,"movie",g)}else s.attr(k,{type:"application/x-shockwave-flash",data:g,name:b.id});for(u in f)u in d&&t(k,u,f[u]);f.flashvars&&t(k,"flashvars",p.toFlashVars(f.flashvars));return k},_normalize:function(g){var b,f,k,u=g;if(e.isPlainObject(g)){u={};for(k in g){b=k.toLowerCase();f=g[k];if(b!=="flashvars")f=p._normalize(f);u[b]=f}}return u},
toFlashVars:function(g){if(!e.isPlainObject(g))return"";var b,f,k=[];for(b in g){f=g[b];if(e.isString(f))f='"'+i(f)+'"';else{f=e.JSON.stringify(f);if(!f)continue;f=f.replace(/:"([^"]+)/g,function(u,v){return':"'+i(v)})}k.push(b+"="+f)}return k.join("&")}})});
KISSY.add("switchable",function(e,t){function m(n,i){i=i||{};if(!("markupType"in i))if(i.panelCls)i.markupType=1;else if(i.panels)i.markupType=2;i=e.merge(m.Config,i);this.container=e.get(n);this.config=i;this.activeIndex=i.activeIndex;this._init()}var s=e.DOM,p=e.Event;m.Config={markupType:0,navCls:"ks-switchable-nav",contentCls:"ks-switchable-content",triggerCls:"ks-switchable-trigger",panelCls:"ks-switchable-panel",triggers:[],panels:[],hasTriggers:true,triggerType:"mouse",delay:0.1,activeIndex:0,
activeTriggerCls:"ks-active",steps:1,viewSize:[]};m.Plugins=[];e.augment(m,e.EventTarget,{_init:function(){var n=this,i=n.config;if(n.fire("beforeInit")!==false){n._parseMarkup();i.hasTriggers&&n._bindTriggers();e.each(m.Plugins,function(d){d.init&&d.init(n)});n.fire("init")}},_parseMarkup:function(){var n=this.container,i=this.config,d,l=[],g=[];switch(i.markupType){case 0:if(d=e.get("."+i.navCls,n))l=s.children(d);d=e.get("."+i.contentCls,n);g=s.children(d);break;case 1:l=e.query("."+i.triggerCls,
n);g=e.query("."+i.panelCls,n);break;case 2:l=i.triggers;g=i.panels;break}n=g.length;this.length=n/i.steps;if(i.hasTriggers&&n>0&&l.length===0)l=this._generateTriggersMarkup(this.length);this.triggers=e.makeArray(l);this.panels=e.makeArray(g);this.content=d||g[0].parentNode},_generateTriggersMarkup:function(n){var i=this.config,d=s.create("<ul>"),l,g;d.className=i.navCls;for(g=0;g<n;g++){l=s.create("<li>");if(g===this.activeIndex)l.className=i.activeTriggerCls;l.innerHTML=g+1;d.appendChild(l)}this.container.appendChild(d);
return s.children(d)},_bindTriggers:function(){var n=this,i=n.config,d=n.triggers,l,g,b=d.length;for(g=0;g<b;g++)(function(f){l=d[f];p.on(l,"click focus",function(){n._onFocusTrigger(f)});if(i.triggerType==="mouse"){p.on(l,"mouseenter",function(){n._onMouseEnterTrigger(f)});p.on(l,"mouseleave",function(){n._onMouseLeaveTrigger(f)})}})(g)},_onFocusTrigger:function(n){if(this._triggerIsValid()){this._cancelSwitchTimer();this.switchTo(n)}},_onMouseEnterTrigger:function(n){var i=this;if(i._triggerIsValid())i.switchTimer=
e.later(function(){i.switchTo(n)},i.config.delay*1E3)},_onMouseLeaveTrigger:function(){this._cancelSwitchTimer()},_triggerIsValid:function(n){return this.activeIndex!==n},_cancelSwitchTimer:function(){if(this.switchTimer){this.switchTimer.cancel();this.switchTimer=t}},switchTo:function(n,i){var d=this.config,l=this.triggers,g=this.panels,b=this.activeIndex,f=d.steps,k=b*f,u=n*f;if(!this._triggerIsValid())return this;if(this.fire("beforeSwitch",{toIndex:n})===false)return this;if(d.hasTriggers)this._switchTrigger(b>
-1?l[b]:null,l[n]);if(i===t)i=n>b?"forward":"backward";this._switchView(g.slice(k,k+f),g.slice(u,u+f),n,i);this.activeIndex=n;return this},_switchTrigger:function(n,i){var d=this.config.activeTriggerCls;n&&s.removeClass(n,d);s.addClass(i,d)},_switchView:function(n,i,d){s.css(n,"display","none");s.css(i,"display","block");this._fireOnSwitch(d)},_fireOnSwitch:function(n){this.fire("switch",{currentIndex:n})},prev:function(){var n=this.activeIndex;this.switchTo(n>0?n-1:this.length-1,"backward")},next:function(){var n=
this.activeIndex;this.switchTo(n<this.length-1?n+1:0,"forward")}});e.Switchable=m});
KISSY.add("switchable-autoplay",function(e,t){var m=e.Event,s=e.Switchable;e.mix(s.Config,{autoplay:false,interval:5,pauseOnHover:true});s.Plugins.push({name:"autoplay",init:function(p){var n=p.config,i=n.interval*1E3,d;if(n.autoplay){if(n.pauseOnHover){m.on(p.container,"mouseenter",function(){if(d){d.cancel();d=t}p.paused=true});m.on(p.container,"mouseleave",function(){d=e.later(function(){p.paused=false;d=t},i)})}p.autoplayTimer=e.later(function(){p.paused||p.switchTo(p.activeIndex<p.length-1?p.activeIndex+
1:0,"forward")},i,true)}}})});
KISSY.add("switchable-effect",function(e,t){var m=e.DOM,s=e.Anim,p=e.Switchable,n;e.mix(p.Config,{effect:"none",duration:0.5,easing:"easeNone"});p.Effects={none:function(i,d,l){m.css(i,"display","none");m.css(d,"display","block");l()},fade:function(i,d,l){i.length!==1&&e.error("fade effect only supports steps == 1.");var g=this,b=g.config,f=i[0],k=d[0];g.anim&&g.anim.stop(true);m.css(k,"opacity",1);g.anim=(new s(f,{opacity:0},b.duration,b.easing,function(){g.anim=t;m.css(k,"z-index",9);m.css(f,"z-index",
1);l()})).run()},scroll:function(i,d,l,g){var b=this;i=b.config;d=i.effect==="scrollx";var f={};f[d?"left":"top"]=-(b.viewSize[d?0:1]*g)+"px";b.anim&&b.anim.stop();b.anim=(new s(b.content,f,i.duration,i.easing,function(){b.anim=t;l()})).run()}};n=p.Effects;n.scrollx=n.scrolly=n.scroll;p.Plugins.push({name:"effect",init:function(i){var d=i.config,l=d.effect,g=i.panels,b=i.content,f=d.steps,k=i.activeIndex,u=g.length;i.viewSize=[d.viewSize[0]||g[0].offsetWidth*f,d.viewSize[1]||g[0].offsetHeight*f];
if(l!=="none"){e.each(g,function(c){m.css(c,"display","block")});switch(l){case "scrollx":case "scrolly":m.css(b,"position","absolute");m.css(b.parentNode,"position","relative");if(l==="scrollx"){m.css(g,"float","left");m.width(b,i.viewSize[0]*(u/f))}break;case "fade":var v=k*f,q=v+f-1,a;e.each(g,function(c,h){a=h>=v&&h<=q;m.css(c,{opacity:a?1:0,position:"absolute",zIndex:a?9:1})});break}}}});e.augment(p,{_switchView:function(i,d,l,g){var b=this,f=b.config.effect;(e.isFunction(f)?f:n[f]).call(b,i,
d,function(){b._fireOnSwitch(l)},l,g)}})});
KISSY.add("switchable-circular",function(e,t){function m(a,c,h,j,r){var o=this;a=o.config;c=o.length;var w=o.activeIndex,x=a.scrollType===v,A=x?l:g,y=o.viewSize[x?0:1];x=-y*j;var z={},B,C=r===u;if(B=C&&w===0&&j===c-1||r===k&&w===c-1&&j===0)x=s.call(o,o.panels,j,C,A,y);z[A]=x+f;o.anim&&o.anim.stop();o.anim=(new e.Anim(o.content,z,a.duration,a.easing,function(){B&&p.call(o,o.panels,j,C,A,y);o.anim=t;h()})).run()}function s(a,c,h,j,r){var o=this.config.steps;c=this.length;var w=h?c-1:0,x=(w+1)*o;for(o=
w*o;o<x;o++){n.css(a[o],i,d);n.css(a[o],j,(h?-1:1)*r*c)}return h?r:-r*c}function p(a,c,h,j,r){var o=this.config.steps;c=this.length;var w=h?c-1:0,x=(w+1)*o;for(o=w*o;o<x;o++){n.css(a[o],i,b);n.css(a[o],j,b)}n.css(this.content,j,h?-r*(c-1):b)}var n=e.DOM,i="position",d="relative",l="left",g="top",b="",f="px",k="forward",u="backward",v="scrollx",q=e.Switchable;e.mix(q.Config,{circular:false});q.Plugins.push({name:"circular",init:function(a){a=a.config;if(a.circular&&(a.effect===v||a.effect==="scrolly")){a.scrollType=
a.effect;a.effect=m}}})});
KISSY.add("switchable-lazyload",function(e){var t=e.DOM,m="beforeSwitch",s="img-src",p="area-data",n={},i=e.Switchable;n[s]="data-ks-lazyload-custom";n[p]="ks-datalazyload-custom";e.mix(i.Config,{lazyDataType:p});i.Plugins.push({name:"lazyload",init:function(d){function l(v){var q=f.steps;v=v.toIndex*q;b.loadCustomLazyData(d.panels.slice(v,v+q),k);g()&&d.detach(m,l)}function g(){var v,q,a,c=k===s;if(v=c?"img":k===p?"textarea":""){v=e.query(v,d.container);q=0;for(a=v.length;q<a;q++)if(c?t.attr(v[q],
u):t.hasClass(v[q],u))return false}return true}var b=e.DataLazyload,f=d.config,k=f.lazyDataType,u=n[k];!b||!k||!u||d.on(m,l)}})});
KISSY.add("switchable-countdown",function(e,t){var m=e.DOM,s=e.Event,p=e.Anim,n=e.Switchable;e.mix(n.Config,{countdown:false,countdownStyle:"width: 0"});n.Plugins.push({name:"countdown",init:function(i){function d(q){l();u=(new p(f[q],k,b-1)).run()}function l(){if(u){u.stop();u=t}if(v){v.stop();v=t}}var g=i.config,b=g.interval,f=[],k=g.countdownStyle,u,v;if(!(!g.autoplay||!g.hasTriggers||!g.countdown)){e.each(i.triggers,function(q,a){q.innerHTML='<div class="ks-switchable-trigger-mask"></div><div class="ks-switchable-trigger-content">'+
q.innerHTML+"</div>";f[a]=q.firstChild});g.pauseOnHover&&s.on(i.container,"mouseenter",function(){l();v=(new p(f[i.activeIndex],k,b/10,"easeOut")).run()});i.on("beforeSwitch",function(q){l();m.removeAttr(f[i.activeIndex],"style");i.paused&&m.css(f[q.toIndex],"visibility","hidden")});i.on("switch",function(q){i.paused||d(q.currentIndex)});d(i.activeIndex)}}})});
KISSY.add("switchable-autorender",function(e){e.Switchable.autoRender=function(t,m,s){m="."+(m||"KS_");s=s||"data-ks-switchable";e.each(["Switchable","Tabs","Slide","Carousel","Accordion"],function(p){e.each(e.query(m+p,t),function(n){try{var i=n.getAttribute(s);if(i)i=i.replace(/'/g,'"');new e[p](n,e.JSON.parse(i))}catch(d){e.log("Switchable.autoRender: "+d,"warn")}})})}});
KISSY.add("tabs",function(e){function t(m,s){if(!(this instanceof t))return new t(m,s);t.superclass.constructor.call(this,m,s)}e.extend(t,e.Switchable);e.Tabs=t});KISSY.add("slide",function(e){function t(s,p){if(!(this instanceof t))return new t(s,p);t.superclass.constructor.call(this,s,e.merge(m,p))}var m={autoplay:true,circular:true};e.extend(t,e.Switchable);e.Slide=t});
KISSY.add("carousel",function(e,t){function m(b,f){var k=this;if(!(k instanceof m))return new m(b,f);k.on("init",function(){s(k)});m.superclass.constructor.call(k,b,e.merge(g,f))}function s(b){var f=b.config,k=f.disableBtnCls;e.each(["prev","next"],function(u){var v=b[u+"Btn"]=e.get(i+f[u+"BtnCls"],b.container);n.on(v,"click",function(q){q.preventDefault();p.hasClass(v,k)||b[u]()})});f.circular||b.on("switch",function(u){u=u.currentIndex;u=u===0?b[d]:u===b.length-1?b[l]:t;p.removeClass([b[d],b[l]],
k);u&&p.addClass(u,k)});n.on(b.panels,"click focus",function(){b.fire("itemSelected",{item:this})})}var p=e.DOM,n=e.Event,i=".",d="prevBtn",l="nextBtn",g={circular:true,prevBtnCls:"ks-switchable-prev-btn",nextBtnCls:"ks-switchable-next-btn",disableBtnCls:"ks-switchable-disable-btn"};e.extend(m,e.Switchable);e.Carousel=m});
KISSY.add("accordion",function(e){function t(p,n){if(!(this instanceof t))return new t(p,n);t.superclass.constructor.call(this,p,e.merge(s,n))}var m=e.DOM,s={markupType:1,triggerType:"click",multiple:false};e.extend(t,e.Switchable);e.Accordion=t;e.augment(t,{_triggerIsValid:function(p){return this.activeIndex!==p||this.config.multiple},_switchView:function(p,n,i){var d=this.config,l=n[0];if(d.multiple){m.toggleClass(this.triggers[i],d.activeTriggerCls);m.css(l,"display",l.style.display=="none"?"block":
"none");this._fireOnSwitch(i)}else t.superclass._switchView.call(this,p,n,i)}})});
KISSY.add("suggest",function(e,t){function m(b,f,k){if(!(this instanceof m))return new m(b,f,k);this.textInput=e.get(b);this.dataSource=f;this.JSONDataSource=e.isPlainObject(f)?f:null;this.returnedData=null;this.config=e.merge(g,k||{});this.container=null;this.queryParams=this.query="";this._timer=null;this._isRunning=false;this.dataScript=null;this._dataCache={};this._latestScriptTime="";this._onKeyboardSelecting=this._scriptDataIsOut=false;this.selectedItem=null;this._init()}var s=e.DOM,p=e.Event,
n=window,i=document,d=i.getElementsByTagName("head")[0],l=e.UA.ie,g={containerCls:"",containerWidth:"",resultFormat:"\u7ea6%result%\u6761\u7ed3\u679c",showCloseBtn:false,closeBtnText:"\u5173\u95ed",useShim:l===6,timerDelay:200,autoFocus:false,submitFormOnClickSelect:true};e.augment(m,e.EventTarget,{_init:function(){this._initTextInput();this._initContainer();this.config.useShim&&this._initShim();this._initStyle();this._initResizeEvent()},_initTextInput:function(){var b=this;b.textInput.setAttribute("autocomplete",
"off");p.on(b.textInput,"blur",function(){b.stop();b.hide()});b.config.autoFocus&&b.textInput.focus();var f=0;p.on(b.textInput,"keydown",function(k){k=k.keyCode;switch(k){case 27:b.hide();b.textInput.value=b.query;b.query.length===0&&b.textInput.blur();break;case 13:b.textInput.blur();b._onKeyboardSelecting&&b.textInput.value==b._getSelectedItemKey()&&b.fire("itemSelect");b._submitForm();break;case 40:case 38:if(f++==0){b._isRunning&&b.stop();b._onKeyboardSelecting=true;b.selectItem(k===40)}else if(f==
3)f=0;break}if(k!=40&&k!=38){b._isRunning||b.start();b._onKeyboardSelecting=false}});p.on(b.textInput,"keyup",function(){f=0})},_initContainer:function(){var b=i.createElement("div"),f=this.config.containerCls;b.className="ks-suggest-container";if(f)b.className+=" "+f;b.style.position="absolute";b.style.visibility="hidden";this.container=b;this._setContainerRegion();this._initContainerEvent();i.body.insertBefore(b,i.body.firstChild)},_setContainerRegion:function(){var b=this.textInput,f=s.offset(b),
k=this.container;s.offset(k,{left:f.left,top:f.top+b.offsetHeight-1});s.width(k,this.config.containerWidth||b.offsetWidth-2)},_initContainerEvent:function(){var b=this;p.on(b.container,"mousemove",function(k){k=k.target;if(k.nodeName!=="LI")k=s.parent(k,".li");if(s.contains(b.container,k))if(k!==b.selectedItem){b._removeSelectedItem();b._setSelectedItem(k)}});var f=null;p.on(b.container,"mousedown",function(k){f=k.target;b.textInput.onbeforedeactivate=function(){n.event.returnValue=false;b.textInput.onbeforedeactivate=
null};return false});p.on(b.container,"mouseup",function(k){if(b._isInContainer([k.pageX,k.pageY])){k=k.target;if(k==f)if(k.className=="ks-suggest-close-btn")b.hide();else{if(k.nodeName!="LI")k=s.parent(k,".li");if(s.contains(b.container,k)){b._updateInputFromSelectItem(k);b.fire("itemSelect");b.textInput.blur();b._submitForm()}}}})},_submitForm:function(){if(this.config.submitFormOnClickSelect){var b=this.textInput.form;if(b){if(i.createEvent){var f=i.createEvent("MouseEvents");f.initEvent("submit",
true,false);b.dispatchEvent(f)}else i.createEventObject&&b.fireEvent("onsubmit");b.submit()}}},_isInContainer:function(b){var f=this._getContainerRegion();return b[0]>=f.left&&b[0]<=f.right&&b[1]>=f.top&&b[1]<=f.bottom},_initShim:function(){var b=i.createElement("iframe");b.src="about:blank";b.className="ks-suggest-shim";b.style.position="absolute";b.style.visibility="hidden";b.style.border="none";this.container.shim=b;this._setShimRegion();i.body.insertBefore(b,i.body.firstChild)},_setShimRegion:function(){var b=
this.container,f=b.shim;if(f){f.style.left=parseInt(b.style.left)-2+"px";f.style.top=b.style.top;f.style.width=parseInt(b.style.width)+2+"px"}},_initStyle:function(){e.get("#ks-suggest-style")||s.addStyleSheet(".ks-suggest-container{background:white;border:1px solid #999;z-index:99999}.ks-suggest-shim{z-index:99998}.ks-suggest-container li{color:#404040;padding:1px 0 2px;font-size:12px;line-height:18px;float:left;width:100%}.ks-suggest-container li.selected{background-color:#39F;cursor:default}.ks-suggest-key{float:left;text-align:left;padding-left:5px}.ks-suggest-result{float:right;text-align:right;padding-right:5px;color:green}.ks-suggest-container li.selected span{color:#FFF;cursor:default}.ks-suggest-bottom{padding:0 5px 5px}.ks-suggest-close-btn{float:right}.ks-suggest-container li,.suggest-bottom{overflow:hidden;zoom:1;clear:both}.ks-suggest-container{*margin-left:2px;_margin-left:-2px;_margin-top:-3px}",
"ks-suggest-style")},_initResizeEvent:function(){var b=this,f;p.on(n,"resize",function(){f&&clearTimeout(f);f=setTimeout(function(){b._setContainerRegion();b._setShimRegion()},50)})},start:function(){var b=this;m.focusInstance=b;b._timer=setTimeout(function(){b.updateContent();b._timer=setTimeout(arguments.callee,b.config.timerDelay)},b.config.timerDelay);b._isRunning=true},stop:function(){m.focusInstance=null;clearTimeout(this._timer);this._isRunning=false},show:function(){if(!this.isVisible()){var b=
this.container,f=b.shim;b.style.visibility="";if(f){if(!f.style.height)f.style.height=b.offsetHeight-2+"px";f.style.visibility=""}}},hide:function(){if(this.isVisible()){var b=this.container,f=b.shim;if(f)f.style.visibility="hidden";b.style.visibility="hidden"}},isVisible:function(){return this.container.style.visibility!="hidden"},updateContent:function(){if(this._needUpdate()){this._updateQueryValueFromInput();var b=this.query;if(e.trim(b).length)if(this._dataCache[b]!==t){this.returnedData="using cache";
this._fillContainer(this._dataCache[b]);this._displayContainer()}else this.JSONDataSource?this.handleResponse(this.JSONDataSource[b]):this.requestData();else{this._fillContainer("");this.hide()}}},_needUpdate:function(){return this.textInput.value!=this.query},requestData:function(){var b=this;if(!l)b.dataScript=null;if(!b.dataScript){var f=i.createElement("script");f.charset="utf-8";d.insertBefore(f,d.firstChild);b.dataScript=f;if(!l){var k=(new Date).getTime();b._latestScriptTime=k;f.setAttribute("time",
k);p.on(f,"load",function(){b._scriptDataIsOut=f.getAttribute("time")!=b._latestScriptTime})}}b.queryParams="q="+encodeURIComponent(b.query)+"&code=utf-8&callback=g_ks_suggest_callback";b.fire("dataRequest");b.dataScript.src=b.dataSource+"?"+b.queryParams},handleResponse:function(b){if(!this._scriptDataIsOut){this.returnedData=b;this.fire("dataReturn");this.returnedData=this.formatData(this.returnedData);var f="";b=this.returnedData.length;if(b>0){f=i.createElement("ol");for(var k=0;k<b;++k){var u=
this.returnedData[k],v=this.formatItem(u.key,u.result);v.setAttribute("key",u.key);s.addClass(v,k%2?"even":"odd");f.appendChild(v)}f=f}this._fillContainer(f);b>0&&this.appendBottom();e.trim(this.container.innerHTML)&&this.fire("show");this._dataCache[this.query]=this.container.innerHTML;this._displayContainer()}},formatData:function(b){var f=[];if(!b)return f;if(e.isArray(b.result))b=b.result;var k=b.length;if(!k)return f;for(var u,v=0;v<k;++v){u=b[v];f[v]=typeof u==="string"?{key:u}:e.isArray(u)&&
u.length>=2?{key:u[0],result:u[1]}:u}return f},formatItem:function(b,f){var k=i.createElement("li"),u=i.createElement("span");u.className="ks-suggest-key";u.appendChild(i.createTextNode(b));k.appendChild(u);if(f!==t){b=this.config.resultFormat.replace("%result%",f);if(e.trim(b)){f=i.createElement("span");f.className="ks-suggest-result";f.appendChild(i.createTextNode(b));k.appendChild(f)}}return k},appendBottom:function(){var b=i.createElement("div");b.className="ks-suggest-bottom";if(this.config.showCloseBtn){var f=
i.createElement("a");f.href="javascript: void(0)";f.setAttribute("target","_self");f.className="ks-suggest-close-btn";f.appendChild(i.createTextNode(this.config.closeBtnText));b.appendChild(f)}e.trim(b.innerHTML)&&this.container.appendChild(b)},_fillContainer:function(b){if(b.nodeType==1){this.container.innerHTML="";this.container.appendChild(b)}else this.container.innerHTML=b;this.selectedItem=null},_displayContainer:function(){e.trim(this.container.innerHTML)?this.show():this.hide()},selectItem:function(b){var f=
this.container.getElementsByTagName("li");if(f.length!=0)if(this.isVisible()){if(this.selectedItem){b=s[b?"next":"prev"](this.selectedItem);if(!b)this.textInput.value=this.query}else b=f[b?0:f.length-1];this._removeSelectedItem();if(b){this._setSelectedItem(b);this._updateInputFromSelectItem()}}else this.show()},_removeSelectedItem:function(){s.removeClass(this.selectedItem,"selected");this.selectedItem=null},_setSelectedItem:function(b){s.addClass(b,"selected");this.selectedItem=b},_getSelectedItemKey:function(){if(!this.selectedItem)return"";
return this.selectedItem.getAttribute("key")},_updateQueryValueFromInput:function(){this.query=this.textInput.value},_updateInputFromSelectItem:function(){this.textInput.value=this._getSelectedItemKey(this.selectedItem)},_getContainerRegion:function(){var b=this.container,f=s.offset(b),k=f.left;f=f.top;return{left:k,top:f,right:k+b.offsetWidth-1,bottom:f+b.offsetHeight-1}}});n.g_ks_suggest_callback=function(b){m.focusInstance&&setTimeout(function(){m.focusInstance.handleResponse(b)},0)};e.Suggest=
m});
KISSY.add("imagezoom",function(e){function t(d,l){var g=this;if(!(g instanceof t))return new t(d,l);g.image=typeof d==="string"?e.get(d):d;if(g.image){g.origin=null;g.viewer=null;g.bigImage=null;g.config=e.merge(i,l);g.glass=null;g.zoomIcon=null;g.imageReady=false;g.bigImageReady=false;g.timer=null;g.image.onload=function(){if(!g.imageReady){g.imageReady=!g.imageReady;g._init()}};if(!g.imageReady&&g.image.complete&&g.getSize(g.image).height){g.imageReady=!g.imageReady;g._init()}}}var m=e.DOM,s=e.Event,
p=["top","right","bottom","left"],n=["default","glass","follow"],i={type:"default",bigImageSrc:"",bigImageSize:{height:900,width:900},position:"right",offset:10,preload:true,timeout:6E3,glassSize:{height:100,width:100},zoomIcon:true};e.augment(t,{_init:function(){var d=this,l=d.image;d._initContainer();var g=d.config,b=d.glass,f=d.zoomIcon;if(g.bigImageSrc){if(g.preload)(new Image).src=g.bigImageSrc}else g.bigImageSrc=m.attr(l,"src");s.on(d.origin,"mouseenter",function(k){b&&m.removeClass(b,"hidden");
f&&m.addClass(f,"hidden");if(d.viewer)m.removeClass(d.viewer,"hidden");else{d._createZoom(k);d.fire("firstHover")}d.timer=setTimeout(function(){d.bigImageReady||d.showMsg()},d.config.timeout)});s.on(d.origin,"mouseleave",function(){b&&m.addClass(b,"hidden");f&&m.removeClass(f,"hidden");d.viewer&&m.addClass(d.viewer,"hidden");d.timer&&clearTimeout(d.timer)});s.on(d,"firstHover",function(){})},_initContainer:function(){var d=this.config,l,g=this.image;if(m.parent(g).nodeName.toLowerCase()==="a")g=m.parent(g);
l=m.create("<div>");m.addClass(l,"ks-imagezoom-magnifier");m.parent(g).insertBefore(l,g);l.appendChild(g);this.origin=l;if(n[1]==d.type){g=m.create("<div>");m.addClass(g,"ks-imagezoom-glass");m.addClass(g,"hidden");m.css(g,"height",d.glassSize.height+"px");m.css(g,"width",d.glassSize.width+"px");l.appendChild(g);this.glass=g}if(d.zoomIcon){d=m.create("<div>");m.addClass(d,"ks-imagezoom-icon");l.appendChild(d);this.zoomIcon=d}},_createZoom:function(d){var l=this,g=l.config,b;b=m.create("<div>");m.addClass(b,
"ks-imagezoom-viewer");m.addClass(b,"ks-imagezoom-viewer-bk");var f=m.create("<img>");m.attr(f,"src",g.bigImageSrc);b.appendChild(f);n[2]==g.type?l.origin.appendChild(b):m.get("body").appendChild(b);l.bigImage=f;l.viewer=b;l._updateViewer(d,false);l._zoom();l.bigImage.onload=function(){if(!l.bigImageReady){l.bigImageReady=!l.bigImageReady;l._updateViewer(d,true)}};if(!l.bigImageReady&&l.bigImage.complete&&l.getSize(l.bigImage).height){l.bigImageReady=!l.bigImageReady;l._updateViewer(d,true)}},_zoom:function(){var d=
this,l=d.config,g=d.glass,b=d.viewer;s.on(d.origin,"mousemove",function(f){f=d.getGlassOffset(f);if(g){m.css(g,"left",f.left+"px");m.css(g,"top",f.top+"px")}var k=d.getSize(d.image),u=d.getSize(d.bigImage),v=0,q=0,a=Math.round(f.left*u.width/k.width);k=Math.round(f.top*u.height/k.height);if(n[2]==l.type){q=d.getSize(g);v=q.width/2;q=q.height/2}b.scrollLeft=a+v;b.scrollTop=k+q;if(n[2]==l.type){m.css(b,"left",f.left+"px");m.css(b,"top",f.top+"px")}})},_updateViewer:function(d,l){if(l){this.timer&&clearTimeout(this.timer);
this.hideMsg()}var g=this.image,b=this.viewer,f=this.config,k=m.offset(g),u=this.getSize(this.glass),v;if(n[2]==f.type){l=this.getMousePoint(d);f=l.y-k.top;v=l.x-k.left-u.width/2;k=f-u.height/2;l=u.height;u=u.width}else{var q;g=this.getSize(g);var a=this.origin;v=parseInt(m.css(b,"borderTopWidth"));d=parseInt(m.css(b,"borderLeftWidth"));q=l?this.getSize(this.bigImage):f.bigImageSize;l=Math.round(q.height*u.height/g.height);u=Math.round(q.width*u.width/g.width);if(p[0]==f.position){(d=parseInt(m.css(a,
"marginTop")))||(d=0);v=k.top-l-v-f.offset+d;k=k.left}else if(p[2]==f.position){v=g.height+k.top+f.offset;k=k.left}else if(p[3]==f.position){(g=parseInt(m.css(a,"marginLeft")))||(g=0);v=k.top;k=k.left-u-d-f.offset+g}else{v=k.top;k=k.left+g.width+f.offset}}m.css(b,"height",l+"px");m.css(b,"width",u+"px");m.offset(b,{left:k,top:v})},getGlassOffset:function(d){var l=this.image,g={left:0,top:0},b=m.offset(l);d=this.getMousePoint(d);var f=this.getSize(this.glass),k=this.getSize(l);g.left=d.x-b.left-f.width/
2;var u=l=0;if(n[2]==this.config.type){l=f.width/2;u=f.height/2}if(g.left<-l)g.left=0;else if(g.left>k.width-f.width+l)g.left=k.width-f.width;g.top=d.y-b.top-f.height/2;if(g.top<-u)g.top=0;else if(g.top>k.height-f.height+u)g.top=k.height-f.height;return g},getSize:function(d){if(!d)return this.config.glassSize;return{width:d.clientWidth,height:d.clientHeight}},getMousePoint:function(d){return{x:d.pageX,y:d.pageY}},showMsg:function(){var d=e.get("b",this.viewer);if(!d){d=m.create("<b>");this.viewer.appendChild(d);
m.removeClass(this.viewer,"ks-imagezoom-viewer-bk")}m.html(d,"\u037c\u01ac\ufffd\u0772\ufffd\ufffd\ufffd\ufffd\ufffd")},hideMsg:function(){var d=e.get("b",this.viewer);m.html(d,"");m.addClass(this.viewer,"ks-imagezoom-viewer-bk")}},e.EventTarget);e.ImageZoom=t});
