/*
Copyright 2010, KISSY UI Library v1.1.2dev
MIT Licensed
build time: ${build.time}
*/
(function(d,q,r){if(d[q]===r)d[q]={};q=d[q];var t=d.document,j=function(l,f,k,s){if(!f||!l)return l;if(k===r)k=true;var w,x,n;if(s&&(n=s.length))for(w=0;w<n;w++){x=s[w];if(x in f)if(k||!(x in l))l[x]=f[x]}else for(x in f)if(k||!(x in l))l[x]=f[x];return l},m=false,h=[],e=false,p=/^#?([\w-]+)$/;j(q,{version:"1.1.2dev",_init:function(){this.Env={mods:{},guid:0}},add:function(l,f){this.Env.mods[l]={name:l,fn:f};f(this);return this},ready:function(l){e||this._bindReady();m?l.call(d,this):h.push(l);return this},
_bindReady:function(){var l=this,f=t.documentElement.doScroll,k=f?"onreadystatechange":"DOMContentLoaded",s=function(){l._fireReady()};e=true;if(t.readyState==="complete")return s();if(t.addEventListener){var w=function(){t.removeEventListener(k,w,false);s()};t.addEventListener(k,w,false);d.addEventListener("load",s,false)}else{var x=function(){if(t.readyState==="complete"){t.detachEvent(k,x);s()}};t.attachEvent(k,x);d.attachEvent("onload",s);if(d==d.top){var n=function(){try{f("left");s()}catch(a){setTimeout(n,
1)}};n()}}},_fireReady:function(){if(!m){m=true;if(h){for(var l,f=0;l=h[f++];)l.call(d,this);h=null}}},available:function(l,f){if((l=(l+"").match(p)[1])&&q.isFunction(f))var k=1,s=q.later(function(){if(t.getElementById(l)&&(f()||1)||++k>500)s.cancel()},40,true)},mix:j,merge:function(){var l={},f,k=arguments.length;for(f=0;f<k;++f)j(l,arguments[f]);return l},augment:function(){var l=arguments,f=l.length-2,k=l[0],s=l[f],w=l[f+1],x=1;if(!q.isArray(w)){s=w;w=r;f++}if(!q.isBoolean(s)){s=r;f++}for(;x<f;x++)j(k.prototype,
l[x].prototype||l[x],s,w);return k},extend:function(l,f,k,s){if(!f||!l)return l;var w=Object.prototype,x=f.prototype,n=function(a){function b(){}b.prototype=a;return new b}(x);l.prototype=n;n.constructor=l;l.superclass=x;if(f!==Object&&x.constructor===w.constructor)x.constructor=f;k&&j(n,k);s&&j(l,s);return l},namespace:function(){var l=arguments.length,f=null,k,s,w;for(k=0;k<l;++k){w=(""+arguments[k]).split(".");f=this;for(s=d[w[0]]===f?1:0;s<w.length;++s)f=f[w[s]]=f[w[s]]||{}}return f},app:function(l,
f){var k=d[l]||{};j(k,this,true,["_init","add","namespace"]);k._init();return j(d[l]=k,typeof f==="function"?f():f)},log:function(l,f,k){if(this.Config.debug){if(k)l=k+": "+l;if(d.console!==r&&console.log)console[f&&console[f]?f:"log"](l)}return this},error:function(l){if(this.Config.debug)throw l;},guid:function(l){var f=this.Env.guid++ +"";return l?l+f:f}});q._init();q.Config={debug:""}})(window,"KISSY");
KISSY.add("lang",function(d,q){function r(a){var b=typeof a;return a===null||b!=="object"&&b!=="function"}var t=window,j=document,m=location,h=Array.prototype,e=h.indexOf,p=h.filter,l=String.prototype.trim,f=Object.prototype.toString,k=encodeURIComponent,s=decodeURIComponent,w=/^\s+|\s+$/g,x=/^(\w+)\[\]$/,n=/\S/;d.mix(d,{isUndefined:function(a){return a===q},isBoolean:function(a){return typeof a==="boolean"},isString:function(a){return typeof a==="string"},isNumber:function(a){return typeof a==="number"&&
isFinite(a)},isPlainObject:function(a){return a&&f.call(a)==="[object Object]"&&!a.nodeType&&!a.setInterval},isEmptyObject:function(a){for(var b in a)return false;return true},isFunction:function(a){return f.call(a)==="[object Function]"},isArray:function(a){return f.call(a)==="[object Array]"},trim:l?function(a){return a==q?"":l.call(a)}:function(a){return a==q?"":a.toString().replace(w,"")},substitute:function(a,b,g){if(!d.isString(a)||!d.isPlainObject(b))return a;return a.replace(g||/\\?\{([^{}]+)\}/g,
function(c,i){if(c.charAt(0)==="\\")return c.slice(1);return b[i]!==q?b[i]:""})},each:function(a,b,g){var c,i=0,o=a.length,v=o===q||d.isFunction(a);g=g||t;if(v)for(c in a){if(b.call(g,a[c],c,a)===false)break}else for(c=a[0];i<o&&b.call(g,c,i,a)!==false;c=a[++i]);return a},indexOf:e?function(a,b){return e.call(b,a)}:function(a,b){for(var g=0,c=b.length;g<c;++g)if(b[g]===a)return g;return-1},inArray:function(a,b){return d.indexOf(a,b)>-1},makeArray:function(a){if(a===null||a===q)return[];if(d.isArray(a))return a;
if(typeof a.length!=="number"||typeof a==="string"||d.isFunction(a))return[a];if(a.item&&d.UA.ie){for(var b=[],g=0,c=a.length;g<c;++g)b[g]=a[g];return b}return h.slice.call(a)},filter:p?function(a,b,g){return p.call(a,b,g)}:function(a,b,g){var c=[];d.each(a,function(i,o,v){b.call(g,i,o,v)&&c.push(i)});return c},param:function(a,b){if(!d.isPlainObject(a))return"";b=b||"&";var g=[],c,i;for(c in a){i=a[c];c=k(c);if(r(i))g.push(c,"=",k(i+""),b);else if(d.isArray(i)&&i.length)for(var o=0,v=i.length;o<
v;++o)r(i[o])&&g.push(c,"[]=",k(i[o]+""),b)}g.pop();return g.join("")},unparam:function(a,b){if(typeof a!=="string"||(a=d.trim(a)).length===0)return{};var g={};a=a.split(b||"&");for(var c,i,o,v=0,u=a.length;v<u;++v){b=a[v].split("=");c=s(b[0]);try{i=s(b[1]||"")}catch(A){i=b[1]||""}if((o=c.match(x))&&o[1]){g[o[1]]=g[o[1]]||[];g[o[1]].push(i)}else g[c]=i}return g},later:function(a,b,g,c,i){b=b||0;c=c||{};var o=a,v=d.makeArray(i),u;if(typeof a==="string")o=c[a];o||d.error("method undefined");a=function(){o.apply(c,
v)};u=g?setInterval(a,b):setTimeout(a,b);return{id:u,interval:g,cancel:function(){this.interval?clearInterval(u):clearTimeout(u)}}},clone:function(a){var b=a,g,c;if(a&&((g=d.isArray(a))||d.isPlainObject(a))){b=g?[]:{};for(c in a)if(a.hasOwnProperty(c))b[c]=d.clone(a[c])}return b},now:function(){return(new Date).getTime()},globalEval:function(a){if(a&&n.test(a)){var b=j.getElementsByTagName("head")[0]||j.documentElement,g=j.createElement("script");g.text=a;b.insertBefore(g,b.firstChild);b.removeChild(g)}}});
if(m&&m.search&&m.search.indexOf("ks-debug")!==-1)d.Config.debug=true});
KISSY.add("ua",function(d){var q=navigator.userAgent,r="",t="",j,m,h={webkit:0,trident:0,gecko:0,presto:0,chrome:0,safari:0,firefox:0,ie:0,opera:0},e=function(p){var l=0;return parseFloat(p.replace(/\./g,function(){return l++===0?".":""}))};if((j=q.match(/AppleWebKit\/([\d.]*)/))&&j[1]){h[r="webkit"]=e(j[1]);if((j=q.match(/Chrome\/([\d.]*)/))&&j[1])h[t="chrome"]=e(j[1]);else if((j=q.match(/\/([\d.]*) Safari/))&&j[1])h[t="safari"]=e(j[1]);if(/ Mobile\//.test(q))h.mobile="apple";else if(j=q.match(/NokiaN[^\/]*|Android \d\.\d|webOS\/\d\.\d/))h.mobile=
j[0].toLowerCase()}else if((j=q.match(/Presto\/([\d.]*)/))&&j[1]){h[r="presto"]=e(j[1]);if((j=q.match(/Opera\/([\d.]*)/))&&j[1]){h[t="opera"]=e(j[1]);if((j=q.match(/Opera\/.* Version\/([\d.]*)/))&&j[1])h[t]=e(j[1]);if((j=q.match(/Opera Mini[^;]*/))&&j)h.mobile=j[0].toLowerCase();else if((j=q.match(/Opera Mobi[^;]*/))&&j)h.mobile=j[0]}}else if((j=q.match(/MSIE\s([^;]*)/))&&(m=j[1])){h[r="trident"]=0.1;h[t="ie"]=m<8&&document.documentMode?8:m;if((j=q.match(/Trident\/([\d.]*)/))&&j[1])h[r]=e(j[1])}else if(j=
q.match(/Gecko/)){h[r="gecko"]=0.1;if((j=q.match(/rv:([\d.]*)/))&&j[1])h[r]=e(j[1]);if((j=q.match(/Firefox\/([\d.]*)/))&&j[1])h[t="firefox"]=e(j[1])}h.core=r;h.shell=t;h._numberify=e;d.UA=h});KISSY.add("dom",function(d,q){function r(t,j){return t&&t.nodeType===j}d.DOM={_isElementNode:function(t){return r(t,1)},_isKSNode:function(t){return d.Node&&r(t,d.Node.TYPE)},_getWin:function(t){return t&&"scrollTo"in t&&t.document?t:r(t,9)?t.defaultView||t.parentWindow:t===q?window:false},_nodeTypeIs:r}});
KISSY.add("selector",function(d,q){function r(a,b){var g,c=[],i,o;b=t(b);if(d.isString(a)){a=d.trim(a);if(x.test(a)){if(a=j(a.slice(1),b))c=[a]}else if(g=n.exec(a)){i=g[1];o=g[2];g=g[3];if(b=i?j(i,b):b)if(g)if(!i||a.indexOf(f)!==-1)c=h(g,o,b);else{if((a=j(i,b))&&l.hasClass(a,g))c=[a]}else if(o)c=m(o,b)}else if(d.ExternalSelector)return d.ExternalSelector(a,b);else e(a)}else if(a&&(a[s]||a[w]))c=a[s]?[a[s]()]:a[w]();else if(a&&(d.isArray(a)||a.item&&!a.nodeType))c=a;else if(a)c=[a];if(c.item)c=d.makeArray(c);
c.each=function(v,u){return d.each(c,v,u)};return c}function t(a){if(a===q)a=p;else if(d.isString(a)&&x.test(a))a=j(a.slice(1),p);else if(a&&a.nodeType!==1&&a.nodeType!==9)a=null;return a}function j(a,b){if(b.nodeType!==9)b=b.ownerDocument;return b.getElementById(a)}function m(a,b){return b.getElementsByTagName(a)}function h(a,b,g){g=a=g.getElementsByClassName(a);var c=0,i=0,o=a.length,v;if(b&&b!==k){g=[];for(b=b.toUpperCase();c<o;++c){v=a[c];if(v.tagName===b)g[i++]=v}}return g}function e(a){d.error("Unsupported selector: "+
a)}var p=document,l=d.DOM,f=" ",k="*",s="getDOMNode",w=s+"s",x=/^#[\w-]+$/,n=/^(?:#([\w-]+))?\s*([\w-]+|\*)?\.?([\w-]+)?$/;(function(){var a=p.createElement("div");a.appendChild(p.createComment(""));if(a.getElementsByTagName(k).length>0)m=function(b,g){g=g.getElementsByTagName(b);if(b===k){b=[];for(var c=0,i=0,o;o=g[c++];)if(o.nodeType===1)b[i++]=o;g=b}return g}})();p.getElementsByClassName||(h=p.querySelectorAll?function(a,b,g){return g.querySelectorAll((b?b:"")+"."+a)}:function(a,b,g){b=g.getElementsByTagName(b||
k);g=[];var c=0,i=0,o=b.length,v,u;for(a=f+a+f;c<o;++c){v=b[c];if((u=v.className)&&(f+u+f).indexOf(a)>-1)g[i++]=v}return g});d.query=r;d.get=function(a,b){return r(a,b)[0]||null};d.mix(l,{query:r,get:d.get,filter:function(a,b){var g=r(a),c,i,o,v=[];if(d.isString(b)&&(c=n.exec(b))&&!c[1]){i=c[2];o=c[3];b=function(u){return!(i&&u.tagName!==i.toUpperCase()||o&&!l.hasClass(u,o))}}if(d.isFunction(b))v=d.filter(g,b);else if(b&&d.ExternalSelector)v=d.ExternalSelector._filter(a,b);else e(b);return v},test:function(a,
b){a=r(a);return l.filter(a,b).length===a.length}})});
KISSY.add("dom-class",function(d,q){function r(h,e,p,l){if(!(e=d.trim(e)))return l?false:q;h=d.query(h);var f=0,k=h.length;e=e.split(j);for(var s;f<k;f++){s=h[f];if(t._isElementNode(s)){s=p(s,e,e.length);if(s!==q)return s}}if(l)return false}var t=d.DOM,j=/[\.\s]\s*\.?/,m=/[\n\t]/g;d.mix(t,{hasClass:function(h,e){return r(h,e,function(p,l,f){if(p=p.className){p=" "+p+" ";for(var k=0,s=true;k<f;k++)if(p.indexOf(" "+l[k]+" ")<0){s=false;break}if(s)return true}},true)},addClass:function(h,e){r(h,e,function(p,
l,f){var k=p.className;if(k){var s=" "+k+" ";k=k;for(var w=0;w<f;w++)if(s.indexOf(" "+l[w]+" ")<0)k+=" "+l[w];p.className=d.trim(k)}else p.className=e})},removeClass:function(h,e){r(h,e,function(p,l,f){var k=p.className;if(k)if(f){k=(" "+k+" ").replace(m," ");for(var s=0,w;s<f;s++)for(w=" "+l[s]+" ";k.indexOf(w)>=0;)k=k.replace(w," ");p.className=d.trim(k)}else p.className=""})},replaceClass:function(h,e,p){t.removeClass(h,e);t.addClass(h,p)},toggleClass:function(h,e,p){var l=d.isBoolean(p),f;r(h,
e,function(k,s,w){for(var x=0,n;x<w;x++){n=s[x];f=l?!p:t.hasClass(k,n);t[f?"removeClass":"addClass"](k,n)}})}})});
KISSY.add("dom-attr",function(d,q){function r(n,a){return a&&a.nodeName.toUpperCase()===n.toUpperCase()}var t=d.UA,j=t.ie,m=j&&j<8,h=document.documentElement.textContent!==q?"textContent":"innerText",e=d.DOM,p=e._isElementNode,l=function(n){return e._nodeTypeIs(n,3)},f=/href|src|style/,k=/href|src|colspan|rowspan/,s=/\r/g,w=/radio|checkbox/,x={readonly:"readOnly"};m&&d.mix(x,{"for":"htmlFor","class":"className"});d.mix(e,{attr:function(n,a,b){if(d.isPlainObject(a))for(var g in a)e.attr(n,g,a[g]);
else if(a=d.trim(a)){a=a.toLowerCase();a=x[a]||a;if(b===q){n=d.get(n);if(!p(n))return q;var c;f.test(a)||(c=n[a]);if(c===q)c=n.getAttribute(a);if(m)if(k.test(a))c=n.getAttribute(a,2);else if(a==="style")c=n.style.cssText;return c===null?q:c}d.each(d.query(n),function(i){if(p(i))if(a==="style")i.style.cssText=b;else{if(a==="checked")i[a]=!!b;i.setAttribute(a,""+b)}})}},removeAttr:function(n,a){d.each(d.query(n),function(b){if(p(b)){e.attr(b,a,"");b.removeAttribute(a)}})},val:function(n,a){if(a===q){var b=
d.get(n);if(!p(b))return q;if(r("option",b))return(b.attributes.value||{}).specified?b.value:b.text;if(r("select",b)){var g=b.selectedIndex;n=b.options;if(g<0)return null;else if(b.type==="select-one")return e.val(n[g]);b=[];for(var c=0,i=n.length;c<i;++c)n[c].selected&&b.push(e.val(n[c]));return b}if(t.webkit&&w.test(b.type))return b.getAttribute("value")===null?"on":b.value;return(b.value||"").replace(s,"")}d.each(d.query(n),function(o){if(r("select",o)){if(d.isNumber(a))a+="";var v=d.makeArray(a),
u=o.options,A;c=0;for(i=u.length;c<i;++c){A=u[c];A.selected=d.inArray(e.val(A),v)}if(!v.length)o.selectedIndex=-1}else if(p(o))o.value=a})},text:function(n,a){if(a===q){n=d.get(n);if(p(n))return n[h]||"";else if(l(n))return n.nodeValue}else d.each(d.query(n),function(b){if(p(b))b[h]=a;else if(l(b))b.nodeValue=a})}})});
KISSY.add("dom-style",function(d,q){function r(a,b){var g=d.get(a),c=b===p?g.offsetWidth:g.offsetHeight;d.each(b===p?["Left","Right"]:["Top","Bottom"],function(i){c-=parseFloat(j._getComputedStyle(g,"padding"+i))||0;c-=parseFloat(j._getComputedStyle(g,"border"+i+"Width"))||0});return c}function t(a,b,g){var c=g;if(g===l&&k.test(b)){c=0;if(j.css(a,"position")==="absolute"){g=a[b==="left"?"offsetLeft":"offsetTop"];if(m.ie===8||m.opera)g-=f(j.css(a.offsetParent,"border-"+b+"-width"))||0;c=g-(f(j.css(a,
"margin-"+b))||0)}}return c}var j=d.DOM,m=d.UA,h=document,e=h.documentElement,p="width",l="auto",f=parseInt,k=/^left|top$/,s=/width|height|top|left|right|bottom|margin|padding/i,w=/-([a-z])/ig,x=function(a,b){return b.toUpperCase()},n={};d.mix(j,{_CUSTOM_STYLES:n,_getComputedStyle:function(a,b){var g="",c=a.ownerDocument;if(a.style)g=c.defaultView.getComputedStyle(a,null)[b];return g},css:function(a,b,g){if(d.isPlainObject(b))for(var c in b)j.css(a,c,b[c]);else{if(b.indexOf("-")>0)b=b.replace(w,x);
b=n[b]||b;if(g===q){a=d.get(a);c="";if(a&&a.style){c=b.get?b.get(a):a.style[b];if(c===""&&!b.get)c=t(a,b,j._getComputedStyle(a,b))}return c===q?"":c}else{if(g===null||g==="")g="";else if(!isNaN(new Number(g))&&s.test(b))g+="px";(b===p||b==="height")&&parseFloat(g)<0||d.each(d.query(a),function(i){if(i&&i.style){b.set?b.set(i,g):(i.style[b]=g);if(g==="")i.style.cssText||i.removeAttribute("style")}})}}},width:function(a,b){if(b===q)return r(a,p);else j.css(a,p,b)},height:function(a,b){if(b===q)return r(a,
"height");else j.css(a,"height",b)},addStyleSheet:function(a,b){var g;if(b)g=d.get(b);g||(g=j.create("<style>",{id:b}));d.get("head").appendChild(g);if(g.styleSheet)g.styleSheet.cssText=a;else g.appendChild(h.createTextNode(a))}});if(e.style.cssFloat!==q)n["float"]="cssFloat";else if(e.style.styleFloat!==q)n["float"]="styleFloat"});
KISSY.add("dom-style-ie",function(d,q){if(d.UA.ie){var r=d.DOM,t=document,j=t.documentElement,m=r._CUSTOM_STYLES,h=/^-?\d+(?:px)?$/i,e=/^-?\d/,p=/^width|height$/;try{if(j.style.opacity===q&&j.filters)m.opacity={get:function(f){var k=100;try{k=f.filters["DXImageTransform.Microsoft.Alpha"].opacity}catch(s){try{k=f.filters("alpha").opacity}catch(w){}}return k/100+""},set:function(f,k){f=f.style;f.zoom=1;f.filter="alpha(opacity="+k*100+")"}}}catch(l){d.log("IE filters ActiveX is disabled. ex = "+l)}if(!(t.defaultView||
{}).getComputedStyle&&j.currentStyle)r._getComputedStyle=function(f,k){var s=f.style,w=f.currentStyle[k];if(p.test(k))w=r[k](f)+"px";else if(!h.test(w)&&e.test(w)){var x=s.left,n=f.runtimeStyle.left;f.runtimeStyle.left=f.currentStyle.left;s.left=k==="fontSize"?"1em":w||0;w=s.pixelLeft+"px";s.left=x;f.runtimeStyle.left=n}return w}}});
KISSY.add("dom-offset",function(d,q){function r(v){var u=0,A=0,z=f(v[a]);if(v[o]){v=v[o]();u=v[b];A=v[g];if(m.mobile!=="apple"){u+=j[c](z);A+=j[i](z)}}return{left:u,top:A}}function t(v,u){if(j.css(v,x)==="static")v.style[x]=n;var A=r(v),z={},y,B;for(B in u){y=w(j.css(v,B),10)||0;z[B]=y+u[B]-A[B]}j.css(v,z)}var j=d.DOM,m=d.UA,h=window,e=document,p=j._isElementNode,l=j._nodeTypeIs,f=j._getWin,k=e.compatMode==="CSS1Compat",s=Math.max,w=parseInt,x="position",n="relative",a="ownerDocument",b="left",g=
"top",c="scrollLeft",i="scrollTop",o="getBoundingClientRect";d.mix(j,{offset:function(v,u){if(!(v=d.get(v))||!v[a])return null;if(u===q)return r(v);t(v,u)},scrollIntoView:function(v,u,A,z){if((v=d.get(v))&&v[a]){z=z===q?true:!!z;A=A===q?true:!!A;if(!u||u===h)return v.scrollIntoView(A);u=d.get(u);if(l(u,9))u=f(u);var y=u&&"scrollTo"in u&&u.document,B=j.offset(v),C=y?{left:j.scrollLeft(u),top:j.scrollTop(u)}:j.offset(u),D={left:B[b]-C[b],top:B[g]-C[g]};B=y?j.viewportHeight(u):u.clientHeight;C=y?j.viewportWidth(u):
u.clientWidth;var E=j[c](u),F=j[i](u),G=E+C,M=F+B,I=v.offsetHeight;v=v.offsetWidth;var H=D.left+E-(w(j.css(u,"borderLeftWidth"))||0);D=D.top+F-(w(j.css(u,"borderTopWidth"))||0);var N=H+v,J=D+I,K,L;if(I>B||D<F||A)K=D;else if(J>M)K=J-B;if(z)if(v>C||H<E||A)L=H;else if(N>G)L=N-C;if(y){if(K!==q||L!==q)u.scrollTo(L,K)}else{if(K!==q)u[i]=K;if(L!==q)u[c]=L}}}});d.each(["Left","Top"],function(v,u){var A="scroll"+v;j[A]=function(z){var y=0,B=f(z),C;if(B&&(C=B.document))y=B[u?"pageYOffset":"pageXOffset"]||C.documentElement[A]||
C.body[A];else if(p(z=d.get(z)))y=z[A];return y}});d.each(["Width","Height"],function(v){j["doc"+v]=function(u){u=u||e;return s(k?u.documentElement["scroll"+v]:u.body["scroll"+v],j["viewport"+v](u))};j["viewport"+v]=function(u){var A="inner"+v;u=f(u);var z=u.document;return A in u?u[A]:k?z.documentElement["client"+v]:z.body["client"+v]}})});
KISSY.add("dom-traversal",function(d,q){function r(h,e,p,l){if(!(h=d.get(h)))return null;if(e===q)e=1;var f=null,k,s;if(d.isNumber(e)&&e>=0){if(e===0)return h;k=0;s=e;e=function(){return++k===s}}for(;h=h[p];)if(m(h)&&(!e||j.test(h,e))&&(!l||l(h))){f=h;break}return f}function t(h,e,p){var l=[];var f=h=d.get(h);if(h&&p)f=h.parentNode;if(f){p=0;for(f=f.firstChild;f;f=f.nextSibling)if(m(f)&&f!==h&&(!e||j.test(f,e)))l[p++]=f}return l}var j=d.DOM,m=j._isElementNode;d.mix(j,{parent:function(h,e){return r(h,
e,"parentNode",function(p){return p.nodeType!=11})},next:function(h,e){return r(h,e,"nextSibling")},prev:function(h,e){return r(h,e,"previousSibling")},siblings:function(h,e){return t(h,e,true)},children:function(h,e){return t(h,e)},contains:function(h,e){var p=false;if((h=d.get(h))&&(e=d.get(e)))if(h.contains)return h.contains(e);else if(h.compareDocumentPosition)return!!(h.compareDocumentPosition(e)&16);else for(;!p&&(e=e.parentNode);)p=e==h;return p}})});
KISSY.add("dom-create",function(d,q){function r(z,y){s(z)&&d.isPlainObject(y)&&p.attr(z,y);return z}function t(z,y){var B=null,C;if(z&&(z.push||z.item)&&z[0]){y=y||z[0].ownerDocument;B=y.createDocumentFragment();if(z.item)z=d.makeArray(z);y=0;for(C=z.length;y<C;y++)B.appendChild(z[y])}else d.log("Unable to convert "+z+" to fragment.");return B}function j(z){var y=z.cloneNode(true);if(l.ie<8)y.innerHTML=z.innerHTML;return y}function m(z,y,B,C){if(B){var D=d.guid("ks-tmp-"),E=new RegExp(a);y+='<span id="'+
D+'"></span>';d.available(D,function(){var F=d.get("head"),G,M,I,H,N,J;for(E.lastIndex=0;G=E.exec(y);)if((I=(M=G[1])?M.match(g):false)&&I[2]){G=e.createElement("script");G.src=I[2];if((H=M.match(c))&&H[2])G.charset=H[2];G.async=true;F.appendChild(G)}else if((J=G[2])&&J.length>0)d.globalEval(J);(N=e.getElementById(D))&&p.remove(N);d.isFunction(C)&&C()});h(z,y)}else{h(z,y);d.isFunction(C)&&C()}}function h(z,y){y=(y+"").replace(a,"");try{z.innerHTML=y}catch(B){for(;z.firstChild;)z.removeChild(z.firstChild);
y&&z.appendChild(p.create(y))}}var e=document,p=d.DOM,l=d.UA,f=l.ie,k=p._nodeTypeIs,s=p._isElementNode,w=p._isKSNode,x=e.createElement("div"),n=/<(\w+)/,a=/<script([^>]*)>([\s\S]*?)<\/script>/ig,b=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,g=/\ssrc=(['"])(.*?)\1/i,c=/\scharset=(['"])(.*?)\1/i;d.mix(p,{create:function(z,y,B){if(k(z,1)||k(z,3))return j(z);if(w(z))return j(z[0]);if(!(z=d.trim(z)))return null;var C=null;C=p._creators;var D,E="div",F;if(D=b.exec(z))C=(B||e).createElement(D[1]);else{if((D=n.exec(z))&&
(F=D[1])&&d.isFunction(C[F=F.toLowerCase()]))E=F;z=C[E](z,B).childNodes;C=z.length===1?z[0].parentNode.removeChild(z[0]):t(z,B||e)}return r(C,y)},_creators:{div:function(z,y){y=y?y.createElement("div"):x;y.innerHTML=z;return y}},html:function(z,y,B,C){if(y===q){z=d.get(z);if(s(z))return z.innerHTML}else d.each(d.query(z),function(D){s(D)&&m(D,y,B,C)})},remove:function(z){d.each(d.query(z),function(y){s(y)&&y.parentNode&&y.parentNode.removeChild(y)})}});if(l.gecko||f){var i=p._creators,o=p.create,
v=/(?:\/(?:thead|tfoot|caption|col|colgroup)>)+\s*<tbody/,u={option:"select",td:"tr",tr:"tbody",tbody:"table",col:"colgroup",legend:"fieldset"};for(var A in u)(function(z){i[A]=function(y,B){return o("<"+z+">"+y+"</"+z+">",null,B)}})(u[A]);if(f){i.script=function(z,y){y=y?y.createElement("div"):x;y.innerHTML="-"+z;y.removeChild(y.firstChild);return y};if(f<8)i.tbody=function(z,y){y=o("<table>"+z+"</table>",null,y);var B=y.children.tags("tbody")[0];y.children.length>1&&B&&!v.test(z)&&B.parentNode.removeChild(B);
return y}}d.mix(i,{optgroup:i.option,th:i.td,thead:i.tbody,tfoot:i.tbody,caption:i.tbody,colgroup:i.tbody})}});KISSY.add("dom-insertion",function(d){d.mix(d.DOM,{insertBefore:function(q,r){if((q=d.get(q))&&(r=d.get(r))&&r.parentNode)r.parentNode.insertBefore(q,r);return q},insertAfter:function(q,r){if((q=d.get(q))&&(r=d.get(r))&&r.parentNode)r.nextSibling?r.parentNode.insertBefore(q,r.nextSibling):r.parentNode.appendChild(q);return q}})});
KISSY.add("event",function(d,q){function r(n,a,b,g,c){if(d.isString(a))a=d.query(a);if(d.isArray(a)){d.each(a,function(i){x[n](i,b,g,c)});return true}if((b=d.trim(b))&&b.indexOf(k)>0){d.each(b.split(k),function(i){x[n](a,i,g,c)});return true}}function t(n){return h(n)?n[f]:-1}function j(n,a){if(!h(n))return d.error("Text or comment node is not valid event target.");try{n[f]=a}catch(b){d.error(b)}}function m(n){try{n[f]=q;delete n[f]}catch(a){}}function h(n){return n&&n.nodeType!==3&&n.nodeType!==
8}var e=document,p=e.addEventListener?function(n,a,b,g){n.addEventListener&&n.addEventListener(a,b,!!g)}:function(n,a,b){n.attachEvent&&n.attachEvent("on"+a,b)},l=e.removeEventListener?function(n,a,b,g){n.removeEventListener&&n.removeEventListener(a,b,!!g)}:function(n,a,b){n.detachEvent&&n.detachEvent("on"+a,b)},f="ksEventTargetId",k=" ",s=d.now(),w={},x={EVENT_GUID:f,special:{},add:function(n,a,b,g){g=g||n;if(!r("add",n,a,b,g)){var c=t(n),i,o,v,u,A;if(!(c===-1||!a||!d.isFunction(b))){if(!c){j(n,
c=s++);w[c]={target:n,events:{}}}o=w[c].events;if(!o[a]){i=((c=!n.isCustomEventTarget)||n._supportSpecialEvent)&&x.special[a]||{};v=function(z,y){if(!z||!z.fixed){z=new d.EventObject(n,z,a);d.isPlainObject(y)&&d.mix(z,y)}i.setup&&i.setup(z);return(i.handle||x._handle)(n,z,o[a].listeners)};o[a]={handle:v,listeners:[]};u=i.fix||a;A=i.capture;if(c)p(n,u,v,A);else n._addEvent&&n._addEvent(u,v,A)}o[a].listeners.push({fn:b,scope:g})}}},remove:function(n,a,b,g){g=g||n;if(!r("remove",n,a,b,g)){var c=t(n),
i,o,v,u,A,z,y;if(c!==-1)if(c&&(i=w[c]))if(i.target===n){i=i.events||{};if(o=i[a]){v=o.listeners;z=v.length;if(d.isFunction(b)&&z){A=u=0;for(y=[];u<z;++u)if(b!==v[u].fn||g!==v[u].scope)y[A++]=v[u];o.listeners=y;z=y.length}if(b===q||z===0){if(n.isCustomEventTarget)n._addEvent&&n._removeEvent(a,o.handle);else l(n,a,o.handle);delete i[a]}}if(a===q||d.isEmptyObject(i)){for(a in i)x.remove(n,a);delete w[c];m(n)}}}},_handle:function(n,a,b){b=b.slice(0);for(var g,c=0,i=b.length;c<i;++c){g=b[c];g=g.fn.call(g.scope||
n,a);if(g===false&&n.isCustomEventTarget||a.isImmediatePropagationStopped)break}return g},_getCache:function(n){return w[n]},_simpleAdd:p,_simpleRemove:l};x.on=x.add;d.Event=x});
KISSY.add("event-object",function(d,q){function r(m,h,e){this.currentTarget=m;this.originalEvent=h||{};if(h){this.type=h.type;this._fix()}else{this.type=e;this.target=m}this.currentTarget=m;this.fixed=true}var t=document,j="altKey attrChange attrName bubbles button cancelable charCode clientX clientY ctrlKey currentTarget data detail eventPhase fromElement handler keyCode layerX layerY metaKey newValue offsetX offsetY originalTarget pageX pageY prevValue relatedNode relatedTarget screenX screenY shiftKey srcElement target toElement view wheelDelta which".split(" ");d.augment(r,
{_fix:function(){var m=this.originalEvent,h=j.length,e,p=this.currentTarget;for(p=p.nodeType===9?p:p.ownerDocument||t;h;){e=j[--h];this[e]=m[e]}if(!this.target)this.target=this.srcElement||t;if(this.target.nodeType===3)this.target=this.target.parentNode;if(!this.relatedTarget&&this.fromElement)this.relatedTarget=this.fromElement===this.target?this.toElement:this.fromElement;if(this.pageX===q&&this.clientX!==q){m=p.documentElement;h=p.body;this.pageX=this.clientX+(m&&m.scrollLeft||h&&h.scrollLeft||
0)-(m&&m.clientLeft||h&&h.clientLeft||0);this.pageY=this.clientY+(m&&m.scrollTop||h&&h.scrollTop||0)-(m&&m.clientTop||h&&h.clientTop||0)}if(this.which===q)this.which=this.charCode!==q?this.charCode:this.keyCode;if(this.metaKey===q)this.metaKey=this.ctrlKey;if(!this.which&&this.button!==q)this.which=this.button&1?1:this.button&2?3:this.button&4?2:0},preventDefault:function(){var m=this.originalEvent;if(m.preventDefault)m.preventDefault();else m.returnValue=false;this.isDefaultPrevented=true},stopPropagation:function(){var m=
this.originalEvent;if(m.stopPropagation)m.stopPropagation();else m.cancelBubble=true;this.isPropagationStopped=true},stopImmediatePropagation:function(){var m=this.originalEvent;m.stopImmediatePropagation?m.stopImmediatePropagation():this.stopPropagation();this.isImmediatePropagationStopped=true},halt:function(m){m?this.stopImmediatePropagation():this.stopPropagation();this.preventDefault()}});d.EventObject=r});
KISSY.add("event-target",function(d,q){var r=d.Event,t=r.EVENT_GUID;d.EventTarget={isCustomEventTarget:true,fire:function(j,m){if((j=((r._getCache(this[t]||-1)||{}).events||{})[j])&&d.isFunction(j.handle))return j.handle(q,m);return this},on:function(j,m,h){r.add(this,j,m,h);return this},detach:function(j,m){r.remove(this,j,m);return this}}});
KISSY.add("event-mouseenter",function(d){var q=d.Event;d.UA.ie||d.each([{name:"mouseenter",fix:"mouseover"},{name:"mouseleave",fix:"mouseout"}],function(r){q.special[r.name]={fix:r.fix,setup:function(t){t.type=r.name},handle:function(t,j,m){var h=j.relatedTarget;try{for(;h&&h!==t;)h=h.parentNode;h!==t&&q._handle(t,j,m)}catch(e){}}}})});
KISSY.add("event-focusin",function(d){var q=d.Event;document.addEventListener&&d.each([{name:"focusin",fix:"focus"},{name:"focusout",fix:"blur"}],function(r){q.special[r.name]={fix:r.fix,capture:true,setup:function(t){t.type=r.name}}})});
KISSY.add("node",function(d){function q(j,m,h){var e;if(!(this instanceof q))return new q(j,m,h);if(j){if(t(j,1)||t(j,3))e=j;else if(d.isString(j))e=r.create(j,m,h);this[0]=e}else this.length=0}var r=d.DOM,t=r._nodeTypeIs;q.TYPE="-ks-Node";d.augment(q,{length:1,getDOMNode:function(){return this[0]},nodeType:q.TYPE});d.one=function(j,m){return(j=d.get(j,m))?new q(j):null};d.Node=q});
KISSY.add("nodelist",function(d){function q(j){if(!(this instanceof q))return new q(j);t.push.apply(this,j||[])}var r=d.DOM,t=Array.prototype;d.mix(q.prototype,{length:0,item:function(j){var m=null;if(r._isElementNode(this[j]))m=new d.Node(this[j]);return m},getDOMNodes:function(){return t.slice.call(this)},each:function(j,m){var h=this.length,e=0,p;for(p=new d.Node(this[0]);e<h&&j.call(m||p,p,e,this)!==false;p=new d.Node(this[++e]));return this}});d.all=function(j,m){return new q(d.query(j,m,true))};
d.NodeList=q});
KISSY.add("node-attach",function(d,q){function r(w,arguments,x,n){var a=[this[w?l:p]()].concat(d.makeArray(arguments));if(arguments[x]===q)return n.apply(j,a);else{n.apply(j,a);return this}}function t(w,x){d.each(w,function(n){d.each([h,e],function(a,b){a[n]=function(g){switch(x){case f:return function(){return r.call(this,b,arguments,1,g)};case k:return function(){return r.call(this,b,arguments,0,g)};case s:return function(){var c=this[b?l:p]();return(c=g.apply(j,[c].concat(d.makeArray(arguments))))?new (d[d.isArray(c)?
"NodeList":"Node"])(c):null};default:return function(){var c=this[b?l:p]();c=g.apply(j,[c].concat(d.makeArray(arguments)));return c===q?this:c}}}(j[n])})})}var j=d.DOM,m=d.Event,h=d.Node.prototype,e=d.NodeList.prototype,p="getDOMNode",l=p+"s",f=1,k=2,s=4;d.mix(h,{one:function(w){return d.one(w,this[0])},all:function(w){return d.all(w,this[0])}});t(["hasClass","addClass","removeClass","replaceClass","toggleClass"]);t(["attr","removeAttr"],f);t(["val","text"],k);t(["css"],f);t(["width","height"],k);
t(["offset"],k);t(["scrollIntoView"]);t(["parent","next","prev","siblings","children"],s);t(["contains"]);t(["html"],k);t(["remove"]);d.each(["insertBefore","insertAfter"],function(w){h[w]=function(x){j[w].call(j,this[0],x);return this}});d.each([h,e],function(w){d.mix(w,{append:function(x){x&&d.each(this,function(n){n.appendChild(j.create(x))});return this},appendTo:function(x){if((x=d.get(x))&&x.appendChild)d.each(this,function(n){x.appendChild(n)});return this}})});d.each([h,e],function(w){d.mix(w,
d.EventTarget,{_supportSpecialEvent:true});w._addEvent=function(x,n,a){for(var b=0,g=this.length;b<g;b++)m._simpleAdd(this[b],x,n,a)};w._removeEvent=function(x,n,a){for(var b=0,g=this.length;b<g;b++)m._simpleRemove(this[b],x,n,a)};delete w.fire})});
KISSY.add("ajax",function(d){var q=document,r=q.createElement("script").readyState?function(t,j){t.onreadystatechange=function(){var m=t.readyState;if(m==="loaded"||m==="complete"){t.onreadystatechange=null;j.call(this)}}}:function(t,j){t.onload=j};d.mix(d,{getScript:function(t,j,m){var h=d.get("head")||q.documentElement,e=q.createElement("script");e.src=t;if(m)e.charset=m;e.async=true;d.isFunction(j)&&r(e,j);h.insertBefore(e,h.firstChild)}})});
KISSY.add("cookie",function(d){function q(m){return d.isString(m)&&m!==""}var r=document,t=encodeURIComponent,j=decodeURIComponent;d.Cookie={get:function(m){var h;if(q(m))if(m=r.cookie.match("(?:^| )"+m+"(?:(?:=([^;]*))|;|$)"))h=m[1]?j(m[1]):"";return h},set:function(m,h,e,p,l,f){h=t(h);var k=e;if(typeof k==="number"){k=new Date;k.setTime(k.getTime()+e*864E5)}if(k instanceof Date)h+="; expires="+k.toUTCString();if(q(p))h+="; domain="+p;if(q(l))h+="; path="+l;if(f)h+="; secure";r.cookie=m+"="+h},remove:function(m,
h,e,p){this.set(m,"",0,h,e,p)}}});
KISSY.add("json",function(d){function q(f){return f<10?"0"+f:f}function r(f){m.lastIndex=0;return m.test(f)?'"'+f.replace(m,function(k){var s=p[k];return typeof s==="string"?s:"\\u"+("0000"+k.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+f+'"'}function t(f,k){var s,w,x=h,n,a=k[f];if(a&&typeof a==="object"&&typeof a.toJSON==="function")a=a.toJSON(f);if(typeof l==="function")a=l.call(k,f,a);switch(typeof a){case "string":return r(a);case "number":return isFinite(a)?String(a):"null";case "boolean":case "null":return String(a);
case "object":if(!a)return"null";h+=e;n=[];if(Object.prototype.toString.apply(a)==="[object Array]"){w=a.length;for(f=0;f<w;f+=1)n[f]=t(f,a)||"null";k=n.length===0?"[]":h?"[\n"+h+n.join(",\n"+h)+"\n"+x+"]":"["+n.join(",")+"]";h=x;return k}if(l&&typeof l==="object"){w=l.length;for(f=0;f<w;f+=1){s=l[f];if(typeof s==="string")if(k=t(s,a))n.push(r(s)+(h?": ":":")+k)}}else for(s in a)if(Object.hasOwnProperty.call(a,s))if(k=t(s,a))n.push(r(s)+(h?": ":":")+k);k=n.length===0?"{}":h?"{\n"+h+n.join(",\n"+h)+
"\n"+x+"}":"{"+n.join(",")+"}";h=x;return k}}d=d.JSON=window.JSON||{};if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+q(this.getUTCMonth()+1)+"-"+q(this.getUTCDate())+"T"+q(this.getUTCHours())+":"+q(this.getUTCMinutes())+":"+q(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()}}var j=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
m=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,h,e,p={"\u0008":"\\b","\t":"\\t","\n":"\\n","\u000c":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},l;if(typeof d.stringify!=="function")d.stringify=function(f,k,s){var w;e=h="";if(typeof s==="number")for(w=0;w<s;w+=1)e+=" ";else if(typeof s==="string")e=s;if((l=k)&&typeof k!=="function"&&(typeof k!=="object"||typeof k.length!=="number"))throw new Error("JSON.stringify");return t("",
{"":f})};if(typeof d.parse!=="function")d.parse=function(f,k){function s(w,x){var n,a,b=w[x];if(b&&typeof b==="object")for(n in b)if(Object.hasOwnProperty.call(b,n)){a=s(b,n);if(a!==undefined)b[n]=a;else delete b[n]}return k.call(w,x,b)}f=String(f);j.lastIndex=0;if(j.test(f))f=f.replace(j,function(w){return"\\u"+("0000"+w.charCodeAt(0).toString(16)).slice(-4)});if(/^[\],:{}\s]*$/.test(f.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,
"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){f=eval("("+f+")");return typeof k==="function"?s({"":f},""):f}throw new SyntaxError("JSON.parse");}});
(function(){function d(a,b,g,c,i,o){i=0;for(var v=c.length;i<v;i++){var u=c[i];if(u){u=u[a];for(var A=false;u;){if(u.sizcache===g){A=c[u.sizset];break}if(u.nodeType===1&&!o){u.sizcache=g;u.sizset=i}if(u.nodeName.toLowerCase()===b){A=u;break}u=u[a]}c[i]=A}}}function q(a,b,g,c,i,o){i=0;for(var v=c.length;i<v;i++){var u=c[i];if(u){u=u[a];for(var A=false;u;){if(u.sizcache===g){A=c[u.sizset];break}if(u.nodeType===1){if(!o){u.sizcache=g;u.sizset=i}if(typeof b!=="string"){if(u===b){A=true;break}}else if(e.filter(b,
[u]).length>0){A=u;break}}u=u[a]}c[i]=A}}}var r=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,t=0,j=Object.prototype.toString,m=false,h=true;[0,0].sort(function(){h=false;return 0});var e=function(a,b,g,c){g=g||[];var i=b=b||document;if(b.nodeType!==1&&b.nodeType!==9)return[];if(!a||typeof a!=="string")return g;var o=[],v,u,A,z,y=true,B=e.isXML(b),C=a,D;do{r.exec("");if(v=r.exec(C)){C=v[3];o.push(v[1]);if(v[2]){z=
v[3];break}}}while(v);if(o.length>1&&l.exec(a))if(o.length===2&&p.relative[o[0]])u=n(o[0]+o[1],b);else for(u=p.relative[o[0]]?[b]:e(o.shift(),b);o.length;){a=o.shift();if(p.relative[a])a+=o.shift();u=n(a,u)}else{if(!c&&o.length>1&&b.nodeType===9&&!B&&p.match.ID.test(o[0])&&!p.match.ID.test(o[o.length-1])){v=e.find(o.shift(),b,B);b=v.expr?e.filter(v.expr,v.set)[0]:v.set[0]}if(b){v=c?{expr:o.pop(),set:s(c)}:e.find(o.pop(),o.length===1&&(o[0]==="~"||o[0]==="+")&&b.parentNode?b.parentNode:b,B);u=v.expr?
e.filter(v.expr,v.set):v.set;if(o.length>0)A=s(u);else y=false;for(;o.length;){v=D=o.pop();if(p.relative[D])v=o.pop();else D="";if(v==null)v=b;p.relative[D](A,v,B)}}else A=[]}A||(A=u);A||e.error(D||a);if(j.call(A)==="[object Array]")if(y)if(b&&b.nodeType===1)for(a=0;A[a]!=null;a++){if(A[a]&&(A[a]===true||A[a].nodeType===1&&e.contains(b,A[a])))g.push(u[a])}else for(a=0;A[a]!=null;a++)A[a]&&A[a].nodeType===1&&g.push(u[a]);else g.push.apply(g,A);else s(A,g);if(z){e(z,i,g,c);e.uniqueSort(g)}return g};
e.uniqueSort=function(a){if(x){m=h;a.sort(x);if(m)for(var b=1;b<a.length;b++)a[b]===a[b-1]&&a.splice(b--,1)}return a};e.matches=function(a,b){return e(a,null,null,b)};e.find=function(a,b,g){var c;if(!a)return[];for(var i=0,o=p.order.length;i<o;i++){var v=p.order[i],u;if(u=p.leftMatch[v].exec(a)){var A=u[1];u.splice(1,1);if(A.substr(A.length-1)!=="\\"){u[1]=(u[1]||"").replace(/\\/g,"");c=p.find[v](u,b,g);if(c!=null){a=a.replace(p.match[v],"");break}}}}c||(c=b.getElementsByTagName("*"));return{set:c,
expr:a}};e.filter=function(a,b,g,c){for(var i=a,o=[],v=b,u,A,z=b&&b[0]&&e.isXML(b[0]);a&&b.length;){for(var y in p.filter)if((u=p.leftMatch[y].exec(a))!=null&&u[2]){var B=p.filter[y],C,D;D=u[1];A=false;u.splice(1,1);if(D.substr(D.length-1)!=="\\"){if(v===o)o=[];if(p.preFilter[y])if(u=p.preFilter[y](u,v,g,o,c,z)){if(u===true)continue}else A=C=true;if(u)for(var E=0;(D=v[E])!=null;E++)if(D){C=B(D,u,E,v);var F=c^!!C;if(g&&C!=null)if(F)A=true;else v[E]=false;else if(F){o.push(D);A=true}}if(C!==undefined){g||
(v=o);a=a.replace(p.match[y],"");if(!A)return[];break}}}if(a===i)if(A==null)e.error(a);else break;i=a}return v};e.error=function(a){throw"Syntax error, unrecognized expression: "+a;};var p=e.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(['"]*)(.*?)\3|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\((even|odd|[\dn+\-]*)\))?/,
POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(a){return a.getAttribute("href")}},relative:{"+":function(a,b){var g=typeof b==="string",c=g&&!/\W/.test(b);g=g&&!c;if(c)b=b.toLowerCase();c=0;for(var i=a.length,o;c<i;c++)if(o=a[c]){for(;(o=o.previousSibling)&&o.nodeType!==1;);a[c]=g||o&&o.nodeName.toLowerCase()===
b?o||false:o===b}g&&e.filter(b,a,true)},">":function(a,b){var g=typeof b==="string",c,i=0,o=a.length;if(g&&!/\W/.test(b))for(b=b.toLowerCase();i<o;i++){if(c=a[i]){g=c.parentNode;a[i]=g.nodeName.toLowerCase()===b?g:false}}else{for(;i<o;i++)if(c=a[i])a[i]=g?c.parentNode:c.parentNode===b;g&&e.filter(b,a,true)}},"":function(a,b,g){var c=t++,i=q,o;if(typeof b==="string"&&!/\W/.test(b)){o=b=b.toLowerCase();i=d}i("parentNode",b,c,a,o,g)},"~":function(a,b,g){var c=t++,i=q,o;if(typeof b==="string"&&!/\W/.test(b)){o=
b=b.toLowerCase();i=d}i("previousSibling",b,c,a,o,g)}},find:{ID:function(a,b,g){if(typeof b.getElementById!=="undefined"&&!g)return(a=b.getElementById(a[1]))?[a]:[]},NAME:function(a,b){if(typeof b.getElementsByName!=="undefined"){var g=[];b=b.getElementsByName(a[1]);for(var c=0,i=b.length;c<i;c++)b[c].getAttribute("name")===a[1]&&g.push(b[c]);return g.length===0?null:g}},TAG:function(a,b){return b.getElementsByTagName(a[1])}},preFilter:{CLASS:function(a,b,g,c,i,o){a=" "+a[1].replace(/\\/g,"")+" ";
if(o)return a;o=0;for(var v;(v=b[o])!=null;o++)if(v)if(i^(v.className&&(" "+v.className+" ").replace(/[\t\n]/g," ").indexOf(a)>=0))g||c.push(v);else if(g)b[o]=false;return false},ID:function(a){return a[1].replace(/\\/g,"")},TAG:function(a){return a[1].toLowerCase()},CHILD:function(a){if(a[1]==="nth"){var b=/(-?)(\d*)n((?:\+|-)?\d*)/.exec(a[2]==="even"&&"2n"||a[2]==="odd"&&"2n+1"||!/\D/.test(a[2])&&"0n+"+a[2]||a[2]);a[2]=b[1]+(b[2]||1)-0;a[3]=b[3]-0}a[0]=t++;return a},ATTR:function(a,b,g,c,i,o){b=
a[1].replace(/\\/g,"");if(!o&&p.attrMap[b])a[1]=p.attrMap[b];if(a[2]==="~=")a[4]=" "+a[4]+" ";return a},PSEUDO:function(a,b,g,c,i){if(a[1]==="not")if((r.exec(a[3])||"").length>1||/^\w/.test(a[3]))a[3]=e(a[3],null,null,b);else{a=e.filter(a[3],b,g,true^i);g||c.push.apply(c,a);return false}else if(p.match.POS.test(a[0])||p.match.CHILD.test(a[0]))return true;return a},POS:function(a){a.unshift(true);return a}},filters:{enabled:function(a){return a.disabled===false&&a.type!=="hidden"},disabled:function(a){return a.disabled===
true},checked:function(a){return a.checked===true},selected:function(a){return a.selected===true},parent:function(a){return!!a.firstChild},empty:function(a){return!a.firstChild},has:function(a,b,g){return!!e(g[3],a).length},header:function(a){return/h\d/i.test(a.nodeName)},text:function(a){return"text"===a.type},radio:function(a){return"radio"===a.type},checkbox:function(a){return"checkbox"===a.type},file:function(a){return"file"===a.type},password:function(a){return"password"===a.type},submit:function(a){return"submit"===
a.type},image:function(a){return"image"===a.type},reset:function(a){return"reset"===a.type},button:function(a){return"button"===a.type||a.nodeName.toLowerCase()==="button"},input:function(a){return/input|select|textarea|button/i.test(a.nodeName)}},setFilters:{first:function(a,b){return b===0},last:function(a,b,g,c){return b===c.length-1},even:function(a,b){return b%2===0},odd:function(a,b){return b%2===1},lt:function(a,b,g){return b<g[3]-0},gt:function(a,b,g){return b>g[3]-0},nth:function(a,b,g){return g[3]-
0===b},eq:function(a,b,g){return g[3]-0===b}},filter:{PSEUDO:function(a,b,g,c){var i=b[1],o=p.filters[i];if(o)return o(a,g,b,c);else if(i==="contains")return(a.textContent||a.innerText||e.getText([a])||"").indexOf(b[3])>=0;else if(i==="not"){b=b[3];g=0;for(c=b.length;g<c;g++)if(b[g]===a)return false;return true}else e.error("Syntax error, unrecognized expression: "+i)},CHILD:function(a,b){var g=b[1],c=a;switch(g){case "only":case "first":for(;c=c.previousSibling;)if(c.nodeType===1)return false;if(g===
"first")return true;c=a;case "last":for(;c=c.nextSibling;)if(c.nodeType===1)return false;return true;case "nth":g=b[2];var i=b[3];if(g===1&&i===0)return true;b=b[0];var o=a.parentNode;if(o&&(o.sizcache!==b||!a.nodeIndex)){var v=0;for(c=o.firstChild;c;c=c.nextSibling)if(c.nodeType===1)c.nodeIndex=++v;o.sizcache=b}a=a.nodeIndex-i;return g===0?a===0:a%g===0&&a/g>=0}},ID:function(a,b){return a.nodeType===1&&a.getAttribute("id")===b},TAG:function(a,b){return b==="*"&&a.nodeType===1||a.nodeName.toLowerCase()===
b},CLASS:function(a,b){return(" "+(a.className||a.getAttribute("class"))+" ").indexOf(b)>-1},ATTR:function(a,b){var g=b[1];a=p.attrHandle[g]?p.attrHandle[g](a):a[g]!=null?a[g]:a.getAttribute(g);g=a+"";var c=b[2];b=b[4];return a==null?c==="!=":c==="="?g===b:c==="*="?g.indexOf(b)>=0:c==="~="?(" "+g+" ").indexOf(b)>=0:!b?g&&a!==false:c==="!="?g!==b:c==="^="?g.indexOf(b)===0:c==="$="?g.substr(g.length-b.length)===b:c==="|="?g===b||g.substr(0,b.length+1)===b+"-":false},POS:function(a,b,g,c){var i=p.setFilters[b[2]];
if(i)return i(a,g,b,c)}}},l=p.match.POS,f=function(a,b){return"\\"+(b-0+1)};for(var k in p.match){p.match[k]=new RegExp(p.match[k].source+/(?![^\[]*\])(?![^\(]*\))/.source);p.leftMatch[k]=new RegExp(/(^(?:.|\r|\n)*?)/.source+p.match[k].source.replace(/\\(\d+)/g,f))}var s=function(a,b){a=Array.prototype.slice.call(a,0);if(b){b.push.apply(b,a);return b}return a};try{Array.prototype.slice.call(document.documentElement.childNodes,0)}catch(w){s=function(a,b){b=b||[];var g=0;if(j.call(a)==="[object Array]")Array.prototype.push.apply(b,
a);else if(typeof a.length==="number")for(var c=a.length;g<c;g++)b.push(a[g]);else for(;a[g];g++)b.push(a[g]);return b}}var x;if(document.documentElement.compareDocumentPosition)x=function(a,b){if(!a.compareDocumentPosition||!b.compareDocumentPosition){if(a==b)m=true;return a.compareDocumentPosition?-1:1}a=a.compareDocumentPosition(b)&4?-1:a===b?0:1;if(a===0)m=true;return a};else if("sourceIndex"in document.documentElement)x=function(a,b){if(!a.sourceIndex||!b.sourceIndex){if(a==b)m=true;return a.sourceIndex?
-1:1}a=a.sourceIndex-b.sourceIndex;if(a===0)m=true;return a};else if(document.createRange)x=function(a,b){if(!a.ownerDocument||!b.ownerDocument){if(a==b)m=true;return a.ownerDocument?-1:1}var g=a.ownerDocument.createRange(),c=b.ownerDocument.createRange();g.setStart(a,0);g.setEnd(a,0);c.setStart(b,0);c.setEnd(b,0);a=g.compareBoundaryPoints(Range.START_TO_END,c);if(a===0)m=true;return a};e.getText=function(a){for(var b="",g,c=0;a[c];c++){g=a[c];if(g.nodeType===3||g.nodeType===4)b+=g.nodeValue;else if(g.nodeType!==
8)b+=e.getText(g.childNodes)}return b};(function(){var a=document.createElement("div"),b="script"+(new Date).getTime();a.innerHTML="<a name='"+b+"'/>";var g=document.documentElement;g.insertBefore(a,g.firstChild);if(document.getElementById(b)){p.find.ID=function(c,i,o){if(typeof i.getElementById!=="undefined"&&!o)return(i=i.getElementById(c[1]))?i.id===c[1]||typeof i.getAttributeNode!=="undefined"&&i.getAttributeNode("id").nodeValue===c[1]?[i]:undefined:[]};p.filter.ID=function(c,i){var o=typeof c.getAttributeNode!==
"undefined"&&c.getAttributeNode("id");return c.nodeType===1&&o&&o.nodeValue===i}}g.removeChild(a);g=a=null})();(function(){var a=document.createElement("div");a.appendChild(document.createComment(""));if(a.getElementsByTagName("*").length>0)p.find.TAG=function(b,g){g=g.getElementsByTagName(b[1]);if(b[1]==="*"){b=[];for(var c=0;g[c];c++)g[c].nodeType===1&&b.push(g[c]);g=b}return g};a.innerHTML="<a href='#'></a>";if(a.firstChild&&typeof a.firstChild.getAttribute!=="undefined"&&a.firstChild.getAttribute("href")!==
"#")p.attrHandle.href=function(b){return b.getAttribute("href",2)};a=null})();document.querySelectorAll&&function(){var a=e,b=document.createElement("div");b.innerHTML="<p class='TEST'></p>";if(!(b.querySelectorAll&&b.querySelectorAll(".TEST").length===0)){e=function(c,i,o,v){i=i||document;if(!v&&i.nodeType===9&&!e.isXML(i))try{return s(i.querySelectorAll(c),o)}catch(u){}return a(c,i,o,v)};for(var g in a)e[g]=a[g];b=null}}();(function(){var a=document.createElement("div");a.innerHTML="<div class='test e'></div><div class='test'></div>";
if(!(!a.getElementsByClassName||a.getElementsByClassName("e").length===0)){a.lastChild.className="e";if(a.getElementsByClassName("e").length!==1){p.order.splice(1,0,"CLASS");p.find.CLASS=function(b,g,c){if(typeof g.getElementsByClassName!=="undefined"&&!c)return g.getElementsByClassName(b[1])};a=null}}})();e.contains=document.compareDocumentPosition?function(a,b){return!!(a.compareDocumentPosition(b)&16)}:function(a,b){return a!==b&&(a.contains?a.contains(b):true)};e.isXML=function(a){return(a=(a?
a.ownerDocument||a:0).documentElement)?a.nodeName!=="HTML":false};var n=function(a,b){var g=[],c="",i;for(b=b.nodeType?[b]:b;i=p.match.PSEUDO.exec(a);){c+=i[0];a=a.replace(p.match.PSEUDO,"")}a=p.relative[a]?a+"*":a;i=0;for(var o=b.length;i<o;i++)e(a,b[i],g);return e.filter(c,g)};KISSY.ExternalSelector=e;KISSY.ExternalSelector._filter=function(a,b){return e.matches(b,KISSY.query(a))}})();
KISSY.add("anim-easing",function(d){var q=Math,r=q.PI,t=q.pow,j=q.sin,m=1.70158,h={easeNone:function(e){return e},easeIn:function(e){return e*e},easeOut:function(e){return(2-e)*e},easeBoth:function(e){return(e*=2)<1?0.5*e*e:0.5*(1- --e*(e-2))},easeInStrong:function(e){return e*e*e*e},easeOutStrong:function(e){return 1- --e*e*e*e},easeBothStrong:function(e){return(e*=2)<1?0.5*e*e*e*e:0.5*(2-(e-=2)*e*e*e)},elasticIn:function(e){if(e===0||e===1)return e;return-(t(2,10*(e-=1))*j((e-0.075)*2*r/0.3))},
elasticOut:function(e){if(e===0||e===1)return e;return t(2,-10*e)*j((e-0.075)*2*r/0.3)+1},elasticBoth:function(e){if(e===0||(e*=2)===2)return e;if(e<1)return-0.5*t(2,10*(e-=1))*j((e-0.1125)*2*r/0.45);return t(2,-10*(e-=1))*j((e-0.1125)*2*r/0.45)*0.5+1},backIn:function(e){if(e===1)e-=0.0010;return e*e*((m+1)*e-m)},backOut:function(e){return(e-=1)*e*((m+1)*e+m)+1},backBoth:function(e){if((e*=2)<1)return 0.5*e*e*(((m*=1.525)+1)*e-m);return 0.5*((e-=2)*e*(((m*=1.525)+1)*e+m)+2)},bounceIn:function(e){return 1-
h.bounceOut(1-e)},bounceOut:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+0.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+0.9375:7.5625*(e-=2.625/2.75)*e+0.984375},bounceBoth:function(e){if(e<0.5)return h.bounceIn(e*2)*0.5;return h.bounceOut(e*2-1)*0.5+0.5}};d.Easing=h});
KISSY.add("anim",function(d,q){function r(n,a,b,g,c){if(n=d.get(n)){if(!(this instanceof r))return new r(n,a,b,g,c);var i=d.isPlainObject(b);a=a;this.domEl=n;if(d.isPlainObject(a))a=d.param(a,";").replace(/=/g,":");this.props=t(a);this.targetStyle=a;if(i)n=d.merge(x,b);else{n=d.clone(x);b&&(n.duration=f(b,10)||1);d.isString(g)&&(g=l[g]);d.isFunction(g)&&(n.easing=g);d.isFunction(c)&&(n.complete=c)}this.config=n;d.isFunction(c)&&this.on(w,c)}}function t(n){var a={},b=s.length,g;k.innerHTML='<div style="'+
n+'"></div>';for(n=k.firstChild.style;b--;)if(g=n[s[b]])a[s[b]]=j(g);return a}function j(n){var a=f(n);n=(n+"").replace(/^[-\d\.]+/,"");return isNaN(a)?{v:n,u:"",f:h}:{v:a,u:n,f:m}}function m(n,a,b){return(n+(a-n)*b).toFixed(3)}function h(n,a,b){for(var g=2,c,i,o=[],v=[];c=3,i=arguments[g-1],g--;)if(e(i,0,4)==="rgb(")for(i=i.match(/\d+/g);c--;)o.push(~~i[c]);else if(e(i,0)==="#"){if(i.length===4)i="#"+e(i,1)+e(i,1)+e(i,2)+e(i,2)+e(i,3)+e(i,3);for(;c--;)o.push(parseInt(e(i,1+c*2,2),16))}else return a;
for(;c--;){g=~~(o[c+3]+(o[c]-o[c+3])*b);v.push(g<0?0:g>255?255:g)}return"rgb("+v.join(",")+")"}function e(n,a,b){return n.substr(a,b||1)}var p=d.DOM,l=d.Easing,f=parseFloat,k=p.create("<div>"),s="backgroundColor borderBottomColor borderBottomWidth borderBottomStyle borderLeftColor borderLeftWidth borderLeftStyle borderRightColor borderRightWidth borderRightStyle borderSpacing borderTopColor borderTopWidth borderTopStyle bottom color font fontFamily fontSize fontWeight height left letterSpacing lineHeight marginBottom marginLeft marginRight marginTop maxHeight maxWidth minHeight minWidth opacity outlineColor outlineOffset outlineWidth paddingBottom paddingLeft paddingRight paddingTop right textIndent top width wordSpacing zIndex".split(" "),
w="complete",x={duration:1,easing:l.easeNone};d.augment(r,d.EventTarget,{run:function(){var n=this,a=n.config,b=n.domEl,g=a.duration*1E3,c=a.easing,i=d.now(),o=i+g,v=n.props,u={},A;for(A in v)u[A]=j(p.css(b,A));if(n.fire("start")!==false){n.stop();n.timer=d.later(a=function(){var z=d.now(),y=z>o?1:(z-i)/g,B,C,D;for(A in v){B=u[A];C=v[A];if(C.v==0)C.u=B.u;if(B.u!==C.u)B.v=0;p.css(b,A,C.f(B.v,C.v,c(y))+C.u)}if(n.fire("step")===false||(D=z>o)){n.stop();D&&n.fire(w)}},13,true);a();return n}},stop:function(n){var a=
this.domEl,b=this.targetStyle;if(this.timer){this.timer.cancel();this.timer=q}if(n){d.UA.ie&&b.indexOf("opacity")>-1&&p.css(a,"opacity",this.props.opacity.v);a.style.cssText+=";"+b;this.fire(w)}return this}});d.Anim=r});KISSY.add("anim-node-plugin",function(d,q){var r=d.Anim;d.each([d.Node.prototype,d.NodeList.prototype],function(t){t.animate=function(){var j=d.makeArray(arguments);d.each(this,function(m){r.apply(q,[m].concat(j)).run()});return this}})});
KISSY.add("datalazyload",function(d,q){function r(f,k){if(!(this instanceof r))return new r(f,k);if(k===q){k=f;f=[h]}d.isArray(f)||(f=[d.get(f)||h]);this.containers=f;this.config=d.merge(l,k);this._init()}var t=d.DOM,j=d.Event,m=window,h=document,e="scroll",p="resize",l={mod:"manual",diff:"default",placeholder:"none"};d.augment(r,{_init:function(){this.threshold=this._getThreshold();this._filterItems();this._getItemsLength()&&this._initLoadEvent()},_filterItems:function(){var f=this.containers,k,
s,w,x=[],n=[];k=0;for(s=f.length;k<s;++k){w=d.query("img",f[k]);x=x.concat(d.filter(w,this._filterImg,this));w=d.query("textarea",f[k]);n=n.concat(d.filter(w,this._filterArea,this))}this.images=x;this.areas=n},_filterImg:function(f){var k=f.getAttribute("data-ks-lazyload"),s=this.threshold,w=this.config.placeholder;if(this.config.mod==="manual"){if(k){if(w!=="none")f.src=w;return true}}else if(t.offset(f).top>s&&!k){t.attr(f,"data-ks-lazyload",f.src);if(w!=="none")f.src=w;else f.removeAttribute("src");
return true}},_filterArea:function(f){return t.hasClass(f,"ks-datalazyload")},_initLoadEvent:function(){function f(){s||(s=d.later(function(){k();s=null},100))}function k(){w._loadItems();if(w._getItemsLength()===0){j.remove(m,e,f);j.remove(m,p,f)}}var s,w=this;j.on(m,e,f);j.on(m,p,function(){w.threshold=w._getThreshold();f()});w._getItemsLength()&&d.ready(function(){k()})},_loadItems:function(){this._loadImgs();this._loadAreas()},_loadImgs:function(){this.images=d.filter(this.images,this._loadImg,
this)},_loadImg:function(f){var k=this.threshold+t.scrollTop();if(t.offset(f).top<=k)this._loadImgSrc(f);else return true},_loadImgSrc:function(f,k){k=k||"data-ks-lazyload";var s=f.getAttribute(k);if(s&&f.src!=s){f.src=s;f.removeAttribute(k)}},_loadAreas:function(){this.areas=d.filter(this.areas,this._loadArea,this)},_loadArea:function(f){var k=t.css(f,"display")==="none";if(t.offset(k?f.parentNode:f).top<=this.threshold+t.scrollTop())this._loadAreaData(f.parentNode,f);else return true},_loadAreaData:function(f,
k){k.style.display="none";k.className="";var s=t.create("<div>");f.insertBefore(s,k);t.html(s,k.value,true)},_getThreshold:function(){var f=this.config.diff,k=t.viewportHeight();return f==="default"?2*k:k+f},_getItemsLength:function(){return this.images.length+this.areas.length},loadCustomLazyData:function(f,k){var s=this,w,x;d.isArray(f)||(f=[d.get(f)]);d.each(f,function(n){switch(k){case "img-src":x=n.nodeName==="IMG"?[n]:d.query("img",n);d.each(x,function(a){s._loadImgSrc(a,"data-ks-lazyload-custom")});
break;default:(w=d.get("textarea",n))&&t.hasClass(w,"ks-datalazyload-custom")&&s._loadAreaData(n,w)}})}});d.mix(r,r.prototype,true,["loadCustomLazyData","_loadImgSrc","_loadAreaData"]);d.DataLazyload=r});
KISSY.add("flash-ua",function(d){function q(){var l;if(navigator.plugins&&navigator.mimeTypes.length)l=(navigator.plugins["Shockwave Flash"]||0).description;else if(window.ActiveXObject)try{l=(new ActiveXObject("ShockwaveFlash.ShockwaveFlash")).GetVariable("$version")}catch(f){}if(l)return r(l)}function r(l){return l.match(/(\d)+/g)}function t(l){var f=d.isString(l)?r(l):l;l=l;if(d.isArray(f))l=parseFloat(f[0]+"."+j(f[1],3)+j(f[2],5));return l||0}function j(l,f){for(var k=(l+"").length;k++<f;)l="0"+
l;return l}var m=d.UA,h,e,p=true;m.fpv=function(l){if(l||p){p=false;h=q();e=t(h)}return h};m.fpvGEQ=function(l,f){p&&m.fpv(f);return!!e&&e>=t(l)}});KISSY.add("flash",function(d){d.Flash={swfs:{},length:0}});
KISSY.add("flash-embed",function(d){function q(l,f,k){var s=t.create("<param>");t.attr(s,{name:f,value:k});l.appendChild(s)}var r=d.UA,t=d.DOM,j=d.Flash,m=/object|embed/i,h=encodeURIComponent,e={wmode:"",allowscriptaccess:"",allownetworking:"",allowfullscreen:"",play:"false",loop:"",menu:"",quality:"",scale:"",salign:"",bgcolor:"",devicefont:"",base:"",swliveconnect:"",seamlesstabbing:""},p={params:{},attrs:{width:215,height:138},version:9};d.mix(j,{fpv:r.fpv,fpvGEQ:r.fpvGEQ,add:function(l,f,k){var s,
w;f=j._normalize(f);f=d.merge(p,f);f.attrs=d.merge(p.attrs,f.attrs);if(l=d.get(l)){if(!l.id)l.id=d.guid("ks-flash-");w=f.attrs.id=l.id;if(r.fpv()){if(!r.fpvGEQ(f.version)){this._callback(k,0,w,l);if(!((s=f.xi)&&d.isString(s)))return;f.src=s}if(m.test(l.nodeName))this._register(l,f,k);else f.src?this._embed(l,f,k):this._callback(k,-3,w,l)}else this._callback(k,-1,w,l)}else this._callback(k,-2)},get:function(l){return j.swfs[l]},remove:function(l){if(l=j.get("#"+l)){t.remove(l);delete j.swfs[l.id];
j.length-=1}},contains:function(l){var f=j.swfs,k,s=false;if(d.isString(l))s=l in f;else for(k in f)if(f[k]===l){s=true;break}return s},_register:function(l,f,k){f=f.attrs.id;if(r.gecko||r.opera)l=d.query("object",l)[0]||l;j._addSWF(f,l);j._callback(k,1,f,l)},_embed:function(l,f,k){var s=j._createSWF(f.src,f.attrs,f.params);if(r.ie)l.outerHTML=s.outerHTML;else l.parentNode.replaceChild(s,l);l=d.get("#"+l.id);j._register(l,f,k)},_callback:function(l,f,k,s){f&&d.isFunction(l)&&l({status:f,id:k,swf:s})},
_addSWF:function(l,f){if(l&&f){j.swfs[l]=f;j.length+=1}},_createSWF:function(l,f,k){var s=t.create("<object>"),w;t.attr(s,f);if(r.ie){t.attr(s,"classid","clsid:d27cdb6e-ae6d-11cf-96b8-444553540000");q(s,"movie",l)}else t.attr(s,{type:"application/x-shockwave-flash",data:l,name:f.id});for(w in k)w in e&&q(s,w,k[w]);k.flashvars&&q(s,"flashvars",j.toFlashVars(k.flashvars));return s},_normalize:function(l){var f,k,s,w=l;if(d.isPlainObject(l)){w={};for(s in l){f=s.toLowerCase();k=l[s];if(f!=="flashvars")k=
j._normalize(k);w[f]=k}}return w},toFlashVars:function(l){if(!d.isPlainObject(l))return"";var f,k,s=[];for(f in l){k=l[f];if(d.isString(k))k=h(k);else{k=d.JSON.stringify(k);if(!k)continue;k=k.replace(/:"([^"]+)/g,function(w,x){return':"'+h(x)})}s.push(f+"="+k)}return s.join("&").replace(/\"/g,"'")}})});
KISSY.add("switchable",function(d,q){function r(m,h){h=h||{};if(!("markupType"in h))if(h.panelCls)h.markupType=1;else if(h.panels)h.markupType=2;h=d.merge(r.Config,h);this.container=d.get(m);this.config=h;this.activeIndex=h.activeIndex;this._init()}var t=d.DOM,j=d.Event;r.Config={markupType:0,navCls:"ks-switchable-nav",contentCls:"ks-switchable-content",triggerCls:"ks-switchable-trigger",panelCls:"ks-switchable-panel",triggers:[],panels:[],hasTriggers:true,triggerType:"mouse",delay:0.1,activeIndex:0,
activeTriggerCls:"ks-active",steps:1,viewSize:[]};r.Plugins=[];d.augment(r,d.EventTarget,{_init:function(){var m=this,h=m.config;if(m.fire("beforeInit")!==false){m._parseMarkup();h.hasTriggers&&m._bindTriggers();d.each(r.Plugins,function(e){e.init&&e.init(m)});m.fire("init")}},_parseMarkup:function(){var m=this.container,h=this.config,e,p=[],l=[];switch(h.markupType){case 0:if(e=d.get("."+h.navCls,m))p=t.children(e);e=d.get("."+h.contentCls,m);l=t.children(e);break;case 1:p=d.query("."+h.triggerCls,
m);l=d.query("."+h.panelCls,m);break;case 2:p=h.triggers;l=h.panels;break}m=l.length;this.length=m/h.steps;if(h.hasTriggers&&m>0&&p.length===0)p=this._generateTriggersMarkup(this.length);this.triggers=d.makeArray(p);this.panels=d.makeArray(l);this.content=e||l[0].parentNode},_generateTriggersMarkup:function(m){var h=this.config,e=t.create("<ul>"),p,l;e.className=h.navCls;for(l=0;l<m;l++){p=t.create("<li>");if(l===this.activeIndex)p.className=h.activeTriggerCls;p.innerHTML=l+1;e.appendChild(p)}this.container.appendChild(e);
return t.children(e)},_bindTriggers:function(){var m=this,h=m.config,e=m.triggers,p,l,f=e.length;for(l=0;l<f;l++)(function(k){p=e[k];j.on(p,"click focus",function(){m._onFocusTrigger(k)});if(h.triggerType==="mouse"){j.on(p,"mouseenter",function(){m._onMouseEnterTrigger(k)});j.on(p,"mouseleave",function(){m._onMouseLeaveTrigger(k)})}})(l)},_onFocusTrigger:function(m){if(this._triggerIsValid()){this._cancelSwitchTimer();this.switchTo(m)}},_onMouseEnterTrigger:function(m){var h=this;if(h._triggerIsValid())h.switchTimer=
d.later(function(){h.switchTo(m)},h.config.delay*1E3)},_onMouseLeaveTrigger:function(){this._cancelSwitchTimer()},_triggerIsValid:function(m){return this.activeIndex!==m},_cancelSwitchTimer:function(){if(this.switchTimer){this.switchTimer.cancel();this.switchTimer=q}},switchTo:function(m,h){var e=this.config,p=this.triggers,l=this.panels,f=this.activeIndex,k=e.steps,s=f*k,w=m*k;if(!this._triggerIsValid())return this;if(this.fire("beforeSwitch",{toIndex:m})===false)return this;if(e.hasTriggers)this._switchTrigger(f>
-1?p[f]:null,p[m]);if(h===q)h=m>f?"forward":"backward";this._switchView(l.slice(s,s+k),l.slice(w,w+k),m,h);this.activeIndex=m;return this},_switchTrigger:function(m,h){var e=this.config.activeTriggerCls;m&&t.removeClass(m,e);t.addClass(h,e)},_switchView:function(m,h,e){t.css(m,"display","none");t.css(h,"display","block");this._fireOnSwitch(e)},_fireOnSwitch:function(m){this.fire("switch",{currentIndex:m})},prev:function(){var m=this.activeIndex;this.switchTo(m>0?m-1:this.length-1,"backward")},next:function(){var m=
this.activeIndex;this.switchTo(m<this.length-1?m+1:0,"forward")}});d.Switchable=r});
KISSY.add("switchable-autoplay",function(d,q){var r=d.Event,t=d.Switchable;d.mix(t.Config,{autoplay:false,interval:5,pauseOnHover:true});t.Plugins.push({name:"autoplay",init:function(j){function m(){p=d.later(function(){j.paused||j.switchTo(j.activeIndex<j.length-1?j.activeIndex+1:0,"forward")},e,true)}var h=j.config,e=h.interval*1E3,p;if(h.autoplay){if(h.pauseOnHover){r.on(j.container,"mouseenter",function(){if(p){p.cancel();p=q}j.paused=true});r.on(j.container,"mouseleave",function(){j.paused=false;
m()})}m()}}})});
KISSY.add("switchable-effect",function(d,q){var r=d.DOM,t=d.Anim,j=d.Switchable,m;d.mix(j.Config,{effect:"none",duration:0.5,easing:"easeNone"});j.Effects={none:function(h,e,p){r.css(h,"display","none");r.css(e,"display","block");p()},fade:function(h,e,p){h.length!==1&&d.error("fade effect only supports steps == 1.");var l=this,f=l.config,k=h[0],s=e[0];l.anim&&l.anim.stop(true);r.css(s,"opacity",1);l.anim=(new t(k,{opacity:0},f.duration,f.easing,function(){l.anim=q;r.css(s,"z-index",9);r.css(k,"z-index",
1);p()})).run()},scroll:function(h,e,p,l){var f=this;h=f.config;e=h.effect==="scrollx";var k={};k[e?"left":"top"]=-(f.viewSize[e?0:1]*l)+"px";f.anim&&f.anim.stop();f.anim=(new t(f.content,k,h.duration,h.easing,function(){f.anim=q;p()})).run()}};m=j.Effects;m.scrollx=m.scrolly=m.scroll;j.Plugins.push({name:"effect",init:function(h){var e=h.config,p=e.effect,l=h.panels,f=h.content,k=e.steps,s=h.activeIndex,w=l.length;h.viewSize=[e.viewSize[0]||l[0].offsetWidth*k,e.viewSize[1]||l[0].offsetHeight*k];
if(p!=="none"){d.each(l,function(b){r.css(b,"display","block")});switch(p){case "scrollx":case "scrolly":r.css(f,"position","absolute");r.css(f.parentNode,"position","relative");if(p==="scrollx"){r.css(l,"float","left");r.width(f,h.viewSize[0]*(w/k))}break;case "fade":var x=s*k,n=x+k-1,a;d.each(l,function(b,g){a=g>=x&&g<=n;r.css(b,{opacity:a?1:0,position:"absolute",zIndex:a?9:1})});break}}}});d.augment(j,{_switchView:function(h,e,p,l){var f=this,k=f.config.effect;(d.isFunction(k)?k:m[k]).call(f,h,
e,function(){f._fireOnSwitch(p)},p,l)}})});
KISSY.add("switchable-circular",function(d,q){function r(a,b,g,c,i){var o=this;a=o.config;b=o.length;var v=o.activeIndex,u=a.scrollType===x,A=u?p:l,z=o.viewSize[u?0:1];u=-z*c;var y={},B,C=i===w;if(B=C&&v===0&&c===b-1||i===s&&v===b-1&&c===0)u=t.call(o,o.panels,c,C,A,z);y[A]=u+k;o.anim&&o.anim.stop();o.anim=(new d.Anim(o.content,y,a.duration,a.easing,function(){B&&j.call(o,o.panels,c,C,A,z);o.anim=q;g()})).run()}function t(a,b,g,c,i){var o=this.config.steps;b=this.length;var v=g?b-1:0,u=(v+1)*o;for(o=
v*o;o<u;o++){m.css(a[o],h,e);m.css(a[o],c,(g?-1:1)*i*b)}return g?i:-i*b}function j(a,b,g,c,i){var o=this.config.steps;b=this.length;var v=g?b-1:0,u=(v+1)*o;for(o=v*o;o<u;o++){m.css(a[o],h,f);m.css(a[o],c,f)}m.css(this.content,c,g?-i*(b-1):f)}var m=d.DOM,h="position",e="relative",p="left",l="top",f="",k="px",s="forward",w="backward",x="scrollx",n=d.Switchable;d.mix(n.Config,{circular:false});n.Plugins.push({name:"circular",init:function(a){a=a.config;if(a.circular&&(a.effect===x||a.effect==="scrolly")){a.scrollType=
a.effect;a.effect=r}}})});
KISSY.add("switchable-lazyload",function(d){var q=d.DOM,r="beforeSwitch",t="img-src",j="area-data",m={},h=d.Switchable;m[t]="data-ks-lazyload-custom";m[j]="ks-datalazyload-custom";d.mix(h.Config,{lazyDataType:j});h.Plugins.push({name:"lazyload",init:function(e){function p(x){var n=k.steps;x=x.toIndex*n;f.loadCustomLazyData(e.panels.slice(x,x+n),s);l()&&e.detach(r,p)}function l(){var x,n,a,b=s===t;if(x=b?"img":s===j?"textarea":""){x=d.query(x,e.container);n=0;for(a=x.length;n<a;n++)if(b?q.attr(x[n],
w):q.hasClass(x[n],w))return false}return true}var f=d.DataLazyload,k=e.config,s=k.lazyDataType,w=m[s];!f||!s||!w||e.on(r,p)}})});KISSY.add("switchable-autorender",function(d){d.Switchable.autoRender=function(q,r,t){r="."+(r||"KS_");t=t||"data-ks-switchable";d.each(["Switchable","Tabs","Slide","Carousel","Accordion"],function(j){d.each(d.query(r+j,q),function(m){try{var h=m.getAttribute(t);if(h)h=h.replace(/'/g,'"');new d[j](m,d.JSON.parse(h))}catch(e){d.log("Switchable.autoRender: "+e,"warn")}})})}});
KISSY.add("tabs",function(d){function q(r,t){if(!(this instanceof q))return new q(r,t);q.superclass.constructor.call(this,r,t)}d.extend(q,d.Switchable);d.Tabs=q});KISSY.add("slide",function(d){function q(t,j){if(!(this instanceof q))return new q(t,j);q.superclass.constructor.call(this,t,d.merge(r,j))}var r={autoplay:true,circular:true};d.extend(q,d.Switchable);d.Slide=q});
KISSY.add("carousel",function(d,q){function r(f,k){var s=this;if(!(s instanceof r))return new r(f,k);s.on("init",function(){t(s)});r.superclass.constructor.call(s,f,d.merge(l,k))}function t(f){var k=f.config,s=k.disableBtnCls;d.each(["prev","next"],function(w){var x=f[w+"Btn"]=d.get(h+k[w+"BtnCls"],f.container);m.on(x,"click",function(n){n.preventDefault();j.hasClass(x,s)||f[w]()})});k.circular||f.on("switch",function(w){w=w.currentIndex;w=w===0?f[e]:w===f.length-1?f[p]:q;j.removeClass([f[e],f[p]],
s);w&&j.addClass(w,s)});m.on(f.panels,"click focus",function(){f.fire("itemSelected",{item:this})})}var j=d.DOM,m=d.Event,h=".",e="prevBtn",p="nextBtn",l={circular:true,prevBtnCls:"ks-switchable-prev-btn",nextBtnCls:"ks-switchable-next-btn",disableBtnCls:"ks-switchable-disable-btn"};d.extend(r,d.Switchable);d.Carousel=r});
KISSY.add("accordion",function(d){function q(j,m){if(!(this instanceof q))return new q(j,m);q.superclass.constructor.call(this,j,d.merge(t,m))}var r=d.DOM,t={markupType:1,triggerType:"click",multiple:false};d.extend(q,d.Switchable);d.Accordion=q;d.augment(q,{_triggerIsValid:function(j){return this.activeIndex!==j||this.config.multiple},_switchView:function(j,m,h){var e=this.config,p=m[0];if(e.multiple){r.toggleClass(this.triggers[h],e.activeTriggerCls);r.css(p,"display",p.style.display=="none"?"block":
"none");this._fireOnSwitch(h)}else q.superclass._switchView.call(this,j,m,h)}})});
KISSY.add("suggest",function(d,q){function r(c,i,o){if(!(this instanceof r))return new r(c,i,o);this.textInput=d.get(c);i+=i.indexOf("?")===-1?"?":"&";this.dataSource=i+"code=utf-8&callback="+w;this.config=d.merge(g,o);this.queryParams=this.query=x;this._dataCache={};this._init()}function t(c){c.style.visibility=x}function j(c){c.style.visibility=n}function m(c,i){if(i.nodeType===1){h.html(c,x);c.appendChild(i)}else h.html(c,i)}var h=d.DOM,e=d.Event,p=window,l=document,f,k=d.get("head"),s=d.UA.ie,
w="g_ks_suggest_callback",x="",n="hidden",a=parseInt,b=/^(input|button|a)$/i,g={containerCls:x,resultFormat:"%result%",closeBtnText:"\u5173\u95ed",shim:s===6,submitOnSelect:true};d.augment(r,d.EventTarget,{_init:function(){f=l.body;this._initTextInput();this._initContainer();this.config.shim&&this._initShim();this._initStyle();this._initEvent()},_initTextInput:function(){var c=this,i=c.textInput,o=false,v=0;h.attr(i,"autocomplete","off");c.config.autoFocus&&i.focus();e.on(i,"keydown",function(u){u=
u.keyCode;if(u===27){c.hide();i.value=c.query}else if(u>32&&u<41)if(i.value){if(u===40||u===38)if(v++===0){c._isRunning&&c.stop();o=true;c._selectItem(u===40)}else if(v==3)v=0}else i.blur();else if(u===13){i.blur();if(o)if(i.value==c._getSelectedItemKey())if(c.fire("itemSelect")===false)return;c._submitForm()}else{c._isRunning||c.start();o=false}});e.on(i,"keyup",function(){v=0});e.on(i,"blur",function(){c.stop();d.later(function(){c._focusing||c.hide()},0)})},_initContainer:function(){var c=h.create("<div>",
{"class":"ks-suggest-container "+this.config.containerCls,style:"position:absolute;visibility:hidden"}),i=h.create("<div>",{"class":"ks-suggest-content"}),o=h.create("<div>",{"class":"ks-suggest-footer"});c.appendChild(i);c.appendChild(o);f.insertBefore(c,f.firstChild);this.container=c;this.content=i;this.footer=o;this._initContainerEvent()},_setContainerRegion:function(){var c=this.textInput,i=h.offset(c),o=this.container;h.offset(o,{left:i.left,top:i.top+c.offsetHeight-1});h.width(o,this.config.containerWidth||
c.offsetWidth-2)},_initContainerEvent:function(){var c=this,i=c.textInput,o=c.container,v=c.content,u=c.footer,A,z;e.on(v,"mousemove",function(y){y=y.target;if(y.nodeName!=="LI")y=h.parent(y,"li");if(h.contains(v,y))if(y!==c.selectedItem){c._removeSelectedItem();c._setSelectedItem(y)}});e.on(v,"mousedown",function(y){y=y.target;if(y.nodeName!=="LI")y=h.parent(y,"li");A=y});e.on(o,"mousedown",function(y){if(!b.test(y.target.nodeName)){i.onbeforedeactivate=function(){p.event.returnValue=false;i.onbeforedeactivate=
null};y.preventDefault()}});e.on(v,"mouseup",function(y){var B=y.target;if(!(y.which>2)){if(B.nodeName!=="LI")B=h.parent(B,"li");if(B==A)if(h.contains(v,B)){c._updateInputFromSelectItem(B);if(c.fire("itemSelect")!==false){i.blur();c._submitForm()}}}});e.on(u,"focusin",function(){c._focusing=true;c._removeSelectedItem();z=false});e.on(u,"focusout",function(){c._focusing=false;d.later(function(){if(z)c.hide();else c._focusing||c.textInput.focus()},0)});e.on(c.container,"mouseleave",function(){z=true});
e.on(u,"click",function(y){h.hasClass(y.target,"ks-suggest-closebtn")&&c.hide()})},_submitForm:function(){if(this.config.submitOnSelect){var c=this.textInput.form;if(c)if(this.fire("beforeSubmit",{form:c})!==false){if(l.createEvent){var i=l.createEvent("MouseEvents");i.initEvent("submit",true,false);c.dispatchEvent(i)}else l.createEventObject&&c.fireEvent("onsubmit");c.submit()}}},_initShim:function(){var c=h.create("<iframe>",{src:"about:blank","class":"ks-suggest-shim",style:"position:absolute;visibility:hidden;border:none"});
this.container.shim=c;f.insertBefore(c,f.firstChild)},_setShimRegion:function(){var c=this.container,i=c.style,o=c.shim;o&&h.css(o,{left:a(i.left)-2,top:i.top,width:a(i.width)+2,height:h.height(c)-2})},_initStyle:function(){d.get("#ks-suggest-style")||h.addStyleSheet(".ks-suggest-container{background:white;border:1px solid #999;z-index:99999}.ks-suggest-shim{z-index:99998}.ks-suggest-container li{color:#404040;padding:1px 0 2px;font-size:12px;line-height:18px;float:left;width:100%}.ks-suggest-container .ks-selected{background-color:#39F;cursor:default}.ks-suggest-key{float:left;text-align:left;padding-left:5px}.ks-suggest-result{float:right;text-align:right;padding-right:5px;color:green}.ks-suggest-container .ks-selected span{color:#FFF;cursor:default}.ks-suggest-footer{padding:0 5px 5px}.ks-suggest-closebtn{float:right}.ks-suggest-container li,.ks-suggest-footer{overflow:hidden;zoom:1;clear:both}.ks-suggest-container{*margin-left:2px;_margin-left:-2px;_margin-top:-3px}",
"ks-suggest-style")},_initEvent:function(){var c=this;e.on(p,"resize",function(){c._setContainerRegion();c._setShimRegion()})},start:function(){var c=this;if(c.fire("beforeStart")!==false){r.focusInstance=c;c._timer=d.later(function(){c._updateContent();c._timer=d.later(arguments.callee,200)},200);c._isRunning=true}},stop:function(){r.focusInstance=q;this._timer&&this._timer.cancel();this._isRunning=false},show:function(){if(!this.isVisible()){var c=this.container,i=c.shim;this._setContainerRegion();
t(c);if(i){this._setShimRegion();t(i)}}},hide:function(){if(this.isVisible()){var c=this.container,i=c.shim;i&&j(i);j(c)}},isVisible:function(){return this.container.style.visibility!=n},_updateContent:function(){var c=this.textInput;if(c.value!=this.query){c=this.query=c.value;if(d.trim(c))if(this._dataCache[c]!==q){this._fillContainer(this._dataCache[c]);this._displayContainer()}else this._requestData();else{this._fillContainer();this.hide()}}},_requestData:function(){var c=this,i;if(!s)c.dataScript=
q;if(!c.dataScript){i=l.createElement("script");i.charset="utf-8";i.async=true;k.insertBefore(i,k.firstChild);c.dataScript=i;if(!s){var o=d.now();c._latestScriptTime=o;h.attr(i,"data-time",o);e.on(i,"load",function(){c._scriptDataIsOut=h.attr(i,"data-time")!=c._latestScriptTime})}}c.queryParams="q="+encodeURIComponent(c.query);if(c.fire("beforeDataRequest")!==false)c.dataScript.src=c.dataSource+"&"+c.queryParams},_handleResponse:function(c){var i=x,o,v,u,A;if(!this._scriptDataIsOut){this.returnedData=
c;if(this.fire("dataReturn",{data:c})!==false){c=this._formatData(this.returnedData);if((o=c.length)>0){v=h.create("<ol>");for(i=0;i<o;++i){u=c[i];u=this._formatItem(A=u.key,u.result);h.attr(u,"key",A);h.addClass(u,i%2?"ks-even":"ks-odd");v.appendChild(u)}i=v}this._fillContainer(i);if(this.fire("beforeShow")!==false){this._dataCache[this.query]=h.html(this.content);this._displayContainer()}}}},_formatData:function(c){var i=[],o,v,u,A=0;if(!c)return i;if(d.isArray(c.result))c=c.result;if(!(o=c.length))return i;
for(u=0;u<o;++u){v=c[u];if(d.isString(v))i[A++]={key:v};else if(d.isArray(v)&&v.length>1)i[A++]={key:v[0],result:v[1]}}return i},_formatItem:function(c,i){var o=h.create("<li>"),v=h.create("<span>",{"class":"ks-suggest-key"});h.html(v,c);o.appendChild(v);if(i){c=this.config.resultFormat.replace("%result%",i);if(d.trim(c)){i=h.create("<span>",{"class":"ks-suggest-result"});h.html(i,c);o.appendChild(i)}}return o},_fillContainer:function(c,i){this._fillContent(c||x);this._fillFooter(i||x)},_fillContent:function(c){m(this.content,
c);this.selectedItem=q},_fillFooter:function(c){var i=this.config,o=this.footer;m(o,c);if(i.closeBtn){c=h.create("<a>",{"class":"ks-suggest-closebtn",href:"javascript: void(0)",target:"_self"});h.html(c,i.closeBtnText);o.appendChild(c)}this.fire("updateFooter",{footer:o,query:this.query});h.css(o,"display",h.text(o)?x:"none")},_displayContainer:function(){d.trim(h.text(this.container))?this.show():this.hide()},_selectItem:function(c){var i=d.query("li",this.container);if(i.length!==0)if(this.isVisible()){if(this.selectedItem){c=
h[c?"next":"prev"](this.selectedItem);if(!c)this.textInput.value=this.query}else c=i[c?0:i.length-1];this._removeSelectedItem();if(c){this._setSelectedItem(c);this._updateInputFromSelectItem()}}else this.show()},_removeSelectedItem:function(){h.removeClass(this.selectedItem,"ks-selected");this.selectedItem=q},_setSelectedItem:function(c){h.addClass(c,"ks-selected");this.selectedItem=c;this.textInput.focus()},_getSelectedItemKey:function(){if(!this.selectedItem)return x;return h.attr(this.selectedItem,
"key")},_updateInputFromSelectItem:function(){this.textInput.value=this._getSelectedItemKey(this.selectedItem)||this.query}});p[w]=function(c){r.focusInstance&&d.later(function(){r.focusInstance._handleResponse(c)},0)};r.version=1.1;d.Suggest=r});
