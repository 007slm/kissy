/*
Copyright 2011, KISSY UI Library v1.20dev
MIT Licensed
build time: ${build.time}
*/
(function(k,i,p){var t={mix:function(j,b,e,f){if(!b||!j)return j;if(e===p)e=true;var a,g,q;if(f&&(q=f.length))for(a=0;a<q;a++){g=f[a];if(g in b)if(e||!(g in j))j[g]=b[g]}else for(g in b)if(e||!(g in j))j[g]=b[g];return j}},s=k&&k[i]||{},r=0;k=s.__HOST||(s.__HOST=k||{});i=k[i]=t.mix(s,t,false);i.mix(i,{__APP_MEMBERS:["namespace"],__APP_INIT_METHODS:["__init"],version:"1.20dev",merge:function(){var j={},b,e=arguments.length;for(b=0;b<e;b++)i.mix(j,arguments[b]);return j},augment:function(){var j=arguments,
b=j.length-2,e=j[0],f=j[b],a=j[b+1],g=1;if(!i.isArray(a)){f=a;a=p;b++}if(!i.isBoolean(f)){f=p;b++}for(;g<b;g++)i.mix(e.prototype,j[g].prototype||j[g],f,a);return e},extend:function(j,b,e,f){if(!b||!j)return j;var a=Object.create?function(u,x){return Object.create(u,{constructor:{value:x}})}:function(u,x){function o(){}o.prototype=u;var w=new o;w.constructor=x;return w},g=b.prototype,q;q=a(g,j);j.prototype=i.mix(q,j.prototype);j.superclass=a(g,b);e&&i.mix(q,e);f&&i.mix(j,f);return j},__init:function(){this.Config=
this.Config||{};this.Env=this.Env||{};this.Config.debug="@DEBUG@"},namespace:function(){var j=arguments,b=j.length,e=null,f,a,g,q=j[b-1]===true&&b--;for(f=0;f<b;f++){g=(""+j[f]).split(".");e=q?k:this;for(a=k[g[0]]===e?1:0;a<g.length;++a)e=e[g[a]]=e[g[a]]||{}}return e},app:function(j,b){var e=i.isString(j),f=e?k[j]||{}:j,a=0,g=i.__APP_INIT_METHODS.length;for(i.mix(f,this,true,i.__APP_MEMBERS);a<g;a++)i[i.__APP_INIT_METHODS[a]].call(f);i.mix(f,i.isFunction(b)?b():b);e&&(k[j]=f);return f},config:function(j){for(var b in j)this["_"+
b]&&this["_"+b](j[b])},log:function(j,b,e){if(i.Config.debug){if(e)j=e+": "+j;if(k.console!==p&&console.log)console[b&&console[b]?b:"log"](j)}},error:function(j){if(i.Config.debug)throw j;},guid:function(j){return(j||"")+r++}});i.__init();return i})(this,"KISSY");
(function(k,i){var p=k.__HOST,t=Object.prototype.toString,s=Array.prototype.indexOf,r=Array.prototype.lastIndexOf,j=Array.prototype.filter,b=String.prototype.trim,e=/^\s+|\s+$/g,f={};k.mix(k,{type:function(a){return a==null?String(a):f[t.call(a)]||"object"},isNull:function(a){return a===null},isUndefined:function(a){return a===i},isEmptyObject:function(a){for(var g in a)return false;return true},isPlainObject:function(a){return a&&t.call(a)==="[object Object]"&&"isPrototypeOf"in a},clone:function(a,
g,q){var u=a,x,o,w=q||{};if(a&&((x=k.isArray(a))||k.isPlainObject(a))){if(a["__~ks_cloned"])return w[a["__~ks_cloned"]];a["__~ks_cloned"]=u=k.guid();w[u]=a;if(x)u=g?k.filter(a,g):a.concat();else{u={};for(o in a)if(o!=="__~ks_cloned"&&a.hasOwnProperty(o)&&(!g||g.call(a,a[o],o,a)!==false))u[o]=k.clone(a[o],g,w)}}if(!q){k.each(w,function(d){if(d["__~ks_cloned"])try{delete d["__~ks_cloned"]}catch(m){d["__~ks_cloned"]=i}});w=i}return u},trim:b?function(a){return a==i?"":b.call(a)}:function(a){return a==
i?"":a.toString().replace(e,"")},substitute:function(a,g,q){if(!k.isString(a)||!k.isPlainObject(g))return a;return a.replace(q||/\\?\{([^{}]+)\}/g,function(u,x){if(u.charAt(0)==="\\")return u.slice(1);return g[x]!==i?g[x]:""})},each:function(a,g,q){var u,x=0,o=a.length,w=o===i||k.type(a)==="function";q=q||p;if(w)for(u in a){if(g.call(q,a[u],u,a)===false)break}else for(u=a[0];x<o&&g.call(q,u,x,a)!==false;u=a[++x]);return a},indexOf:s?function(a,g){return s.call(g,a)}:function(a,g){for(var q=0,u=g.length;q<
u;++q)if(g[q]===a)return q;return-1},lastIndexOf:r?function(a,g){return r.call(g,a)}:function(a,g){for(var q=g.length-1;q>=0;q--)if(g[q]===a)break;return q},unique:function(a,g){g&&a.reverse();for(var q=a.slice(),u=0,x,o;u<q.length;){for(o=q[u];(x=k.lastIndexOf(o,q))!==u;)q.splice(x,1);u+=1}g&&q.reverse();return q},inArray:function(a,g){return k.indexOf(a,g)>-1},filter:j?function(a,g,q){return j.call(a,g,q||this)}:function(a,g,q){var u=[];k.each(a,function(x,o,w){if(g.call(q||this,x,o,w))u.push(x)});
return u},now:function(){return(new Date).getTime()}});k.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(a,g){f["[object "+a+"]"]=g=a.toLowerCase();k["is"+a]=function(q){return k.type(q)==g}})})(KISSY);
(function(k,i){function p(c){c=c.split("/");for(var l=[],n=0;n<c.length;n++){var v=c[n];if(v!=".")v==".."?l.pop():l.push(v)}return l.join("/")}function t(c,l){if(l.lastIndexOf("../",0)==0||l.lastIndexOf("./",0)==0){var n=g,v;if((v=c.lastIndexOf("/"))!=-1)n=c.substring(0,v+1);return p(n+l)}else return l.indexOf("./")!=-1||l.indexOf("../")!=-1?p(l):l}function s(c){return c.replace(/(-min)?\.js[^/]*$/i,g)}function r(c){if(c.charAt(c.length-1)!="/")c+="/";c=k.trim(c);if(!c.match(/^http(s)?:/i)&&c.lastIndexOf("/",
0)!=0)c=d+c;return p(c)}function j(c){return c.replace(/\?.*$/,"")}var b=k.__HOST,e=!b.getSelection&&b.ActiveXObject,f=b.document,a=f.getElementsByTagName("head")[0]||f.documentElement,g="",q=2,u=3,x=4,o=k.mix,w=f.createElement("script").readyState?function(c,l){var n=c.onreadystatechange;c.onreadystatechange=function(){var v=c.readyState;if(v==="loaded"||v==="complete"){c.onreadystatechange=null;n&&n();l.call(this)}}}:function(c,l){c.addEventListener("load",l,false)},d=location.href.replace(/[^/]*$/i,
g);b={__currentModule:null,__startLoadTime:0,__startLoadModuleName:null,add:function(c,l,n){var v=this.Env.mods,y;if(k.isString(c)&&!n&&k.isPlainObject(l)){y={};y[c]=l;c=y}if(k.isPlainObject(c)){k.each(c,function(A,B){A.name=B;v[B]&&o(A,v[B],false)});o(v,c);return this}if(k.isString(c)){var z;if(n&&(z=n.host)){c=v[z];if(!c){k.error("module "+z+" can not be found !");return this}this.__isAttached(z)?l.apply(this):c.fns.push(l);return this}this.__registerModule(c,l,n);l=v[c];this.__isAttached(l.requires)&&
this.__attachMod(l);return this}if(k.isFunction(c)){n=l;l=c;if(e){if(+new Date-this.__startLoadTime<15)(c=this.__startLoadModuleName)?this.__registerModule(c,l,n):k.error("\u4ece\u7f13\u5b58\u8bfb\u53d6\uff1f\uff1f\u4f46\u662f\u8bf7\u6c42\u524d\u8bb0\u5f55\u6ca1\u6709\u6a21\u5757\u540d");else{c=this.__findModuleNameByInteractive();this.__registerModule(c,l,n)}this.__startLoadModuleName=null;this.__startLoadTime=0}else this.__currentModule={def:l,config:n};return this}k.error("invalid format for KISSY.add !");return this},__findModuleNameByInteractive:function(){for(var c=document.getElementsByTagName("script"),
l,n=0;n<c.length;n++){var v=c[n];if(v.readyState=="interactive"){l=v;break}}l||k.error("\u627e\u4e0d\u5230 interactive \u72b6\u6001\u7684 script");c=l.src;if(c.lastIndexOf(this.Config.base,0)==0)return s(c.substring(this.Config.base.length));l=this.__packages;for(var y in l)if(l.hasOwnProperty(y))if(c.lastIndexOf(l[y].path,0)==0)return s(c.substring(l[y].path.length));k.error("interactive \u72b6\u6001\u7684 script \u6ca1\u6709\u5bf9\u5e94\u5305 \uff1a"+c)},__registerModule:function(c,l,n){n=n||{};var v=this.Env.mods,y=v[c]||{};o(y,{name:c,status:q});y.fns&&y.fns.length&&
k.error(c+" is defined more than once");y.fns=y.fns||[];y.fns.push(l);o(v[c]=y,n)},_packages:function(c){var l;l=this.__packages=this.__packages||{};for(var n=0;n<c.length;n++){var v=c[n];l[v.name]=v;if(v.path)v.path=r(v.path)}},_combine:function(c,l){var n=this,v;if(k.isObject(c))k.each(c,function(y,z){k.each(y,function(A){n._combine(A,z)})});else{v=n.__combines=n.__combines||{};if(l)v[c]=l;else return v[c]||c}},use:function(c,l){c=c.replace(/\s+/g,g).split(",");var n=this,v,y,z=c.length,A;if(n.__isAttached(c)){v=
n.__getModules(c);l&&l.apply(n,v)}else{for(y=0;y<z&&(v=c[y]);y++)n.__attachModByName(v,function(){if(!A&&n.__isAttached(c)){A=true;var B=n.__getModules(c);l&&l.apply(n,B)}});return n}},__getModules:function(c){var l=[this];c=c||[];for(var n=0;n<c.length;n++)l.push(this.require(c[n]));return l},require:function(c){return(c=this.Env.mods[j(c)])&&c.value},__getPackagePath:function(c){var l=this._combine(c.name),n,v=this.__packages||{};if((n=l.indexOf("/"))!=-1)l=l.substring(0,n);if(l=v[l]){n=l.path||
d;if(n.charAt(n.length-1)!=="/")n+="/";if(l.charset)c.charset=l.charset;return n}},__attachModByName:function(c,l){var n=this.Env.mods;/^([^?]+)(\?.*)?$/.test(c);var v=RegExp.$2;c=RegExp.$1;var y=n[c];if(!y){y=this.Config.componentJsName||function(z){return j(z)+"-min.js"+(v?v:"")};y={path:k.isFunction(y)?y(this._combine(c)):y,charset:"utf-8"};n[c]=y}y.name=c;y&&y.status===x||this.__attach(y,l)},__attach:function(c,l){function n(){if(!E&&v.__isAttached(c.requires)){c.status===q&&v.__attachMod(c);
if(c.status===x){E=true;l()}}}var v=this,y=v.Env.mods,z=(c.requires||[]).concat(),A=0,B=z.length;for(c.requires=z;A<B;A++){z[A]=t(c.name,z[A]);var C=y[j(z[A])];C&&C.status===x||v.__attachModByName(z[A],n)}v.__buildPath(c,v.__getPackagePath(c));v.__load(c,function(){if(v.__currentModule){v.__registerModule(c.name,v.__currentModule.def,v.__currentModule.config);v.__currentModule=null}var D=c.requires||[],F=[];c.requires=D;for(var G=D.length-1;G>=0;G--){D[G]=t(c.name,D[G]);var H=D[G],I=y[j(H)],J=k.inArray(H,
z);I&&I.status===x||J||v.__attachModByName(H,n);if(!J&&(!I||I.status<q))F.push(H)}F.length!=0&&F.unshift(c.name);n()});var E=false},__attachMod:function(c){var l=this,n=c.fns;n&&k.each(n,function(v){v=k.isFunction(v)?v.apply(l,l.__getModules(c.requires)):v;c.value=c.value||v});c.status=x},__isAttached:function(c){for(var l=this.Env.mods,n,v=(c=k.makeArray(c)).length-1;v>=0;v--){n=j(c[v]);n=l[n]||{};if(n.status!==x)return false}return true},__load:function(c,l){function n(){y[v]=q;if(c.status!==u){if(c.status!==
x)c.status=q;l()}}var v=c.fullpath,y=k.Env._loadQueue,z=y[v];c.status=c.status||0;if(c.status<1&&z)c.status=z.nodeName?1:q;if(c.status<1&&v){c.status=1;if(e){this.__startLoadModuleName=c.name;this.__startLoadTime=Number(+new Date)}z=this.getScript(v,{success:function(){n()},error:function(){c.status=u;y[v]=q},charset:c.charset});y[v]=z}else c.status===1?w(z,n):l()},__buildPath:function(c,l){var n=this.Config;if(!c.fullpath&&c.path)c.fullpath=(l||n.base)+c.path;if(c.fullpath&&n.debug)c.fullpath=c.fullpath.replace(/-min/ig,
g)},getScript:function(c,l,n){var v=/\.css(?:\?|$)/i.test(c),y=f.createElement(v?"link":"script"),z=l,A,B,C;if(k.isPlainObject(z)){l=z.success;A=z.error;B=z.timeout;n=z.charset}if(v){y.href=c;y.rel="stylesheet"}else{y.src=c;y.async=true}if(n)y.charset=n;if(v)k.isFunction(l)&&l.call(y);else w(y,function(){if(C){C.cancel();C=i}k.isFunction(l)&&l.call(y)});if(k.isFunction(A))C=k.later(function(){C=i;A()},(B||this.Config.timeout)*1E3);a.insertBefore(y,a.firstChild);return y}};o(k,b);var m=/^(.*)(seed|kissy)(-min)?\.js[^/]*/i,
h=/(seed|kissy)(-min)?\.js/i;k.__initLoader=function(){var c=f.getElementsByTagName("script");c=c[c.length-1];var l=c.src,n=c.getAttribute("data-combo-prefix")||"??";c=c.getAttribute("data-combo-sep")||",";c=l.split(c);var v=c[0];n=v.indexOf(n);if(n==-1)l=l.replace(m,"$1");else{l=v.substring(0,n);n=v.substring(n+2,v.length);if(n.match(h))l+=n.replace(m,"$1");else for(n=1;n<c.length;n++){v=c[n];if(v.match(h)){l+=v.replace(m,"$1");break}}}if(l.lastIndexOf("/",0)!=0&&l.lastIndexOf("http://",0)!=0&&l.lastIndexOf("https://",
0)!=0)l=d+l;c=l;this.Env.mods={};this.Env._loadQueue={};if(!this.Config.base)this.Config.base=r(c);if(!this.Config.timeout)this.Config.timeout=10};k.__initLoader();k.each(b,function(c,l){k.__APP_MEMBERS.push(l)});k.__APP_INIT_METHODS.push("__initLoader")})(KISSY);(function(k){k.config({combine:{core:["dom","ua","event","node","json","ajax","anim","base","cookie"]}})})(KISSY);
(function(k,i){function p(o){var w=typeof o;return o===null||w!=="object"&&w!=="function"}function t(o){return Array.prototype.slice.call(o)}var s=k.__HOST,r=s.document,j=r.documentElement,b=encodeURIComponent("[]"),e=false,f=[],a=false,g=/^#?([\w-]+)$/,q=/^(\w+)\[\]$/,u=/\S/;k.mix(k,{isWindow:function(o){return k.type(o)==="object"&&"setInterval"in o},makeArray:function(o){if(o===null||o===i)return[];if(k.isArray(o))return o;if(typeof o.length!=="number"||k.isString(o)||k.isFunction(o))return[o];
return t(o)},param:function(o,w){if(!k.isPlainObject(o))return"";w=w||"&";var d=[],m,h;for(m in o){h=o[m];m=encodeURIComponent(m);if(p(h))d.push(m,"=",encodeURIComponent(h+""),w);else if(k.isArray(h)&&h.length)for(var c=0,l=h.length;c<l;++c)p(h[c])&&d.push(m,b+"=",encodeURIComponent(h[c]+""),w)}d.pop();return d.join("")},unparam:function(o,w){if(typeof o!=="string"||(o=k.trim(o)).length===0)return{};for(var d={},m=o.split(w||"&"),h,c,l,n,v=0,y=m.length;v<y;++v){h=m[v].split("=");c=decodeURIComponent(h[0]);
try{l=decodeURIComponent(h[1]||"")}catch(z){l=h[1]||""}if((n=c.match(q))&&n[1]){d[n[1]]=d[n[1]]||[];d[n[1]].push(l)}else d[c]=l}return d},globalEval:function(o){if(o&&u.test(o)){var w=r.getElementsByTagName("head")[0]||j,d=r.createElement("script");d.text=o;w.insertBefore(d,w.firstChild);w.removeChild(d)}},later:function(o,w,d,m,h){w=w||0;m=m||{};var c=o,l=k.makeArray(h),n;if(k.isString(o))c=m[o];c||k.error("method undefined");o=function(){c.apply(m,l)};n=d?setInterval(o,w):setTimeout(o,w);return{id:n,
interval:d,cancel:function(){this.interval?clearInterval(n):clearTimeout(n)}}},ready:function(o){a||this._bindReady();e?o.call(s,this):f.push(o);return this},_bindReady:function(){var o=this,w=r.documentElement.doScroll,d=w?"onreadystatechange":"DOMContentLoaded",m=function(){o._fireReady()};a=true;if(r.readyState==="complete")return m();if(r.addEventListener){var h=function(){r.removeEventListener(d,h,false);m()};r.addEventListener(d,h,false);s.addEventListener("load",m,false)}else{var c=function(){if(r.readyState===
"complete"){r.detachEvent(d,c);m()}};r.attachEvent(d,c);s.attachEvent("onload",m);var l=false;try{l=s.frameElement==null}catch(n){}if(w&&l){var v=function(){try{w("left");m()}catch(y){setTimeout(v,1)}};v()}}},_fireReady:function(){if(!e){e=true;if(f){for(var o,w=0;o=f[w++];)o.call(s,this);f=null}}},available:function(o,w){if((o=(o+"").match(g)[1])&&k.isFunction(w))var d=1,m=k.later(function(){if(r.getElementById(o)&&(w()||1)||++d>500)m.cancel()},40,true)}});try{t(j.childNodes)}catch(x){t=function(o){for(var w=
[],d=o.length-1;d>=0;d--)w[d]=o[d];return w}}if(location&&(location.search||"").indexOf("ks-debug")!==-1)k.Config.debug=true})(KISSY);KISSY.add("core",function(k,i,p,t,s,r,j,b,e,f){i={UA:i,DOM:p,Event:t,Node:s,JSON:r,Ajax:j,Anim:b,Base:e,Cookie:f,one:s.one,all:s.List.all,get:p.get,query:p.query};k.mix(k,i);return i},{requires:["ua","dom","event","node","json","ajax","anim","base","cookie"]});KISSY.use("core");
KISSY.add("sizzle/impl",function(k){function i(d,m,h,c,l,n){l=0;for(var v=c.length;l<v;l++){var y=c[l];if(y){y=y[d];for(var z=false;y;){if(y.sizcache===h){z=c[y.sizset];break}if(y.nodeType===1&&!n){y.sizcache=h;y.sizset=l}if(y.nodeName.toLowerCase()===m){z=y;break}y=y[d]}c[l]=z}}}function p(d,m,h,c,l,n){l=0;for(var v=c.length;l<v;l++){var y=c[l];if(y){y=y[d];for(var z=false;y;){if(y.sizcache===h){z=c[y.sizset];break}if(y.nodeType===1){if(!n){y.sizcache=h;y.sizset=l}if(typeof m!=="string"){if(y===
m){z=true;break}}else if(e.filter(m,[y]).length>0){z=y;break}}y=y[d]}c[l]=z}}}var t=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,s=0,r=Object.prototype.toString,j=false,b=true;[0,0].sort(function(){b=false;return 0});var e=function(d,m,h,c){h=h||[];var l=m=m||document;if(m.nodeType!==1&&m.nodeType!==9)return[];if(!d||typeof d!=="string")return h;var n=[],v,y,z,A,B=true,C=e.isXML(m),E=d,D;do{t.exec("");if(v=t.exec(E)){E=
v[3];n.push(v[1]);if(v[2]){A=v[3];break}}}while(v);if(n.length>1&&a.exec(d))if(n.length===2&&f.relative[n[0]])y=w(n[0]+n[1],m);else for(y=f.relative[n[0]]?[m]:e(n.shift(),m);n.length;){d=n.shift();if(f.relative[d])d+=n.shift();y=w(d,y)}else{if(!c&&n.length>1&&m.nodeType===9&&!C&&f.match.ID.test(n[0])&&!f.match.ID.test(n[n.length-1])){v=e.find(n.shift(),m,C);m=v.expr?e.filter(v.expr,v.set)[0]:v.set[0]}if(m){v=c?{expr:n.pop(),set:u(c)}:e.find(n.pop(),n.length===1&&(n[0]==="~"||n[0]==="+")&&m.parentNode?
m.parentNode:m,C);y=v.expr?e.filter(v.expr,v.set):v.set;if(n.length>0)z=u(y);else B=false;for(;n.length;){v=D=n.pop();if(f.relative[D])v=n.pop();else D="";if(v==null)v=m;f.relative[D](z,v,C)}}else z=[]}z||(z=y);z||e.error(D||d);if(r.call(z)==="[object Array]")if(B)if(m&&m.nodeType===1)for(d=0;z[d]!=null;d++){if(z[d]&&(z[d]===true||z[d].nodeType===1&&e.contains(m,z[d])))h.push(y[d])}else for(d=0;z[d]!=null;d++)z[d]&&z[d].nodeType===1&&h.push(y[d]);else h.push.apply(h,z);else u(z,h);if(A){e(A,l,h,c);
e.uniqueSort(h)}return h};e.uniqueSort=function(d){if(o){j=b;d.sort(o);if(j)for(var m=1;m<d.length;m++)d[m]===d[m-1]&&d.splice(m--,1)}return d};e.matches=function(d,m){return e(d,null,null,m)};e.find=function(d,m,h){var c;if(!d)return[];for(var l=0,n=f.order.length;l<n;l++){var v=f.order[l],y;if(y=f.leftMatch[v].exec(d)){var z=y[1];y.splice(1,1);if(z.substr(z.length-1)!=="\\"){y[1]=(y[1]||"").replace(/\\/g,"");c=f.find[v](y,m,h);if(c!=null){d=d.replace(f.match[v],"");break}}}}c||(c=m.getElementsByTagName("*"));
return{set:c,expr:d}};e.filter=function(d,m,h,c){for(var l=d,n=[],v=m,y,z,A=m&&m[0]&&e.isXML(m[0]);d&&m.length;){for(var B in f.filter)if((y=f.leftMatch[B].exec(d))!=null&&y[2]){var C=f.filter[B],E,D;D=y[1];z=false;y.splice(1,1);if(D.substr(D.length-1)!=="\\"){if(v===n)n=[];if(f.preFilter[B])if(y=f.preFilter[B](y,v,h,n,c,A)){if(y===true)continue}else z=E=true;if(y)for(var F=0;(D=v[F])!=null;F++)if(D){E=C(D,y,F,v);var G=c^!!E;if(h&&E!=null)if(G)z=true;else v[F]=false;else if(G){n.push(D);z=true}}if(E!==
undefined){h||(v=n);d=d.replace(f.match[B],"");if(!z)return[];break}}}if(d===l)if(z==null)e.error(d);else break;l=d}return v};e.error=function(d){throw"Syntax error, unrecognized expression: "+d;};var f=e.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(['"]*)(.*?)\3|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,
CHILD:/:(only|nth|last|first)-child(?:\((even|odd|[\dn+\-]*)\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(d){return d.getAttribute("href")}},relative:{"+":function(d,m){var h=typeof m==="string",c=h&&!/\W/.test(m);h=h&&!c;if(c)m=m.toLowerCase();c=0;for(var l=d.length,n;c<l;c++)if(n=d[c]){for(;(n=n.previousSibling)&&
n.nodeType!==1;);d[c]=h||n&&n.nodeName.toLowerCase()===m?n||false:n===m}h&&e.filter(m,d,true)},">":function(d,m){var h=typeof m==="string",c,l=0,n=d.length;if(h&&!/\W/.test(m))for(m=m.toLowerCase();l<n;l++){if(c=d[l]){h=c.parentNode;d[l]=h.nodeName.toLowerCase()===m?h:false}}else{for(;l<n;l++)if(c=d[l])d[l]=h?c.parentNode:c.parentNode===m;h&&e.filter(m,d,true)}},"":function(d,m,h){var c=s++,l=p,n;if(typeof m==="string"&&!/\W/.test(m)){n=m=m.toLowerCase();l=i}l("parentNode",m,c,d,n,h)},"~":function(d,
m,h){var c=s++,l=p,n;if(typeof m==="string"&&!/\W/.test(m)){n=m=m.toLowerCase();l=i}l("previousSibling",m,c,d,n,h)}},find:{ID:function(d,m,h){if(typeof m.getElementById!=="undefined"&&!h)return(d=m.getElementById(d[1]))?[d]:[]},NAME:function(d,m){if(typeof m.getElementsByName!=="undefined"){for(var h=[],c=m.getElementsByName(d[1]),l=0,n=c.length;l<n;l++)c[l].getAttribute("name")===d[1]&&h.push(c[l]);return h.length===0?null:h}},TAG:function(d,m){return m.getElementsByTagName(d[1])}},preFilter:{CLASS:function(d,
m,h,c,l,n){d=" "+d[1].replace(/\\/g,"")+" ";if(n)return d;n=0;for(var v;(v=m[n])!=null;n++)if(v)if(l^(v.className&&(" "+v.className+" ").replace(/[\t\n]/g," ").indexOf(d)>=0))h||c.push(v);else if(h)m[n]=false;return false},ID:function(d){return d[1].replace(/\\/g,"")},TAG:function(d){return d[1].toLowerCase()},CHILD:function(d){if(d[1]==="nth"){var m=/(-?)(\d*)n((?:\+|-)?\d*)/.exec(d[2]==="even"&&"2n"||d[2]==="odd"&&"2n+1"||!/\D/.test(d[2])&&"0n+"+d[2]||d[2]);d[2]=m[1]+(m[2]||1)-0;d[3]=m[3]-0}d[0]=
s++;return d},ATTR:function(d,m,h,c,l,n){m=d[1].replace(/\\/g,"");if(!n&&f.attrMap[m])d[1]=f.attrMap[m];if(d[2]==="~=")d[4]=" "+d[4]+" ";return d},PSEUDO:function(d,m,h,c,l){if(d[1]==="not")if((t.exec(d[3])||"").length>1||/^\w/.test(d[3]))d[3]=e(d[3],null,null,m);else{d=e.filter(d[3],m,h,true^l);h||c.push.apply(c,d);return false}else if(f.match.POS.test(d[0])||f.match.CHILD.test(d[0]))return true;return d},POS:function(d){d.unshift(true);return d}},filters:{enabled:function(d){return d.disabled===
false&&d.type!=="hidden"},disabled:function(d){return d.disabled===true},checked:function(d){return d.checked===true},selected:function(d){return d.selected===true},parent:function(d){return!!d.firstChild},empty:function(d){return!d.firstChild},has:function(d,m,h){return!!e(h[3],d).length},header:function(d){return/h\d/i.test(d.nodeName)},text:function(d){return"text"===d.type},radio:function(d){return"radio"===d.type},checkbox:function(d){return"checkbox"===d.type},file:function(d){return"file"===
d.type},password:function(d){return"password"===d.type},submit:function(d){return"submit"===d.type},image:function(d){return"image"===d.type},reset:function(d){return"reset"===d.type},button:function(d){return"button"===d.type||d.nodeName.toLowerCase()==="button"},input:function(d){return/input|select|textarea|button/i.test(d.nodeName)}},setFilters:{first:function(d,m){return m===0},last:function(d,m,h,c){return m===c.length-1},even:function(d,m){return m%2===0},odd:function(d,m){return m%2===1},
lt:function(d,m,h){return m<h[3]-0},gt:function(d,m,h){return m>h[3]-0},nth:function(d,m,h){return h[3]-0===m},eq:function(d,m,h){return h[3]-0===m}},filter:{PSEUDO:function(d,m,h,c){var l=m[1],n=f.filters[l];if(n)return n(d,h,m,c);else if(l==="contains")return(d.textContent||d.innerText||e.getText([d])||"").indexOf(m[3])>=0;else if(l==="not"){m=m[3];h=0;for(c=m.length;h<c;h++)if(m[h]===d)return false;return true}else e.error("Syntax error, unrecognized expression: "+l)},CHILD:function(d,m){var h=
m[1],c=d;switch(h){case "only":case "first":for(;c=c.previousSibling;)if(c.nodeType===1)return false;if(h==="first")return true;c=d;case "last":for(;c=c.nextSibling;)if(c.nodeType===1)return false;return true;case "nth":h=m[2];var l=m[3];if(h===1&&l===0)return true;var n=m[0],v=d.parentNode;if(v&&(v.sizcache!==n||!d.nodeIndex)){var y=0;for(c=v.firstChild;c;c=c.nextSibling)if(c.nodeType===1)c.nodeIndex=++y;v.sizcache=n}c=d.nodeIndex-l;return h===0?c===0:c%h===0&&c/h>=0}},ID:function(d,m){return d.nodeType===
1&&d.getAttribute("id")===m},TAG:function(d,m){return m==="*"&&d.nodeType===1||d.nodeName.toLowerCase()===m},CLASS:function(d,m){return(" "+(d.className||d.getAttribute("class"))+" ").indexOf(m)>-1},ATTR:function(d,m){var h=m[1];h=f.attrHandle[h]?f.attrHandle[h](d):d[h]!=null?d[h]:d.getAttribute(h);var c=h+"",l=m[2],n=m[4];return h==null?l==="!=":l==="="?c===n:l==="*="?c.indexOf(n)>=0:l==="~="?(" "+c+" ").indexOf(n)>=0:!n?c&&h!==false:l==="!="?c!==n:l==="^="?c.indexOf(n)===0:l==="$="?c.substr(c.length-
n.length)===n:l==="|="?c===n||c.substr(0,n.length+1)===n+"-":false},POS:function(d,m,h,c){var l=f.setFilters[m[2]];if(l)return l(d,h,m,c)}}},a=f.match.POS,g=function(d,m){return"\\"+(m-0+1)},q;for(q in f.match){f.match[q]=RegExp(f.match[q].source+/(?![^\[]*\])(?![^\(]*\))/.source);f.leftMatch[q]=RegExp(/(^(?:.|\r|\n)*?)/.source+f.match[q].source.replace(/\\(\d+)/g,g))}var u=function(d,m){d=Array.prototype.slice.call(d,0);if(m){m.push.apply(m,d);return m}return d};try{Array.prototype.slice.call(document.documentElement.childNodes,
0)}catch(x){u=function(d,m){var h=m||[],c=0;if(r.call(d)==="[object Array]")Array.prototype.push.apply(h,d);else if(typeof d.length==="number")for(var l=d.length;c<l;c++)h.push(d[c]);else for(;d[c];c++)h.push(d[c]);return h}}var o;if(document.documentElement.compareDocumentPosition)o=function(d,m){if(!d.compareDocumentPosition||!m.compareDocumentPosition){if(d==m)j=true;return d.compareDocumentPosition?-1:1}var h=d.compareDocumentPosition(m)&4?-1:d===m?0:1;if(h===0)j=true;return h};else if("sourceIndex"in
document.documentElement)o=function(d,m){if(!d.sourceIndex||!m.sourceIndex){if(d==m)j=true;return d.sourceIndex?-1:1}var h=d.sourceIndex-m.sourceIndex;if(h===0)j=true;return h};else if(document.createRange)o=function(d,m){if(!d.ownerDocument||!m.ownerDocument){if(d==m)j=true;return d.ownerDocument?-1:1}var h=d.ownerDocument.createRange(),c=m.ownerDocument.createRange();h.setStart(d,0);h.setEnd(d,0);c.setStart(m,0);c.setEnd(m,0);h=h.compareBoundaryPoints(Range.START_TO_END,c);if(h===0)j=true;return h};
e.getText=function(d){for(var m="",h,c=0;d[c];c++){h=d[c];if(h.nodeType===3||h.nodeType===4)m+=h.nodeValue;else if(h.nodeType!==8)m+=e.getText(h.childNodes)}return m};(function(){var d=document.createElement("div"),m="script"+(new Date).getTime();d.innerHTML="<a name='"+m+"'/>";var h=document.documentElement;h.insertBefore(d,h.firstChild);if(document.getElementById(m)){f.find.ID=function(c,l,n){if(typeof l.getElementById!=="undefined"&&!n)return(l=l.getElementById(c[1]))?l.id===c[1]||typeof l.getAttributeNode!==
"undefined"&&l.getAttributeNode("id").nodeValue===c[1]?[l]:undefined:[]};f.filter.ID=function(c,l){var n=typeof c.getAttributeNode!=="undefined"&&c.getAttributeNode("id");return c.nodeType===1&&n&&n.nodeValue===l}}h.removeChild(d);h=d=null})();(function(){var d=document.createElement("div");d.appendChild(document.createComment(""));if(d.getElementsByTagName("*").length>0)f.find.TAG=function(m,h){var c=h.getElementsByTagName(m[1]);if(m[1]==="*"){for(var l=[],n=0;c[n];n++)c[n].nodeType===1&&l.push(c[n]);
c=l}return c};d.innerHTML="<a href='#'></a>";if(d.firstChild&&typeof d.firstChild.getAttribute!=="undefined"&&d.firstChild.getAttribute("href")!=="#")f.attrHandle.href=function(m){return m.getAttribute("href",2)};d=null})();document.querySelectorAll&&function(){var d=e,m=document.createElement("div");m.innerHTML="<p class='TEST'></p>";if(!(m.querySelectorAll&&m.querySelectorAll(".TEST").length===0)){e=function(c,l,n,v){l=l||document;if(!v&&l.nodeType===9&&!e.isXML(l))try{return u(l.querySelectorAll(c),
n)}catch(y){}return d(c,l,n,v)};for(var h in d)e[h]=d[h];m=null}}();(function(){var d=document.createElement("div");d.innerHTML="<div class='test e'></div><div class='test'></div>";if(!(!d.getElementsByClassName||d.getElementsByClassName("e").length===0)){d.lastChild.className="e";if(d.getElementsByClassName("e").length!==1){f.order.splice(1,0,"CLASS");f.find.CLASS=function(m,h,c){if(typeof h.getElementsByClassName!=="undefined"&&!c)return h.getElementsByClassName(m[1])};d=null}}})();e.contains=document.compareDocumentPosition?
function(d,m){return!!(d.compareDocumentPosition(m)&16)}:function(d,m){return d!==m&&(d.contains?d.contains(m):true)};e.isXML=function(d){return(d=(d?d.ownerDocument||d:0).documentElement)?d.nodeName!=="HTML":false};var w=function(d,m){for(var h=[],c="",l,n=m.nodeType?[m]:m;l=f.match.PSEUDO.exec(d);){c+=l[0];d=d.replace(f.match.PSEUDO,"")}d=f.relative[d]?d+"*":d;l=0;for(var v=n.length;l<v;l++)e(d,n[l],h);return e.filter(c,h)};e._filter=function(d,m){return e.matches(m,k.require("dom/selector").query(d))};
return e});KISSY.add("sizzle",function(k,i){return i},{requires:["sizzle/impl"]});KISSY.add("datalazyload",function(k,i){return i},{requires:["datalazyload/impl"]});
KISSY.add("datalazyload/impl",function(k,i,p,t){function s(a,g){if(!(this instanceof s))return new s(a,g);if(g===t){g=a;a=[j]}k.isArray(a)||(a=[i.get(a)||j]);this.containers=a;this.config=k.merge(f,g);this.callbacks={els:[],fns:[]};this._init();return t}var r=window,j=document,b="scroll",e="resize",f={mod:"manual",diff:"default",placeholder:"none",execScript:true};k.augment(s,{_init:function(){this.threshold=this._getThreshold();this._filterItems();this._initLoadEvent()},_filterItems:function(){var a=
this.containers,g,q,u,x=[],o=[];g=0;for(q=a.length;g<q;++g){u=i.query("img",a[g]);x=x.concat(k.filter(u,this._filterImg,this));u=i.query("textarea",a[g]);o=o.concat(k.filter(u,this._filterArea,this))}this.images=x;this.areaes=o},_filterImg:function(a){var g=a.getAttribute("data-ks-lazyload"),q=this.threshold,u=this.config.placeholder;if(this.config.mod==="manual"){if(g){if(u!=="none")a.src=u;return true}}else if(i.offset(a).top>q&&!g){i.attr(a,"data-ks-lazyload",a.src);if(u!=="none")a.src=u;else a.removeAttribute("src");
return true}},_filterArea:function(a){return i.hasClass(a,"ks-datalazyload")},_initLoadEvent:function(){function a(){q||(q=k.later(function(){g();q=null},100))}function g(){u._loadItems();if(u._getItemsLength()===0){p.remove(r,b,a);p.remove(r,e,x)}}var q,u=this,x;p.on(r,b,a);p.on(r,e,x=function(){u.threshold=u._getThreshold();a()});u._getItemsLength()&&k.ready(function(){g()})},_loadItems:function(){this._loadImgs();this._loadAreas();this._fireCallbacks()},_loadImgs:function(){this.images=k.filter(this.images,
this._loadImg,this)},_loadImg:function(a){var g=this.threshold+i.scrollTop();if(i.offset(a).top<=g)this._loadImgSrc(a);else return true},_loadImgSrc:function(a,g){g=g||"data-ks-lazyload";var q=a.getAttribute(g);if(q&&a.src!=q){a.src=q;a.removeAttribute(g)}},_loadAreas:function(){this.areaes=k.filter(this.areaes,this._loadArea,this)},_loadArea:function(a){var g=i.css(a,"display")==="none";if(i.offset(g?a.parentNode:a).top<=this.threshold+i.scrollTop())this._loadAreaData(a.parentNode,a,this.config.execScript);
else return true},_loadAreaData:function(a,g,q){g.style.display="none";g.className="";var u=i.create("<div>");a.insertBefore(u,g);i.html(u,g.value,q===t?true:q)},_fireCallbacks:function(){var a=this.callbacks,g=a.els,q=a.fns,u=this.threshold+i.scrollTop(),x,o,w,d=[],m=[];for(x=0;(o=g[x])&&(w=q[x++]);)if(i.offset(o).top<=u)w.call(o);else{d.push(o);m.push(w)}a.els=d;a.fns=m},addCallback:function(a,g){var q=this.callbacks;if((a=i.get(a))&&k.isFunction(g)){q.els.push(a);q.fns.push(g)}},_getThreshold:function(){var a=
this.config.diff,g=i.viewportHeight();return a==="default"?2*g:g+ +a},_getItemsLength:function(){return this.images.length+this.areaes.length+this.callbacks.els.length},loadCustomLazyData:function(a,g){var q=this,u,x;k.isArray(a)||(a=[i.get(a)]);k.each(a,function(o){switch(g){case "img-src":x=o.nodeName==="IMG"?[o]:i.query("img",o);k.each(x,function(w){q._loadImgSrc(w,"data-ks-lazyload-custom")});break;default:(u=i.get("textarea",o))&&i.hasClass(u,"ks-datalazyload-custom")&&q._loadAreaData(o,u)}})}});
k.mix(s,s.prototype,true,["loadCustomLazyData","_loadImgSrc","_loadAreaData"]);return s},{requires:["dom","event"]});KISSY.add("flash/base",function(){return{swfs:{},length:0,version:"1.3"}});
KISSY.add("flash/embed",function(k,i,p,t,s){function r(o,w){return e+o+f+a+w+a}function j(o,w){return'<param name="'+o+'" value="'+w+'" />'}var b=/^(?:object|embed)/i,e=" ",f="=",a='"',g=Object.prototype,q=encodeURIComponent,u={wmode:"",allowscriptaccess:"",allownetworking:"",allowfullscreen:"",play:"false",loop:"",menu:"",quality:"",scale:"",salign:"",bgcolor:"",devicefont:"",base:"",swliveconnect:"",seamlesstabbing:""},x={params:{},attrs:{width:215,height:138},version:9};k.mix(t,{fpv:i.fpv,fpvGEQ:i.fpvGEQ,
add:function(o,w,d){var m,h,c,l;w=t._normalize(w);w=k.merge(x,w);w.attrs=k.merge(x.attrs,w.attrs);h=o.replace("#","");if(!(o=p.get(o))){o=p.create("<div id="+h+">");document.body.appendChild(o)}l=o.nodeName.toLowerCase();c=!b.test(l);if(!o.id)o.id=k.guid("ks-flash-container-");h=o.id;if(!w.id)w.id=k.guid("ks-flash-");w.attrs.id=w.id;if(i.fpv()){if(!i.fpvGEQ(w.version)){t._callback(d,0,h,o,c);if(!((m=w.xi)&&k.isString(m)))return;w.src=m}if(c)w.src?t._embed(o,w,d):t._callback(d,-3,h,o,c);else{if(l==
"object")if(i.gecko||i.opera||i.chrome>7)o=p.query("object",o)[0]||o;w.attrs.id=h;t._register(o,w,d,c)}}else t._callback(d,-1,h,o,c)},get:function(o){return t.swfs[o]},remove:function(o){if(o=t.get(o)){p.remove(o);delete t.swfs[o.id];t.length-=1}},contains:function(o){var w=t.swfs,d,m=false;if(k.isString(o))m=o in w;else for(d in w)if(w[d]===o){m=true;break}return m},_register:function(o,w,d,m){w=w.attrs.id;t._addSWF(w,o);t._callback(d,1,w,o,m)},_embed:function(o,w,d){o.innerHTML=t._stringSWF(w);
o=p.get("#"+w.id);t._register(o,w,d,true)},_callback:function(o,w,d,m,h){w&&k.isFunction(o)&&o({status:w,id:d,swf:m,dynamic:!!h})},_addSWF:function(o,w){if(o&&w){t.swfs[o]=w;t.length+=1}},_stringSWF:function(o){var w;var d=w="",m=o.src,h=o.attrs;o=o.params;var c,l;if(i.ie){l="object";for(c in h)if(h[c]!=g[c])if(c!="classid"&&c!="data")w+=r(c,h[c]);w+=r("classid","clsid:d27cdb6e-ae6d-11cf-96b8-444553540000");for(c in o)if(c in u)d+=j(c,o[c]);d+=j("movie",m);if(o.flashvars)d+=j("flashvars",t.toFlashVars(o.flashvars));
w="<"+l+w+">"+d+"</"+l+">"}else{l="embed";w+=r("src",m);for(c in h)if(h[c]!=g[c])if(c!="classid"&&c!="data")w+=r(c,h[c]);w+=r("type","application/x-shockwave-flash");for(c in o)if(c in u)d+=r(c,o[c]);if(o.flashvars)d+=r("flashvars",t.toFlashVars(o.flashvars));w="<"+l+w+d+"/>"}return w},_normalize:function(o){var w,d,m,h=o||{};if(k.isPlainObject(o)){h={};for(m in o){w=m.toLowerCase();d=o[m];if(w!=="flashvars")d=t._normalize(d);h[w]=d}}return h},toFlashVars:function(o){if(!k.isPlainObject(o))return"";
var w,d,m=[];for(w in o){d=o[w];if(k.isString(d))d=q(d);else{d=s.stringify(d);if(!d)continue;d=d.replace(/:"([^"]+)/g,function(h,c){return':"'+q(c)})}m.push(w+"="+d)}return m.join("&").replace(/"/g,"'")}});return t},{requires:["ua","dom","flash/base","json","flash/ua"]});
KISSY.add("flash/ua",function(k,i){function p(b){var e=k.isString(b)?b.match(/(\d)+/g).splice(0,3):b;b=b;if(k.isArray(e))b=parseFloat(e[0]+"."+t(e[1],3)+t(e[2],5));return b||0}function t(b,e){for(var f=(b+"").length;f++<e;)b="0"+b;return b}var s,r,j=true;i.fpv=function(b){if(b||j){j=false;var e;if(navigator.plugins&&navigator.mimeTypes.length)e=(navigator.plugins["Shockwave Flash"]||0).description;else if(window.ActiveXObject)try{e=(new ActiveXObject("ShockwaveFlash.ShockwaveFlash")).GetVariable("$version")}catch(f){}s=
e?e.match(/(\d)+/g).splice(0,3):void 0;r=p(s)}return s};i.fpvGEQ=function(b,e){j&&i.fpv(e);return!!r&&r>=p(b)}},{requires:["ua"]});KISSY.add("flash",function(k,i){return i},{requires:["flash/base","flash/embed"]});
KISSY.add("dd/ddm",function(k,i,p,t,s){function r(){r.superclass.constructor.apply(this,arguments);this._init()}function j(f,a,g){g=g||150;if(g===-1)return function(){f.apply(a,arguments)};var q=k.now();return function(){var u=k.now();if(u-q>g){q=u;f.apply(a,arguments)}}}var b=document,e=k.require("node/node");r.ATTRS={bufferTime:{value:200},activeDrag:{}};k.extend(r,s,{_init:function(){this._showShimMove=j(this._move,this,30)},_move:function(f){var a=this.get("activeDrag");if(a){f.preventDefault();
a._move(f)}},_start:function(f){var a=this,g=a.get("bufferTime")||0;a._registerEvent();if(g)a._bufferTimer=setTimeout(function(){a._bufferStart(f)},g);else a._bufferStart(f)},_bufferStart:function(f){this.set("activeDrag",f);f.get("shim")&&this._activeShim();f._start()},_end:function(f){var a=this.get("activeDrag");this._unregisterEvent();if(this._bufferTimer){clearTimeout(this._bufferTimer);this._bufferTimer=null}this._shim&&this._shim.css({display:"none"});if(a){a._end(f);this.set("activeDrag",
null)}},_activeShim:function(){var f=document;this._shim=(new e("<div style='background-color:red;position:absolute;left:0;width:100%;top:0;z-index:999999;'></div>")).appendTo(f.body);this._shim.css("opacity",0);this._activeShim=this._showShim;this._showShim()},_showShim:function(){this._shim.css({display:"",height:i.docHeight()})},_registerEvent:function(){p.on(b,"mouseup",this._end,this);p.on(b,"mousemove",this._showShimMove,this)},_unregisterEvent:function(){p.remove(b,"mousemove",this._showShimMove,
this);p.remove(b,"mouseup",this._end,this)}});return new r},{requires:["dom","event","node","base"]});
KISSY.add("dd/draggable",function(k,i,p,t,s){function r(){r.superclass.constructor.apply(this,arguments);this._init()}var j=k.require("node/node");r.ATTRS={node:{setter:function(b){return j.one(b)}},shim:{value:true},handlers:{value:[],setter:function(b){if(b)for(var e=0;e<b.length;e++){b[e]=j.one(b[e]);b[e].unselectable()}}}};k.extend(r,t,{_init:function(){var b=this.get("node"),e=this.get("handlers");if(e.length==0)e[0]=b;for(var f=0;f<e.length;f++){var a=e[f],g=a.css("cursor");if(a[0]!=b[0])if(!g||
g==="auto")a.css("cursor","move")}b.on("mousedown",this._handleMouseDown,this)},destroy:function(){for(var b=this.get("node"),e=this.get("handlers"),f=0;f<e.length;f++){var a=e[f];a.css("cursor")=="move"&&a.css("cursor","auto")}b.detach("mousedown",this._handleMouseDown,this);this.detach()},_check:function(b){for(var e=this.get("handlers"),f=0;f<e.length;f++){var a=e[f];if(a.contains(b)||a[0]==b[0])return true}return false},_handleMouseDown:function(b){if(this._check(new j(b.target))){b.preventDefault();
s._start(this);var e=this.get("node"),f=b.pageX;b=b.pageY;e=e.offset();this.startMousePos={left:f,top:b};this.startNodePos=e;this._diff={left:f-e.left,top:b-e.top};this.set("diff",this._diff)}},_move:function(b){var e=this.get("diff");this.fire("drag",{left:b.pageX-e.left,top:b.pageY-e.top})},_end:function(){this.fire("dragend")},_start:function(){this.fire("dragstart")}});return r},{requires:["ua","node","base","dd/ddm"]});KISSY.add("dd",function(k,i){return{Draggable:i}},{requires:["dd/draggable"]});
KISSY.add("resizable/base",function(k,i,p,t){var s=k.require("dd/draggable"),r=k.require("node/node"),j={t:function(e,f,a,g,q,u,x,o,w){e=Math.min(Math.max(a,o-w),g);return[0,e,q+o-e,0]},b:function(e,f,a,g,q,u,x,o,w){return[0,Math.min(Math.max(a,o+w),g),0,0]},r:function(e,f,a,g,q,u,x,o,w,d){return[Math.min(Math.max(e,x+d),f),0,0,0]},l:function(e,f,a,g,q,u,x,o,w,d){e=Math.min(Math.max(e,x-d),f);return[e,0,0,u+x-e]}};k=["l","r"];i=["t","b"];for(p=0;p<k.length;p++)for(var b=0;b<i.length;b++)(function(e,
f){j[e+f]=j[f+e]=function(){for(var a=j[e].apply(this,arguments),g=j[f].apply(this,arguments),q=[],u=0;u<a.length;u++)q[u]=a[u]||g[u];return q}})(k[p],i[b]);return t.create([],{renderUI:function(){var e=this.get("node");this.dds={};e.css("position")=="static"&&e.css("position","relative")},_uiSetHandlers:function(e){var f=this.dds,a=this.get("node");this.destructor();for(var g=0;g<e.length;g++){var q=e[g],u=(new r("<div class='ke-resizehandler ke-resizehandler-"+q+"'>")).prependTo(a);q=f[q]=new s({node:u});
q.on("drag",this._drag,this);q.on("dragstart",this._dragStart,this)}},_dragStart:function(){var e=this.get("node");this._width=e.width();this._top=parseInt(e.css("top"));this._left=parseInt(e.css("left"));this._height=e.height()},_drag:function(e){var f=this.get("node"),a=e.currentTarget||e.target,g=this._getHanderC(a),q=this._width,u=this._height,x=this.get("minWidth"),o=this.get("maxWidth"),w=this.get("minHeight"),d=this.get("maxHeight");e=j[g](x,o,w,d,this._top,this._left,q,u,e.top-a.startNodePos.top,
e.left-a.startNodePos.left);a=["width","height","top","left"];for(g=0;g<a.length;g++)e[g]&&f.css(a[g],e[g])},_getHanderC:function(e){var f=this.dds,a;for(a in f){if(!f.hasOwnProperty(a))break;if(f[a]==e)return a}},destructor:function(){var e=this.dds,f;for(f in e){if(!e.hasOwnProperty(f))break;e[f].destroy();e[f].get("node").remove();delete e[f]}}},{ATTRS:{node:{setter:function(e){return r.one(e)}},minWidth:{value:0},minHeight:{value:0},maxWidth:{value:Number.MAX_VALUE},maxHeight:{value:Number.MAX_VALUE},
handlers:{value:[]}}})},{requires:["node","dd","uibase"]});KISSY.add("resizable",function(k,i){return i},{requires:["resizable/base"]});
KISSY.add("uibase/align",function(k,i){function p(){}function t(s,r){var j=k.require("node/node"),b=r.charAt(0),e=r.charAt(1),f,a,g;if(s){s=j.one(s);f=s.offset();j=s[0].offsetWidth;a=s[0].offsetHeight}else{f={left:i.scrollLeft(),top:i.scrollTop()};j=i.viewportWidth();a=i.viewportHeight()}g=f.left;f=f.top;if(b==="c")f+=a/2;else if(b==="b")f+=a;if(e==="c")g+=j/2;else if(e==="r")g+=j;return{left:g,top:f}}k.mix(p,{TL:"tl",TC:"tc",TR:"tr",CL:"cl",CC:"cc",CR:"cr",BL:"bl",BC:"bc",BR:"br"});p.ATTRS={align:{}};
p.prototype={_uiSetAlign:function(s){k.isPlainObject(s)&&this.align(s.node,s.points,s.offset)},align:function(s,r,j){var b,e=(this.get("view")||this).get("el");j=j||[0,0];b=e.offset();s=t(s,r[0]);r=t(e,r[1]);r=[r.left-s.left,r.top-s.top];b=[b.left-r[0]+ +j[0],b.top-r[1]+ +j[1]];this.set("xy",b)},center:function(s){this.set("align",{node:s,points:[p.CC,p.CC],offset:[0,0]})}};return p},{requires:["dom"]});
KISSY.add("uibase/base",function(k,i){function p(f){i.apply(this,arguments);for(var a=this.constructor;a;){if(f&&f[r]&&a.HTML_PARSER)if(f[r]=j.one(f[r])){var g=f[r],q=a.HTML_PARSER,u=void 0,x=void 0;for(u in q)if(q.hasOwnProperty(u)){x=q[u];if(k.isFunction(x))this.__set(u,x.call(this,g));else if(k.isString(x))this.__set(u,g.one(x));else k.isArray(x)&&x[0]&&this.__set(u,g.all(x[0]))}}a=a.superclass&&a.superclass.constructor}t(this,"initializer","constructor");f&&f.autoRender&&this.render()}function t(f,
a,g){for(var q=f.constructor,u=[],x,o,w,d;q;){d=[];if(w=q.__ks_exts)for(var m=0;m<w.length;m++)if(x=w[m]){if(g!="constructor")x=x.prototype.hasOwnProperty(g)?x.prototype[g]:null;x&&d.push(x)}if(q.prototype.hasOwnProperty(a)&&(o=q.prototype[a]))d.push(o);d.length&&u.push.apply(u,d.reverse());q=q.superclass&&q.superclass.constructor}for(m=u.length-1;m>=0;m--)u[m]&&u[m].call(f)}function s(f,a){if(!a)return f;for(var g in a)if(k.isObject(a[g])&&k.isObject(f[g]))s(f[g],a[g]);else g in f||(f[g]=a[g])}var r=
"srcNode",j=k.require("node/node"),b=k.require("base/attribute").__capitalFirst,e=function(){};p.HTML_PARSER={};p.ATTRS={render:{valueFn:function(){return document.body},setter:function(f){if(k.isString(f))return j.one(f)}},rendered:{value:false}};k.extend(p,i,{render:function(){if(!this.get("rendered")){this._renderUI();this.fire("renderUI");t(this,"renderUI","__renderUI");this.fire("afterRenderUI");this._bindUI();this.fire("bindUI");t(this,"bindUI","__bindUI");this.fire("afterBindUI");this._syncUI();
this.fire("syncUI");t(this,"syncUI","__syncUI");this.fire("afterSyncUI");this.set("rendered",true)}},_renderUI:e,renderUI:e,_bindUI:function(){var f=this,a=f.__getDefAttrs(),g,q;for(g in a)if(a.hasOwnProperty(g)){q="_uiSet"+b(g);f[q]&&function(u,x){f.on("after"+b(u)+"Change",function(o){f[x](o.newVal,o)})}(g,q)}},bindUI:e,_syncUI:function(){var f=this.__getDefAttrs(),a;for(a in f)if(f.hasOwnProperty(a)){var g="_uiSet"+b(a);this[g]&&this.get(a)!==undefined&&this[g](this.get(a))}},syncUI:e,destroy:function(){for(var f=
this.constructor,a,g,q;f;){(g=f.prototype.destructor)&&g.apply(this);if(a=f.__ks_exts)for(q=a.length-1;q>=0;q--)(g=a[q]&&a[q].prototype.__destructor)&&g.apply(this);f=f.superclass&&f.superclass.constructor}this.fire("destroy");this.detach()}});p.create=function(f,a,g,q){function u(){p.apply(this,arguments)}if(k.isArray(f)){q=g;g=a;a=f;f=p}f=f||p;k.extend(u,f,g,q);if(a){u.__ks_exts=a;k.each(a,function(x){if(x){k.each(["ATTRS","HTML_PARSER"],function(o){if(x[o]){u[o]=u[o]||{};s(u[o],x[o])}});k.augment(u,
x,false)}})}return u};return p},{requires:["base","dom","node"]});KISSY.add("uibase/box",function(){function k(){}k.ATTRS={html:{},width:{},height:{},elCls:{},elStyle:{}};k.prototype={_uiSetElStyle:function(i){this._forwordStateToView("elStyle",i)},_uiSetHtml:function(i){this._forwordStateToView("html",i)},_uiSetWidth:function(i){this._forwordStateToView("width",i)},_uiSetHeight:function(i){this._forwordStateToView("height",i)},_uiSetElCls:function(i){this._forwordStateToView("elCls",i)}};return k});
KISSY.add("uibase/boxrender",function(k){function i(){}k.mix(i,{APPEND:1,INSERT:0});i.ATTRS={el:{setter:function(p){var t=k.require("node/node");if(k.isString(p))return t.one(p)}},elCls:{},elStyle:{},width:{},height:{},elTagName:{value:"div"},elAttrs:{},elOrder:{value:1},html:{}};i.HTML_PARSER={el:function(p){return p}};i.prototype={__renderUI:function(){var p=k.require("node/node"),t=this.get("render"),s=this.get("el");t=new p(t);if(!s){s=new p("<"+this.get("elTagName")+">");this.get("elOrder")?
t.append(s):t.prepend(s);this.set("el",s)}},_uiSetElAttrs:function(p){this.get("el").attr(p)},_uiSetElCls:function(p){this.get("el").addClass(p)},_uiSetElStyle:function(p){this.get("el").css(p)},_uiSetWidth:function(p){this.get("el").width(p)},_uiSetHeight:function(p){this.get("el").height(p)},_uiSetHtml:function(p){this.get("el").html(p)},__destructor:function(){var p=this.get("el");if(p){p.detach();p.remove()}}};return i});
KISSY.add("uibase/close",function(){function k(){}k.ATTRS={closable:{value:true}};k.prototype={_uiSetClosable:function(i){this._forwordStateToView("closable",i)},__bindUI:function(){var i=this,p=i.get("view").get("closeBtn");p&&p.on("click",function(t){i.hide();t.halt()})}};return k});
KISSY.add("uibase/closerender",function(k){function i(){}i.ATTRS={closable:{value:true},closeBtn:{}};i.HTML_PARSER={closeBtn:".ks-ext-close"};i.prototype={_uiSetClosable:function(p){var t=this.get("closeBtn");if(t)p?t.css("display",""):t.css("display","none")},__renderUI:function(){var p=k.require("node/node"),t=this.get("closeBtn"),s=this.get("contentEl");if(!t&&s){t=(new p("<a href='#' class='ks-ext-close'><span class='ks-ext-close-x'>X</span></a>")).appendTo(s);this.set("closeBtn",t)}},__destructor:function(){var p=
this.get("closeBtn");p&&p.detach()}};return i});
KISSY.add("uibase/constrain",function(k,i){function p(){}function t(r){var j;if(!r)return j;var b=this.get("view").get("el");if(r!==true){r=s.one(r);j=r.offset();k.mix(j,{maxLeft:j.left+r[0].offsetWidth-b[0].offsetWidth,maxTop:j.top+r[0].offsetHeight-b[0].offsetHeight})}else{r=document.documentElement.clientWidth;j={left:i.scrollLeft(),top:i.scrollTop()};k.mix(j,{maxLeft:j.left+r-b[0].offsetWidth,maxTop:j.top+i.viewportHeight()-b[0].offsetHeight})}return j}var s=k.require("node/node");p.ATTRS={constrain:{value:false}};
p.prototype={__renderUI:function(){var r=this,j=r.__getDefAttrs(),b=j.x;j=j.y;var e=b.setter,f=j.setter;b.setter=function(a){var g=e&&e(a);if(g===undefined)g=a;if(!r.get("constrain"))return g;a=t.call(r,r.get("constrain"));return Math.min(Math.max(g,a.left),a.maxLeft)};j.setter=function(a){var g=f&&f(a);if(g===undefined)g=a;if(!r.get("constrain"))return g;a=t.call(r,r.get("constrain"));return Math.min(Math.max(g,a.top),a.maxTop)};r.addAttr("x",b);r.addAttr("y",j)}};return p},{requires:["dom","node"]});
KISSY.add("uibase/contentbox",function(){function k(){}k.ATTRS={content:{}};k.prototype={_uiSetContent:function(i){this._forwordStateToView("content",i)}};return k});
KISSY.add("uibase/contentboxrender",function(k,i){function p(){}p.ATTRS={contentEl:{},contentElAttrs:{},contentElStyle:{},contentTagName:{value:"div"},content:{}};p.HTML_PARSER={contentEl:".ks-contentbox"};p.prototype={__renderUI:function(){var t=this.get("contentEl"),s=this.get("el");if(!t){var r=k.makeArray(s[0].childNodes);t=(new i("<"+this.get("contentTagName")+" class='ks-contentbox'>")).appendTo(s);for(s=0;s<r.length;s++)t.append(r[s]);this.set("contentEl",t)}},_uiSetContentElAttrs:function(t){t&&
this.get("contentEl").attr(t)},_uiSetContentElStyle:function(t){t&&this.get("contentEl").css(t)},_uiSetContent:function(t){if(k.isString(t))this.get("contentEl").html(t);else if(t!==undefined){this.get("contentEl").html("");this.get("contentEl").append(t)}}};return p},{requires:["node"]});
KISSY.add("uibase/drag",function(k){function i(){}i.ATTRS={handlers:{value:[]},draggable:{value:true}};i.prototype={_uiSetHandlers:function(p){p&&p.length>0&&this.__drag&&this.__drag.set("handlers",p)},__bindUI:function(){var p=k.require("dd/draggable"),t=this.get("view").get("el");if(this.get("draggable")&&p)this.__drag=new p({node:t,handlers:this.get("handlers")})},_uiSetDraggable:function(p){var t=this.__drag;if(t)if(p){t.detach("drag");t.on("drag",this._dragExtAction,this)}else t.detach("drag")},
_dragExtAction:function(p){this.set("xy",[p.left,p.top])},__destructor:function(){var p=this.__drag;p&&p.destroy()}};return i});KISSY.add("uibase/loading",function(){function k(){}k.prototype={loading:function(){this.get("view").loading()},unloading:function(){this.get("view").unloading()}};return k});
KISSY.add("uibase/loadingrender",function(k){function i(){}i.prototype={loading:function(){if(!this._loadingExtEl)this._loadingExtEl=(new (k.require("node/node"))("<div class='ks-ext-loading' style='position: absolute;border: none;width: 100%;top: 0;left: 0;z-index: 99999;height:100%;*height: expression(this.parentNode.offsetHeight);'>")).appendTo(this.get("el"));this._loadingExtEl.show()},unloading:function(){var p=this._loadingExtEl;p&&p.hide()}};return i});
KISSY.add("uibase/mask",function(){function k(){}k.ATTRS={mask:{value:false}};k.prototype={_uiSetMask:function(i){if(i){this.on("show",this.get("view")._maskExtShow);this.on("hide",this.get("view")._maskExtHide)}else{this.detach("show",this.get("view")._maskExtShow);this.detach("hide",this.get("view")._maskExtHide)}}};return k},{requires:["ua"]});
KISSY.add("uibase/maskrender",function(k){function i(){}var p,t=0;i.prototype={_maskExtShow:function(){if(!p){var s=k.require("ua"),r=k.require("node/node"),j=k.require("dom");p=(new r("<div class='ks-ext-mask'>")).prependTo(document.body);p.css({position:"absolute",left:0,top:0,width:s.ie==6?j.docWidth():"100%",height:j.docHeight()});s.ie==6&&p.append("<iframe style='width:100%;height:expression(this.parentNode.offsetHeight);filter:alpha(opacity=0);z-index:-1;'>")}p.css({"z-index":this.get("zIndex")-
1});t++;p.css("display","")},_maskExtHide:function(){t--;if(t<=0)t=0;t||p&&p.css("display","none")}};return i},{requires:["ua"]});
KISSY.add("uibase/position",function(k,i,p){function t(){}var s=document;t.ATTRS={x:{},y:{},xy:{setter:function(r){var j=k.makeArray(r);if(j.length){j[0]&&this.set("x",j[0]);j[1]&&this.set("y",j[1])}return r}},zIndex:{value:9999},visible:{value:undefined}};t.prototype={_uiSetZIndex:function(r){this._forwordStateToView("zIndex",r)},_uiSetX:function(r){this._forwordStateToView("x",r)},_uiSetY:function(r){this._forwordStateToView("y",r)},_uiSetVisible:function(r){this._forwordStateToView("visible",r);
this[r?"_bindKey":"_unbindKey"]();this.fire(r?"show":"hide")},_bindKey:function(){p.on(s,"keydown",this._esc,this)},_unbindKey:function(){p.remove(s,"keydown",this._esc,this)},_esc:function(r){r.keyCode===27&&this.hide()},move:function(r,j){if(k.isArray(r)){j=r[1];r=r[0]}this.set("xy",[r,j])},show:function(){this._firstShow()},_firstShow:function(){this.render();this._realShow();this._firstShow=this._realShow},_realShow:function(){this.set("visible",true)},hide:function(){this.set("visible",false)}};
return t},{requires:["dom","event"]});KISSY.add("uibase/positionrender",function(){function k(){}k.ATTRS={x:{},y:{},zIndex:{value:9999},visible:{}};k.prototype={__renderUI:function(){var i=this.get("el");i.addClass("ks-ext-position");i.css("display","")},_uiSetZIndex:function(i){this.get("el").css("z-index",i)},_uiSetX:function(i){this.get("el").offset({left:i})},_uiSetY:function(i){this.get("el").offset({top:i})},_uiSetVisible:function(i){this.get("el").css("visibility",i?"visible":"hidden")}};return k});
KISSY.add("uibase/resize",function(k){function i(){}i.ATTRS={resize:{value:{}}};i.prototype={__destructor:function(){self.resizer&&self.resizer.destroy()},_uiSetResize:function(p){var t=k.require("resizable");if(t){this.resizer&&this.resizer.destroy();p.node=this.get("view").get("el");p.autoRender=true;if(p.handlers)this.resizer=new t(p)}}};return i});
KISSY.add("uibase/shimrender",function(k){function i(){}i.ATTRS={shim:{value:true}};i.prototype={_uiSetShim:function(p){var t=k.require("node/node"),s=this.get("el");if(p&&!this.__shimEl){this.__shimEl=new t("<iframe style='position: absolute;border: none;width: expression(this.parentNode.offsetWidth);top: 0;opacity: 0;filter: alpha(opacity=0);left: 0;z-index: -1;height: expression(this.parentNode.offsetHeight);'>");s.prepend(this.__shimEl)}else if(!p&&this.__shimEl){this.__shimEl.remove();delete this.__shimEl}}};
return i});
KISSY.add("uibase/stdmod",function(){function k(){}k.ATTRS={header:{},body:{},footer:{},bodyStyle:{},footerStyle:{},headerStyle:{},headerContent:{},bodyContent:{},footerContent:{}};k.prototype={_uiSetBodyStyle:function(i){this._forwordStateToView("bodyStyle",i)},_uiSetHeaderStyle:function(i){this._forwordStateToView("headerStyle",i)},_uiSetFooterStyle:function(i){this._forwordStateToView("footerStyle",i)},_uiSetBodyContent:function(i){this._forwordStateToView("bodyContent",i)},_uiSetHeaderContent:function(i){this._forwordStateToView("headerContent",i)},
_uiSetFooterContent:function(i){this._forwordStateToView("footerContent",i)}};return k});
KISSY.add("uibase/stdmodrender",function(k,i){function p(){}function t(r,j){var b=r.get("contentEl"),e=r.get(j);if(!e){e=(new i("<div class='"+s+j+"'>")).appendTo(b);r.set(j,e)}}var s="ks-stdmod-";p.ATTRS={header:{},body:{},footer:{},bodyStyle:{},footerStyle:{},headerStyle:{},headerContent:{},bodyContent:{},footerContent:{}};p.HTML_PARSER={header:"."+s+"header",body:"."+s+"body",footer:"."+s+"footer"};p.prototype={_setStdModContent:function(r,j){if(k.isString(j))this.get(r).html(j);else{this.get(r).html("");
this.get(r).append(j)}},_uiSetBodyStyle:function(r){this.get("body").css(r)},_uiSetHeaderStyle:function(r){this.get("header").css(r)},_uiSetFooterStyle:function(r){this.get("footer").css(r)},_uiSetBodyContent:function(r){this._setStdModContent("body",r)},_uiSetHeaderContent:function(r){this._setStdModContent("header",r)},_uiSetFooterContent:function(r){this._setStdModContent("footer",r)},__renderUI:function(){t(this,"header");t(this,"body");t(this,"footer")}};return p},{requires:["node"]});
KISSY.add("uibase",function(k,i,p,t,s,r,j,b,e,f,a,g,q,u,x,o,w,d,m,h,c){r.Render=j;g.Render=q;u.Render=x;o.Render=w;h.Render=c;t.Render=s;e.Render=f;k.mix(i,{Align:p,Box:t,Close:r,Contrain:b,Contentbox:e,Drag:a,Loading:g,Mask:u,Position:o,Shim:{Render:d},Resize:m,StdMod:h});return i},{requires:["uibase/base","uibase/align","uibase/box","uibase/boxrender","uibase/close","uibase/closerender","uibase/constrain","uibase/contentbox","uibase/contentboxrender","uibase/drag","uibase/loading","uibase/loadingrender",
"uibase/mask","uibase/maskrender","uibase/position","uibase/positionrender","uibase/shimrender","uibase/resize","uibase/stdmod","uibase/stdmodrender"]});
KISSY.add("switchable/accordion",function(k,i,p){function t(r,j){if(!(this instanceof t))return new t(r,j);t.superclass.constructor.call(this,r,k.merge(s,j));if(this.config.multiple)this._switchTrigger=function(){};return 0}var s={markupType:1,triggerType:"click",multiple:false};k.extend(t,p);k.augment(t,{_triggerIsValid:function(r){return this.activeIndex!==r||this.config.multiple},_switchView:function(r,j,b){var e=this.config,f=j[0];if(e.multiple){i.toggleClass(this.triggers[b],e.activeTriggerCls);
i.css(f,"display",f.style.display=="none"?"block":"none");this._fireOnSwitch(b)}else t.superclass._switchView.call(this,r,j,b)}});return t},{requires:["dom","switchable/base"]});
KISSY.add("switchable/autoplay",function(k,i,p,t){k.mix(p.Config,{autoplay:false,interval:5,pauseOnHover:true});p.Plugins.push({name:"autoplay",init:function(s){function r(){e=k.later(function(){s.paused||s.switchTo(s.activeIndex<s.length-1?s.activeIndex+1:0,"forward")},b,true)}var j=s.config,b=j.interval*1E3,e;if(j.autoplay){if(j.pauseOnHover){i.on(s.container,"mouseenter",function(){s.stop();s.paused=true});i.on(s.container,"mouseleave",function(){s.paused=false;r()})}r();s.stop=function(){if(e){e.cancel();
e=t}}}}});return p},{requires:["event","switchable/base"]});KISSY.add("switchable/autorender",function(k,i,p,t){t.autoRender=function(s,r){s="."+(s||"KS_Widget");i.query(s,r).each(function(j){var b=j.getAttribute("data-widget-type"),e;if(b&&"Switchable Tabs Slide Carousel Accordion".indexOf(b)>-1)try{if(e=j.getAttribute("data-widget-config"))e=e.replace(/'/g,'"');new k[b](j,p.parse(e))}catch(f){}})}},{requires:["dom","json","switchable/base"]});
KISSY.add("switchable/base",function(k,i,p,t){function s(j,b){b=b||{};if(!("markupType"in b))if(b.panelCls)b.markupType=1;else if(b.panels)b.markupType=2;b=k.merge(s.Config,b);this.container=i.get(j);this.config=b;this.activeIndex=b.activeIndex;this._init()}var r=k.require("event/target");s.Config={markupType:0,navCls:"ks-switchable-nav",contentCls:"ks-switchable-content",triggerCls:"ks-switchable-trigger",panelCls:"ks-switchable-panel",triggers:[],panels:[],hasTriggers:true,triggerType:"mouse",delay:0.1,
activeIndex:0,activeTriggerCls:"ks-active",steps:1,viewSize:[]};s.Plugins=[];k.augment(s,r,{_init:function(){var j=this,b=j.config;j._parseMarkup();b.switchTo&&j.switchTo(b.switchTo);b.hasTriggers&&j._bindTriggers();k.each(s.Plugins,function(e){e.init&&e.init(j)});j.fire("init")},_parseMarkup:function(){var j=this.container,b=this.config,e,f=[],a=[];switch(b.markupType){case 0:if(e=i.get("."+b.navCls,j))f=i.children(e);e=i.get("."+b.contentCls,j);a=i.children(e);break;case 1:f=i.query("."+b.triggerCls,
j);a=i.query("."+b.panelCls,j);break;case 2:f=b.triggers;a=b.panels}j=a.length;this.length=j/b.steps;if(b.hasTriggers&&j>0&&f.length===0)f=this._generateTriggersMarkup(this.length);this.triggers=k.makeArray(f);this.panels=k.makeArray(a);this.content=e||a[0].parentNode},_generateTriggersMarkup:function(j){var b=this.config,e=i.create("<ul>"),f,a;e.className=b.navCls;for(a=0;a<j;a++){f=i.create("<li>");if(a===this.activeIndex)f.className=b.activeTriggerCls;f.innerHTML=a+1;e.appendChild(f)}this.container.appendChild(e);
return i.children(e)},_bindTriggers:function(){var j=this,b=j.config,e=j.triggers,f,a,g=e.length;for(a=0;a<g;a++)(function(q){f=e[q];p.on(f,"click",function(){j._onFocusTrigger(q)});if(b.triggerType==="mouse"){p.on(f,"mouseenter",function(){j._onMouseEnterTrigger(q)});p.on(f,"mouseleave",function(){j._onMouseLeaveTrigger(q)})}})(a)},_onFocusTrigger:function(j){if(this._triggerIsValid(j)){this._cancelSwitchTimer();this.switchTo(j)}},_onMouseEnterTrigger:function(j){var b=this;if(b._triggerIsValid(j))b.switchTimer=
k.later(function(){b.switchTo(j)},b.config.delay*1E3)},_onMouseLeaveTrigger:function(){this._cancelSwitchTimer()},_triggerIsValid:function(j){return this.activeIndex!==j},_cancelSwitchTimer:function(){if(this.switchTimer){this.switchTimer.cancel();this.switchTimer=t}},switchTo:function(j,b){var e=this.config,f=this.triggers,a=this.panels,g=this.activeIndex,q=e.steps,u=g*q,x=j*q;if(!this._triggerIsValid(j))return this;if(this.fire("beforeSwitch",{toIndex:j})===false)return this;if(e.hasTriggers)this._switchTrigger(g>
-1?f[g]:null,f[j]);if(b===t)b=j>g?"forward":"backward";this._switchView(a.slice(u,u+q),a.slice(x,x+q),j,b);this.activeIndex=j;return this},_switchTrigger:function(j,b){var e=this.config.activeTriggerCls;j&&i.removeClass(j,e);i.addClass(b,e)},_switchView:function(j,b,e){i.css(j,"display","none");i.css(b,"display","block");this._fireOnSwitch(e)},_fireOnSwitch:function(j){this.fire("switch",{currentIndex:j})},prev:function(){var j=this.activeIndex;this.switchTo(j>0?j-1:this.length-1,"backward")},next:function(){var j=
this.activeIndex;this.switchTo(j<this.length-1?j+1:0,"forward")}});return s},{requires:["dom","event"]});
KISSY.add("switchable/carousel",function(k,i,p,t,s){function r(g,q){var u=this;if(!(u instanceof r))return new r(g,q);u.on("init",function(){j(u)});r.superclass.constructor.call(u,g,k.merge(a,q));return 0}function j(g){var q=g.config,u=q.disableBtnCls;k.each(["prev","next"],function(x){var o=g[x+"Btn"]=i.get(b+q[x+"BtnCls"],g.container);p.on(o,"click",function(w){w.preventDefault();i.hasClass(o,u)||g[x]()})});q.circular||g.on("switch",function(x){x=x.currentIndex;x=x===0?g[e]:x===g.length-1?g[f]:
s;i.removeClass([g[e],g[f]],u);x&&i.addClass(x,u)});p.on(g.panels,"click focus",function(){g.fire("itemSelected",{item:this})})}var b=".",e="prevBtn",f="nextBtn",a={circular:true,prevBtnCls:"ks-switchable-prev-btn",nextBtnCls:"ks-switchable-next-btn",disableBtnCls:"ks-switchable-disable-btn"};k.extend(r,t);return r},{requires:["dom","event","switchable/base"]});
KISSY.add("switchable/circular",function(k,i,p,t){function s(w,d,m,h,c){var l=this;w=l.config;d=l.length;var n=l.activeIndex,v=w.scrollType===o,y=v?f:a,z=l.viewSize[v?0:1];v=-z*h;var A={},B,C=c===x;if(B=C&&n===0&&h===d-1||c===u&&n===d-1&&h===0)v=r.call(l,l.panels,h,C,y,z);A[y]=v+q;l.anim&&l.anim.stop();l.anim=(new p(l.content,A,w.duration,w.easing,function(){B&&j.call(l,l.panels,h,C,y,z);l.anim=undefined;m()},w.nativeAnim)).run()}function r(w,d,m,h,c){var l=this.config.steps;d=this.length;var n=m?
d-1:0,v=(n+1)*l;for(l=n*l;l<v;l++){i.css(w[l],b,e);i.css(w[l],h,(m?-1:1)*c*d)}return m?c:-c*d}function j(w,d,m,h,c){var l=this.config.steps;d=this.length;var n=m?d-1:0,v=(n+1)*l;for(l=n*l;l<v;l++){i.css(w[l],b,g);i.css(w[l],h,g)}i.css(this.content,h,m?-c*(d-1):g)}var b="position",e="relative",f="left",a="top",g="",q="px",u="forward",x="backward",o="scrollx";k.mix(t.Config,{circular:false});t.Plugins.push({name:"circular",init:function(w){w=w.config;if(w.circular&&(w.effect===o||w.effect==="scrolly")){w.scrollType=
w.effect;w.effect=s}}})},{requires:["dom","anim","switchable/base","switchable/effect"]});
KISSY.add("switchable/countdown",function(k,i,p,t,s,r){k.mix(s.Config,{countdown:false,countdownFromStyle:"",countdownToStyle:"width: 0"});s.Plugins.push({name:"countdown",init:function(j){function b(){e();x=(new t(g[j.activeIndex],u,a-1)).run()}function e(){if(x){x.stop();x=r}}var f=j.config,a=f.interval,g=[],q=f.countdownFromStyle,u=f.countdownToStyle,x;if(!(!f.autoplay||!f.hasTriggers||!f.countdown)){k.each(j.triggers,function(o,w){o.innerHTML='<div class="ks-switchable-trigger-mask"></div><div class="ks-switchable-trigger-content">'+
o.innerHTML+"</div>";g[w]=o.firstChild});if(f.pauseOnHover){p.on(j.container,"mouseenter",function(){e();var o=g[j.activeIndex];if(q)x=(new t(o,q,0.2,"easeOut")).run();else i.removeAttr(o,"style")});p.on(j.container,"mouseleave",function(){e();i.removeAttr(g[j.activeIndex],"style");k.later(b,200)})}j.on("beforeSwitch",function(){e();i.removeAttr(g[j.activeIndex],"style")});j.on("switch",function(){j.paused||b()});b(j.activeIndex)}}});return s},{requires:["dom","event","anim","switchable/base"]});
KISSY.add("switchable/effect",function(k,i,p,t,s,r){var j;k.mix(s.Config,{effect:"none",duration:0.5,easing:"easeNone",nativeAnim:true});s.Effects={none:function(b,e,f){i.css(b,"display","none");i.css(e,"display","block");f()},fade:function(b,e,f){b.length!==1&&k.error("fade effect only supports steps == 1.");var a=this,g=a.config,q=b[0],u=e[0];a.anim&&a.anim.stop(true);i.css(u,"opacity",1);a.anim=(new t(q,{opacity:0},g.duration,g.easing,function(){a.anim=r;i.css(u,"z-index",9);i.css(q,"z-index",
1);f()},g.nativeAnim)).run()},scroll:function(b,e,f,a){var g=this;b=g.config;e=b.effect==="scrollx";var q={};q[e?"left":"top"]=-(g.viewSize[e?0:1]*a)+"px";g.anim&&g.anim.stop();g.anim=(new t(g.content,q,b.duration,b.easing,function(){g.anim=r;f()},b.nativeAnim)).run()}};j=s.Effects;j.scrollx=j.scrolly=j.scroll;s.Plugins.push({name:"effect",init:function(b){var e=b.config,f=e.effect,a=b.panels,g=b.content,q=e.steps,u=b.activeIndex,x=a.length;b.viewSize=[e.viewSize[0]||a[0].offsetWidth*q,e.viewSize[1]||
a[0].offsetHeight*q];if(f!=="none"){k.each(a,function(m){i.css(m,"display","block")});switch(f){case "scrollx":case "scrolly":i.css(g,"position","absolute");i.css(g.parentNode,"position","relative");if(f==="scrollx"){i.css(a,"float","left");i.width(g,b.viewSize[0]*(x/q))}break;case "fade":var o=u*q,w=o+q-1,d;k.each(a,function(m,h){d=h>=o&&h<=w;i.css(m,{opacity:d?1:0,position:"absolute",zIndex:d?9:1})})}}}});k.augment(s,{_switchView:function(b,e,f,a){var g=this,q=g.config.effect;(k.isFunction(q)?q:
j[q]).call(g,b,e,function(){g._fireOnSwitch(f)},f,a)}});return s},{requires:["dom","event","anim","switchable/base"]});
KISSY.add("switchable/lazyload",function(k,i,p){var t="beforeSwitch",s="img-src",r="area-data",j={};j[s]="data-ks-lazyload-custom";j[r]="ks-datalazyload-custom";k.mix(p.Config,{lazyDataType:r});p.Plugins.push({name:"lazyload",init:function(b){function e(u){var x=a.steps;u=u.toIndex*x;f.loadCustomLazyData(b.panels.slice(u,u+x),g);a:{var o,w;if(u=(x=g===s)?"img":g===r?"textarea":""){u=i.query(u,b.container);o=0;for(w=u.length;o<w;o++)if(x?i.attr(u[o],q):i.hasClass(u[o],q)){x=false;break a}}x=true}x&&
b.detach(t,e)}var f=k.require("datalazyload"),a=b.config,g=a.lazyDataType,q=j[g];!f||!g||!q||b.on(t,e)}});return p},{requires:["dom","switchable/base"]});KISSY.add("switchable/slide",function(k,i){function p(s,r){if(!(this instanceof p))return new p(s,r);p.superclass.constructor.call(this,s,k.merge(t,r));return 0}var t={autoplay:true,circular:true};k.extend(p,i);return p},{requires:["switchable/base"]});
KISSY.add("switchable/tabs",function(k,i){function p(t,s){if(!(this instanceof p))return new p(t,s);p.superclass.constructor.call(this,t,s);return 0}k.extend(p,i);return p},{requires:["switchable/base"]});KISSY.add("switchable",function(k,i){return i},{requires:["switchable/base","switchable/accordion","switchable/autoplay","switchable/autorender","switchable/carousel","switchable/circular","switchable/countdown","switchable/effect","switchable/lazyload","switchable/slide","switchable/tabs"]});
KISSY.add("overlay/dialog",function(k,i,p,t){function s(r){return k.require("uibase/"+r)}return p.create(i,[s("stdmod"),s("close"),s("drag"),s("constrain")],{renderUI:function(){this.get("view").get("el").addClass("ks-dialog");this.set("handlers",[this.get("view").get("header")])}},{ATTRS:{view:{valueFn:function(){return new t}}}})},{requires:["overlay/overlay","uibase","overlay/dialogrender"]});
KISSY.add("overlay/dialogrender",function(k,i,p){return i.create(p,[k.require("uibase/stdmodrender"),k.require("uibase/closerender")])},{requires:["uibase","./overlayrender"]});KISSY.add("overlay/overlay",function(k,i,p,t){function s(r){return k.require("uibase/"+r)}return i.create(p.ModelControl,[s("box"),s("contentbox"),s("position"),s("loading"),s("align"),s("resize"),s("mask")],{},{ATTRS:{view:{valueFn:function(){return new t}}}})},{requires:["uibase","component","./overlayrender"]});
KISSY.add("overlay/overlayrender",function(k,i,p,t){function s(r){return k.require("uibase/"+r)}return p.create(t.Render,[s("boxrender"),s("contentboxrender"),s("positionrender"),s("loadingrender"),i.ie==6?s("shimrender"):null,s("maskrender")],{renderUI:function(){this.get("el").addClass("ks-overlay")}},{ATTRS:{elOrder:0}})},{requires:["ua","uibase","component"]});
KISSY.add("overlay",function(k,i,p,t,s){i.Render=p;t.Render=s;i.Dialog=t;return i},{requires:["overlay/overlay","overlay/overlayrender","overlay/dialog","overlay/dialogrender"]});KISSY.add("suggest",function(k,i){return i},{requires:["suggest/base"]});
KISSY.add("suggest/base",function(k,i,p,t,s){function r(h,c,l){if(!(this instanceof r))return new r(h,c,l);this.textInput=i.get(h);this.config=l=k.merge(m,l);c+=c.indexOf("?")===-1?"?":"&";this.dataSource=c+l.callbackName+"="+(h=l.callbackFn);if(h!==x){l=h;h=l.split(".");c=h.length;if(c>1){l=l.replace(/^(.*)\..+$/,"$1");l=k.namespace(l,true);l[h[c-1]]=b}else e[l]=b}this.queryParams=this.query=o;this._dataCache={};this._init();return 0}function j(h,c){if(c.nodeType===1){i.html(h,o);h.appendChild(c)}else i.html(h,
c)}function b(h){r.focusInstance&&k.later(function(){r.focusInstance._handleResponse(h)},0)}var e=window,f=k.require("event/target"),a=document,g,q=i.get("head"),u=t.ie,x="KISSY.Suggest.callback",o="",w=parseInt,d=/^(?:input|button|a)$/i,m={containerCls:o,resultFormat:"%result%",closeBtnText:"\u5173\u95ed",shim:u===6,submitOnSelect:true,offset:-1,charset:"utf-8",callbackName:"callback",callbackFn:x,queryName:"q"};k.augment(r,f,{_init:function(){g=a.body;this._initTextInput();this._initContainer();this.config.shim&&
this._initShim();this._initStyle();this._initEvent()},_initTextInput:function(){var h=this,c=h.textInput,l=false,n=0;i.attr(c,"autocomplete","off");h.config.autoFocus&&c.focus();p.on(c,"keydown",function(v){var y=v.keyCode;if(y===27){h.hide();c.value=h.query}else if(y>32&&y<41)if(c.value){if(y===40||y===38){if(n++===0){h._isRunning&&h.stop();l=true;h._selectItem(y===40)}else if(n==3)n=0;v.preventDefault()}}else c.blur();else if(y===13){c.blur();if(l)if(c.value==h._getSelectedItemKey())if(h.fire("itemSelect")===
false)return;h._submitForm()}else{h._isRunning||h.start();l=false}});p.on(c,"keyup",function(){n=0});p.on(c,"blur",function(){h.stop();k.later(function(){h._focusing||h.hide()},0)})},_initContainer:function(){var h=this.config.containerCls;h=i.create("<div>",{"class":"ks-suggest-container"+(h?" "+h:o),style:"position:absolute;visibility:hidden"});var c=i.create("<div>",{"class":"ks-suggest-content"}),l=i.create("<div>",{"class":"ks-suggest-footer"});h.appendChild(c);h.appendChild(l);g.insertBefore(h,
g.firstChild);this.container=h;this.content=c;this.footer=l;this._initContainerEvent()},_setContainerRegion:function(){var h=this.config,c=this.textInput,l=i.offset(c),n=this.container;i.offset(n,{left:l.left,top:l.top+c.offsetHeight+h.offset});i.width(n,h.containerWidth||c.offsetWidth-2)},_initContainerEvent:function(){var h=this,c=h.textInput,l=h.container,n=h.content,v=h.footer,y,z;p.on(n,"mousemove",function(A){A=A.target;if(A.nodeName!=="LI")A=i.parent(A,"li");if(i.contains(n,A))if(A!==h.selectedItem){h._removeSelectedItem();
h._setSelectedItem(A)}});p.on(n,"mousedown",function(A){A=A.target;if(A.nodeName!=="LI")A=i.parent(A,"li");y=A});p.on(l,"mousedown",function(A){if(!d.test(A.target.nodeName)){c.onbeforedeactivate=function(){e.event.returnValue=false;c.onbeforedeactivate=null};A.preventDefault()}});p.on(n,"mouseup",function(A){var B=A.target;if(!(A.which>2)){if(B.nodeName!=="LI")B=i.parent(B,"li");if(B==y)if(i.contains(n,B)){h._updateInputFromSelectItem(B);if(h.fire("itemSelect")!==false){c.blur();h._submitForm()}}}});
p.on(v,"focusin",function(){h._focusing=true;h._removeSelectedItem();z=false});p.on(v,"focusout",function(){h._focusing=false;k.later(function(){if(z)h.hide();else h._focusing||h.textInput.focus()},0)});p.on(h.container,"mouseleave",function(){z=true});p.on(v,"click",function(A){i.hasClass(A.target,"ks-suggest-closebtn")&&h.hide()})},_submitForm:function(){if(this.config.submitOnSelect){var h=this.textInput.form;if(h)if(this.fire("beforeSubmit",{form:h})!==false){if(a.createEvent){var c=a.createEvent("MouseEvents");
c.initEvent("submit",true,false);h.dispatchEvent(c)}else a.createEventObject&&h.fireEvent("onsubmit");h.submit()}}},_initShim:function(){var h=i.create("<iframe>",{src:"about:blank","class":"ks-suggest-shim",style:"position:absolute;visibility:hidden;border:none"});this.container.shim=h;g.insertBefore(h,g.firstChild)},_setShimRegion:function(){var h=this.container,c=h.style,l=h.shim;l&&i.css(l,{left:w(c.left)-2,top:c.top,width:w(c.width)+2,height:i.height(h)-2})},_initStyle:function(){i.get("#ks-suggest-style")||
i.addStyleSheet(".ks-suggest-container{background:white;border:1px solid #999;z-index:99999}.ks-suggest-shim{z-index:99998}.ks-suggest-container li{color:#404040;padding:1px 0 2px;font-size:12px;line-height:18px;float:left;width:100%}.ks-suggest-container .ks-selected{background-color:#39F;cursor:default}.ks-suggest-key{float:left;text-align:left;padding-left:5px}.ks-suggest-result{float:right;text-align:right;padding-right:5px;color:green}.ks-suggest-container .ks-selected span{color:#FFF;cursor:default}.ks-suggest-footer{padding:0 5px 5px}.ks-suggest-closebtn{float:right}.ks-suggest-container li,.ks-suggest-footer{overflow:hidden;zoom:1;clear:both}.ks-suggest-container{*margin-left:2px;_margin-left:-2px;_margin-top:-3px}",
"ks-suggest-style")},_initEvent:function(){var h=this;p.on(e,"resize",function(){h._setContainerRegion();h._setShimRegion()})},start:function(){var h=this;if(h.fire("beforeStart")!==false){r.focusInstance=h;h._timer=k.later(function(){h._updateContent();h._timer=k.later(arguments.callee,200)},200);h._isRunning=true}},stop:function(){r.focusInstance=s;this._timer&&this._timer.cancel();this._isRunning=false},show:function(){if(!this.isVisible()){var h=this.container,c=h.shim;this._setContainerRegion();
h.style.visibility=o;if(c){this._setShimRegion();c.style.visibility=o}}},hide:function(){if(this.isVisible()){var h=this.container,c=h.shim;if(c)c.style.visibility="hidden";h.style.visibility="hidden"}},isVisible:function(){return this.container.style.visibility!="hidden"},_updateContent:function(){var h=this.textInput;if(h.value!=this.query){h=this.query=h.value;if(k.trim(h))if(this._dataCache[h]!==s){this._fillContainer(this._dataCache[h]);this._displayContainer()}else this._requestData();else{this._fillContainer();
this.hide()}}},_requestData:function(){var h=this,c=h.config,l;if(!u)h.dataScript=s;if(!h.dataScript){l=a.createElement("script");l.charset=c.charset;l.async=true;q.insertBefore(l,q.firstChild);h.dataScript=l;if(!u){var n=k.now();h._latestScriptTime=n;i.attr(l,"data-time",n);p.on(l,"load",function(){h._scriptDataIsOut=i.attr(l,"data-time")!=h._latestScriptTime})}}h.queryParams=c.queryName+"="+encodeURIComponent(h.query);if(h.fire("beforeDataRequest")!==false)h.dataScript.src=h.dataSource+"&"+h.queryParams},
_handleResponse:function(h){var c=o,l,n,v,y;if(!this._scriptDataIsOut){this.returnedData=h;if(this.fire("dataReturn",{data:h})!==false){h=this._formatData(this.returnedData);if((l=h.length)>0){n=i.create("<ol>");for(c=0;c<l;++c){v=h[c];v=this._formatItem(y=v.key,v.result);i.attr(v,"key",y);i.addClass(v,c%2?"ks-even":"ks-odd");n.appendChild(v)}c=n}this._fillContainer(c);if(this.fire("beforeShow")!==false){this._dataCache[this.query]=i.html(this.content);this._displayContainer()}}}},_formatData:function(h){var c=
[],l,n,v,y=0;if(!h)return c;if(k.isArray(h.result))h=h.result;if(!(l=h.length))return c;for(v=0;v<l;++v){n=h[v];if(k.isString(n))c[y++]={key:n};else if(k.isArray(n)&&n.length>1)c[y++]={key:n[0],result:n[1]}}return c},_formatItem:function(h,c){var l=i.create("<li>"),n;l.appendChild(i.create("<span>",{"class":"ks-suggest-key",html:h}));if(c){n=this.config.resultFormat.replace("%result%",c);k.trim(n)&&l.appendChild(i.create("<span>",{"class":"ks-suggest-result",html:n}))}return l},_fillContainer:function(h,
c){this._fillContent(h||o);this._fillFooter(c||o)},_fillContent:function(h){j(this.content,h);this.selectedItem=s},_fillFooter:function(h){var c=this.config,l=this.footer;j(l,h);c.closeBtn&&l.appendChild(i.create("<a>",{"class":"ks-suggest-closebtn",text:c.closeBtnText,href:"javascript: void(0)",target:"_self"}));this.fire("updateFooter",{footer:l,query:this.query});i.css(l,"display",i.text(l)?o:"none")},_displayContainer:function(){k.trim(i.text(this.container))?this.show():this.hide()},_selectItem:function(h){var c=
i.query("li",this.container);if(c.length!==0)if(this.isVisible()){if(this.selectedItem){h=i[h?"next":"prev"](this.selectedItem);if(!h)this.textInput.value=this.query}else h=c[h?0:c.length-1];this._removeSelectedItem();if(h){this._setSelectedItem(h);this._updateInputFromSelectItem()}}else this.show()},_removeSelectedItem:function(){i.removeClass(this.selectedItem,"ks-selected");this.selectedItem=s},_setSelectedItem:function(h){i.addClass(h,"ks-selected");this.selectedItem=h;this.textInput.focus()},
_getSelectedItemKey:function(){if(!this.selectedItem)return o;return i.attr(this.selectedItem,"key")},_updateInputFromSelectItem:function(){this.textInput.value=this._getSelectedItemKey(this.selectedItem)||this.query}});r.version=1.1;r.callback=b;return k.Suggest=r},{requires:["dom","event","ua"]});
KISSY.add("imagezoom/autorender",function(k,i,p,t){t.autoRender=function(s,r){s="."+(s||"KS_Widget");i.query(s,r).each(function(j){var b;if(j.getAttribute("data-widget-type")==="ImageZoom")try{if(b=j.getAttribute("data-widget-config"))b=b.replace(/'/g,'"');new t(j,p.parse(b))}catch(e){}})}},{requires:["dom","json","imagezoom/base"]});
KISSY.add("imagezoom/base",function(k,i,p,t,s,r,j,b,e){function f(a){return k.require("uibase/"+a)}return r.create([f("box"),f("contentbox"),f("position"),f("loading"),t.ie==6?f("shim"):null,f("align"),f("mask"),b],{initializer:function(){var a=this,g;(g=a.image=a.get("imageNode"))&&b.__imgOnLoad(g,function(){if(!a.imageWrap){a._render();a._bind()}})},renderUI:function(){},syncUI:function(){},bindUI:function(){},destructor:function(){this.image.detach()},_render:function(){var a=this.image;(this.imageWrap=
(new j(k.substitute("<div class='{wrapClass}'></div>",{wrapClass:this.get("wrapClass")}))).insertBefore(a)).prepend(a);if(this.get("showIcon")){this.icon=new j(k.substitute("<span class='{iconClass}'></span>",{iconClass:this.get("iconClass")}));this.imageWrap.append(this.icon)}},_bind:function(){var a=this,g;a.image.on("mouseenter",function(q){if(a.get("hasZoom"))g=k.later(function(){a.set("currentMouse",q);a.show();g=e},100)}).on("mouseleave",function(){if(g){g.cancel();g=e}})},_uiSetHasZoom:function(a){if(a)this.icon&&
this.icon.show();else this.icon&&this.icon.hide()}},{ATTRS:{imageNode:{setter:function(a){return j.one(a)}},wrapClass:{value:"ks-imagezoom-wrap"},imageWidth:{valueFn:function(){var a=this.get("imageNode");return(a=a&&a.width())||400}},imageHeight:{valueFn:function(){var a=this.get("imageNode");return(a=a&&a.height())||400}},imageLeft:{valueFn:function(){var a=this.get("imageNode");return(a=a&&a.offset().left)||400}},imageTop:{valueFn:function(){var a=this.get("imageNode");return(a=a&&a.offset().top)||
400}},hasZoom:{value:true,setter:function(a){return!!a}},showIcon:{value:true},iconClass:{value:"ks-imagezoom-icon"}}})},{requires:["dom","event","ua","anim","uibase","node","imagezoom/zoomer"]});
KISSY.add("imagezoom/zoomer",function(k,i,p){function t(){var a;if((a=this.get("bigImageSrc"))&&this.get("preload"))(new Image).src=a;this._isInner=this.get("type")===j}function s(a,g){var q=a[0];q&&q.complete&&q.clientWidth?g():a.on("load",g)}var r=new i(document.body),j="inner",b=/^.+\.(?:jpg|png|gif)$/i,e=Math.round,f=Math.min;t.ATTRS={width:{valueFn:function(){return this.get("imageWidth")}},height:{valueFn:function(){return this.get("imageHeight")}},elCls:{value:"ks-imagezoom-viewer"},elStyle:{value:{overflow:"hidden",
position:"absolute"}},type:{value:"standard"},preload:{value:true},bigImageSrc:{setter:function(a){if(a&&b.test(a))return a;return this.get("bigImageSrc")},valueFn:function(){var a=this.get("imageNode");if(a)if((a=a.attr("data-ks-imagezoom"))&&b.test(a))return a;return p}},bigImageWidth:{valueFn:function(){var a=this.bigImage;return(a=a&&a.width())||800}},bigImageHeight:{valueFn:function(){var a=this.bigImage;return(a=a&&a.height())||800}},currentMouse:{value:p},lensClass:{value:"ks-imagezoom-lens"},
lensHeight:{value:p},lensWidth:{value:p},lensTop:{value:p},lensLeft:{value:p}};t.HTML_PARSER={};k.augment(t,{__renderUI:function(){var a=this,g;a.viewer=a.get("contentEl");g=a.bigImage=(new i('<img src="'+a.get("bigImageSrc")+'" />')).css("position","absolute").appendTo(a.viewer);a._setLensSize();a._setLensOffset();if(a._isInner)a._bigImageCopy=(new i('<img src="'+a.image.attr("src")+'"  />')).css("position","absolute").width(a.get("bigImageWidth")).height(a.get("bigImageHeight")).prependTo(a.viewer);
else a.lens=(new i('<div class="'+a.get("lensClass")+'"></div>')).css("position","absolute").appendTo(r).hide();a.viewer.appendTo(a.get("el"));s(g,function(){a._setLensSize();a.set("bigImageWidth",g.width());a.set("bigImageHeight",g.height())})},__bindUI:function(){var a=this;a.on("show",function(){var g=a.icon;g&&g.hide();a._isInner&&a._anim(0.4,42);r.on("mousemove",a._mouseMove,a)});a.on("hide",function(){var g=a.lens;g&&g.hide();(g=a.icon)&&g.show();r.detach("mousemove",a._mouseMove,a)})},__syncUI:function(){},
__destructor:function(){this.viewer.remove();this.lens.remove()},_setLensSize:function(){var a=this.get("imageWidth"),g=this.get("imageHeight"),q=this.get("bigImageWidth"),u=this.get("bigImageHeight"),x=this.get("width"),o=this.get("height");this.set("lensWidth",f(e(x*a/q),a));this.set("lensHeight",f(e(o*g/u),g))},_setLensOffset:function(a){a=a||this.get("currentMouse");var g=this.get("imageLeft"),q=this.get("imageTop"),u=this.get("imageWidth"),x=this.get("imageHeight");this.get("width");this.get("height");
var o=this.get("lensWidth"),w=this.get("lensHeight"),d=a.pageX-o/2;a=a.pageY-w/2;if(d<=g)d=g;else if(d>=u+g-o)d=u+g-o;if(a<=q)a=q;else if(a>=x+q-w)a=x+q-w;this.set("lensLeft",d);this.set("lensTop",a)},_mouseMove:function(a){var g=this.get("imageLeft"),q=this.get("imageTop"),u=this.get("imageWidth"),x=this.get("imageHeight");a.pageX>g&&a.pageX<g+u&&a.pageY>q&&a.pageY<q+x?this.set("currentMouse",a):this.hide()},_anim:function(a,g){var q=this,u,x=1;u=q.get("imageLeft");var o=q.get("imageTop"),w=q.get("imageWidth"),
d=q.get("imageHeight"),m=q.get("bigImageWidth"),h=q.get("bigImageHeight"),c=-e((q.get("lensLeft")-u)*m/w),l=-e((q.get("lensTop")-o)*h/d),n,v,y;q._animTimer&&q._animTimer.cancel();q.bigImage.width(w).height(d);q._bigImageCopy.width(w).height(d);q._animTimer=k.later(u=function(){n=w+(m-w)/g*x;v=d+(h-d)/g*x;y={left:c/g*x,top:l/g*x};q.bigImage.width(n).height(v).css(y);q._bigImageCopy.width(n).height(v).css(y);if(++x>g){q._animTimer.cancel();q._animTimer=p}},a*1E3/g,true);u()},_uiSetCurrentMouse:function(a){if(!(!this.bigImage||
this._animTimer)){var g=this.lens;g&&g.show();this._setLensOffset(a);a={left:-e((this.get("lensLeft")-this.get("imageLeft"))*this.get("bigImageWidth")/this.get("imageWidth")),top:-e((this.get("lensTop")-this.get("imageTop"))*this.get("bigImageHeight")/this.get("imageHeight"))};this._bigImageCopy&&this._bigImageCopy.css(a);this.bigImage.css(a)}},_uiSetLensWidth:function(a){this.lens&&this.lens.width(a)},_uiSetLensHeight:function(a){this.lens&&this.lens.height(a)},_uiSetLensTop:function(a){this.lens&&
this.lens.offset({top:a})},_uiSetLensLeft:function(a){this.lens&&this.lens.offset({left:a})},_uiSetBigImageWidth:function(a){a&&this.bigImage&&this.bigImage.width(a);a&&this._bigImageCopy&&this._bigImageCopy.width(a)},_uiSetBigImageHeight:function(a){a&&this.bigImage&&this.bigImage.height(a);a&&this._bigImageCopy&&this._bigImageCopy.height(a)},_uiSetBigImageSrc:function(a){a&&this.bigImage&&this.bigImage.attr("src",a);a&&this._bigImageCopy&&this._bigImageCopy.attr("src",a)}});t.__imgOnLoad=s;return t},
{requires:["node"]});KISSY.add("imagezoom",function(k,i){return i},{requires:["imagezoom/base","imagezoom/autorender"]});
KISSY.add("calendar/base",function(k,i,p,t){function s(b,e){this._init(b,e)}var r=k.require("node/node"),j=k.require("event/target");k.augment(s,{_init:function(b,e){var f=r.one(b);this.id=this.C_Id=this._stamp(f);this._buildParam(e);if(this.popup){this.trigger=f;this.con=new r("<div>");r.one("body").append(this.con);this.C_Id=this._stamp(this.con);this.con.css({top:"0px",position:"absolute",background:"white",visibility:"hidden"})}else this.con=f;f=function(){};k.augment(f,j);f=new f;k.mix(this,
f);this.render();this._buildEvent();return this},render:function(b){var e=0,f,a;b=b||{};this._parseParam(b);this.ca=[];this.con.addClass("ks-cal-call ks-clearfix multi-"+this.pages);this.con.html("");e=0;for(a=[this.year,this.month];e<this.pages;e++){if(e===0)b=true;else{b=false;a=this._computeNextMonth(a)}f=e==this.pages-1;this.ca.push(new this.Page({year:a[0],month:a[1],prevArrow:b,nextArrow:f,showTime:this.showTime},this));this.ca[e].render()}return this},_stamp:function(b){if(b.attr("id")===t||
b.attr("id")==="")b.attr("id","K_"+k.now());return b.attr("id")},_showdate:function(b,e){var f=new Date(e-0+b*864E5);f=f.getFullYear()+"/"+(f.getMonth()+1)+"/"+f.getDate();return new Date(f)},_buildEvent:function(){var b=this;if(!b.popup)return this;for(var e=0;e<b.EV.length;e++)b.EV[e]!==t&&b.EV[e].detach();b.EV[0]=r.one("body").on("click",function(f){if(f.target.attr("id")!==b.C_Id)if(!((f.target.hasClass("ks-next")||f.target.hasClass("ks-prev"))&&f.target[0].tagName==="A"))if(f.target.attr("id")!=
b.id)if(b.con.css("visibility")!="hidden")(function(a,g){return a[0]>g[0].x&&a[0]<g[1].x&&a[1]>g[0].y&&a[1]<g[1].y})([f.pageX,f.pageY],[{x:b.con.offset().left,y:b.con.offset().top},{x:b.con.offset().left+b.con.width(),y:b.con.offset().top+b.con.height()}])||b.hide()});for(e=0;e<b.triggerType.length;e++)b.EV[1]=r.one("#"+b.id).on(b.triggerType[e],function(f){f.target=r(f.target);f.preventDefault();var a=b.triggerType;if(k.inArray("click",a)&&k.inArray("focus",a))f.type=="focus"&&b.toggle();else if(k.inArray("click",
a)&&!k.inArray("focus",a))f.type=="click"&&b.toggle();else!k.inArray("click",a)&&k.inArray("focus",a)?setTimeout(function(){b.toggle()},170):b.toggle()});return this},toggle:function(){this.con.css("visibility")=="hidden"?this.show():this.hide()},show:function(){this.con.css("visibility","");var b=this.trigger.offset().left,e=this.trigger[0].offsetHeight||this.trigger.height();e=this.trigger.offset().top+e;this.con.css("left",b.toString()+"px");this.con.css("top",e.toString()+"px");return this},hide:function(){this.con.css("visibility",
"hidden");return this},_buildParam:function(b){function e(q,u){var x=b[u];f[u]=x===t||x===null?q:x}var f=this;if(b===t||b===null)b={};k.each({date:new Date,startDay:0,pages:1,closable:false,rangeSelect:false,minDate:false,maxDate:false,multiSelect:false,navigator:true,popup:false,showTime:false,triggerType:["click"]},e);if(typeof b.triggerType==="string")b.triggerType=[b.triggerType];e(f.date,"selected");if(b.startDay)f.startDay=(7-b.startDay)%7;if(b.range!==t&&b.range!==null){var a=f._showdate(1,
new Date(b.range.start.getFullYear()+"/"+(b.range.start.getMonth()+1)+"/"+b.range.start.getDate())),g=f._showdate(1,new Date(b.range.end.getFullYear()+"/"+(b.range.end.getMonth()+1)+"/"+b.range.end.getDate()));f.range={start:a,end:g}}else f.range={start:null,end:null};f.EV=[];return this},_parseParam:function(b){var e;if(b===t||b===null)b={};for(e in b)this[e]=b[e];this._handleDate();return this},_templetShow:function(b,e){var f,a,g,q;if(e instanceof Array){f="";for(a=0;a<e.length;a++)f+=arguments.callee(b,
e[a]);b=f}else{f=b.match(/{\$(.*?)}/g);if(e!==t&&f!==null){a=0;for(g=f.length;a<g;a++){q=f[a].replace(/({\$)|}/g,"");q=e[q]!==t?e[q]:"";b=b.replace(f[a],q)}}}return b},_handleDate:function(){var b=this.date;this.weekday=b.getDay()+1;this.day=b.getDate();this.month=b.getMonth();this.year=b.getFullYear();return this},_getHeadStr:function(b,e){return b.toString()+"\u5e74"+(Number(e)+1).toString()+"\u6708"},_monthAdd:function(){if(this.month==11){this.year++;this.month=0}else this.month++;this.date=new Date(this.year.toString()+
"/"+(this.month+1).toString()+"/"+this.day.toString());return this},_monthMinus:function(){if(this.month===0){this.year--;this.month=11}else this.month--;this.date=new Date(this.year.toString()+"/"+(this.month+1).toString()+"/"+this.day.toString());return this},_computeNextMonth:function(b){var e=b[0];b=b[1];if(b==11){e++;b=0}else b++;return[e,b]},_handleOffset:function(){var b=["\u65e5","\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d"],e=this.startDay,f="";f=[];for(var a=0;a<7;a++)f[a]={day:b[(a-e+7)%7]};f=this._templetShow("<span>{$day}</span>",
f);return{day_html:f}},_handleRange:function(b){if(this.range.start===null&&this.range.end===null||this.range.start!==null&&this.range.end!==null){this.range.start=b;this.range.end=null;this.render()}else if(this.range.start!==null&&this.range.end===null){this.range.end=b;if(this.range.start.getTime()>this.range.end.getTime()){b=this.range.start;this.range.start=this.range.end;this.range.end=b}this.fire("rangeSelect",this.range);this.render()}return this}});return s},{requires:["node","event"]});
KISSY.add("calendar/date",function(){var k=function(){var i=/w{1}|d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g,p=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,t=/[^-+\dA-Z]/g,s=function(b,e){b=String(b);for(e=e||2;b.length<e;)b="0"+b;return b},r={"default":"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",longTime:"h:MM:ss TT Z",
isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:ss",isoUTCDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'",localShortDate:"yy\u5e74mm\u6708dd\u65e5",localShortDateTime:"yy\u5e74mm\u6708dd\u65e5 hh:MM:ss TT",localLongDate:"yyyy\u5e74mm\u6708dd\u65e5",localLongDateTime:"yyyy\u5e74mm\u6708dd\u65e5 hh:MM:ss TT",localFullDate:"yyyy\u5e74mm\u6708dd\u65e5 w",localFullDateTime:"yyyy\u5e74mm\u6708dd\u65e5 w hh:MM:ss TT"},j={dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","\u661f\u671f\u65e5","\u661f\u671f\u4e00","\u661f\u671f\u4e8c","\u661f\u671f\u4e09","\u661f\u671f\u56db","\u661f\u671f\u4e94",
"\u661f\u671f\u516d"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"]};return function(b,e,f){if(arguments.length==1&&Object.prototype.toString.call(b)=="[object String]"&&!/\d/.test(b)){e=b;b=undefined}b=b?new Date(b):new Date;if(isNaN(b))throw SyntaxError("invalid date");e=String(r[e]||e||r["default"]);if(e.slice(0,4)=="UTC:"){e=e.slice(4);f=true}var a=f?"getUTC":"get",
g=b[a+"Date"](),q=b[a+"Day"](),u=b[a+"Month"](),x=b[a+"FullYear"](),o=b[a+"Hours"](),w=b[a+"Minutes"](),d=b[a+"Seconds"]();a=b[a+"Milliseconds"]();var m=f?0:b.getTimezoneOffset(),h={d:g,dd:s(g,undefined),ddd:j.dayNames[q],dddd:j.dayNames[q+7],w:j.dayNames[q+14],m:u+1,mm:s(u+1,undefined),mmm:j.monthNames[u],mmmm:j.monthNames[u+12],yy:String(x).slice(2),yyyy:x,h:o%12||12,hh:s(o%12||12,undefined),H:o,HH:s(o,undefined),M:w,MM:s(w,undefined),s:d,ss:s(d,undefined),l:s(a,3),L:s(a>99?Math.round(a/10):a,undefined),
t:o<12?"a":"p",tt:o<12?"am":"pm",T:o<12?"A":"P",TT:o<12?"AM":"PM",Z:f?"UTC":(String(b).match(p)||[""]).pop().replace(t,""),o:(m>0?"-":"+")+s(Math.floor(Math.abs(m)/60)*100+Math.abs(m)%60,4),S:["th","st","nd","rd"][g%10>3?0:(g%100-g%10!=10)*g%10]};return e.replace(i,function(c){return c in h?h[c]:c.slice(1,c.length-1)})}}();return{format:function(i,p,t){return k(i,p,t)},parse:function(i){var p=null;if(p instanceof Date)i=p;else{p=new Date(i);i=p instanceof Date&&p!="Invalid Date"&&!isNaN(p)?p:null}return i}}});
KISSY.add("calendar/page",function(k,i,p,t){var s=k.require("node/node");k.augment(t,{Page:function(r,j){this.father=j;this.month=Number(r.month);this.year=Number(r.year);this.prevArrow=r.prevArrow;this.nextArrow=r.nextArrow;this.timmer=this.node=null;this.id="";this.EV=[];this.html=['<div class="ks-cal-box" id="{$id}"><div class="ks-cal-hd"><a href="javascript:void(0);" class="ks-prev {$prev}"><</a><a href="javascript:void(0);" class="ks-title">{$title}</a><a href="javascript:void(0);" class="ks-next {$next}">></a></div><div class="ks-cal-bd"><div class="ks-whd">',
j._handleOffset().day_html,'</div><div class="ks-dbd ks-clearfix">{$ds}</div></div><div class="ks-setime hidden"></div><div class="ks-cal-ft {$showtime}"><div class="ks-cal-time">\u65f6\u95f4\uff1a00:00 &hearts;</div></div><div class="ks-selectime hidden"></div></div><!--#ks-cal-box--\>'].join("");this.nav_html='<p>\u6708<select value="{$the_month}"><option class="m1" value="1">01</option><option class="m2" value="2">02</option><option class="m3" value="3">03</option><option class="m4" value="4">04</option><option class="m5" value="5">05</option><option class="m6" value="6">06</option><option class="m7" value="7">07</option><option class="m8" value="8">08</option><option class="m9" value="9">09</option><option class="m10" value="10">10</option><option class="m11" value="11">11</option><option class="m12" value="12">12</option></select></p><p>\u5e74<input type="text" value="{$the_year}" onfocus="this.select()"/></p><p><button class="ok">\u786e\u5b9a</button><button class="cancel">\u53d6\u6d88</button></p>';
this.Verify=function(){return{isDay:function(b){if(!/^\d+$/i.test(b))return false;b=Number(b);return!(b<1||b>31)},isYear:function(b){if(!/^\d+$/i.test(b))return false;b=Number(b);return!(b<100||b>1E4)},isMonth:function(b){if(!/^\d+$/i.test(b))return false;b=Number(b);return!(b<1||b>12)}}};this._renderUI=function(){var b={};this.HTML="";b.prev="";b.next="";b.title="";b.ds="";if(!this.prevArrow)b.prev="hidden";if(!this.nextArrow)b.next="hidden";if(!this.father.showtime)b.showtime="hidden";b.id=this.id=
"ks-cal-"+Math.random().toString().replace(/.\./i,"");b.title=this.father._getHeadStr(this.year,this.month);this.createDS();b.ds=this.ds;this.father.con.append(this.father._templetShow(this.html,b));this.node=s.one("#"+this.id);if(this.father.showTime){b=this.node.one(".ks-cal-ft");b.removeClass("hidden");this.timmer=new this.father.TimeSelector(b,this.father)}return this};this._buildEvent=function(){var b=this,e,f=s.one("#"+b.id);for(e=0;e<b.EV.length;e++)typeof b.EV[e]!="undefined"&&b.EV[e].detach();
b.EV[0]=f.one("div.ks-dbd").on("click",function(a){a.target=s(a.target);if(!a.target.hasClass("ks-null"))if(!a.target.hasClass("ks-disabled")){a=Number(a.target.html());var g=new Date("2010/01/01");g.setDate(a);g.setYear(b.year);g.setMonth(b.month);b.father.dt_date=g;b.father.fire("select",{date:g});b.father.popup&&b.father.closable&&b.father.hide();b.father.rangeSelect&&b.father._handleRange(g);b.father.render({selected:g})}});b.EV[1]=f.one("a.ks-prev").on("click",function(a){a.preventDefault();
b.father._monthMinus().render();b.father.fire("monthChange",{date:new Date(b.father.year+"/"+(b.father.month+1)+"/01")})});b.EV[2]=f.one("a.ks-next").on("click",function(a){a.preventDefault();b.father._monthAdd().render();b.father.fire("monthChange",{date:new Date(b.father.year+"/"+(b.father.month+1)+"/01")})});if(b.father.navigator){b.EV[3]=f.one("a.ks-title").on("click",function(a){try{b.timmer.hidePopup();a.preventDefault()}catch(g){}a.target=s(a.target);a=f.one(".ks-setime");a.html("");var q=
b.father._templetShow(b.nav_html,{the_month:b.month+1,the_year:b.year});a.html(q);a.removeClass("hidden");f.one("input").on("keydown",function(u){u.target=s(u.target);if(u.keyCode==38){u.target.val(Number(u.target.val())+1);u.target[0].select()}if(u.keyCode==40){u.target.val(Number(u.target.val())-1);u.target[0].select()}if(u.keyCode==13){u=f.one(".ks-setime").one("select").val();var x=f.one(".ks-setime").one("input").val();f.one(".ks-setime").addClass("hidden");if(b.Verify().isYear(x))if(b.Verify().isMonth(u)){b.father.render({date:new Date(x+
"/"+u+"/01")});b.father.fire("monthChange",{date:new Date(x+"/"+u+"/01")})}}})});b.EV[4]=f.one(".ks-setime").on("click",function(a){a.preventDefault();a.target=s(a.target);if(a.target.hasClass("ok")){a=f.one(".ks-setime").one("select").val();var g=f.one(".ks-setime").one("input").val();f.one(".ks-setime").addClass("hidden");if(b.Verify().isYear(g))if(b.Verify().isMonth(a)){b.father.render({date:new Date(g+"/"+a+"/01")});b.father.fire("monthChange",{date:new Date(g+"/"+a+"/01")})}}else a.target.hasClass("cancel")&&
f.one(".ks-setime").addClass("hidden")})}return this};this._getNode=function(){return this.node};this._getNumOfDays=function(b,e){return 32-(new Date(b,e-1,32)).getDate()};this.createDS=function(){var b="",e=((new Date(this.year+"/"+(this.month+1)+"/01")).getDay()+this.father.startDay+7)%7,f=this._getNumOfDays(this.year,this.month+1)+e,a,g;for(a=0;a<f;a++){g=/532/.test(i.webkit)?new Date(this.year+"/"+Number(this.month+1)+"/"+(a+1-e).toString()):new Date(this.year+"/"+Number(this.month+1)+"/"+(a+
2-e).toString());var q=new Date(this.year+"/"+Number(this.month+1)+"/"+(a+1-e).toString());b+=a<e?'<a href="javascript:void(0);" class="ks-null">0</a>':this.father.minDate instanceof Date&&(new Date(this.year+"/"+(this.month+1)+"/"+(a+2-e))).getTime()<this.father.minDate.getTime()+1?'<a href="javascript:void(0);" class="ks-disabled">'+(a-e+1)+"</a>":this.father.maxDate instanceof Date&&(new Date(this.year+"/"+(this.month+1)+"/"+(a+1-e))).getTime()>this.father.maxDate.getTime()?'<a href="javascript:void(0);" class="ks-disabled">'+
(a-e+1)+"</a>":this.father.range.start!==null&&this.father.range.end!==null&&g.getTime()>=this.father._showdate(1,this.father.range.start).getTime()&&q.getTime()<this.father._showdate(1,this.father.range.end).getTime()?a==e+(new Date).getDate()-1&&(new Date).getFullYear()==this.year&&(new Date).getMonth()==this.month?'<a href="javascript:void(0);" class="ks-range ks-today">'+(a-e+1)+"</a>":'<a href="javascript:void(0);" class="ks-range">'+(a-e+1)+"</a>":a==e+(new Date).getDate()-1&&(new Date).getFullYear()==
this.year&&(new Date).getMonth()==this.month?'<a href="javascript:void(0);" class="ks-today">'+(a-e+1)+"</a>":a==e+this.father.selected.getDate()-1&&this.month==this.father.selected.getMonth()&&this.year==this.father.selected.getFullYear()?'<a href="javascript:void(0);" class="ks-selected">'+(a-e+1)+"</a>":'<a href="javascript:void(0);">'+(a-e+1)+"</a>"}if(f%7!==0)for(a=0;a<7-f%7;a++)b+='<a href="javascript:void(0);" class="ks-null">0</a>';this.ds=b;return this};this.render=function(){this._renderUI();
this._buildEvent();return this}}});return t},{requires:["ua","node","calendar/base"]});
KISSY.add("calendar/time",function(k,i,p){var t=k.require("node/node");k.augment(p,{TimeSelector:function(s,r){this.father=r;this.fcon=s.parent(".ks-cal-box");this.popupannel=this.fcon.one(".ks-selectime");if(typeof r._time=="undefined")r._time=new Date;this.time=r._time;this.status="s";this.ctime=t('<div class="ks-cal-time">\u65f6\u95f4\uff1a<span class="h">h</span>:<span class="m">m</span>:<span class="s">s</span><!--{{arrow--\><div class="cta"><button class="u"></button><button class="d"></button></div><!--arrow}}--\></div>');this.button=
t('<button class="ct-ok">\u786e\u5b9a</button>');this.h_a=["00","01","02","03","04","05","06","07","08","09","10","11","12","13","14","15","16","17","18","19","20","21","22","23"];this.m_a=["00","10","20","30","40","50"];this.s_a=["00","10","20","30","40","50"];this.parseSubHtml=function(j){for(var b="",e=0;e<j.length;e++)b+='<a href="javascript:void(0);" class="item">'+j[e]+"</a>";b+='<a href="javascript:void(0);" class="x">x</a>';return b};this.showPopup=function(j){this.popupannel.html(j);this.popupannel.removeClass("hidden");
j=this.status;this.ctime.all("span").removeClass("on");switch(j){case "h":this.ctime.all(".h").addClass("on");break;case "m":this.ctime.all(".m").addClass("on");break;case "s":this.ctime.all(".s").addClass("on")}};this.hidePopup=function(){this.popupannel.addClass("hidden")};this.render=function(){var j=this.get("h"),b=this.get("m"),e=this.get("s");this.father._time=this.time;this.ctime.all(".h").html(j);this.ctime.all(".m").html(b);this.ctime.all(".s").html(e);return this};this.set=function(j,b){b=
Number(b);switch(j){case "h":this.time.setHours(b);break;case "m":this.time.setMinutes(b);break;case "s":this.time.setSeconds(b)}this.render()};this.get=function(j){var b=this.time;switch(j){case "h":return b.getHours();case "m":return b.getMinutes();case "s":return b.getSeconds()}};this.add=function(){var j=this.status,b=this.get(j);b++;this.set(j,b)};this.minus=function(){var j=this.status,b=this.get(j);b--;this.set(j,b)};this._init=function(){var j=this;s.html("").append(j.ctime);s.append(j.button);
j.render();j.popupannel.on("click",function(b){b=t(b.target);if(b.hasClass("x"))j.hidePopup();else if(b.hasClass("item")){b=Number(b.html());j.set(j.status,b);j.hidePopup()}});j.button.on("click",function(){var b=typeof j.father.dt_date=="undefined"?j.father.date:j.father.dt_date;b.setHours(j.get("h"));b.setMinutes(j.get("m"));b.setSeconds(j.get("s"));j.father.fire("timeSelect",{date:b});j.father.popup&&j.father.closable&&j.father.hide()});j.ctime.on("keyup",function(b){if(b.keyCode==38||b.keyCode==
37){b.preventDefault();j.add()}if(b.keyCode==40||b.keyCode==39){b.preventDefault();j.minus()}});j.ctime.one(".u").on("click",function(){j.hidePopup();j.add()});j.ctime.one(".d").on("click",function(){j.hidePopup();j.minus()});j.ctime.one(".h").on("click",function(){var b=j.parseSubHtml(j.h_a);j.status="h";j.showPopup(b)});j.ctime.one(".m").on("click",function(){var b=j.parseSubHtml(j.m_a);j.status="m";j.showPopup(b)});j.ctime.one(".s").on("click",function(){var b=j.parseSubHtml(j.s_a);j.status="s";
j.showPopup(b)})};this._init()}});return p},{requires:["node","calendar/base"]});KISSY.add("calendar",function(k,i){return i},{requires:["calendar/base","calendar/page","calendar/time","calendar/date"]});
