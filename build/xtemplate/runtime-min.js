/*
Copyright 2012, KISSY UI Library v1.40dev
MIT Licensed
build time: Dec 11 12:57
*/
KISSY.add("xtemplate/runtime/base",function(f){function a(c,d){this.tpl=c;d=f.merge(g,d);d.subTpls=f.merge(d.subTpls,a.subTpls);d.commands=f.merge(d.commands,a.commands);this.option=d}var g={silent:!0,name:"",utils:{getProperty:function(c,d){if(!d)return!1;var c=c.split("."),e=c.length,b,a=d;for(b=0;b<e;b++){if(!(c[b]in a))return!1;a=a[c[b]]}return[a]}}};a.prototype={constructor:a,removeSubTpl:function(c){delete this.option.subTpls[c]},removeCommand:function(c){delete this.option.commands[c]},addSubTpl:function(c,
d){this.option.subTpls[c]=d},addCommand:function(c,d){this.option.commands[c]=d},render:function(c){f.isArray(c)||(c=[c]);return this.tpl(c,this.option)}};return a});
KISSY.add("xtemplate/runtime/commands",function(f,a,g){var c=f.error;return{each:function(d,e){var b=e.params;(!b||1!=b.length)&&c("each must has one param");var b=b[0],a="",h,j;if(b!==g)if(f.isArray(b)){var l=[0].concat(d);h=b.length;for(var k=0;k<h;k++){var i={};j=b[k];i["this"]=j;i.xcount=h;i.xindex=k;f.isObject(j)&&f.mix(i,j);l[0]=i;a+=e.fn(l)}}else c("each can only apply to array");return a},"with":function(d,e){var b=e.params;(!b||1!=b.length)&&c("with must has one param");var b=b[0],a=[0].concat(d),
h="";b!==g&&(f.isObject(b)?(a[0]=b,h=e.fn(a)):c("with can only apply to object"));return h},"if":function(d,e){var b=e.params;(!b||1!=b.length)&&c("if must has one param");var a="";b[0]?a=e.fn(d):e.inverse&&(a=e.inverse(d));return a},set:function(a,c){f.mix(a[0],c.hash);return""},include:a.include}},{requires:["./include-command"]});
KISSY.add("xtemplate/runtime/include-command",function(f,a){var g={invokeEngine:function(c,d,e){return(new a(c,f.merge(e))).render(d)},include:function(a,d){var e=d.params;(!e||1!=e.length)&&error("include must has one param");var e=e[0],b;(b=d.subTpls[e])||error('does not include sub template "'+e+'"');d.name=e;return g.invokeEngine(b,a,d)}};return g},{requires:["./base"]});
KISSY.add("xtemplate/runtime",function(f,a,g,c){a.addCommand=function(a,b){g[a]=b};a.removeCommand=function(a){delete g[a]};a.commands=g;a.includeCommand=c;var d={};a.subTpls=d;a.addSubTpl=function(a,b){d[a]=b};a.removeSubTpl=function(a){delete d[a]};return a.IncludeEngine=a},{requires:["./runtime/base","./runtime/commands","./runtime/include-command"]});
