/*
Copyright 2013, KISSY UI Library v1.40dev
MIT Licensed
build time: Jan 16 21:25
*/
KISSY.add("anim/timer/color",function(e,h,b,d){function m(j){var j=j+"",f;if(f=j.match(l))return[parseInt(f[1]),parseInt(f[2]),parseInt(f[3])];if(f=j.match(a))return[parseInt(f[1]),parseInt(f[2]),parseInt(f[3]),parseInt(f[4])];if(f=j.match(i)){for(j=1;j<f.length;j++)2>f[j].length&&(f[j]+=f[j]);return[parseInt(f[1],n),parseInt(f[2],n),parseInt(f[3],n)]}return k[j=j.toLowerCase()]?k[j]:[255,255,255]}function c(){c.superclass.constructor.apply(this,arguments)}var n=16,g=Math.floor,k={black:[0,0,0],silver:[192,
192,192],gray:[128,128,128],white:[255,255,255],maroon:[128,0,0],red:[255,0,0],purple:[128,0,128],fuchsia:[255,0,255],green:[0,128,0],lime:[0,255,0],olive:[128,128,0],yellow:[255,255,0],navy:[0,0,128],blue:[0,0,255],teal:[0,128,128],aqua:[0,255,255]},l=/^rgb\(([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\)$/i,a=/^rgba\(([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+),\s*([0-9]+)\)$/i,i=/^#?([0-9A-F]{1,2})([0-9A-F]{1,2})([0-9A-F]{1,2})$/i;d.background.push("backgroundColor");d.borderColor=["borderBottomColor","borderLeftColor",
"borderRightColor","borderTopColor"];d.border.push("borderBottomColor","borderLeftColor","borderRightColor","borderTopColor");d.borderBottom.push("borderBottomColor");d.borderLeft.push("borderLeftColor");d.borderRight.push("borderRightColor");d.borderTop.push("borderTopColor");e.extend(c,b,{load:function(){c.superclass.load.apply(this,arguments);this.from&&(this.from=m(this.from));this.to&&(this.to=m(this.to))},interpolate:function(a,f,i){var b=c.superclass.interpolate;return 3==a.length&&3==f.length?
"rgb("+[g(b(a[0],f[0],i)),g(b(a[1],f[1],i)),g(b(a[2],f[2],i))].join(", ")+")":4==a.length||4==f.length?"rgba("+[g(b(a[0],f[0],i)),g(b(a[1],f[1],i)),g(b(a[2],f[2],i)),g(b(a[3]||1,f[3]||1,i))].join(", ")+")":e.log("anim/color unknown value : "+a)}});e.each("backgroundColor,borderBottomColor,borderLeftColor,borderRightColor,borderTopColor,color,outlineColor".split(","),function(a){b.Factories[a]=c});return c},{requires:["dom","./fx","./short-hand"]});
KISSY.add("anim/timer/easing",function(){function e(a){return a}function h(a,i,c,f){var b=3*a-3*c+1,d=3*c-6*a,g=3*a,n=3*i-3*f+1,h=3*f-6*i,e=3*i;return function(a){a:{for(var c=a,i,f,j=0;8>j;j++){f=((b*c+d)*c+g)*c-a;if(l(f)<k){a=c;break a}i=(3*b*c+2*d)*c+g;if(l(i)<k)break;c-=f/i}i=1;j=0;for(c=a;i>j;){f=((b*c+d)*c+g)*c-a;if(l(f)<k)break;0<f?i=c:j=c;c=(i+j)/2}a=c}return((n*a+h)*a+e)*a}}var b=Math.PI,d=Math.pow,m=Math.sin,c=parseFloat,n=/^cubic-bezier\(([^,]+),([^,]+),([^,]+),([^,]+)\)$/i,g={swing:function(a){return-Math.cos(a*
b)/2+0.5},easeNone:e,linear:e,easeIn:function(a){return a*a},ease:h(0.25,0.1,0.25,1),"ease-in":h(0.42,0,1,1),"ease-out":h(0,0,0.58,1),"ease-in-out":h(0.42,0,0.58,1),"ease-out-in":h(0,0.42,1,0.58),toFn:function(a){var i;return(i=a.match(n))?h(c(i[1]),c(i[2]),c(i[3]),c(i[4])):g[a]||e},easeOut:function(a){return(2-a)*a},easeBoth:function(a){return 1>(a*=2)?0.5*a*a:0.5*(1- --a*(a-2))},easeInStrong:function(a){return a*a*a*a},easeOutStrong:function(a){return 1- --a*a*a*a},easeBothStrong:function(a){return 1>
(a*=2)?0.5*a*a*a*a:0.5*(2-(a-=2)*a*a*a)},elasticIn:function(a){return 0===a||1===a?a:-(d(2,10*(a-=1))*m((a-0.075)*2*b/0.3))},elasticOut:function(a){return 0===a||1===a?a:d(2,-10*a)*m((a-0.075)*2*b/0.3)+1},elasticBoth:function(a){return 0===a||2===(a*=2)?a:1>a?-0.5*d(2,10*(a-=1))*m((a-0.1125)*2*b/0.45):0.5*d(2,-10*(a-=1))*m((a-0.1125)*2*b/0.45)+1},backIn:function(a){1===a&&(a-=0.001);return a*a*(2.70158*a-1.70158)},backOut:function(a){return(a-=1)*a*(2.70158*a+1.70158)+1},backBoth:function(a){var c,
b=(c=2.5949095)+1;return 1>(a*=2)?0.5*a*a*(b*a-c):0.5*((a-=2)*a*(b*a+c)+2)},bounceIn:function(a){return 1-g.bounceOut(1-a)},bounceOut:function(a){return a<1/2.75?7.5625*a*a:a<2/2.75?7.5625*(a-=1.5/2.75)*a+0.75:a<2.5/2.75?7.5625*(a-=2.25/2.75)*a+0.9375:7.5625*(a-=2.625/2.75)*a+0.984375},bounceBoth:function(a){return 0.5>a?0.5*g.bounceIn(2*a):0.5*g.bounceOut(2*a-1)+0.5}},k=1.0E-6,l=Math.abs;return g});
KISSY.add("anim/timer/fx",function(e,h,b){function d(c){this.load(c)}function m(c,d){return(!c.style||null==c.style[d])&&null!=h.attr(c,d,b,1)?1:0}d.prototype={isBasicFx:1,constructor:d,load:function(c){e.mix(this,c);this.pos=0;this.unit=this.unit||""},frame:function(c){this.pos=c;this.update();this.finished=this.finished||1==c},interpolate:function(c,d,g){return e.isNumber(c)&&e.isNumber(d)?(c+(d-c)*g).toFixed(3):b},update:function(){var c=this.prop,d=this.anim.el,g=this.to,e=this.interpolate(this.from,
g,this.pos);e===b?this.finished||(this.finished=1,h.css(d,c,g)):(e+=this.unit,m(d,c)?h.attr(d,c,e,1):h.css(d,c,e))},cur:function(){var c=this.prop,d=this.anim.el;if(m(d,c))return h.attr(d,c,b,1);var g,c=h.css(d,c);return isNaN(g=parseFloat(c))?!c||"auto"===c?0:c:g}};d.Factories={};d.getPos=function(c,b){var d=e.now(),h=b.duration,d=d-c._startTime-b.delay;return 0>=d?0:d>=h?1:b.easing(d/h)};d.getFx=function(c){return new (d.Factories[c.prop]||d)(c)};return d},{requires:["dom"]});
KISSY.add("anim/timer/manager",function(e){var h=e.stamp;return{interval:15,runnings:{},timer:null,start:function(b){var d=h(b);this.runnings[d]||(this.runnings[d]=b,this.startTimer())},stop:function(b){this.notRun(b)},notRun:function(b){delete this.runnings[h(b)];e.isEmptyObject(this.runnings)&&this.stopTimer()},pause:function(b){this.notRun(b)},resume:function(b){this.start(b)},startTimer:function(){var b=this;b.timer||(b.timer=setTimeout(function(){b.runFrames()?b.stopTimer():(b.timer=0,b.startTimer())},
b.interval))},stopTimer:function(){var b=this.timer;b&&(clearTimeout(b),this.timer=0)},runFrames:function(){var b=1,d,e=this.runnings;for(d in e)b=0,e[d].frame();return b}}});
KISSY.add("anim/timer/short-hand",function(){return{background:[],border:["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth"],borderBottom:["borderBottomWidth"],borderLeft:["borderLeftWidth"],borderTop:["borderTopWidth"],borderRight:["borderRightWidth"],font:["fontSize","fontWeight"],margin:["marginBottom","marginLeft","marginRight","marginTop"],padding:["paddingBottom","paddingLeft","paddingRight","paddingTop"]}});
KISSY.add("anim/timer",function(e,h,b,d,m,c,n,g){function k(){var a;k.superclass.constructor.apply(this,arguments);e.each(a=this.props,function(c,b){var d=l(b);b!=d&&(a[d]=a[b],delete a[b])})}var l=h._camelCase,a=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i;e.extend(k,d,{prepareFx:function(){var c=this.el,b=this._propsData;e.each(b,function(a){a.duration*=1E3;a.delay*=1E3;"string"==typeof a.easing&&(a.easing=m.toFn(a.easing))});e.each(g,function(a,d){var f,g=b[d],o;g&&!g.fx&&(o=g.value,f={},e.each(a,function(a){f[a]=
h.css(c,a)}),h.css(c,d,o),e.each(f,function(a,d){d in b||(b[d]=e.merge(g,{value:h.css(c,d)}));h.css(c,d,a)}),delete b[d])});var d,o,p,q,k,l,r,s,t;for(d in b)if(o=b[d],!o.fx){p=o.value;l={prop:d,anim:this,propData:o};r=n.getFx(l);q=p;k=r.cur();p+="";s="";if(t=p.match(a)){q=parseFloat(t[2]);if((s=t[3])&&"px"!==s)h.css(c,d,p),k*=q/r.cur(),h.css(c,d,k+s);t[1]&&(q=("-="===t[1]?-1:1)*q+k)}l.from=k;l.to=q;l.unit=s;r.load(l);o.fx=r}},frame:function(){var a,c=1,d,b,e,g,h=this._propsData;for(a in h)if(g=h[a],
b=g.fx,!b.finished&&(e=n.getPos(this,g),0!=e)){if(b.isBasicFx){if(b.from==b.to){b.finished=b.finished||1==e;continue}if(g.frame&&(d=g.frame(this,{prop:a,from:b.from,to:b.to,pos:e}),!this.isRunning()))return;d&2&&(b.finished=1);d&1||b.frame(b.finished||e)}else if(b.finished=b.finished||1==e,b.frame(this,{prop:a,pos:e}),!this.isRunning())return;c&=b.finished}(!1===this.fire("step")||c)&&this.stop(c)},doStop:function(a){var b,d,e,g=this._propsData;c.stop(this);if(a)for(b in g)if(e=g[b],(a=e.fx)&&!a.finished)a.isBasicFx?
(e.frame&&(d=e.frame(this,{prop:b,from:a.from,to:a.to,pos:1})),d&1||a.frame(1)):a.frame(this,{prop:b,pos:1}),a.finished=1},doStart:function(){c.start(this)}});return k},{requires:"dom,event,./base,./timer/easing,./timer/manager,./timer/fx,./timer/short-hand,./timer/color".split(",")});
