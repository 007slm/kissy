/*
Copyright 2013, KISSY UI Library v1.40dev
MIT Licensed
build time: Feb 20 20:50
*/
KISSY.add("anim/timer/color",function(e,g,f,d){function j(b){var b=b+"",c;if(c=b.match(l))return[parseInt(c[1]),parseInt(c[2]),parseInt(c[3])];if(c=b.match(a))return[parseInt(c[1]),parseInt(c[2]),parseInt(c[3]),parseInt(c[4])];if(c=b.match(h)){for(b=1;b<c.length;b++)2>c[b].length&&(c[b]+=c[b]);return[parseInt(c[1],m),parseInt(c[2],m),parseInt(c[3],m)]}return k[b=b.toLowerCase()]?k[b]:[255,255,255]}function c(){c.superclass.constructor.apply(this,arguments)}var m=16,b=Math.floor,k={black:[0,0,0],silver:[192,
192,192],gray:[128,128,128],white:[255,255,255],maroon:[128,0,0],red:[255,0,0],purple:[128,0,128],fuchsia:[255,0,255],green:[0,128,0],lime:[0,255,0],olive:[128,128,0],yellow:[255,255,0],navy:[0,0,128],blue:[0,0,255],teal:[0,128,128],aqua:[0,255,255]},l=/^rgb\(([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\)$/i,a=/^rgba\(([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+),\s*([0-9]+)\)$/i,h=/^#?([0-9A-F]{1,2})([0-9A-F]{1,2})([0-9A-F]{1,2})$/i;d.background.push("backgroundColor");d.borderColor=["borderBottomColor","borderLeftColor",
"borderRightColor","borderTopColor"];d.border.push("borderBottomColor","borderLeftColor","borderRightColor","borderTopColor");d.borderBottom.push("borderBottomColor");d.borderLeft.push("borderLeftColor");d.borderRight.push("borderRightColor");d.borderTop.push("borderTopColor");e.extend(c,f,{load:function(){c.superclass.load.apply(this,arguments);this.from&&(this.from=j(this.from));this.to&&(this.to=j(this.to))},interpolate:function(a,h,i){var d=c.superclass.interpolate;return 3==a.length&&3==h.length?
"rgb("+[b(d(a[0],h[0],i)),b(d(a[1],h[1],i)),b(d(a[2],h[2],i))].join(", ")+")":4==a.length||4==h.length?"rgba("+[b(d(a[0],h[0],i)),b(d(a[1],h[1],i)),b(d(a[2],h[2],i)),b(d(a[3]||1,h[3]||1,i))].join(", ")+")":e.log("anim/color unknown value : "+a)}});e.each("backgroundColor,borderBottomColor,borderLeftColor,borderRightColor,borderTopColor,color,outlineColor".split(","),function(a){f.Factories[a]=c});return c},{requires:["dom","./fx","./short-hand"]});
KISSY.add("anim/timer/easing",function(){function e(a){return a}function g(a,b,c,d){var i=3*a-3*c+1,m=3*c-6*a,e=3*a,g=3*b-3*d+1,f=3*d-6*b,j=3*b;return function(a){a:{for(var b=a,c,h,d=0;8>d;d++){h=((i*b+m)*b+e)*b-a;if(l(h)<k){a=b;break a}c=(3*i*b+2*m)*b+e;if(l(c)<k)break;b-=h/c}c=1;d=0;for(b=a;c>d;){h=((i*b+m)*b+e)*b-a;if(l(h)<k)break;0<h?c=b:d=b;b=(c+d)/2}a=b}return((g*a+f)*a+j)*a}}var f=Math.PI,d=Math.pow,j=Math.sin,c=parseFloat,m=/^cubic-bezier\(([^,]+),([^,]+),([^,]+),([^,]+)\)$/i,b={swing:function(a){return-Math.cos(a*
f)/2+0.5},easeNone:e,linear:e,easeIn:function(a){return a*a},ease:g(0.25,0.1,0.25,1),"ease-in":g(0.42,0,1,1),"ease-out":g(0,0,0.58,1),"ease-in-out":g(0.42,0,0.58,1),"ease-out-in":g(0,0.42,1,0.58),toFn:function(a){var h;return(h=a.match(m))?g(c(h[1]),c(h[2]),c(h[3]),c(h[4])):b[a]||e},easeOut:function(a){return(2-a)*a},easeBoth:function(a){return 1>(a*=2)?0.5*a*a:0.5*(1- --a*(a-2))},easeInStrong:function(a){return a*a*a*a},easeOutStrong:function(a){return 1- --a*a*a*a},easeBothStrong:function(a){return 1>
(a*=2)?0.5*a*a*a*a:0.5*(2-(a-=2)*a*a*a)},elasticIn:function(a){return 0===a||1===a?a:-(d(2,10*(a-=1))*j((a-0.075)*2*f/0.3))},elasticOut:function(a){return 0===a||1===a?a:d(2,-10*a)*j((a-0.075)*2*f/0.3)+1},elasticBoth:function(a){return 0===a||2===(a*=2)?a:1>a?-0.5*d(2,10*(a-=1))*j((a-0.1125)*2*f/0.45):0.5*d(2,-10*(a-=1))*j((a-0.1125)*2*f/0.45)+1},backIn:function(a){1===a&&(a-=0.001);return a*a*(2.70158*a-1.70158)},backOut:function(a){return(a-=1)*a*(2.70158*a+1.70158)+1},backBoth:function(a){var b,
c=(b=2.5949095)+1;return 1>(a*=2)?0.5*a*a*(c*a-b):0.5*((a-=2)*a*(c*a+b)+2)},bounceIn:function(a){return 1-b.bounceOut(1-a)},bounceOut:function(a){return a<1/2.75?7.5625*a*a:a<2/2.75?7.5625*(a-=1.5/2.75)*a+0.75:a<2.5/2.75?7.5625*(a-=2.25/2.75)*a+0.9375:7.5625*(a-=2.625/2.75)*a+0.984375},bounceBoth:function(a){return 0.5>a?0.5*b.bounceIn(2*a):0.5*b.bounceOut(2*a-1)+0.5}},k=1.0E-6,l=Math.abs;return b});
KISSY.add("anim/timer/fx",function(e,g,f){function d(c){this.load(c)}function j(c,d){return(!c.style||null==c.style[d])&&null!=g.attr(c,d,f,1)?1:0}d.prototype={isBasicFx:1,constructor:d,load:function(c){e.mix(this,c);this.pos=0;this.unit=this.unit||""},frame:function(c){this.pos=c;this.update();this.finished=this.finished||1==c},interpolate:function(c,d,b){return e.isNumber(c)&&e.isNumber(d)?(c+(d-c)*b).toFixed(3):f},update:function(){var c=this.prop,d=this.anim.el,b=this.to,e=this.interpolate(this.from,
b,this.pos);e===f?this.finished||(this.finished=1,g.css(d,c,b)):(e+=this.unit,j(d,c)?g.attr(d,c,e,1):g.css(d,c,e))},cur:function(){var c=this.prop,d=this.anim.el;if(j(d,c))return g.attr(d,c,f,1);var b,c=g.css(d,c);return isNaN(b=parseFloat(c))?!c||"auto"===c?0:c:b}};d.Factories={};d.getPos=function(c,d){var b=e.now(),g=d.duration,b=b-c.startTime-d.delay;return 0>=b?0:b>=g?1:d.easing(b/g)};d.getFx=function(c){return new (d.Factories[c.prop]||d)(c)};return d},{requires:["dom"]});
KISSY.add("anim/timer/manager",function(e,g){var f=e.stamp,d=e.Env.host,j={interval:15,runnings:{},timer:null,start:function(b){var c=f(b);this.runnings[c]||(this.runnings[c]=b,this.startTimer())},stop:function(b){this.notRun(b)},notRun:function(b){delete this.runnings[f(b)];e.isEmptyObject(this.runnings)&&this.stopTimer()},pause:function(b){this.notRun(b)},resume:function(b){this.start(b)},startTimer:function(){var b=this;b.timer||(b.timer=setTimeout(function(){b.runFrames()?b.stopTimer():(b.timer=
0,b.startTimer())},b.interval))},stopTimer:function(){var b=this.timer;b&&(clearTimeout(b),this.timer=0)},runFrames:function(){var b,c,d=this.runnings;for(b in d)d[b].frame(),c=0;return c===g}},c=d.requestAnimationFrame||d.mozRequestAnimationFrame||d.msRequestAnimationFrame||d.webkitRequestAnimationFrame,m=d.cancelAnimationFrame||d.mozCancelAnimationFrame||d.msCancelAnimationFrame||d.webkitCancelAnimationFrame;c&&e.mix(j,{startTimer:function(){var b=this;b.timer||(b.timer=c(function l(){b.runFrames()?
b.stopTimer():b.timer=c(l)}))},stopTimer:function(){var b=this.timer;b&&(m(b),this.timer=0)}});return j});
KISSY.add("anim/timer/short-hand",function(){return{background:[],border:["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth"],borderBottom:["borderBottomWidth"],borderLeft:["borderLeftWidth"],borderTop:["borderTopWidth"],borderRight:["borderRightWidth"],font:["fontSize","fontWeight"],margin:["marginBottom","marginLeft","marginRight","marginTop"],padding:["paddingBottom","paddingLeft","paddingRight","paddingTop"]}});
KISSY.add("anim/timer",function(e,g,f,d,j,c,m,b){function k(){var a;k.superclass.constructor.apply(this,arguments);e.each(a=this.props,function(b,c){var d=l(c);c!=d&&(a[d]=a[c],delete a[c])})}var l=g._camelCase,a=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i;e.extend(k,d,{prepareFx:function(){var c=this.el,d=this._propsData;e.each(d,function(a){a.duration*=1E3;a.delay*=1E3;"string"==typeof a.easing&&(a.easing=j.toFn(a.easing))});e.each(b,function(a,b){var i,f=d[b],j;f&&!f.fx&&(j=f.value,i={},e.each(a,function(a){i[a]=
g.css(c,a)}),g.css(c,b,j),e.each(i,function(a,b){b in d||(d[b]=e.merge(f,{value:g.css(c,b)}));g.css(c,b,a)}),delete d[b])});var f,i,n,o,k,l,p,q,r;for(f in d)if(i=d[f],i.fx)i.fx.prop=f;else{n=i.value;l={prop:f,anim:this,propData:i};p=m.getFx(l);o=n;k=p.cur();n+="";q="";if(r=n.match(a)){o=parseFloat(r[2]);if((q=r[3])&&"px"!==q)g.css(c,f,n),k*=o/p.cur(),g.css(c,f,k+q);r[1]&&(o=("-="===r[1]?-1:1)*o+k)}l.from=k;l.to=o;l.unit=q;p.load(l);i.fx=p}},frame:function(){var a,b=1,c,d,e,f,g=this._propsData;for(a in g)if(f=
g[a],d=f.fx,!d.finished&&(e=m.getPos(this,f),0!=e)){d.pos=e;if(d.isBasicFx){if(d.from==d.to){d.finished=d.finished||1==e;continue}c=0;if(f.frame&&(c=f.frame(this,d),!this.isRunning()))return;!1!==c&&d.frame(d.finished||e)}else if(d.finished=d.finished||1==e,d.frame(this,d),!this.isRunning())return;b&=d.finished}(!1===this.fire("step")||b)&&this.stop(b)},doStop:function(a){var b,d,e,f=this._propsData;c.stop(this);if(a)for(b in f)if(e=f[b],(a=e.fx)&&!a.finished)a.pos=1,a.isBasicFx?(d=0,e.frame&&(d=
e.frame(this,a)),!1!==d&&a.frame(1)):a.frame(this,a),a.finished=1},doStart:function(){c.start(this)}});k.Easing=j;return k},{requires:"dom,event,./base,./timer/easing,./timer/manager,./timer/fx,./timer/short-hand,./timer/color".split(",")});
