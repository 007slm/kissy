/*
Copyright 2013, KISSY UI Library v1.40dev
MIT Licensed
build time: Jan 24 18:08
*/
KISSY.add("anim/timer/color",function(g,f,b,e){function n(j){var j=j+"",c;if(c=j.match(m))return[parseInt(c[1]),parseInt(c[2]),parseInt(c[3])];if(c=j.match(a))return[parseInt(c[1]),parseInt(c[2]),parseInt(c[3]),parseInt(c[4])];if(c=j.match(i)){for(j=1;j<c.length;j++)2>c[j].length&&(c[j]+=c[j]);return[parseInt(c[1],o),parseInt(c[2],o),parseInt(c[3],o)]}return k[j=j.toLowerCase()]?k[j]:[255,255,255]}function d(){d.superclass.constructor.apply(this,arguments)}var o=16,h=Math.floor,k={black:[0,0,0],silver:[192,
192,192],gray:[128,128,128],white:[255,255,255],maroon:[128,0,0],red:[255,0,0],purple:[128,0,128],fuchsia:[255,0,255],green:[0,128,0],lime:[0,255,0],olive:[128,128,0],yellow:[255,255,0],navy:[0,0,128],blue:[0,0,255],teal:[0,128,128],aqua:[0,255,255]},m=/^rgb\(([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\)$/i,a=/^rgba\(([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+),\s*([0-9]+)\)$/i,i=/^#?([0-9A-F]{1,2})([0-9A-F]{1,2})([0-9A-F]{1,2})$/i;e.background.push("backgroundColor");e.borderColor=["borderBottomColor","borderLeftColor",
"borderRightColor","borderTopColor"];e.border.push("borderBottomColor","borderLeftColor","borderRightColor","borderTopColor");e.borderBottom.push("borderBottomColor");e.borderLeft.push("borderLeftColor");e.borderRight.push("borderRightColor");e.borderTop.push("borderTopColor");g.extend(d,b,{load:function(){d.superclass.load.apply(this,arguments);this.from&&(this.from=n(this.from));this.to&&(this.to=n(this.to))},interpolate:function(a,c,l){var i=d.superclass.interpolate;return 3==a.length&&3==c.length?
"rgb("+[h(i(a[0],c[0],l)),h(i(a[1],c[1],l)),h(i(a[2],c[2],l))].join(", ")+")":4==a.length||4==c.length?"rgba("+[h(i(a[0],c[0],l)),h(i(a[1],c[1],l)),h(i(a[2],c[2],l)),h(i(a[3]||1,c[3]||1,l))].join(", ")+")":g.log("anim/color unknown value : "+a)}});g.each("backgroundColor,borderBottomColor,borderLeftColor,borderRightColor,borderTopColor,color,outlineColor".split(","),function(a){b.Factories[a]=d});return d},{requires:["dom","./fx","./short-hand"]});
KISSY.add("anim/timer/easing",function(){function g(a){return a}function f(a,i,d,c){var l=3*a-3*d+1,b=3*d-6*a,e=3*a,h=3*i-3*c+1,o=3*c-6*i,f=3*i;return function(a){a:{for(var c=a,d,i,j=0;8>j;j++){i=((l*c+b)*c+e)*c-a;if(m(i)<k){a=c;break a}d=(3*l*c+2*b)*c+e;if(m(d)<k)break;c-=i/d}d=1;j=0;for(c=a;d>j;){i=((l*c+b)*c+e)*c-a;if(m(i)<k)break;0<i?d=c:j=c;c=(d+j)/2}a=c}return((h*a+o)*a+f)*a}}var b=Math.PI,e=Math.pow,n=Math.sin,d=parseFloat,o=/^cubic-bezier\(([^,]+),([^,]+),([^,]+),([^,]+)\)$/i,h={swing:function(a){return-Math.cos(a*
b)/2+0.5},easeNone:g,linear:g,easeIn:function(a){return a*a},ease:f(0.25,0.1,0.25,1),"ease-in":f(0.42,0,1,1),"ease-out":f(0,0,0.58,1),"ease-in-out":f(0.42,0,0.58,1),"ease-out-in":f(0,0.42,1,0.58),toFn:function(a){var i;return(i=a.match(o))?f(d(i[1]),d(i[2]),d(i[3]),d(i[4])):h[a]||g},easeOut:function(a){return(2-a)*a},easeBoth:function(a){return 1>(a*=2)?0.5*a*a:0.5*(1- --a*(a-2))},easeInStrong:function(a){return a*a*a*a},easeOutStrong:function(a){return 1- --a*a*a*a},easeBothStrong:function(a){return 1>
(a*=2)?0.5*a*a*a*a:0.5*(2-(a-=2)*a*a*a)},elasticIn:function(a){return 0===a||1===a?a:-(e(2,10*(a-=1))*n((a-0.075)*2*b/0.3))},elasticOut:function(a){return 0===a||1===a?a:e(2,-10*a)*n((a-0.075)*2*b/0.3)+1},elasticBoth:function(a){return 0===a||2===(a*=2)?a:1>a?-0.5*e(2,10*(a-=1))*n((a-0.1125)*2*b/0.45):0.5*e(2,-10*(a-=1))*n((a-0.1125)*2*b/0.45)+1},backIn:function(a){1===a&&(a-=0.001);return a*a*(2.70158*a-1.70158)},backOut:function(a){return(a-=1)*a*(2.70158*a+1.70158)+1},backBoth:function(a){var d,
b=(d=2.5949095)+1;return 1>(a*=2)?0.5*a*a*(b*a-d):0.5*((a-=2)*a*(b*a+d)+2)},bounceIn:function(a){return 1-h.bounceOut(1-a)},bounceOut:function(a){return a<1/2.75?7.5625*a*a:a<2/2.75?7.5625*(a-=1.5/2.75)*a+0.75:a<2.5/2.75?7.5625*(a-=2.25/2.75)*a+0.9375:7.5625*(a-=2.625/2.75)*a+0.984375},bounceBoth:function(a){return 0.5>a?0.5*h.bounceIn(2*a):0.5*h.bounceOut(2*a-1)+0.5}},k=1.0E-6,m=Math.abs;return h});
KISSY.add("anim/timer/fx",function(g,f,b){function e(d){this.load(d)}function n(d,e){return(!d.style||null==d.style[e])&&null!=f.attr(d,e,b,1)?1:0}e.prototype={isBasicFx:1,constructor:e,load:function(d){g.mix(this,d);this.pos=0;this.unit=this.unit||""},frame:function(d){this.pos=d;this.update();this.finished=this.finished||1==d},interpolate:function(d,e,h){return g.isNumber(d)&&g.isNumber(e)?(d+(e-d)*h).toFixed(3):b},update:function(){var d=this.prop,e=this.anim.el,h=this.to,g=this.interpolate(this.from,
h,this.pos);g===b?this.finished||(this.finished=1,f.css(e,d,h)):(g+=this.unit,n(e,d)?f.attr(e,d,g,1):f.css(e,d,g))},cur:function(){var d=this.prop,e=this.anim.el;if(n(e,d))return f.attr(e,d,b,1);var h,d=f.css(e,d);return isNaN(h=parseFloat(d))?!d||"auto"===d?0:d:h}};e.Factories={};e.getPos=function(d,e){var b=g.now(),f=e.duration,b=b-d.startTime-e.delay;return 0>=b?0:b>=f?1:e.easing(b/f)};e.getFx=function(d){return new (e.Factories[d.prop]||e)(d)};return e},{requires:["dom"]});
KISSY.add("anim/timer/manager",function(g){var f=g.stamp;return{interval:15,runnings:{},timer:null,start:function(b){var e=f(b);this.runnings[e]||(this.runnings[e]=b,this.startTimer())},stop:function(b){this.notRun(b)},notRun:function(b){delete this.runnings[f(b)];g.isEmptyObject(this.runnings)&&this.stopTimer()},pause:function(b){this.notRun(b)},resume:function(b){this.start(b)},startTimer:function(){var b=this;b.timer||(b.timer=setTimeout(function(){b.runFrames()?b.stopTimer():(b.timer=0,b.startTimer())},
b.interval))},stopTimer:function(){var b=this.timer;b&&(clearTimeout(b),this.timer=0)},runFrames:function(){var b=1,e,f=this.runnings;for(e in f)b=0,f[e].frame();return b}}});
KISSY.add("anim/timer/short-hand",function(){return{background:[],border:["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth"],borderBottom:["borderBottomWidth"],borderLeft:["borderLeftWidth"],borderTop:["borderTopWidth"],borderRight:["borderRightWidth"],font:["fontSize","fontWeight"],margin:["marginBottom","marginLeft","marginRight","marginTop"],padding:["paddingBottom","paddingLeft","paddingRight","paddingTop"]}});
KISSY.add("anim/timer",function(g,f,b,e,n,d,o,h){function k(){var a;k.superclass.constructor.apply(this,arguments);g.each(a=this.props,function(d,c){var b=m(c);c!=b&&(a[b]=a[c],delete a[c])})}var m=f._camelCase,a=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i;g.extend(k,e,{prepareFx:function(){var d=this.el,b=this._propsData;g.each(b,function(a){a.duration*=1E3;a.delay*=1E3;"string"==typeof a.easing&&(a.easing=n.toFn(a.easing))});g.each(h,function(a,c){var e,l=b[c],h;l&&!l.fx&&(h=l.value,e={},g.each(a,function(a){e[a]=
f.css(d,a)}),f.css(d,c,h),g.each(e,function(a,c){c in b||(b[c]=g.merge(l,{value:f.css(d,c)}));f.css(d,c,a)}),delete b[c])});var c,e,p,q,k,m,r,s,t;for(c in b)if(e=b[c],e.fx)e.fx.prop=c;else{p=e.value;m={prop:c,anim:this,propData:e};r=o.getFx(m);q=p;k=r.cur();p+="";s="";if(t=p.match(a)){q=parseFloat(t[2]);if((s=t[3])&&"px"!==s)f.css(d,c,p),k*=q/r.cur(),f.css(d,c,k+s);t[1]&&(q=("-="===t[1]?-1:1)*q+k)}m.from=k;m.to=q;m.unit=s;r.load(m);e.fx=r}},frame:function(){var a,d=1,c,b,e,f,g=this._propsData;for(a in g)if(f=
g[a],b=f.fx,!b.finished&&(e=o.getPos(this,f),0!=e)){b.pos=e;if(b.isBasicFx){if(b.from==b.to){b.finished=b.finished||1==e;continue}c=0;if(f.frame&&(c=f.frame(this,b),!this.isRunning()))return;!1!==c&&b.frame(b.finished||e)}else if(b.finished=b.finished||1==e,b.frame(this,b),!this.isRunning())return;d&=b.finished}(!1===this.fire("step")||d)&&this.stop(d)},doStop:function(a){var b,c,e,f=this._propsData;d.stop(this);if(a)for(b in f)if(e=f[b],(a=e.fx)&&!a.finished)a.pos=1,a.isBasicFx?(c=0,e.frame&&(c=
e.frame(this,a)),!1!==c&&a.frame(1)):a.frame(this,a),a.finished=1},doStart:function(){d.start(this)}});k.Easing=n;return k},{requires:"dom,event,./base,./timer/easing,./timer/manager,./timer/fx,./timer/short-hand,./timer/color".split(",")});
