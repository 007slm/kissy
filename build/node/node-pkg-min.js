/*
Copyright 2011, KISSY UI Library v1.1.8dev
MIT Licensed
build time: ${build.time}
*/
KISSY.add("node",function(a){function i(c,f,m){if(!(this instanceof i))return new i(c,f,m);if(c){if(a.isString(c)){c=p.create(c,f,m);if(c.nodeType===11)return new a.NodeList(c.childNodes)}else if(c instanceof i)return c;else c=c;this[0]=c}else this.length=0}var p=a.DOM;i.TYPE="-ks-Node";a.augment(i,{length:1,getDOMNode:function(){return this[0]},nodeType:i.TYPE});a.one=function(c,f){return(c=a.get(c,f))?new i(c):null};a.Node=i});
KISSY.add("nodelist",function(a){function i(f){if(!(this instanceof i))return new i(f);p.push.apply(this,a.makeArray(f)||[])}var p=Array.prototype,c=a.DOM._isElementNode;a.mix(i.prototype,{length:0,item:function(f){var m=null,n,g;if(c(f)){n=0;for(g=this.length;n<g;n++)if(f===this[n]){f=n;break}}if(c(this[f]))m=new a.Node(this[f]);return m},getDOMNodes:function(){return p.slice.call(this)},each:function(f,m){var n=this.length,g=0,o;for(o=new a.Node(this[0]);g<n&&f.call(m||o,o,g,this)!==false;o=new a.Node(this[++g]));
return this}});a.all=function(f,m){return new i(a.query(f,m,true))};a.NodeList=i});
KISSY.add("node-attach",function(a,i){function p(b,d,e,h){b=[this[b?v:s]()].concat(a.makeArray(d));if(d[e]===i&&(e!=1||a.isString(d[0])))return h.apply(g,b);h.apply(g,b);return this}function c(b,d){a.each(b,function(e){a.each([q,w],function(h,k){h[e]=function(j){switch(d){case t:return function(){return p.call(this,k,arguments,1,j)};case r:return function(){return p.call(this,k,arguments,0,j)};case x:return function(){var l=this[k?v:s]();return(l=j.apply(g,[l].concat(a.makeArray(arguments))))?new (a[a.isArray(l)?
"NodeList":"Node"])(l):null};default:return function(){var l=this[k?v:s]();l=j.apply(g,[l].concat(a.makeArray(arguments)));return l===i?this:l}}}(g[e])})})}function f(b,d,e){b&&a.each(this,function(h){var k;if(d||a.isString(b))k=g.create(b);else{if(y(b,1)||y(b,3))k=b;if(B(b))k=b[0]}g[e](k,h)});return this}function m(b,d){if((b=a.get(b))&&b.appendChild)a.each(this,function(e){g[d](e,b)});return this}function n(b,d){b.__wrap=b.__wrap||[];b.__wrap.push(d)}var g=a.DOM,o=a.Event,y=g._nodeTypeIs,B=g._isKSNode,
z=a.EventTarget,u=a.Node,A=a.NodeList,q=u.prototype,w=A.prototype,s="getDOMNode",v=s+"s",t=1,r=2,x=4;a.mix(q,{one:function(b){return a.one(b,this[0])},all:function(b){return a.all(b,this[0])}});c(["data","removeData"],t);c(["hasClass","addClass","removeClass","replaceClass","toggleClass"]);c(["attr","removeAttr"],t);c(["val","text"],r);c(["css"],t);c(["width","height"],r);c(["offset"],r);c(["scrollIntoView"]);c(["parent","next","prev","siblings","children"],x);c(["contains"]);c(["html"],r);c(["remove"]);
a.each(["insertBefore","insertAfter"],function(b){q[b]=function(d){g[b].call(g,this[0],d);return this}});a.each([q,w],function(b,d){a.each(["append","prepend"],function(e){b[e]=function(h){return f.call(this,h,d,e)};b[e+"To"]=function(h){return m.call(this,h,e)}})});a.augment(u,z,{fire:null,on:function(b,d,e){function h(j){var l=a.makeArray(arguments);l.shift();j.target=new u(j.target);if(j.relatedTarget)j.relatedTarget=new u(j.relatedTarget);l.unshift(j);return d.apply(e||k,l)}var k=this;o.add(this[0],
b,h,e);n(d,h);return this},detach:function(b,d,e){if(a.isFunction(d)){d=d.__wrap||[];for(var h=0;h<d.length;h++)o.remove(this[0],b,d[h],e)}else o.remove(this[0],b,d,e);return this}});a.augment(A,z,{fire:null});q._supportSpecialEvent=true;a.each({on:"add",detach:"remove"},function(b,d){w[d]=function(e,h,k){for(var j=0;j<this.length;j++)this.item(j).on(e,h,k)}})});
