/*
Copyright 2010, KISSY UI Library v1.1.7dev
MIT Licensed
build time: ${build.time}
*/
KISSY.add("node",function(a){function i(c,f,k){if(!(this instanceof i))return new i(c,f,k);if(c){if(a.isString(c)){c=p.create(c,f,k);if(c.nodeType===11)return new a.NodeList(c.childNodes)}else if(c instanceof i)return c;else c=c;this[0]=c}else this.length=0}var p=a.DOM;i.TYPE="-ks-Node";a.augment(i,{length:1,getDOMNode:function(){return this[0]},nodeType:i.TYPE});a.one=function(c,f){var k=a.get(c,f);return k?new i(k):null};a.Node=i});
KISSY.add("nodelist",function(a){function i(f){if(!(this instanceof i))return new i(f);p.push.apply(this,a.makeArray(f)||[])}var p=Array.prototype,c=a.DOM._isElementNode;a.mix(i.prototype,{length:0,item:function(f){var k=null,m,g;if(c(f)){m=0;for(g=this.length;m<g;m++)if(f===this[m]){f=m;break}}if(c(this[f]))k=new a.Node(this[f]);return k},getDOMNodes:function(){return p.slice.call(this)},each:function(f,k){var m=this.length,g=0,o;for(o=new a.Node(this[0]);g<m&&f.call(k||o,o,g,this)!==false;o=new a.Node(this[++g]));
return this}});a.all=function(f,k){return new i(a.query(f,k,true))};a.NodeList=i});
KISSY.add("node-attach",function(a,i){function p(b,d,e,h){b=[this[b?u:s]()].concat(a.makeArray(d));if(d[e]===i)return h.apply(g,b);else{h.apply(g,b);return this}}function c(b,d){a.each(b,function(e){a.each([q,v],function(h,j){h[e]=function(l){switch(d){case t:return function(){return p.call(this,j,arguments,1,l)};case r:return function(){return p.call(this,j,arguments,0,l)};case x:return function(){var n=this[j?u:s]();return(n=l.apply(g,[n].concat(a.makeArray(arguments))))?new (a[a.isArray(n)?"NodeList":
"Node"])(n):null};default:return function(){var n=this[j?u:s]();n=l.apply(g,[n].concat(a.makeArray(arguments)));return n===i?this:n}}}(g[e])})})}function f(b,d,e){b&&a.each(this,function(h){var j;if(d||a.isString(b))j=g.create(b);else{if(y(b,1)||y(b,3))j=b;if(A(b))j=b[0]}g[e](j,h)});return this}function k(b,d){if((b=a.get(b))&&b.appendChild)a.each(this,function(e){g[d](e,b)});return this}function m(b,d){b.__wrap=b.__wrap||[];b.__wrap.push(d)}var g=a.DOM,o=a.Event,y=g._nodeTypeIs,A=g._isKSNode,w=a.Node,
z=a.NodeList,q=w.prototype,v=z.prototype,s="getDOMNode",u=s+"s",t=1,r=2,x=4;a.mix(q,{one:function(b){return a.one(b,this[0])},all:function(b){return a.all(b,this[0])}});c(["data","removeData"],t);c(["hasClass","addClass","removeClass","replaceClass","toggleClass"]);c(["attr","removeAttr"],t);c(["val","text"],r);c(["css"],t);c(["width","height"],r);c(["offset"],r);c(["scrollIntoView"]);c(["parent","next","prev","siblings","children"],x);c(["contains"]);c(["html"],r);c(["remove"]);a.each(["insertBefore",
"insertAfter"],function(b){q[b]=function(d){g[b].call(g,this[0],d);return this}});a.each([q,v],function(b,d){a.each(["append","prepend"],function(e){b[e]=function(h){return f.call(this,h,d,e)};b[e+"To"]=function(h){return k.call(this,h,e)}})});a.augment(w,EventTarget,{fire:function(){},on:function(b,d,e){function h(j){var l=a.makeArray(arguments);l.shift();j.target=new w(j.target);l.unshift(j);return d.apply(this,l)}e=e||this;o.add(this[0],b,h,e);m(d,h);return this},detach:function(b,d,e){e=e||this;
if(a.isFunction(d)){d=d.__wrap||[];for(var h=0;h<d.length;h++)o.remove(this,b,d[h],e)}else o.remove(this[0],b,d,e);return this}});a.augment(z,EventTarget);q._supportSpecialEvent=true;a.each({on:"add",detach:"remove"},function(b,d){v[d]=function(e,h,j){for(var l=0;l<this.length;l++)this.item(l).on(e,h,j)}})});
