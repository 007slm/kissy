/*
Copyright 2012, KISSY UI Library v1.40dev
MIT Licensed
build time: Oct 15 14:05
*/
var KISSY=function(c){var m=this,l=!{toString:1}.propertyIsEnumerable("toString"),k="hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toString,toLocaleString,valueOf".split(","),a={mix:function(c,a,i,b,d){"object"===typeof i&&(b=i.whitelist,d=i.deep,i=i.overwrite);var n=[],f=0;for(e(c,a,i,b,d,n);a=n[f++];)delete a.__MIX_CIRCULAR;return c}},e=function(a,e,i,b,h,n){if(!e||!a)return a;i===c&&(i=!0);var f=0,o,t;e.__MIX_CIRCULAR=a;n.push(e);if(b&&(t=b.length))for(;f<t;f++)o=b[f],o in e&&d(o,a,e,i,b,h,
n);else{for(o in e)"__MIX_CIRCULAR"!=o&&d(o,a,e,i,b,h,n);if(l)for(;o=k[f++];)Object.prototype.hasOwnProperty.call(e,o)&&d(o,a,e,i,b,h,n)}return a},d=function(a,d,i,b,j,n,f){if(b||!(a in d)||n){var o=d[a],i=i[a];if(o!==i)if(n&&i&&(h.isArray(i)||h.isPlainObject(i)))i.__MIX_CIRCULAR?d[a]=i.__MIX_CIRCULAR:(n=o&&(h.isArray(o)||h.isPlainObject(o))?o:h.isArray(i)?[]:{},d[a]=n,e(n,i,b,j,!0,f));else if(i!==c&&(b||!(a in d)))d[a]=i}},j={},r=0;j.Env=j.Env||{};j.Env.host=m;var h=a.mix(j,a);h.mix(h,{configs:h.configs||
{},version:"1.40dev",merge:function(c){var c=h.makeArray(arguments),a={},i,b=c.length;for(i=0;i<b;i++)h.mix(a,c[i]);return a},augment:function(a,d){var i=h.makeArray(arguments),b=i.length-2,e=1,n=i[b],f=i[b+1];h.isArray(f)||(n=f,f=c,b++);h.isBoolean(n)||(n=c,b++);for(;e<b;e++)h.mix(a.prototype,i[e].prototype||i[e],n,f);return a},extend:function(c,a,i,b){if(!a||!c)return c;var e=Object.create?function(c,b){return Object.create(c,{constructor:{value:b}})}:function(c,b){function f(){}f.prototype=c;
var a=new f;a.constructor=b;return a},d=a.prototype,f;f=e(d,c);c.prototype=h.mix(f,c.prototype);c.superclass=e(d,a);i&&h.mix(f,i);b&&h.mix(c,b);return c},namespace:function(){var c=h.makeArray(arguments),a=c.length,i=null,b,e,d,f=!0===c[a-1]&&a--;for(b=0;b<a;b++){d=(""+c[b]).split(".");i=f?m:this;for(e=m[d[0]]===i?1:0;e<d.length;++e)i=i[d[e]]=i[d[e]]||{}}return i},config:function(a,e){var d,b,j=this,n,f=h.Config,o=h.configs;h.isObject(a)?h.each(a,function(c,b){(n=o[b])?n.call(j,c):f[b]=c}):(d=o[a],
e===c?b=d?d.call(j):f[a]:d?b=d.call(j,e):f[a]=e);return b},log:function(a,e,d){if(h.Config.debug&&(d&&(a=d+": "+a),m.console!==c&&console.log))console[e&&console[e]?e:"log"](a)},error:function(c){if(h.Config.debug)throw c;},guid:function(c){return(c||"")+r++},keys:function(c){var a=[],e;for(e in c)a.push(e);l&&h.each(k,function(b){Object.prototype.hasOwnProperty.call(c,b)&&a.push(b)});return a}});h.Env=h.Env||{};h.Env.nodejs="function"===typeof require&&"object"===typeof exports;(h.Config=h.Config||
{}).debug="";h.__BUILD_TIME="20121015140542";h.Env.nodejs&&(h.KISSY=h,module.exports=h);return h}();
(function(c,m){function l(){if(v)return v;var g=t;c.each(x,function(c){g+=c+"|"});g=g.slice(0,-1);return v=RegExp(g,"g")}function k(){if(y)return y;var g=t;c.each(z,function(c){g+=c+"|"});g+="&#(\\d{1,5});";return y=RegExp(g,"g")}function a(g){var c=typeof g;return null==g||"object"!==c&&"function"!==c}function e(g,b,a){var f=g,d,o,i,n;if(!g)return f;if(g[u])return a[g[u]].destination;if("object"===typeof g){n=g.constructor;if(c.inArray(n,[Boolean,String,Number,Date,RegExp]))f=new n(g.valueOf());
else if(d=c.isArray(g))f=b?c.filter(g,b):g.concat();else if(o=c.isPlainObject(g))f={};g[u]=n=c.guid();a[n]={destination:f,input:g}}if(d)for(g=0;g<f.length;g++)f[g]=e(f[g],b,a);else if(o)for(i in g)if(i!==u&&(!b||b.call(g,g[i],i,g)!==r))f[i]=e(g[i],b,a);return f}function d(g,b,a,f){if(g[w]===b&&b[w]===g)return j;g[w]=b;b[w]=g;var e=function(g,c){return null!==g&&g!==m&&g[c]!==m},d;for(d in b)!e(g,d)&&e(b,d)&&a.push("expected has key '"+d+"', but missing from actual.");for(d in g)!e(b,d)&&e(g,d)&&a.push("expected missing key '"+
d+"', but present in actual.");for(d in b)d!=w&&(c.equals(g[d],b[d],a,f)||f.push("'"+d+"' was '"+(b[d]?b[d].toString():b[d])+"' in expected, but was '"+(g[d]?g[d].toString():g[d])+"' in actual."));c.isArray(g)&&c.isArray(b)&&g.length!=b.length&&f.push("arrays were not the same length");delete g[w];delete b[w];return 0===a.length&&0===f.length}var j=!0,r=!1,h=Object.prototype.toString,p=Array.prototype,q=p.indexOf,i=p.lastIndexOf,b=p.filter,s=p.every,n=p.some,f=String.prototype.trim,o=p.map,t="",u=
"__~ks_cloned",w="__~ks_compared",B=/^[\s\xa0]+|[\s\xa0]+$/g,A={},x={"&amp;":"&","&gt;":">","&lt;":"<","&#x60;":"`","&#x2F;":"/","&quot;":'"',"&#x27;":"'"},z={},v,y,C=/[\-#$\^*()+\[\]{}|\\,.?\s]/g;(function(){for(var g in x)z[x[g]]=g})();c.mix(c,{stamp:function(g,b,a){if(!g)return g;var a=a||"__~ks_stamped",d=g[a];if(!d&&!b)try{d=g[a]=c.guid(a)}catch(f){d=m}return d},noop:function(){},type:function(g){return null==g?""+g:A[h.call(g)]||"object"},isNull:function(g){return null===g},isUndefined:function(g){return g===
m},isEmptyObject:function(g){for(var c in g)if(c!==m)return r;return j},isPlainObject:function(g){if(!g||"object"!==c.type(g)||g.nodeType||g.window==g)return!1;try{if(g.constructor&&!Object.prototype.hasOwnProperty.call(g,"constructor")&&!Object.prototype.hasOwnProperty.call(g.constructor.prototype,"isPrototypeOf"))return!1}catch(b){return!1}for(var a in g);return a===m||Object.prototype.hasOwnProperty.call(g,a)},equals:function(g,b,a,f){a=a||[];f=f||[];return g===b?j:g===m||null===g||b===m||null===
b?null==g&&null==b:g instanceof Date&&b instanceof Date?g.getTime()==b.getTime():"string"==typeof g&&"string"==typeof b||c.isNumber(g)&&c.isNumber(b)?g==b:"object"===typeof g&&"object"===typeof b?d(g,b,a,f):g===b},clone:function(g,b){var a={},d=e(g,b,a);c.each(a,function(g){g=g.input;if(g[u])try{delete g[u]}catch(b){g[u]=m}});a=null;return d},trim:f?function(g){return null==g?t:f.call(g)}:function(g){return null==g?t:g.toString().replace(B,t)},substitute:function(g,b,a){return"string"!=typeof g||
!c.isPlainObject(b)?g:g.replace(a||/\\?\{([^{}]+)\}/g,function(g,c){return"\\"===g.charAt(0)?g.slice(1):b[c]===m?t:b[c]})},each:function(g,b,a){if(g){var d,f=0,e=g&&g.length,o=e===m||"function"===c.type(g),a=a||null;if(o)for(d in g){if(b.call(a,g[d],d,g)===r)break}else for(d=g[0];f<e&&b.call(a,d,f,g)!==r;d=g[++f]);}return g},indexOf:q?function(g,b){return q.call(b,g)}:function(b,c){for(var a=0,d=c.length;a<d;++a)if(c[a]===b)return a;return-1},lastIndexOf:i?function(b,c){return i.call(c,b)}:function(b,
c){for(var a=c.length-1;0<=a&&c[a]!==b;a--);return a},unique:function(b,a){var d=b.slice();a&&d.reverse();for(var f=0,e,o;f<d.length;){for(o=d[f];(e=c.lastIndexOf(o,d))!==f;)d.splice(e,1);f+=1}a&&d.reverse();return d},inArray:function(b,a){return-1<c.indexOf(b,a)},filter:b?function(g,a,c){return b.call(g,a,c||this)}:function(b,a,d){var f=[];c.each(b,function(b,c,g){a.call(d||this,b,c,g)&&f.push(b)});return f},map:o?function(b,a,c){return o.call(b,a,c||this)}:function(b,a,c){for(var d=b.length,f=Array(d),
e=0;e<d;e++){var o="string"==typeof b?b.charAt(e):b[e];if(o||e in b)f[e]=a.call(c||this,o,e,b)}return f},reduce:function(b,a,c){var d=b.length;if("function"!==typeof a)throw new TypeError("callback is not function!");if(0===d&&2==arguments.length)throw new TypeError("arguments invalid");var f=0,e;if(3<=arguments.length)e=arguments[2];else{do{if(f in b){e=b[f++];break}f+=1;if(f>=d)throw new TypeError;}while(j)}for(;f<d;)f in b&&(e=a.call(m,e,b[f],f,b)),f++;return e},every:s?function(b,a,c){return s.call(b,
a,c||this)}:function(b,a,c){for(var d=b&&b.length||0,f=0;f<d;f++)if(f in b&&!a.call(c,b[f],f,b))return r;return j},some:n?function(b,a,c){return n.call(b,a,c||this)}:function(b,a,c){for(var f=b&&b.length||0,d=0;d<f;d++)if(d in b&&a.call(c,b[d],d,b))return j;return r},bind:function(b,a,c){var d=[].slice,f=d.call(arguments,2),e=function(){},o=function(){return b.apply(this instanceof e?this:a,f.concat(d.call(arguments)))};e.prototype=b.prototype;o.prototype=new e;return o},now:Date.now||function(){return+new Date},
fromUnicode:function(b){return b.replace(/\\u([a-f\d]{4})/ig,function(b,a){return String.fromCharCode(parseInt(a,16))})},ucfirst:function(b){b+="";return b.charAt(0).toUpperCase()+b.substring(1)},urlEncode:function(b){return encodeURIComponent(""+b)},urlDecode:function(b){return decodeURIComponent(b.replace(/\+/g," "))},escapeHTML:function(b){return(b+"").replace(l(),function(b){return z[b]})},escapeRegExp:function(b){return b.replace(C,"\\$&")},unEscapeHTML:function(b){return b.replace(k(),function(b,
a){return x[b]||String.fromCharCode(+a)})},makeArray:function(b){if(null==b)return[];if(c.isArray(b))return b;if("number"!==typeof b.length||b.alert||"string"==typeof b||c.isFunction(b))return[b];for(var a=[],d=0,f=b.length;d<f;d++)a[d]=b[d];return a},param:function(b,d,f,e){if(!c.isPlainObject(b))return t;d=d||"&";f=f||"=";c.isUndefined(e)&&(e=j);var o=[],i,n,h,k,s,u=c.urlEncode;for(i in b)if(s=b[i],i=u(i),a(s))o.push(i),s!==m&&o.push(f,u(s+t)),o.push(d);else if(c.isArray(s)&&s.length){n=0;for(k=
s.length;n<k;++n)h=s[n],a(h)&&(o.push(i,e?u("[]"):t),h!==m&&o.push(f,u(h+t)),o.push(d))}o.pop();return o.join(t)},unparam:function(b,a,d){if("string"!=typeof b||!(b=c.trim(b)))return{};for(var d=d||"=",f={},e,o=c.urlDecode,b=b.split(a||"&"),i=0,n=b.length;i<n;++i){e=b[i].indexOf(d);if(-1==e)a=o(b[i]),e=m;else{a=o(b[i].substring(0,e));e=b[i].substring(e+1);try{e=o(e)}catch(h){}c.endsWith(a,"[]")&&(a=a.substring(0,a.length-2))}a in f?c.isArray(f[a])?f[a].push(e):f[a]=[f[a],e]:f[a]=e}return f},later:function(b,
a,d,f,e){var a=a||0,o=b,i=c.makeArray(e),n;"string"==typeof b&&(o=f[b]);b=function(){o.apply(f,i)};n=d?setInterval(b,a):setTimeout(b,a);return{id:n,interval:d,cancel:function(){this.interval?clearInterval(n):clearTimeout(n)}}},startsWith:function(b,a){return 0===b.lastIndexOf(a,0)},endsWith:function(b,a){var c=b.length-a.length;return 0<=c&&b.indexOf(a,c)==c},throttle:function(b,a,d){a=a||150;if(-1===a)return function(){b.apply(d||this,arguments)};var f=c.now();return function(){var e=c.now();e-f>
a&&(f=e,b.apply(d||this,arguments))}},buffer:function(b,a,d){function f(){f.stop();e=c.later(b,a,r,d||this,arguments)}a=a||150;if(-1===a)return function(){b.apply(d||this,arguments)};var e=null;f.stop=function(){e&&(e.cancel(),e=0)};return f}});c.mix(c,{isBoolean:a,isNumber:a,isString:a,isFunction:a,isArray:a,isDate:a,isRegExp:a,isObject:a});c.each("Boolean,Number,String,Function,Array,Date,RegExp,Object".split(","),function(b,a){A["[object "+b+"]"]=a=b.toLowerCase();c["is"+b]=function(b){return c.type(b)==
a}})})(KISSY);
(function(c,m){function l(c,b,e){if(c instanceof d)return e(c[p]);var n=c[p];if(c=c[q])c.push([b,e]);else if(a(n))l(n,b,e);else return b&&b(n);return m}function k(a){if(!(this instanceof k))return new k(a);this.promise=a||new e}function a(a){return a&&a instanceof e}function e(a){this[p]=a;a===m&&(this[q]=[])}function d(a){if(a instanceof d)return a;e.apply(this,arguments);return m}function j(a,b,c){function n(a){try{return b?b(a):a}catch(c){return new d(c)}}function f(b){try{return c?c(b):new d(b)}catch(a){return new d(a)}}
function o(b){j||(j=1,h.resolve(n(b)))}var h=new k,j=0;a instanceof e?l(a,o,function(b){j||(j=1,h.resolve(f(b)))}):o(a);return h.promise}function r(c){return!h(c)&&a(c)&&c[q]===m&&(!a(c[p])||r(c[p]))}function h(c){return a(c)&&c[q]===m&&c[p]instanceof d}var p="__promise_value",q="__promise_pendings";k.prototype={constructor:k,resolve:function(a){var b=this.promise,d;if(!(d=b[q]))return m;b[p]=a;d=[].concat(d);b[q]=m;c.each(d,function(a){l(b,a[0],a[1])});return a},reject:function(a){return this.resolve(new d(a))}};
e.prototype={constructor:e,then:function(a,b){return j(this,a,b)},fail:function(a){return j(this,0,a)},fin:function(a){return j(this,function(b){return a(b,!0)},function(b){return a(b,!1)})},isResolved:function(){return r(this)},isRejected:function(){return h(this)}};c.extend(d,e);KISSY.Defer=k;KISSY.Promise=e;c.mix(e,{when:j,isPromise:a,isResolved:r,isRejected:h,all:function(a){var b=a.length;if(!b)return a;for(var c=k(),d=0;d<a.length;d++)(function(d,e){j(d,function(d){a[e]=d;0===--b&&c.resolve(a)},
function(b){c.reject(b)})})(a[d],d);return c.promise}})})(KISSY);
(function(c){function m(a,c){for(var d=0,j=a.length-1;0<=j;j--){var k=a[j];"."==k?a.splice(j,1):".."===k?(a.splice(j,1),d++):d&&(a.splice(j,1),d--)}if(c)for(;d--;d)a.unshift("..");return a}var l=/^(\/?)([\s\S]+\/(?!$)|\/)?((?:\.{1,2}$|[\s\S]+?)?(\.[^.\/]*)?)$/,k={resolve:function(){var a="",e,d=c.makeArray(arguments),j,k=0;for(e=d.length-1;0<=e&&!k;e--)j=d[e],"string"==typeof j&&j&&(a=j+"/"+a,k="/"==j.charAt(0));a=m(c.filter(a.split("/"),function(a){return!!a}),!k).join("/");return(k?"/":"")+a||"."},
normalize:function(a){var e="/"==a.charAt(0),d="/"==a.slice(-1),a=m(c.filter(a.split("/"),function(a){return!!a}),!e).join("/");!a&&!e&&(a=".");a&&d&&(a+="/");return(e?"/":"")+a},join:function(){var a=c.makeArray(arguments);return k.normalize(c.filter(a,function(a){return a&&"string"==typeof a}).join("/"))},relative:function(a,e){var a=k.normalize(a),e=k.normalize(e),d=c.filter(a.split("/"),function(a){return!!a}),j=[],m,h,p=c.filter(e.split("/"),function(a){return!!a});h=Math.min(d.length,p.length);
for(m=0;m<h&&d[m]==p[m];m++);for(h=m;m<d.length;)j.push(".."),m++;j=j.concat(p.slice(h));return j=j.join("/")},basename:function(a,c){var d=a.match(l)||[],d=d[3]||"";c&&d&&d.slice(-1*c.length)==c&&(d=d.slice(0,-1*c.length));return d},dirname:function(a){var c=a.match(l)||[],a=c[1]||"",c=c[2]||"";if(!a&&!c)return".";c&&(c=c.substring(0,c.length-1));return a+c},extname:function(a){return(a.match(l)||[])[4]||""}};c.Path=k})(KISSY);
(function(c,m){function l(b){b._queryMap||(b._queryMap=c.unparam(b._query))}function k(b){this._query=b||""}function a(b,a){return encodeURI(b).replace(a,function(b){b=b.charCodeAt(0).toString(16);return"%"+(1==b.length?"0"+b:b)})}function e(b){if(b instanceof e)return b.clone();var a,d=this;c.mix(d,{scheme:"",userInfo:"",hostname:"",port:"",path:"",query:"",fragment:""});a=(b||"").match(p)||[];c.each(i,function(b,e){var i=a[b]||"";"query"==e?d.query=new k(i):d[e]=c.urlDecode(i)});return m}var d=
/[#\/\?@]/g,j=/[#\?]/g,r=/[#@]/g,h=/#/g,p=RegExp("^(?:([\\w\\d+.-]+):)?(?://(?:([^/?#@]*)@)?([\\w\\d\\-\\u0100-\\uffff.+%]*|\\[[^\\]]+\\])(?::([0-9]+))?)?([^?#]+)?(?:\\?([^#]*))?(?:#(.*))?$"),q=c.Path,i={scheme:1,userInfo:2,hostname:3,port:4,path:5,query:6,fragment:7};k.prototype={constructor:k,clone:function(){return new k(this.toString())},reset:function(b){this._query=b||"";this._queryMap=0},count:function(){var b=0,a=this._queryMap,d;l(this);for(d in a)c.isArray(a[d])?b+=a[d].length:b++;return b},
get:function(b){l(this);return b?this._queryMap[b]:this._queryMap},keys:function(){l(this);return c.keys(this._queryMap)},set:function(b,a){var d;l(this);d=this._queryMap;"string"==typeof b?this._queryMap[b]=a:(b instanceof k&&(b=b.get()),c.each(b,function(b,a){d[a]=b}));return this},remove:function(b){l(this);b?delete this._queryMap[b]:this._queryMap={};return this},add:function(b,a){var d=this,f,e;c.isObject(b)?(b instanceof k&&(b=b.get()),c.each(b,function(b,a){d.add(a,b)})):(l(d),f=d._queryMap,
e=f[b],e=e===m?a:[].concat(e).concat(a),f[b]=e);return d},toString:function(b){l(this);return c.param(this._queryMap,m,m,b)}};e.prototype={constructor:e,clone:function(){var b=new e,a=this;c.each(i,function(c,d){b[d]=a[d]});b.query=b.query.clone();return b},resolve:function(b){"string"==typeof b&&(b=new e(b));var a=0,d,f=this.clone();c.each("scheme,userInfo,hostname,port,path,query,fragment".split(","),function(e){if(e=="path")if(a)f[e]=b[e];else{if(e=b.path){a=1;if(!c.startsWith(e,"/"))if(f.hostname&&
!f.path)e="/"+e;else if(f.path){d=f.path.lastIndexOf("/");d!=-1&&(e=f.path.slice(0,d+1)+e)}f.path=q.normalize(e)}}else if(e=="query"){if(a||b.query.toString()){f.query=b.query.clone();a=1}}else if(a||b[e]){f[e]=b[e];a=1}});return f},getScheme:function(){return this.scheme},setScheme:function(b){this.scheme=b;return this},getHostname:function(){return this.hostname},setHostname:function(b){this.hostname=b;return this},setUserInfo:function(b){this.userInfo=b;return this},getUserInfo:function(){return this.userInfo},
setPort:function(b){this.port=b;return this},getPort:function(){return this.port},setPath:function(b){this.path=b;return this},getPath:function(){return this.path},setQuery:function(b){"string"==typeof b&&(c.startsWith(b,"?")&&(b=b.slice(1)),b=new k(a(b,r)));this.query=b;return this},getQuery:function(){return this.query},getFragment:function(){return this.fragment},setFragment:function(b){c.startsWith(b,"#")||(b="#"+b);this.fragment=b;return this},hasSameDomainAs:function(b){return this.hostname.toLowerCase()==
b.hostname.toLowerCase()&&this.scheme.toLowerCase()==b.scheme.toLowerCase()&&this.port.toLowerCase()==b.port.toLowerCase()},toString:function(b){var e=[],i,f;if(i=this.scheme)e.push(a(i,d)),e.push(":");if(i=this.hostname){e.push("//");if(f=this.userInfo)e.push(a(f,d)),e.push("@");e.push(encodeURIComponent(i));if(f=this.port)e.push(":"),e.push(f)}if(f=this.path)i&&!c.startsWith(f,"/")&&(f="/"+f),f=q.normalize(f),e.push(a(f,j));if(b=this.query.toString.call(this.query,b))e.push("?"),e.push(b);if(b=
this.fragment)e.push("#"),e.push(a(b,h));return e.join("")}};e.Query=k;c.Uri=e})(KISSY);(function(){function c(c){this.runtime=c}c.STATUS={INIT:0,LOADING:1,LOADED:2,ERROR:3,ATTACHED:4};KISSY.Loader=c})(KISSY);
(function(c){function m(c,a,e){c=c[l]||(c[l]={});e&&(c[a]=c[a]||[]);return c[a]}c.namespace("Loader");var l="__events__"+c.now();KISSY.Loader.Target={on:function(c,a){m(this,c,1).push(a)},detach:function(k,a){var e,d;if(k){if(e=m(this,k))a&&(d=c.indexOf(a,e),-1!=d&&e.splice(d,1)),(!a||!e.length)&&delete (this[l]||(this[l]={}))[k]}else delete this[l]},fire:function(k,a){var e=m(this,k);c.each(e,function(c){c.call(null,a)})}}})(KISSY);
(function(c){function m(b){if(c.isArray(b)){for(var a=[],d=0;d<b.length;d++)a[d]=l(b[d]);return a}return l(b)}function l(b){c.endsWith(e.basename(b),"/")&&(b+="index");return b}function k(b,a,d){var b=b.Env.mods,e,a=c.makeArray(a);for(e=0;e<a.length;e++){var i=b[a[e]];if(!i||i.status!==d)return!1}return!0}var a=c.Loader,e=c.Path,d=c.Uri,j=c.Env.host,r=j.navigator&&navigator.userAgent||"",h=c.startsWith,p=a.STATUS,q=p.ATTACHED,i=p.LOADED,b={},p=!!r.match(/AppleWebKit/),s=j.document,n=new d(j.location&&
location.href||"");c.mix(b,{docHead:function(){return s.getElementsByTagName("head")[0]||s.documentElement},isWebKit:p,isGecko:!p&&!!r.match(/Gecko/),isPresto:!!r.match(/Presto/),IE:!!r.match(/MSIE/),addEventListener:j.addEventListener?function(b,a,c){b.addEventListener(a,c,!1)}:function(b,a,c){b.attachEvent("on"+a,c)},removeEventListener:j.removeEventListener?function(b,a,c){b.removeEventListener(a,c,!1)}:function(b,a,c){b.detachEvent("on"+a,c)},normalDepModuleName:function(a,d){var i=0;if(!d)return d;
if(c.isArray(d)){for(;i<d.length;i++)d[i]=b.normalDepModuleName(a,d[i]);return d}return h(d,"../")||h(d,"./")?e.resolve(e.dirname(a),d):e.normalize(d)},removeExtname:function(b){return b.replace(/(-min)?\.js$/i,"")},resolveByPage:function(b){return n.resolve(b)},createModulesInfo:function(a,d){c.each(d,function(c){b.createModuleInfo(a,c)})},createModuleInfo:function(b,d,e){var d=l(d),i=b.Env.mods,h=i[d];return h?h:i[d]=h=new a.Module(c.mix({name:d,runtime:b},e))},isAttached:function(b,a){return k(b,
a,q)},isLoaded:function(b,a){return k(b,a,i)},getModules:function(b,a){var d=[b],e;c.each(a,function(a){e=b.Env.mods[a];(!e||"css"!=e.getType())&&d.push(b.require(a))});return d},attachMod:function(a,d){if(d.status==i){var e=d.fn,h;h=d.requires=d.getNormalizedRequires();e&&(e=c.isFunction(e)?e.apply(d,b.getModules(a,h)):e,d.value=e);d.status=q;a.getLoader().fire("afterModAttached",{mod:d})}},getModNamesAsArray:function(b){"string"==typeof b&&(b=b.replace(/\s+/g,"").split(","));return b},normalizeModNames:function(a,
d,c){return b.unalias(a,b.normalizeModNamesWithAlias(a,d,c))},unalias:function(b,a){for(var d=[].concat(a),c,e,i,h=0,j=b.Env.mods;!h;){h=1;for(c=d.length-1;0<=c;c--)if((e=j[d[c]])&&(i=e.alias))h=0,d.splice.apply(d,[c,1].concat(m(i)))}return d},normalizeModNamesWithAlias:function(a,d,c){var a=[],e,i;if(d){e=0;for(i=d.length;e<i;e++)d[e]&&a.push(m(d[e]))}c&&(a=b.normalDepModuleName(c,a));return a},registerModule:function(a,d,e,h){var j=a.Env.mods,n=j[d];if(!n||!n.fn)b.createModuleInfo(a,d),n=j[d],c.mix(n,
{name:d,status:i}),n.fn=e,c.mix(j[d]=n,h)},getMappedPath:function(b,a,d){for(var b=d||b.Config.mappedRules||[],c,d=0;d<b.length;d++)if(c=b[d],a.match(c[0]))return a.replace(c[0],c[1]);return a},memoize:function(b,a){var a=a||function(b){return b},d={},e={},i=function(){var i=c.makeArray(arguments),h=i.pop(),j=a.apply(null,i);j in d?h.apply(null,d[j]):j in e?e[j].push(h):(e[j]=[h],b.apply(null,i.concat([function(){d[j]=arguments;var b=e[j];delete e[j];for(var a=0,c=b.length;a<c;a++)b[a].apply(null,
arguments)}])))};i.unmemoized=b;return i}});a.Utils=b})(KISSY);
(function(c){function m(a){c.mix(this,a)}function l(d){this.status=a.STATUS.INIT;c.mix(this,d)}var k=c.Path,a=c.Loader,e=a.Utils;c.augment(m,{getTag:function(){return this.tag||this.runtime.Config.tag},getName:function(){return this.name},getBase:function(){return this.base||this.runtime.Config.base},getBaseUri:function(){return this.baseUri||this.runtime.Config.baseUri},isDebug:function(){var a=this.debug;return void 0===a?this.runtime.Config.debug:a},getCharset:function(){return this.charset||this.runtime.Config.charset},
isCombine:function(){var a=this.combine;return void 0===a?this.runtime.Config.combine:a}});a.Package=m;c.augment(l,{setValue:function(a){this.value=a},getType:function(){var a;if(void 0===(a=this.type))this.type=a=".css"==k.extname(this.name).toLowerCase()?"css":"js";return a},getFullPath:function(){var a,c;this.fullpath||(c=this.getPackage().getBaseUri(),c=c.resolve(this.getPath()),(a=this.getTag())&&c.query.set("t",a),this.fullpath=e.getMappedPath(this.runtime,c.toString()));return this.fullpath},
getPath:function(){var a;if(!(a=this.path)){a=this.name;var c=(k.extname(a)||"").toLowerCase(),e="-min";".css"!=c&&(c=".js");a=k.join(k.dirname(a),k.basename(a,c));this.getPackage().isDebug()&&(e="");a=this.path=a+e+c}return a},getValue:function(){return this.value},getName:function(){return this.name},getPackage:function(){var d;if(!(d=this.packageInfo)){d=this.runtime;var e=this.name,k=d.Env,h=k.packages||{},m="",l;for(l in h)c.startsWith(e,l)&&l.length>m.length&&(m=l);d=this.packageInfo=h[m]||
k.defaultPackage||(k.defaultPackage=new a.Package({runtime:d,name:""}))}return d},getTag:function(){return this.tag||this.getPackage().getTag()},getCharset:function(){return this.charset||this.getPackage().getCharset()},getRequiredMods:function(){var a=this.runtime.Env.mods;return c.map(this.getNormalizedRequires(),function(c){return a[c]})},getNormalizedRequires:function(){var a,c=this.normalizedRequiresStatus,k=this.status,h=this.requires;if(!h||0==h.length)return h||[];if((a=this.normalizedRequires)&&
c==k)return a;this.normalizedRequiresStatus=k;return this.normalizedRequires=e.normalizeModNames(this.runtime,h,this.name)}});a.Module=l})(KISSY);
(function(c){var m=require("fs"),l=require("vm");c.mix(c,{getScript:function(k,a,e){var d;c.isPlainObject(a)&&(e=a.charset,d=a.error,a=a.success);if(c.startsWith(c.Path.extname(k).toLowerCase(),".css"))return a&&a();var j=new c.Uri(k);m.readFile(j.getPath(),e||"utf-8",function(e,h){if(e)d&&d(e);else{try{l.runInThisContext("(function(KISSY){"+h+"})",k)(c)}catch(j){d&&d(j)}a&&a()}})}})})(KISSY);
(function(c){var m=c.Loader,l=m.Utils,k=c.configs;k.map=function(a){return!1===a?this.Config.mappedRules=[]:this.Config.mappedRules=(this.Config.mappedRules||[]).concat(a||[])};k.mapCombo=function(a){return!1===a?this.Config.mappedComboRules=[]:this.Config.mappedComboRules=(this.Config.mappedComboRules||[]).concat(a||[])};k.packages=function(a){var e,d,j=this.Env,k=j.packages=j.packages||{};a?c.each(a,function(a,j){e=a.name||j;d=a.base||a.path;c.Env.nodejs&&!c.startsWith(d,"file:")&&(d="file:"+d);
c.endsWith(d,"/")||(d+="/");a.name=e;var q=l.resolveByPage(d);a.base=q.toString();a.baseUri=q;a.runtime=c;delete a.path;k[e]=new m.Package(a)}):!1===a&&(j.packages={})};k.modules=function(a){var e=this;a?c.each(a,function(a,j){l.createModuleInfo(e,j,a);c.mix(e.Env.mods[j],a)}):!1===a&&(e.Env.mods={})};k.base=function(a){var e=this.Config;if(!a)return e.base;c.Env.nodejs&&!c.startsWith(a,"file:")&&(a="file:"+a);a=l.resolveByPage(a);e.base=a.toString();e.baseUri=a}})(KISSY);
(function(c,m){var l=c.Loader,k=c.Path,a=l.Utils;c.augment(l,l.Target,{__currentModule:null,__startLoadTime:0,__startLoadModuleName:null,add:function(e,d,j){var l=this.runtime,h,p=l.Env.mods;if(c.isPlainObject(e))return l.config({modules:e});if("string"==typeof e)a.registerModule(l,e,d,j),d=p[e],j&&!1===j.attach||(j&&(h=d.getNormalizedRequires()),(!h||a.isAttached(l,h))&&a.attachMod(l,d));else if(c.isFunction(e))if(j=d,d=e,a.IE){h=this.runtime;for(var e=c.Env.host.document.getElementsByTagName("script"),
q,i,p=0;p<e.length;p++)if(i=e[p],"interactive"==i.readyState){q=i;break}if(q){q=a.resolveByPage(q.src);var e=q.toString(),p=h.Env.packages,b,s;i=h.Config;var n,f=-1;for(s in p)h=p[s].getBase(),c.startsWith(e,h)&&h.length>f&&(f=h.length,b=h,n=p[s].getBaseUri());e=b?a.removeExtname(k.relative(n.getPath(),q.getPath())):c.startsWith(e,i.base)?a.removeExtname(k.relative(i.baseUri.getPath(),q.getPath())):m}else e=this.__startLoadModuleName;a.registerModule(l,e,d,j);this.__startLoadModuleName=null;this.__startLoadTime=
0}else this.__currentModule={fn:d,config:j}}})})(KISSY);
(function(c){function m(a){this.fn=a;this.waitMods={};this.requireLoadedMods={}}function l(a,b,d){var e,i=a.length,h=d.length;for(e=0;e<i;e++){var k=a[e],m=b,p=d,q=m.Env.mods[k];q.status!=s&&(c.inArray(k,p)?p.push(k):(p.push(k),l(q.getNormalizedRequires(),m,p),j.attachMod(m,q)));d.length=h}}function k(b,c,d){var e,i=c.length;for(e=0;e<i;e++){var h=b,k=c[e],m=d,l=h.runtime,r=void 0,r=l.Env.mods,v=r[k];v||(j.createModuleInfo(l,k),v=r[k]);r=v.status;r!=s&&(r===q?m.loadModRequires(h,v):(l=m.isModWait(k),
m.addWaitMod(k),r<=p&&!l&&a(h,v,m)))}}function a(a,d,e){function k(){d.fn?(e.loadModRequires(a,d),e.removeWaitMod(l),e.check()):d.status=i}var m=a.runtime,l=d.getName(),q=d.getCharset(),s=d.getFullPath(),x="css"==d.getType();d.status=p;r&&!x&&(a.__startLoadModuleName=l,a.__startLoadTime=Number(+new Date));c.getScript(s,{success:function(){h[l]||(h[l]=1);if(d.status==p)if(x)j.registerModule(m,l,c.noop);else{var e;if(e=a[b]){j.registerModule(m,l,e.fn,e.config);a[b]=null}}k()},error:k,charset:q})}var e=
c.Loader,d=e.STATUS,j=e.Utils,r=j.IE,h={},p=d.LOADING,q=d.LOADED,i=d.ERROR,b="__currentModule",s=d.ATTACHED;m.prototype={check:function(){var a=this.waitMods,b=this.fn;b&&c.isEmptyObject(a)&&(b(),this.fn=null)},addWaitMod:function(a){this.waitMods[a]=1},removeWaitMod:function(a){delete this.waitMods[a]},isModWait:function(a){return this.waitMods[a]},loadModRequires:function(a,b){var c=this.requireLoadedMods,d=b.name;c[d]||(c[d]=1,c=b.getNormalizedRequires(),k(a,c,this))}};c.augment(e,{use:function(a,
b){var c,d=new m(function(){l(c,e,[]);b&&b.apply(e,j.getModules(e,a))}),e=this.runtime,a=j.getModNamesAsArray(a),a=j.normalizeModNamesWithAlias(e,a);c=j.unalias(e,a);k(this,c,d);d.check();return this},clear:function(){}})})(KISSY);
(function(c){function m(){var a=/^(.*)(seed|kissy)(?:-min)?\.js[^/]*/i,d=/(seed|kissy)(?:-min)?\.js/i,j,m,h=c.Env.host.document.getElementsByTagName("script"),l=h[h.length-1],h=k.resolveByPage(l.src).toString(),l=(l=l.getAttribute("data-config"))?(new Function("return "+l))():{},h=h.replace(/%3f/gi,"?").replace(/%2c/gi,",");j=l.comboPrefix=l.comboPrefix||"??";m=l.comboSep=l.comboSep||",";var q,i=h.indexOf(j);-1==i?q=h.replace(a,"$1"):(q=h.substring(0,i),h=h.substring(i+j.length).split(m),c.each(h,
function(b){if(b.match(d))return q+=b.replace(a,"$1"),!1}));return c.mix({base:q,baseUri:new c.Uri(q)},l)}var l=c.Loader,k=l.Utils,a=c.Loader.Combo;c.mix(c,{add:function(a,c,j){this.getLoader().add(a,c,j)},use:function(a,c){this.getLoader().use(a,c)},getLoader:function(){var a=this.Env;return this.Config.combine&&!c.Env.nodejs?a._comboLoader:a._loader},clearLoader:function(){var a=this.Env,c;(c=a._comboLoader)&&c.clear&&c.clear();(c=a._loader)&&c.clear&&c.clear();this.config({map:!1,mapCombo:!1,modules:!1,
packages:!1})},require:function(a){return(a=this.Env.mods[a])&&a.value}});c.Env.nodejs?c.config("base",__dirname.replace(/\\/g,"/").replace(/\/$/,"")+"/"):c.config(c.mix({comboMaxUrlLength:2E3,comboMaxFileNum:40,charset:"utf-8",tag:"20121015140542"},m()));(function(){var e=c.Env;e.mods=e.mods||{};e._loader=new l(c);a&&(e._comboLoader=new a(c))})()})(KISSY);
(function(c,m){var l=c.Env.host,k=l.document,a=k&&k.documentElement,e=l.location,d=l.navigator,j=new c.Defer,r=j.promise,h=/^#?([\w-]+)$/,p=/\S/;c.mix(c,{isWindow:function(a){return null!=a&&a==a.window},parseXML:function(a){if(a.documentElement)return a;var b;try{l.DOMParser?b=(new DOMParser).parseFromString(a,"text/xml"):(b=new ActiveXObject("Microsoft.XMLDOM"),b.async="false",b.loadXML(a))}catch(c){b=m}!b||!b.documentElement||b.getElementsByTagName("parsererror");return b},globalEval:function(a){a&&
p.test(a)&&(l.execScript||function(a){l.eval.call(l,a)})(a)},ready:function(a){r.then(a);return this},available:function(a,b){if((a=(a+"").match(h)[1])&&c.isFunction(b))var d=1,e,f=c.later(function(){((e=k.getElementById(a))&&(b(e)||1)||500<++d)&&f.cancel()},40,!0)}});if(e&&-1!==(e.search||"").indexOf("ks-debug"))c.Config.debug=!0;(function(){var d=a&&a.doScroll,b=d?"onreadystatechange":"DOMContentLoaded",e=function(){j.resolve(c)};if(!k||"complete"===k.readyState)return e();if(k.addEventListener){var h=
function(){k.removeEventListener(b,h,!1);e()};k.addEventListener(b,h,!1);l.addEventListener("load",e,!1)}else{var f=function(){"complete"===k.readyState&&(k.detachEvent(b,f),e())};k.attachEvent(b,f);l.attachEvent("onload",e);var m;try{m=null===l.frameElement}catch(p){m=!1}if(d&&m){var q=function(){try{d("left"),e()}catch(a){setTimeout(q,40)}};q()}}return 0})();if(d&&d.userAgent.match(/MSIE/))try{k.execCommand("BackgroundImageCache",!1,!0)}catch(q){}})(KISSY,void 0);
(function(c){c.config({packages:{gallery:{base:c.Config.baseUri.resolve("../").toString()}},modules:{core:{alias:"dom,event,ajax,anim,base,node,json".split(",")}}})})(KISSY);
