/*
Copyright 2010, KISSY UI Library v1.1.3
MIT Licensed
build time: Sep 9 13:07
*/
KISSY.add("mask",function(c,i){function k(g){if(!(this instanceof k))return new k(g);g=c.merge(m,g);var j=g.shim,a=e.create("<iframe>");if(j)g.opacity=0;else e.height(a,e.docHeight());e.attr(a,"style",j?l:d+g.style);e.css(a,"opacity",g.opacity);document.body.appendChild(a);this.config=g;this.iframe=a}var e=c.DOM,d="position:absolute;left:0;top:0;width:100%;border:0;background:black;z-index:9998;display:none;",l="position:absolute;z-index:9997;border:0;display:none;",m={shim:false,opacity:0.6,style:""};
c.augment(k,{show:function(){e.css(this.iframe,"display","block")},hide:function(){e.css(this.iframe,"display","none")},toggle:function(){this[e.css(this.iframe,"display")!=="none"?"hide":"show"]()},setSize:function(g,j){e.width(this.iframe,g);e.height(this.iframe,j)},setOffset:function(g,j){var a=g;if(j!==i)a={left:g,top:j};e.offset(this.iframe,a)}});c.Mask=k});
KISSY.add("overlay",function(c,i){function k(a,b){b=b||{};if(c.isPlainObject(a))b=a;else b.container=a;this.container=c.get(b.container);this.trigger=c.get(b.trigger);b.align=c.merge(c.clone(g.align),b.align);this.config=c.merge(g,b);this._init()}var e=document,d=c.DOM,l=c.Event,m={TL:"tl",TC:"tc",TR:"tr",LC:"cl",CC:"cc",RC:"cr",BL:"bl",BC:"bc",BR:"br"},g={container:null,containerCls:"ks-overlay",bdCls:"ks-overlay-bd",trigger:null,triggerType:"click",width:0,height:0,zIndex:9999,xy:null,align:{node:null,
points:[m.CC,m.CC],offset:[0,0]},mask:false,shim:c.UA.ie===6},j;c.augment(k,c.EventTarget,{_init:function(){this.trigger&&this._bindTrigger()},_bindTrigger:function(){this.config.triggerType==="mouse"?this._bindTriggerMouse():this._bindTriggerClick()},_bindTriggerMouse:function(){var a=this,b=a.trigger,f;l.on(b,"mouseenter",function(){f=c.later(function(){a.show();f=i},100)});l.on(b,"mouseleave",function(){if(f){f.cancel();f=i}a.hide()})},_bindTriggerClick:function(){var a=this;l.on(a.trigger,"click",
function(){a.show()})},show:function(){this._firstShow()},_firstShow:function(){this._prepareMarkup();this._realShow();this._firstShow=this._realShow},_realShow:function(){this._toggle(false)},_toggle:function(a){d.css(this.container,"visibility",a?"hidden":"");this.shim&&this.shim.toggle();if(this.config.mask)j[a?"hide":"show"]();this[a?"_unbindUI":"_bindUI"]();this.fire(a?"hide":"show")},hide:function(){this._toggle(true)},_prepareMarkup:function(){var a=this.config,b=this.container;if(a.mask&&
!j)j=new c.Mask;if(a.shim)this.shim=new c.Mask({shim:true});if(b){this.body=c.get("."+a.bdCls,b)||b;b.style.cssText+="position:absolute;visibility:hidden"}else{b=this.container=d.create(c.substitute('<div class="{containerCls}" style="position:absolute;visibility:hidden"><div class="{bdCls}">{content}</div></div>',a));this.body=d.children(b)[0];e.body.appendChild(b)}d.css(b,"zIndex",a.zIndex);d.css(b,"display","block");this.setBody(a.content);this._setSize();this._setPosition()},_setSize:function(a,
b){var f=this.config;a=a||f.width;b=b||f.height;a&&d.width(this.container,a);b&&d.height(this.container,b);this.shim&&this.shim.setSize(a,b)},_setPosition:function(){var a=this.config.xy;a?this.move(a):this.align()},move:function(a,b){if(c.isArray(a)){b=a[1];a=a[0]}a={left:a,top:b};d.offset(this.container,a);this.shim&&this.shim.setOffset(a)},align:function(a,b,f){var h=this.config.align;a=a||h.node;a=a==="trigger"?this.trigger:c.get(a);b=b||h.points;f=f===i?h.offset:f;h=d.offset(this.container);
a=this._getAlignOffset(a,b[0]);b=this._getAlignOffset(this.container,b[1]);b=[b.left-a.left,b.top-a.top];this.move(h.left-b[0]+ +f[0],h.top-b[1]+ +f[1])},_getAlignOffset:function(a,b){var f=b.charAt(0);b=b.charAt(1);var h,n,o;if(a){h=d.offset(a);n=a.offsetWidth;a=a.offsetHeight}else{h={left:d.scrollLeft(),top:d.scrollTop()};n=d.viewportWidth();a=d.viewportHeight()}o=h.left;h=h.top;if(f==="c")h+=a/2;else if(f==="b")h+=a;if(b==="c")o+=n/2;else if(b==="r")o+=n;return{left:o,top:h}},center:function(){this.move((d.viewportWidth()-
d.width(this.container))/2+d.scrollLeft(),(d.viewportHeight()-d.height(this.container))/2+d.scrollTop())},_bindUI:function(){l.on(e,"keydown",this._esc,this)},_unbindUI:function(){l.remove(e,"keydown",this._esc,this)},_esc:function(a){a.keyCode===27&&this.hide()},setBody:function(a){c.isString(a)&&d.html(this.body,a)}});c.Overlay=k});
KISSY.add("popup",function(c){function i(e,d){if(!(this instanceof i))return new i(e,d);d=d||{};if(c.isPlainObject(e))d=e;else d.container=e;d.align=c.merge(c.clone(k.align),d.align);i.superclass.constructor.call(this,c.merge(k,d))}var k={triggerType:"mouse",align:{node:"trigger",points:["cr","ct"],offset:[10,0]}};c.extend(i,c.Overlay);c.Popup=i},{host:"overlay"});
