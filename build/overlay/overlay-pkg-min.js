/*
Copyright 2011, KISSY UI Library v1.20dev
MIT Licensed
build time: ${build.time}
*/
KISSY.add("overlay/overlayrender",function(d,c,e,g,a){function b(h){return d.require("uibase/"+h)}return e.create(g.Render,[b("contentboxrender"),b("positionrender"),b("loadingrender"),c.ie==6?b("shimrender"):null,b("maskrender"),a],{renderUI:function(){this.get("el").addClass(this.get("prefixCls")+"overlay")}},{ATTRS:{prefixCls:{value:"ks-"},elOrder:0}})},{requires:["ua","uibase","component","./ariarender"]});
KISSY.add("overlay/ariarender",function(d){function c(){}function e(a){var b=a.keyCode,h=this.get("el");if(b==g){b=a.target;for(var j=h.all("*"),f=[],k=0;k<j.length;k++){var i=d.one(j[k]),l=false;if(-1!=i[0].tabIndex){if(i[0].nodeName.toLowerCase()=="a")l=true;else if(i[0].nodeName.toLowerCase()=="input"&&!i[0].disabled)l=true;else if(i.hasAttr("tabindex")&&i[0].tabIndex==0)l=true;if(l){l=i[0].tabIndex||0;for(var m=0;m<f.length;m++)if((f[m][0].tabIndex||0)>l){f.splice(m,0,i);break}m==f.length&&f.push(i)}}}j=
f[0];f=f[f.length-1];k=j==f;if(b[0]==j[0]&&a.shiftKey){k||f[0].focus();a.halt()}else if(b[0]==f[0]&&!a.shiftKey){k||j[0].focus();a.halt()}else if(b[0]==h[0]||h.contains(b))return;a.halt()}}var g=9;c.prototype={__renderUI:function(){var a=this.get("el");a.attr("role","dialog");a.attr("tabindex",0)},__bindUI:function(){var a=this;if(a.get("aria")){var b=a.get("el"),h;a.on("afterVisibleChange",function(j){if(j.newVal){h=document.activeElement;b[0].focus();b.on("keydown",e,a)}else{b.detach("keydown",
e,a);h&&h.focus()}})}}};return c});KISSY.add("overlay/aria",function(){function d(){}d.ATTRS={aria:{view:true}};return d});KISSY.add("overlay/overlay",function(d,c,e,g,a){function b(h){return d.require("uibase/"+h)}c=c.create(e.ModelControl,[b("contentbox"),b("position"),b("loading"),b("align"),b("resize"),b("mask"),a]);c.DefaultRender=g;return c},{requires:["uibase","component","./overlayrender","./aria"]});
KISSY.add("overlay/dialogrender",function(d,c,e){return c.create(e,[d.require("uibase/stdmodrender"),d.require("uibase/closerender")])},{requires:["uibase","./overlayrender"]});
KISSY.add("overlay/dialog",function(d,c,e,g){function a(b){return d.require("uibase/"+b)}c=e.create(c,[a("stdmod"),a("close"),a("drag"),a("constrain")],{renderUI:function(){this.get("view").get("el").addClass(this.get("view").get("prefixCls")+"dialog");this.set("handlers",[this.get("view").get("header")])}});c.DefaultRender=g;return c},{requires:["overlay/overlay","uibase","overlay/dialogrender"]});
KISSY.add("overlay",function(d,c,e,g,a){c.Render=e;g.Render=a;c.Dialog=g;d.Overlay=c;d.Dialog=g;return c},{requires:["overlay/overlay","overlay/overlayrender","overlay/dialog","overlay/dialogrender"]});
