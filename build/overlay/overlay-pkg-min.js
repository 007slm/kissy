/*
Copyright 2010, KISSY UI Library v1.1.3
MIT Licensed
build time: Sep 13 10:15
*/
KISSY.add("mask",function(d,h){function i(a){if(!(this instanceof i))return new i(a);a=d.merge(k,a);var b=a.shim,f=e.create("<iframe>");e.attr(f,"style",b?m:l+a.style);var g;if(b)a.opacity=0;else{e.height(f,e.docHeight());j&&e.width(f,e.docWidth());if(c){g=e.create("<div>");e.attr(g,"style",l+a.style);e.height(g,e.docHeight());j&&e.width(g,e.docWidth())}}e.css(f,"opacity",a.opacity);document.body.appendChild(f);if(g){e.css(g,"opacity",a.opacity);document.body.appendChild(g);this.div=g}this.config=
a;this.iframe=f}var e=d.DOM,c=d.UA.ie,j=c===6,l="position:absolute;left:0;top:0;width:100%;border:0;background:black;z-index:9998;display:none;",m="position:absolute;z-index:9997;border:0;display:none;",k={shim:false,opacity:0.6,style:""};d.augment(i,{show:function(){e.css(this.iframe,"display","block");c&&e.css(this.div,"display","block")},hide:function(){e.css(this.iframe,"display","none");c&&e.css(this.div,"display","none")},toggle:function(){this[e.css(this.iframe,"display")!=="none"?"hide":"show"]()},
setSize:function(a,b){e.width(this.iframe,a);e.height(this.iframe,b);if(c){e.width(this.div,a);e.height(this.div,b)}},setOffset:function(a,b){var f=a;if(b!==h)f={left:a,top:b};e.offset(this.iframe,f);c&&e.offset(this.div,f)}});d.Mask=i});
KISSY.add("overlay",function(d,h){function i(a,b){b=b||{};if(d.isPlainObject(a))b=a;else b.container=a;this.container=d.get(b.container);this.trigger=d.get(b.trigger);b.align=d.merge(d.clone(m.align),b.align);this.config=d.merge(m,b);this._init()}var e=document,c=d.DOM,j=d.Event,l={TL:"tl",TC:"tc",TR:"tr",LC:"cl",CC:"cc",RC:"cr",BL:"bl",BC:"bc",BR:"br"},m={container:null,containerCls:"ks-overlay",bdCls:"ks-overlay-bd",trigger:null,triggerType:"click",width:0,height:0,zIndex:9999,xy:null,align:{node:null,
points:[l.CC,l.CC],offset:[0,0]},mask:false,shim:d.UA.ie===6},k;d.augment(i,d.EventTarget,{_init:function(){this.trigger&&this._bindTrigger()},_bindTrigger:function(){this.config.triggerType==="mouse"?this._bindTriggerMouse():this._bindTriggerClick()},_bindTriggerMouse:function(){var a=this,b=a.trigger,f;j.on(b,"mouseenter",function(){f=d.later(function(){a.show();f=h},100)});j.on(b,"mouseleave",function(){if(f){f.cancel();f=h}a.hide()})},_bindTriggerClick:function(){var a=this;j.on(a.trigger,"click",
function(){a.show()})},show:function(){this._firstShow()},_firstShow:function(){this._prepareMarkup();this._realShow();this._firstShow=this._realShow},_realShow:function(){this._setPosition();this._toggle(false)},_toggle:function(a){c.css(this.container,"visibility",a?"hidden":"");this.shim&&this.shim.toggle();if(this.config.mask)k[a?"hide":"show"]();this[a?"_unbindUI":"_bindUI"]();this.fire(a?"hide":"show")},hide:function(){this._toggle(true)},_prepareMarkup:function(){var a=this.config,b=this.container;
if(a.mask&&!k)k=new d.Mask;if(a.shim)this.shim=new d.Mask({shim:true});if(b){this.body=d.get("."+a.bdCls,b)||b;b.style.cssText+="position:absolute;visibility:hidden"}else{b=this.container=c.create(d.substitute('<div class="{containerCls}" style="position:absolute;visibility:hidden"><div class="{bdCls}">{content}</div></div>',a));this.body=c.children(b)[0];e.body.appendChild(b)}c.css(b,"zIndex",a.zIndex);c.css(b,"display","block");this.setBody(a.content);this._setSize()},_setSize:function(a,b){var f=
this.config;a=a||f.width;b=b||f.height;a&&c.width(this.container,a);b&&c.height(this.container,b);this.shim&&this.shim.setSize(a,b)},_setPosition:function(){var a=this.config.xy;a?this.move(a):this.align()},move:function(a,b){if(d.isArray(a)){b=a[1];a=a[0]}a={left:a,top:b};c.offset(this.container,a);this.shim&&this.shim.setOffset(a)},align:function(a,b,f){var g=this.config.align;a=a||g.node;a=a==="trigger"?this.trigger:d.get(a);b=b||g.points;f=f===h?g.offset:f;g=c.offset(this.container);a=this._getAlignOffset(a,
b[0]);b=this._getAlignOffset(this.container,b[1]);b=[b.left-a.left,b.top-a.top];this.move(g.left-b[0]+ +f[0],g.top-b[1]+ +f[1])},_getAlignOffset:function(a,b){var f=b.charAt(0);b=b.charAt(1);var g,n,o;if(a){g=c.offset(a);n=a.offsetWidth;a=a.offsetHeight}else{g={left:c.scrollLeft(),top:c.scrollTop()};n=c.viewportWidth();a=c.viewportHeight()}o=g.left;g=g.top;if(f==="c")g+=a/2;else if(f==="b")g+=a;if(b==="c")o+=n/2;else if(b==="r")o+=n;return{left:o,top:g}},center:function(){this.move((c.viewportWidth()-
c.width(this.container))/2+c.scrollLeft(),(c.viewportHeight()-c.height(this.container))/2+c.scrollTop())},_bindUI:function(){j.on(e,"keydown",this._esc,this)},_unbindUI:function(){j.remove(e,"keydown",this._esc,this)},_esc:function(a){a.keyCode===27&&this.hide()},setBody:function(a){d.isString(a)&&c.html(this.body,a)}});d.Overlay=i});
KISSY.add("popup",function(d){function h(e,c){if(!(this instanceof h))return new h(e,c);c=c||{};if(d.isPlainObject(e))c=e;else c.container=e;c.align=d.merge(d.clone(i.align),c.align);h.superclass.constructor.call(this,d.merge(i,c))}var i={triggerType:"mouse",align:{node:"trigger",points:["cr","ct"],offset:[10,0]}};d.extend(h,d.Overlay);d.Popup=h},{host:"overlay"});
