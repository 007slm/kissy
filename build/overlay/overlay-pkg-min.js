/*
Copyright 2011, KISSY UI Library v1.1.8dev
MIT Licensed
build time: ${build.time}
*/
KISSY.add("overlay",function(b){b.Overlay=b.UIBase.create([b.UIBase.Box,b.UIBase.ContentBox,b.UIBase.Position,b.UIBase.Loading,b.UA.ie==6?b.UIBase.Shim:null,b.UIBase.Align,b.UIBase.Mask,b.__OverlayEffect],{initializer:function(){},renderUI:function(){this.get("el").addClass("ks-overlay")},syncUI:function(){},bindUI:function(){},destructor:function(){}},{ATTRS:{elOrder:0}})},{requires:["uibase"]});
KISSY.add("dialog",function(b){b.Dialog=b.UIBase.create(b.Overlay,[b.UIBase.StdMod,b.UIBase.Close,b.UIBase.Drag,b.UIBase.Constrain],{initializer:function(){},renderUI:function(){this.get("el").addClass("ks-dialog");this.set("handlers",[this.get("header")])},bindUI:function(){},syncUI:function(){},destructor:function(){}})},{host:"overlay"});
KISSY.add("overlay/popup",function(b,f){function e(a,c){if(b.isUndefined(c))c=a;else c.srcNode=a;e.superclass.constructor.call(this,c)}e.ATTRS={trigger:null,triggerType:{value:"click"}};b.extend(e,b.Overlay,{initializer:function(){var a=this;a.trigger=b.one(a.get("trigger"));if(a.trigger)if(a.get("triggerType")==="mouse"){a._bindTriggerMouse();a.on("bindUI",function(){a._bindContainerMouse()})}else a._bindTriggerClick()},_bindTriggerMouse:function(){var a=this,c=a.trigger,d;a.__mouseEnterPopup=function(){a._clearHiddenTimer();
d=b.later(function(){a.show();d=f},100)};c.on("mouseenter",a.__mouseEnterPopup);a._mouseLeavePopup=function(){if(d){d.cancel();d=f}a._setHiddenTimer()};c.on("mouseleave",a._mouseLeavePopup)},_bindContainerMouse:function(){this.get("el").on("mouseleave",this._setHiddenTimer,this).on("mouseenter",this._clearHiddenTimer,this)},_setHiddenTimer:function(){var a=this;a._hiddenTimer=b.later(function(){a.hide()},120)},_clearHiddenTimer:function(){if(this._hiddenTimer){this._hiddenTimer.cancel();this._hiddenTimer=
f}},_bindTriggerClick:function(){var a=this;a.__clickPopup=function(c){c.halt();a.show()};a.trigger.on("click",a.__clickPopup)},destructor:function(){if(this.trigger){var a=this.trigger;this.__clickPopup&&a.detach("click",this.__clickPopup);this.__mouseEnterPopup&&a.detach("mouseenter",this.__mouseEnterPopup);this._mouseLeavePopup&&a.detach("mouseleave",this._mouseLeavePopup)}this.get("el")&&this.get("el").detach("mouseleave",this._setHiddenTimer,this).detach("mouseenter",this._clearHiddenTimer,this)}});
b.Popup=e},{host:"overlay"});
