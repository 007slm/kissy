/*
Copyright 2010, KISSY UI Library v1.1.3
MIT Licensed
build time: Sep 9 09:32
*/
KISSY.add("mask",function(c,i){function j(e){if(!(this instanceof j))return new j(e);e=c.merge(d,e);f.addStyleSheet(".ks-mask{position:absolute;left:0;top:0;width:100%;border:0;background:black;z-index:9998;display:none}.ks-shim{position:absolute;z-index:9997;border:0;display:none}","ks-mask-style");var k=e.shim,l=f.create("<iframe>",{"class":k?"ks-shim":"ks-mask "+e.extraCls});if(k)e.opacity=0;else f.height(l,f.docHeight());f.css(l,"opacity",e.opacity);document.body.appendChild(l);this.config=e;
this.iframe=l}var f=c.DOM,d={shim:false,opacity:0.6,extraCls:""};c.augment(j,{show:function(){f.css(this.iframe,"display","block")},hide:function(){f.css(this.iframe,"display","none")},toggle:function(){this[f.css(this.iframe,"display")!=="none"?"hide":"show"]()},setSize:function(e,k){f.width(this.iframe,e);f.height(this.iframe,k)},setOffset:function(e,k){var l=e;if(k!==i)l={left:e,top:k};f.offset(this.iframe,l)}});c.Mask=j});
KISSY.add("overlay",function(c,i){function j(a,b){b=b||{};if(c.isPlainObject(a))b=a;else b.container=a;this.container=c.get(b.container);this.trigger=c.get(b.trigger);b.align=c.merge(c.clone(l.align),b.align);this.config=c.merge(l,b);this._init()}var f=document,d=c.DOM,e=c.Event,k={TL:"tl",TC:"tc",TR:"tr",LC:"cl",CC:"cc",RC:"cr",BL:"bl",BC:"bc",BR:"br"},l={container:null,containerCls:"ks-overlay",bdCls:"ks-overlay-bd",trigger:null,triggerType:"click",width:0,height:0,zIndex:9999,xy:null,align:{node:null,
points:[k.CC,k.CC],offset:[0,0]},mask:false,shim:c.UA.ie===6},o;c.augment(j,c.EventTarget,{_init:function(){this.trigger&&this._bindTrigger()},_bindTrigger:function(){this.config.triggerType==="mouse"?this._bindTriggerMouse():this._bindTriggerClick()},_bindTriggerMouse:function(){var a=this,b=a.trigger,g;e.on(b,"mouseenter",function(){g=c.later(function(){a.show();g=i},100)});e.on(b,"mouseleave",function(){if(g){g.cancel();g=i}a.hide()})},_bindTriggerClick:function(){var a=this;e.on(a.trigger,"click",
function(){a.show()})},show:function(){this._firstShow()},_firstShow:function(){this._prepareMarkup();this._realShow();this._firstShow=this._realShow},_realShow:function(){this._toggle(false)},_toggle:function(a){d.css(this.container,"visibility",a?"hidden":"");this.shim&&this.shim.toggle();if(this.config.mask)o[a?"hide":"show"]();this[a?"_unbindUI":"_bindUI"]();this.fire(a?"hide":"show")},hide:function(){this._toggle(true)},_prepareMarkup:function(){var a=this.config,b=this.container;if(a.mask&&
!o)o=new c.Mask;if(a.shim)this.shim=new c.Mask({shim:true});if(b){this.body=c.get("."+a.bdCls,b)||b;b.style.cssText+="position:absolute;visibility:hidden"}else{b=this.container=d.create(c.substitute('<div class="{containerCls}" style="position:absolute;visibility:hidden"><div class="{bdCls}">{bdContent}</div></div>',a));this.body=d.children(b)[0];f.body.appendChild(b)}d.css(b,"zIndex",a.zIndex);d.css(b,"display","");this.setBody(a.content);this._setSize();this._setPosition()},_setSize:function(a,
b){var g=this.config;a=a||g.width;b=b||g.height;a&&d.width(this.container,a);b&&d.height(this.container,b);this.shim&&this.shim.setSize(a,b)},_setPosition:function(){var a=this.config.xy;a?this.move(a):this.align()},move:function(a,b){if(c.isArray(a)){b=a[1];a=a[0]}a={left:a,top:b};d.offset(this.container,a);this.shim&&this.shim.setOffset(a)},align:function(a,b,g){var h=this.config.align;a=a||h.node;a=a==="trigger"?this.trigger:c.get(a);b=b||h.points;g=g===i?h.offset:g;h=d.offset(this.container);
a=this._getAlignOffset(a,b[0]);b=this._getAlignOffset(this.container,b[1]);b=[b.left-a.left,b.top-a.top];this.move(h.left-b[0]+ +g[0],h.top-b[1]+ +g[1])},_getAlignOffset:function(a,b){var g=b.charAt(0);b=b.charAt(1);var h,m,n;if(a){h=d.offset(a);m=a.offsetWidth;a=a.offsetHeight}else{h={left:d.scrollLeft(),top:d.scrollTop()};m=d.viewportWidth();a=d.viewportHeight()}n=h.left;h=h.top;if(g==="c")h+=a/2;else if(g==="b")h+=a;if(b==="c")n+=m/2;else if(b==="r")n+=m;return{left:n,top:h}},center:function(){this.move((d.viewportWidth()-
d.width(this.container))/2+d.scrollLeft(),(d.viewportHeight()-d.height(this.container))/2+d.scrollTop())},_bindUI:function(){e.on(f,"keydown",this._esc,this)},_unbindUI:function(){e.remove(f,"keydown",this._esc,this)},_esc:function(a){a.keyCode===27&&this.hide()},setBody:function(a){c.isString(a)&&d.html(this.body,a)}});c.Overlay=j});
KISSY.add("popup",function(c){function i(f,d){if(!(this instanceof i))return new i(f,d);d.align=c.merge(c.clone(j.align),d.align);i.superclass.constructor.call(this,f,c.merge(j,d))}var j={triggerType:"mouse",align:{node:"trigger",points:["cr","ct"],offset:[10,0]}};c.extend(i,c.Overlay);c.Popup=i},{host:"overlay"});
