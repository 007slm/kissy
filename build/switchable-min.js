/*
Copyright 2012, KISSY UI Library v1.30dev
MIT Licensed
build time: May 2 10:13
*/
KISSY.add("switchable/accordion/aria",function(e,c,f,g,b){function i(a){var d;e.each(this.triggers,function(h){if(h==a||c.contains(h,a))d=h});return d}function k(a){var d;e.each(this.panels,function(h){if(h==a||c.contains(h,a))d=h});return d}function j(a){var d=i.call(this,a);d||(a=k.call(this,a),d=this.triggers[e.indexOf(a,this.panels)]);return d}function r(a){switch(a.keyCode){case t:case n:a.ctrlKey&&!a.altKey&&!a.shiftKey&&a.halt();break;case D:a.ctrlKey&&!a.altKey&&a.halt()}}function a(a){var c=
a.target,s=this.triggers,b=!a.ctrlKey&&!a.shiftKey&&!a.altKey,g=a.ctrlKey&&!a.shiftKey&&!a.altKey;switch(a.keyCode){case w:case x:if((c=i.call(this,c))&&b)this.switchTo(e.indexOf(c,this.triggers)),a.halt();break;case u:case p:if(c=i.call(this,c))h.call(this,c),a.halt();break;case y:case q:if(c=i.call(this,c))m.call(this,c),a.halt();break;case n:g&&(a.halt(),c=j.call(this,c),m.call(this,c));break;case t:g&&(a.halt(),c=j.call(this,c),h.call(this,c));break;case l:b&&(j.call(this,c),d.call(this,0,!0),
a.halt());break;case o:b&&(j.call(this,c),d.call(this,s.length-1,!0),a.halt());break;case D:a.ctrlKey&&!a.altKey&&(a.halt(),c=j.call(this,c),a.shiftKey?h.call(this,c):m.call(this,c))}}function d(a,d){var h=this.triggers,q=h[a];e.each(h,function(a){a!==q&&(v(a,"-1"),c.removeClass(a,"ks-switchable-select"),a.setAttribute("aria-selected","false"))});d&&q.focus();v(q,"0");c.addClass(q,"ks-switchable-select");q.setAttribute("aria-selected","true")}function h(a){var c=this.triggers,a=e.indexOf(a,c);d.call(this,
0==a?c.length-1:a-1,!0)}function m(a){var c=this.triggers,a=e.indexOf(a,c);d.call(this,a==c.length-1?0:a+1,!0)}function s(a){var c=!(!a.originalEvent.target&&!a.originalEvent.srcElement),a=a.currentIndex,h=this.panels,q=this.triggers,m=q[a],j=h[a];this.config.multiple||(e.each(h,function(a){a!==j&&a.setAttribute("aria-hidden","true")}),e.each(q,function(a){a!==m&&a.setAttribute("aria-hidden","true")}));h=j.getAttribute("aria-hidden");j.setAttribute("aria-hidden","false"==h?"true":"false");m.setAttribute("aria-expanded",
"false"==h?"false":"true");d.call(this,a,c)}var t=33,n=34,o=35,l=36,u=37,p=38,y=39,q=40,D=9,x=32,w=13;e.mix(b.Config,{aria:!0});b.Plugins.push({name:"aria",init:function(d){if(d.config.aria){var h=d.container,q=d.activeIndex;c.attr(h,"aria-multiselectable",d.config.multiple?"true":"false");d.nav&&c.attr(d.nav,"role","tablist");var m=d.triggers,j=d.panels,b=0;e.each(j,function(a){a.id||(a.id=e.guid("ks-accordion-tab-panel"))});e.each(m,function(a){a.id||(a.id=e.guid("ks-accordion-tab"))});e.each(m,
function(a){a.setAttribute("role","tab");a.setAttribute("aria-expanded",q==b?"true":"false");a.setAttribute("aria-selected",q==b?"true":"false");a.setAttribute("aria-controls",j[b].id);v(a,q==b?"0":"-1");b++});b=0;e.each(j,function(a){var d=m[b];a.setAttribute("role","tabpanel");a.setAttribute("aria-hidden",q==b?"false":"true");a.setAttribute("aria-labelledby",d.id);b++});d.on("switch",s,d);f.on(h,"keydown",a,d);f.on(h,"keypress",r,d)}}});var v=g.setTabIndex},{requires:["dom","event","../aria","./base"]});
KISSY.add("switchable/accordion/base",function(e,c,f){function g(c,e){if(!(this instanceof g))return new g(c,e);g.superclass.constructor.apply(this,arguments)}e.extend(g,f,{_switchTrigger:function(b,e){var f=this.config;f.multiple?c.toggleClass(e,f.activeTriggerCls):g.superclass._switchTrigger.apply(this,arguments)},_triggerIsValid:function(c){return this.config.multiple||g.superclass._triggerIsValid.call(this,c)},_switchView:function(b,e,f,j,r,a,d){var h=e[0];this.config.multiple?(c.toggle(h),this._fireOnSwitch(f,
j,a),d&&d.call(this)):g.superclass._switchView.apply(this,arguments)}});g.Plugins=[];g.Config={markupType:1,triggerType:"click",multiple:!1};return g},{requires:["dom","../base"]});
KISSY.add("switchable/aria",function(e,c,f,g){function b(){this.stop&&this.stop()}function i(){this.start&&this.start()}g.Plugins.push({name:"aria",init:function(c){if(c.config.aria){var e=c.container;f.on(e,"focusin",b,c);f.on(e,"focusout",i,c)}}});var k=["a","input","button","object"];return{setTabIndex:function(j,b){j.tabIndex=b;e.each(c.query("*",j),function(a){var d=a.nodeName.toLowerCase();e.inArray(d,k)&&(c.hasAttr(a,"oriTabIndex")||c.attr(a,"oriTabIndex",a.tabIndex),a.tabIndex=-1!=b?c.attr(a,
"oriTabIndex"):b)})}}},{requires:["dom","event","./base"]});
KISSY.add("switchable/autoplay",function(e,c,f,g,b){var i=e.Env.host,k=function(b){var e=c.scrollTop(),a=c.viewportHeight(),d=c.offset(b),b=c.height(b);return d.top>e&&d.top+b<e+a};e.mix(g.Config,{pauseOnScroll:!1,autoplay:!1,interval:5,pauseOnHover:!0});g.Plugins.push({name:"autoplay",init:function(c){function g(){h=e.later(function(){c.paused||c.next()},d,!0)}var a=c.config,d=1E3*a.interval,h;if(a.autoplay&&(a.pauseOnScroll&&(c.__scrollDetect=e.buffer(function(){c[k(c.container)?"start":"stop"]()},
200),f.on(i,"scroll",c.__scrollDetect)),g(),c.stop=function(){if(h){h.cancel();h=b}c.paused=true},c.start=function(){if(h){h.cancel();h=b}c.paused=false;g()},a.pauseOnHover))f.on(c.container,"mouseenter",c.stop,c),f.on(c.container,"mouseleave",c.start,c)},destroy:function(c){c.__scrollDetect&&f.remove(i,"scroll",c.__scrollDetect)}});return g},{requires:["dom","event","./base"]});
KISSY.add("switchable/autorender",function(e,c,f,g){g.autoRender=function(b,i){e.each(c.query("."+(b||"KS_Widget"),i),function(c){var b=c.getAttribute("data-widget-type"),e;if(b&&-1<"Switchable Tabs Slide Carousel Accordion".indexOf(b))try{(e=c.getAttribute("data-widget-config"))&&(e=e.replace(/'/g,'"')),new ("Switchable"==b?g:g[b])(c,f.parse(e))}catch(a){}})}},{requires:["dom","json","./base"]});
KISSY.add("switchable/base",function(e,c,f,g){function b(a,d){d=d||{};"markupType"in d||(d.panelCls?d.markupType=1:d.panels&&(d.markupType=2));for(var h=this.constructor;h;)d=e.merge(h.Config,d),h=h.superclass?h.superclass.constructor:null;this.container=c.get(a);this.config=d;this.activeIndex=d.activeIndex;!(-1<this.activeIndex)&&"number"!=typeof d.switchTo&&(this.activeIndex=0);this._init();this._initPlugins();this.fire(j);-1<this.activeIndex||"number"==typeof d.switchTo&&this.switchTo(d.switchTo)}
function i(a){var d={};d.type=a.originalEvent.type;d.target=a.originalEvent.target||a.originalEvent.srcElement;return{originalEvent:d}}var k=e.makeArray,f=f.Target,j="init",r="removed";b.getDomEvent=i;b.Config={markupType:0,navCls:"ks-switchable-nav",contentCls:"ks-switchable-content",triggerCls:"ks-switchable-trigger",panelCls:"ks-switchable-panel",triggers:[],panels:[],hasTriggers:!0,triggerType:"mouse",delay:0.1,activeIndex:-1,activeTriggerCls:"ks-active",steps:1,viewSize:[]};b.Plugins=[];e.augment(b,
f,{_initPlugins:function(){for(var a=this,d=a.constructor;d;)e.each(d.Plugins,function(d){d.init&&d.init(a)}),d=d.superclass?d.superclass.constructor:null},_init:function(){var a=this.config;this._parseMarkup();a.hasTriggers&&this._bindTriggers();this._bindPanels()},_parseMarkup:function(){var a=this.container,d=this.config,h,b,e=[],g=[];switch(d.markupType){case 0:(h=c.get("."+d.navCls,a))&&(e=c.children(h));b=c.get("."+d.contentCls,a);g=c.children(b);break;case 1:e=c.query("."+d.triggerCls,a);g=
c.query("."+d.panelCls,a);break;case 2:e=d.triggers,g=d.panels}this.length=Math.ceil(g.length/d.steps);this.nav=h||d.hasTriggers&&e[0]&&e[0].parentNode;if(d.hasTriggers&&(!this.nav||0==e.length))e=this._generateTriggersMarkup(this.length);this.triggers=k(e);this.panels=k(g);this.content=b||g[0].parentNode},_generateTriggersMarkup:function(a){var d=this.config,h=this.nav||c.create("<ul>"),b,e;h.className=d.navCls;for(e=0;e<a;e++)b=c.create("<li>"),e===this.activeIndex&&(b.className=d.activeTriggerCls),
b.innerHTML=e+1,h.appendChild(b);this.container.appendChild(h);this.nav=h;return c.children(h)},_bindTriggers:function(){var a=this,d=a.config,c=e.one(a.nav);e.each(a.triggers,function(d){a._initTrigger(d)});c.delegate("click",".ks-switchable-trigger-internal",function(d){var c=a._getTriggerIndex(d.currentTarget);a._onFocusTrigger(c,d)});"mouse"===d.triggerType&&c.delegate("mouseenter",".ks-switchable-trigger-internal",function(d){var c=a._getTriggerIndex(d.currentTarget);a._onMouseEnterTrigger(c,
d)}).delegate("mouseleave",".ks-switchable-trigger-internal",function(){a._onMouseLeaveTrigger()})},_initTrigger:function(a){c.addClass(a,"ks-switchable-trigger-internal")},_bindPanels:function(){var a=this;e.each(a.panels,function(d){a._initPanel(d)})},_initPanel:function(a){c.addClass(a,"ks-switchable-panel-internal")},_onFocusTrigger:function(a,d){this._triggerIsValid(a)&&(this._cancelSwitchTimer(),this.switchTo(a,g,i(d)))},_onMouseEnterTrigger:function(a,d){var c=this;if(c._triggerIsValid(a)){var b=
i(d);c.switchTimer=e.later(function(){c.switchTo(a,g,b)},1E3*c.config.delay)}},_onMouseLeaveTrigger:function(){this._cancelSwitchTimer()},_triggerIsValid:function(a){return this.activeIndex!==a},_cancelSwitchTimer:function(){this.switchTimer&&(this.switchTimer.cancel(),this.switchTimer=g)},_getTriggerIndex:function(a){return e.indexOf(a,this.triggers)},_resetLength:function(){this.length=this._getLength()},_getLength:function(a){var d=this.config;a===g&&(a=this.panels.length);return Math.ceil(a/d.steps)},
_afterAdd:function(a,d){this._resetLength();var c=this._getLength(a+1)-1;1==this.config.steps&&this.activeIndex>=c&&(this.activeIndex+=1);var b=this.activeIndex;this.activeIndex=-1;this.switchTo(b);d&&this.switchTo(c)},add:function(a){var d=this.nav,b=this.content,e=a.trigger,g=a.panel,f=a.activated,n=this.panels.length,a=null!=a.index?a.index:n,j=this.triggers,l=this.panels,i=this.length,p=null,p=null,a=Math.max(0,Math.min(a,n)),n=l[a];l.splice(a,0,g);n?c.insertBefore(g,n):c.append(g,b);1==this.config.steps?
((p=j[a])?c.insertBefore(e,p):c.append(e,d),j.splice(a,0,e)):(p=this._getLength(),p!=i&&(c.append(e,d),j.push(e)));this._initPanel(g);this._initTrigger(e);this.fire("added",{index:a,trigger:e,panel:g});this._afterAdd(a,f)},remove:function(a){function d(){i&&(c.remove(i),f.splice(a,1));l&&(c.remove(l),1==m?b.triggers.splice(a,1):b.triggers.splice(j-1,1));b._resetLength();b.fire(r,{index:a,trigger:l,panel:i})}var b=this,m=b.config.steps,j=b.length,f=b.panels,n=b._getLength(f.length-1),o=b.triggers,
l=null,i=null,a=e.isNumber(a)?Math.max(0,Math.min(a,f.length-1)):e.indexOf(a,f),l=1==m?o[a]:n!==j?o[j-1]:null,i=f[a];!1!==b.fire("beforeRemove",{index:a,panel:i,trigger:l})&&(0==n?d():(o=b.activeIndex,1!=m?o>=n?b.switchTo(n-1,g,g,d):(d(),b.activeIndex=-1,b.switchTo(o)):b.switchTo(0<o?o-1:o+1,g,g,d)))},switchTo:function(a,c,b,e){var f=this,j=f.config,n=f.triggers,i=f.panels,l=f.activeIndex,r=j.steps,p=l*r,k=a*r;if(!f._triggerIsValid(a)||!1===f.fire("beforeSwitch",{fromIndex:l,toIndex:a}))return f;
j.hasTriggers&&f._switchTrigger(-1<l?n[l]:null,n[a]);c===g&&(c=a>l?"forward":"backward");f.activeIndex=a;f._switchView(-1<l?i.slice(p,p+r):null,i.slice(k,k+r),l,a,c,b,function(){e&&e.call(f,a)});return f},_switchTrigger:function(a,d){var b=this.config.activeTriggerCls;a&&c.removeClass(a,b);c.addClass(d,b)},_switchView:function(a,d,b,e,f,g,j){var i=this;a&&c.css(a,"display","none");c.css(d,"display","block");setTimeout(function(){i._fireOnSwitch(b,e,g)},0);j&&j.call(this)},_fireOnSwitch:function(a,
c,b){this.fire("switch",e.mix(b||{},{fromIndex:a,currentIndex:c}))},prev:function(a){var c=this.activeIndex;this.switchTo(0<c?c-1:this.length-1,"backward",a)},next:function(a){var c=this.activeIndex;this.switchTo(c<this.length-1?c+1:0,"forward",a)},destroy:function(){for(var a=this,d=a.constructor;d;)e.each(d.Plugins,function(c){c.destroy&&c.destroy(a)}),d=d.superclass?d.superclass.constructor:null;c.remove(a.container);a.nav=null;a.content=null;a.container=null;a.triggers=[];a.panels=[];a.detach()}});
return b},{requires:["dom","event"]});
KISSY.add("switchable/carousel/aria",function(e,c,f,g,b){function i(a){var c=a.currentIndex,d=this.activeIndex,b=this.panels,h=b[c*this.config.steps],f=this.triggers,c=f[c];if((a=!(!a.originalEvent.target&&!a.originalEvent.srcElement))||-1==d)e.each(f,function(a){l(a,-1)}),e.each(b,function(a){l(a,-1)}),c&&l(c,0),l(h,0),a&&h.focus()}function k(a){var d=null;e.each(this.triggers,function(b){if(b==a||c.contains(b,a))return d=b,!1});return d}function j(a){var d=a.target;switch(a.keyCode){case t:case s:if(d=
k.call(this,d)){var b=c.next(d),f=this.triggers;b||(b=f[0]);l(d,-1);b&&(l(b,0),b.focus());a.halt()}break;case m:case h:if(d=k.call(this,d))b=c.prev(d),f=this.triggers,b||(b=f[f.length-1]),l(d,-1),b&&(l(b,0),b.focus()),a.halt();break;case o:case n:if(d=k.call(this,d))this.switchTo(e.indexOf(d,this.triggers),void 0,u),a.halt()}}function r(a){var d=null;e.each(this.panels,function(b){if(b==a||c.contains(b,a))return d=b,!1});return d}function a(a,c){var d=e.indexOf(a,this.panels),b=this.config.steps,
f=Math.floor(d/b);return f==this.activeIndex?1:0==d%b||d%b==b-1?(this.switchTo(f,c,u),0):1}function d(d){var b=d.target;switch(d.keyCode){case t:case s:if(b=r.call(this,b)){var e=c.next(b),f=this.panels;e||(e=f[0]);l(b,-1);l(e,0);a.call(this,e,p)&&e.focus();d.halt()}break;case m:case h:if(b=r.call(this,b))e=c.prev(b),f=this.panels,e||(e=f[f.length-1]),l(b,-1),l(e,0),a.call(this,e,y)&&e.focus(),d.halt();break;case o:case n:if(b=r.call(this,b))this.fire("itemSelected",{item:b}),d.halt()}}var h=37,m=
38,s=39,t=40,n=32,o=13,l=g.setTabIndex,u={originalEvent:{target:1}},p="forward",y="backward";e.mix(b.Config,{aria:!1});b.Plugins.push({name:"aria",init:function(a){if(a.config.aria){var c=a.triggers,b=a.panels,h=a.content,g=a.activeIndex;h.id||(h.id=e.guid("ks-switchbale-content"));h.setAttribute("role","listbox");var p=0;e.each(c,function(a){l(a,g==p?"0":"-1");a.setAttribute("role","button");a.setAttribute("aria-controls",h.id);p++});p=0;e.each(b,function(a){l(a,"-1");a.setAttribute("role","option");
p++});a.on("switch",i,a);if(c=a.nav)f.on(c,"keydown",j,a);f.on(h,"keydown",d,a);c=a.prevBtn;b=a.nextBtn;c&&(l(c,0),c.setAttribute("role","button"),f.on(c,"keydown",function(c){if(c.keyCode==o||c.keyCode==n){a.prev(u);c.preventDefault()}}));b&&(l(b,0),b.setAttribute("role","button"),f.on(b,"keydown",function(c){if(c.keyCode==o||c.keyCode==n){a.next(u);c.preventDefault()}}))}}})},{requires:["dom","event","../aria","./base"]});
KISSY.add("switchable/carousel/base",function(e,c,f,g){function b(c,a){if(!(this instanceof b))return new b(c,a);b.superclass.constructor.apply(this,arguments)}var i="prevBtn",k="nextBtn",j={originalEvent:{target:1}};b.Config={circular:!0,prevBtnCls:"ks-switchable-prev-btn",nextBtnCls:"ks-switchable-next-btn",disableBtnCls:"ks-switchable-disable-btn"};b.Plugins=[];e.extend(b,g,{_init:function(){function g(d){c.removeClass([a[i],a[k]],h);0==d&&c.addClass(a[i],h);d==a.length-1&&c.addClass(a[k],h)}var a=
this;b.superclass._init.call(a);var d=a.config,h=d.disableBtnCls;e.each(["prev","next"],function(b){var e=a[b+"Btn"]=c.get("."+d[b+"BtnCls"],a.container);f.on(e,"mousedown",function(c){c.preventDefault();c=a.activeIndex;if("prev"==b&&(0!=c||d.circular))a[b](j);if("next"==b&&(c!=a.length-1||d.circular))a[b](j)})});d.circular||(a.on("added removed",function(){g(a.activeIndex)}),a.on("switch",function(a){g(a.currentIndex)}));f.delegate(a.content,"click",".ks-switchable-panel-internal",function(c){a.fire("itemSelected",
{item:c.currentTarget})})}});return b},{requires:["dom","event","../base"]});
KISSY.add("switchable/circular",function(e,c,f,g){function b(b,e,h,g,p,j){var q=this,e=q.config,r=q.length,x=e.scrollType===t,w=x?a:d,v=q.viewSize[x?0:1],x=-v*p,z=q.panels,B={},C,A=j===s;C=A&&0===g&&p===r-1||!A&&g===r-1&&0===p;q.anim&&(q.anim.stop(),k.call(q,z,1,w,v),k.call(q,z,0,w,v));C&&(x=i.call(q,z,A,w,v));B[w]=x+m;b?q.anim=(new f(q.content,B,e.duration,e.easing,function(){C&&k.call(q,z,A,w,v,1);q.anim=void 0;h&&h()})).run():(c.css(q.content,B),h&&h())}function i(a,b,d,e){var h=this.config.steps,
f=this.length,g=b?f-1:0,a=a.slice(g*h,(g+1)*h);c.css(a,j,r);c.css(a,d,(b?-1:1)*e*f);return b?e:-e*f}function k(a,b,d,e,f){var g=this.config.steps,q=this.length,i=b?q-1:0,a=a.slice(i*g,(i+1)*g);c.css(a,j,h);c.css(a,d,h);f&&c.css(this.content,d,b?-e*(q-1):h)}var j="position",r="relative",a="left",d="top",h="",m="px",s="backward",t="scrollx";e.mix(g.Config,{circular:!1});g.adjustPosition=i;g.resetPosition=k;g.Plugins.push({name:"circular",init:function(a){a=a.config;if(a.circular&&(a.effect===t||"scrolly"===
a.effect))a.scrollType=a.effect,a.effect=b}})},{requires:["dom","anim","./base","./effect"]});
KISSY.add("switchable/effect",function(e,c,f,g,b,i){var k;e.mix(b.Config,{effect:"none",duration:0.5,easing:"easeNone"});b.Effects={none:function(b,e,a){b&&c.css(b,"display","none");c.css(e,"display","block");a&&a()},fade:function(b,e,a){var d=this,f=d.config,m=b?b[0]:null,s=e[0];d.anim&&(d.anim.stop(),c.css(d.anim.fromEl,{zIndex:1,opacity:0}),c.css(d.anim.toEl,"zIndex",9));c.css(s,"opacity",1);m?(d.anim=(new g(m,{opacity:0},f.duration,f.easing,function(){d.anim=i;c.css(s,"z-index",9);c.css(m,"z-index",
1);a&&a()})).run(),d.anim.toEl=s,d.anim.fromEl=m):(c.css(s,"z-index",9),a&&a())},scroll:function(b,e,a,d,f){var m=this,e=m.config,d="scrollx"===e.effect,s={};s[d?"left":"top"]=-(m.viewSize[d?0:1]*f)+"px";m.anim&&m.anim.stop();b?m.anim=(new g(m.content,s,e.duration,e.easing,function(){m.anim=i;a&&a()})).run():(c.css(m.content,s),a&&a())}};k=b.Effects;k.scrollx=k.scrolly=k.scroll;b.Plugins.push({name:"effect",init:function(b){var f=b.config,a=f.effect,d=b.panels,h=b.content,g=f.steps,i=d[0],k=b.activeIndex;
if("none"!==a)switch(c.css(d,"display","block"),a){case "scrollx":case "scrolly":c.css(h,"position","absolute");"static"==c.css(h.parentNode,"position")&&c.css(h.parentNode,"position","relative");"scrollx"===a&&(c.css(d,"float","left"),c.width(h,"9999px"));b.viewSize=[f.viewSize[0]||i&&i.offsetWidth*g,f.viewSize[1]||i&&i.offsetHeight*g];break;case "fade":var n=k*g,o=n+g-1,l;e.each(d,function(a,b){l=b>=n&&b<=o;c.css(a,{opacity:l?1:0,position:"absolute",zIndex:l?9:1})})}}});e.augment(b,{_switchView:function(c,
b,a,d,f,g,i){var t=this,n=t.config.effect;(e.isFunction(n)?n:k[n]).call(t,c,b,function(){t._fireOnSwitch(a,d,g);i&&i.call(t)},a,d,f)}});return b},{requires:["dom","event","anim","./base"]});
KISSY.add("switchable/lazyload",function(e,c,f){var g="beforeSwitch",b="img",i="textarea",k={};k[b]="lazyImgAttribute";k[i]="lazyTextareaClass";e.mix(f.Config,{lazyImgAttribute:"data-ks-lazyload-custom",lazyTextareaClass:"ks-datalazyload-custom",lazyDataType:i});f.Plugins.push({name:"lazyload",init:function(f){function r(e){var k=d.steps,e=e.toIndex*k;a.loadCustomLazyData(f.panels.slice(e,e+k),h,m);a:{var n,o,l;if(e=(k=h===b)?"img":h===i?"textarea":""){e=c.query(e,f.container);n=0;for(l=e.length;n<
l;n++)if(o=e[n],k?c.attr(o,m):c.hasClass(o,m)){k=!1;break a}}k=!0}k&&f.detach(g,r)}var a=e.require("datalazyload"),d=f.config,h,m;"img-src"===d.lazyDataType&&(d.lazyDataType=b);"area-data"===d.lazyDataType&&(d.lazyDataType=i);h=d.lazyDataType;m=d[k[h]];if(a&&h&&m)f.on(g,r)}});return f},{requires:["dom","./base"]});
KISSY.add("switchable/slide/base",function(e,c){function f(c,b){if(!(this instanceof f))return new f(c,b);f.superclass.constructor.apply(this,arguments)}f.Config={autoplay:!0,circular:!0};f.Plugins=[];e.extend(f,c);return f},{requires:["../base"]});KISSY.add("switchable",function(e,c,f,g,b,i,k,j,r,a,d,h,m,s){e.mix(c,{Accordion:g,Carousel:j,Slide:m,Tabs:s,Aria:f});return c},{requires:"switchable/base,switchable/aria,switchable/accordion/base,switchable/accordion/aria,switchable/autoplay,switchable/autorender,switchable/carousel/base,switchable/carousel/aria,switchable/circular,switchable/effect,switchable/lazyload,switchable/slide/base,switchable/tabs/base,switchable/tabs/aria".split(",")});
KISSY.add("switchable/tabs/aria",function(e,c,f,g,b,i){function k(a){var b=null;e.each(this.triggers,function(d){if(d==a||c.contains(d,a))b=d});return b}function j(a){switch(a.keyCode){case d:case h:a.ctrlKey&&!a.altKey&&!a.shiftKey&&a.halt();break;case o:a.ctrlKey&&!a.altKey&&a.halt()}}function r(a){var c=a.target,b=a.ctrlKey&&!a.shiftKey&&!a.altKey;switch(a.keyCode){case m:case s:k.call(this,c)&&(this.prev(u(a)),a.halt());break;case t:case n:k.call(this,c)&&(this.next(u(a)),a.halt());break;case h:b&&
(a.halt(),this.next(u(a)));break;case d:b&&(a.halt(),this.prev(u(a)));break;case o:a.ctrlKey&&!a.altKey&&(a.halt(),a.shiftKey?this.prev(u(a)):this.next(u(a)))}}function a(a){var c=!(!a.originalEvent.target&&!a.originalEvent.srcElement),b=a.fromIndex,d=a.currentIndex;if(b!=d){var a=this.triggers[b],e=this.triggers[d],b=this.panels[b],d=this.panels[d];a&&l(a,"-1");l(e,"0");c&&e.focus();b&&b.setAttribute("aria-hidden","true");d.setAttribute("aria-hidden","false")}}var d=33,h=34,m=37,s=38,t=39,n=40,o=
9;e.mix(i.Config,{aria:!0});i.Plugins.push({name:"aria",init:function(b){function d(a){a.setAttribute("role","tab");l(a,"-1");a.id||(a.id=e.guid("ks-switchable"))}function g(a,b){a.setAttribute("role","tabpanel");a.setAttribute("aria-hidden","true");a.setAttribute("aria-labelledby",b.id)}if(b.config.aria){var h=b.triggers,i=b.activeIndex,k=b.panels,m=b.container;b.nav&&c.attr(b.nav,"role","tablist");var n=0;e.each(h,d);b.on("added",function(a){var b;d(b=a.trigger);g(a.panel,b)});n=0;e.each(k,function(a){g(a,
h[n]);n++});-1<i&&(l(h[i],"0"),k[i].setAttribute("aria-hidden","false"));b.on("switch",a,b);f.on(m,"keydown",r,b);f.on(m,"keypress",j,b)}}});var l=b.setTabIndex,u=g.getDomEvent},{requires:["dom","event","../base","../aria","./base"]});KISSY.add("switchable/tabs/base",function(e,c){function f(c,b){if(!(this instanceof f))return new f(c,b);f.superclass.constructor.call(this,c,b);return 0}e.extend(f,c);f.Config={};f.Plugins=[];return f},{requires:["../base"]});
KISSY.add("switchable/touch",function(e,c,f,g){e.mix(g.Config,{mouseAsTouch:!1});g.Plugins.push({name:"touch",init:function(b){var i=b.config,k=i.effect;if("scrolly"==k||"scrollx"==k){var j=b.content,r=b.container,a,d=i.mouseAsTouch,h,m=0,s=0,t,n="left",o,l;"scrolly"==k&&(n="top");var u=function(){"relative"!=b.panels[b.activeIndex].style.position&&(b.stop&&b.stop(),t=c.offset(j),s=1)},p=function(d){if(s){var e=-1!=d.type.indexOf("touch")?d.originalEvent.changedTouches[0]:d,f={},p=c.offset(r);p.bottom=
p.top+r.offsetHeight;p.right=p.left+r.offsetWidth;"scrolly"==k?(l=b.viewSize[1],o=e.pageY-h,f.top=o+t.top,e=e.pageY>=p.top&&e.pageY<=p.bottom):(l=b.viewSize[0],o=e.pageX-a,f.left=o+t.left,e=e.pageX>=p.left&&e.pageX<=p.right);3<Math.abs(o)&&(-1!=d.type.indexOf("touch")&&d.preventDefault(),e?(d=b.activeIndex,m||(m=1,i.circular&&(d==b.length-1?g.adjustPosition.call(b,b.panels,!1,n,l):0==d&&g.adjustPosition.call(b,b.panels,!0,n,l))),i.circular?c.offset(j,f):0<o&&0==d||0>o&&d==b.length-1||c.offset(j,f)):
y())}},y=function(){if(m){s=m=0;var a=b.activeIndex,c=b.length-1;if(0>o&&a==c){if(!i.circular)return}else if(0<o&&0==a){if(!i.circular)return}else(0==a||a==c)&&g.resetPosition.call(b,b.panels,0==a,n,l);b[0>o?"next":"prev"]();b.start&&b.start()}};f.on(j,"touchstart",function(b){u();a=b.pageX;h=b.pageY});f.on(j,"touchmove",p);f.on(j,"touchend",y);d&&!("ontouchstart"in e.Env.host.document.documentElement)&&e.use("dd",function(c,d){var e=new d.Draggable({node:j});e.on("dragstart",function(){u();a=e.startMousePos.left;
h=e.startMousePos.top});e.on("drag",p);e.on("dragend",y);b.__touchDD=e})}},destroy:function(b){var c;(c=b.__touchDD)&&c.destroy()}})},{requires:["dom","event","./base"]});
