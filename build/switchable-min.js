/*
Copyright 2012, KISSY UI Library v1.30dev
MIT Licensed
build time: May 22 13:28
*/
KISSY.add("switchable/accordion/aria",function(d,c,j,f,l,k){function m(a){var b=null;d.each(this.triggers,function(g){if(g==a||c.contains(g,a))b=g});return b}function e(a){var b=null;d.each(this.panels,function(g){if(g==a||c.contains(g,a))b=g});return b}function i(a){var b=m.call(this,a);b||(a=e.call(this,a),b=this.triggers[d.indexOf(a,this.panels)]);return b}function p(a){switch(a.keyCode){case u:case s:a.ctrlKey&&!a.altKey&&!a.shiftKey&&a.halt();break;case v:a.ctrlKey&&!a.altKey&&a.halt()}}function a(a){var c=
a.target,e=this.triggers,t=!a.ctrlKey&&!a.shiftKey&&!a.altKey,p=a.ctrlKey&&!a.shiftKey&&!a.altKey;switch(a.keyCode){case x:case y:if((c=m.call(this,c))&&t)this.switchTo(d.indexOf(c,this.triggers)),a.halt();break;case n:case z:if(c=m.call(this,c))g.call(this,c),a.halt();break;case q:case w:if(c=m.call(this,c))h.call(this,c),a.halt();break;case s:p&&(a.halt(),c=i.call(this,c),h.call(this,c));break;case u:p&&(a.halt(),c=i.call(this,c),g.call(this,c));break;case o:t&&(i.call(this,c),b.call(this,0,!0),
a.halt());break;case r:t&&(i.call(this,c),b.call(this,e.length-1,!0),a.halt());break;case v:a.ctrlKey&&!a.altKey&&(a.halt(),c=i.call(this,c),a.shiftKey?g.call(this,c):h.call(this,c))}}function b(a,b){var g=this.triggers,h=g[a];d.each(g,function(a){a!==h&&(A(a,"-1"),c.removeClass(a,"ks-switchable-select"),a.setAttribute("aria-selected","false"))});b&&h.focus();A(h,"0");c.addClass(h,"ks-switchable-select");h.setAttribute("aria-selected","true")}function g(a){var g=this.triggers,a=d.indexOf(a,g);b.call(this,
0==a?g.length-1:a-1,!0)}function h(a){var g=this.triggers,a=d.indexOf(a,g);b.call(this,a==g.length-1?0:a+1,!0)}function t(a){var g=!(!a.originalEvent.target&&!a.originalEvent.srcElement),a=a.currentIndex,c=this.panels,h=this.triggers,e=h[a],v=c[a];this.config.multiple||(d.each(c,function(a){a!==v&&a.setAttribute("aria-hidden","true")}),d.each(h,function(a){a!==e&&a.setAttribute("aria-hidden","true")}));c=v.getAttribute("aria-hidden");v.setAttribute("aria-hidden","false"==c?"true":"false");e.setAttribute("aria-expanded",
"false"==c?"false":"true");b.call(this,a,g)}var u=33,s=34,r=35,o=36,n=37,z=38,q=39,w=40,v=9,y=32,x=13;d.mix(l.Config,{aria:!0});k.addPlugin({name:"aria",init:function(b){if(b.config.aria){var g=b.container,h=b.activeIndex;c.attr(g,"aria-multiselectable",b.config.multiple?"true":"false");b.nav&&c.attr(b.nav,"role","tablist");var v=b.triggers,e=b.panels,n=0;d.each(e,function(a){a.id||(a.id=d.guid("ks-accordion-tab-panel"))});d.each(v,function(a){a.id||(a.id=d.guid("ks-accordion-tab"))});d.each(v,function(a){a.setAttribute("role",
"tab");a.setAttribute("aria-expanded",h==n?"true":"false");a.setAttribute("aria-selected",h==n?"true":"false");a.setAttribute("aria-controls",e[n].id);A(a,h==n?"0":"-1");n++});n=0;d.each(e,function(a){var b=v[n];a.setAttribute("role","tabpanel");a.setAttribute("aria-hidden",h==n?"false":"true");a.setAttribute("aria-labelledby",b.id);n++});b.on("switch",t,b);j.on(g,"keydown",a,b);j.on(g,"keypress",p,b)}}},l);var A=f.setTabIndex},{requires:["dom","event","../aria","./base","../base"]});
KISSY.add("switchable/accordion/base",function(d,c,j){function f(c,d){if(!(this instanceof f))return new f(c,d);f.superclass.constructor.apply(this,arguments)}d.extend(f,j,{_switchTrigger:function(d,k){var j=this.config;j.multiple?c.toggleClass(k,j.activeTriggerCls):f.superclass._switchTrigger.apply(this,arguments)},_triggerIsValid:function(c){return this.config.multiple||f.superclass._triggerIsValid.call(this,c)},_switchView:function(d,k,j){var e=this.config,i=this._getFromToPanels().toPanels;e.multiple?
(c.toggle(i),this._fireOnSwitch(k),j&&j.call(this)):f.superclass._switchView.apply(this,arguments)}});f.Config={markupType:1,triggerType:"click",multiple:!1};return f},{requires:["dom","../base"]});
KISSY.add("switchable/aria",function(d,c,j,f){function l(){this.stop&&this.stop()}function k(){this.start&&this.start()}f.addPlugin({name:"aria",init:function(c){if(c.config.aria){var d=c.container;j.on(d,"focusin",l,c);j.on(d,"focusout",k,c)}}});var m=["a","input","button","object"];return{setTabIndex:function(e,i){e.tabIndex=i;d.each(c.query("*",e),function(e){var a=e.nodeName.toLowerCase();d.inArray(a,m)&&(c.hasAttr(e,"oriTabIndex")||c.attr(e,"oriTabIndex",e.tabIndex),e.tabIndex=-1!=i?c.attr(e,
"oriTabIndex"):i)})}}},{requires:["dom","event","./base"]});
KISSY.add("switchable/autoplay",function(d,c,j,f,l){var k=d.Env.host,m=function(e){var d=c.scrollTop(),f=c.viewportHeight(),a=c.offset(e),e=c.height(e);return a.top>d&&a.top+e<d+f};d.mix(f.Config,{pauseOnScroll:!1,autoplay:!1,interval:5,pauseOnHover:!0});f.addPlugin({name:"autoplay",init:function(c){function f(){b=d.later(function(){c.paused||c.next()},a,!0)}var p=c.config,a=1E3*p.interval,b;if(p.autoplay&&(p.pauseOnScroll&&(c.__scrollDetect=d.buffer(function(){c[m(c.container)?"start":"stop"]()},
200),j.on(k,"scroll",c.__scrollDetect)),f(),c.stop=function(){if(b){b.cancel();b=l}c.paused=true},c.start=function(){if(b){b.cancel();b=l}c.paused=false;f()},p.pauseOnHover))j.on(c.container,"mouseenter",c.stop,c),j.on(c.container,"mouseleave",c.start,c)},destroy:function(c){c.__scrollDetect&&j.remove(k,"scroll",c.__scrollDetect)}});return f},{requires:["dom","event","./base"]});
KISSY.add("switchable/base",function(d,c,j,f){function l(a,b){b=b||{};"markupType"in b||(b.panelCls?b.markupType=1:b.panels&&(b.markupType=2));for(var g=this.constructor;g;)b=d.merge(g.Config,b),g=g.superclass?g.superclass.constructor:null;this.container=c.get(a);this.config=b;this.activeIndex=b.activeIndex;var h;-1<this.activeIndex||("number"==typeof b.switchTo?h=b.switchTo:this.activeIndex=0);this._init();this._initPlugins();this.fire(i);h!==f&&this.switchTo(h)}function k(a){var b={};b.type=a.type;
b.target=a.target;return{originalEvent:b}}var m=d.makeArray,e=j.Target,i="init",p="remove";l.getDomEvent=k;l.addPlugin=function(a,b){for(var b=b||l,c=a.priority=a.priority||0,h=0,d=b.Plugins=b.Plugins||[];h<d.length&&!(d[h].priority<c);h++);d.splice(h,0,a)};l.Config={markupType:0,navCls:"ks-switchable-nav",contentCls:"ks-switchable-content",triggerCls:"ks-switchable-trigger",panelCls:"ks-switchable-panel",triggers:[],panels:[],hasTriggers:!0,triggerType:"mouse",delay:0.1,activeIndex:-1,activeTriggerCls:"ks-active",
switchTo:f,steps:1,viewSize:[]};d.augment(l,e,{_initPlugins:function(){for(var a=this,b=[],c=a.constructor;c;)c.Plugins&&b.push.apply(b,[].concat(c.Plugins).reverse()),c=c.superclass?c.superclass.constructor:null;b.reverse();d.each(b,function(b){b.init&&b.init(a)})},_init:function(){var a=this.config;this._parseMarkup();a.hasTriggers&&this._bindTriggers();this._bindPanels()},_parseMarkup:function(){var a=this.container,b=this.config,g,h,d=[],e=[];switch(b.markupType){case 0:(g=c.get("."+b.navCls,
a))&&(d=c.children(g));h=c.get("."+b.contentCls,a);e=c.children(h);break;case 1:d=c.query("."+b.triggerCls,a);e=c.query("."+b.panelCls,a);break;case 2:d=b.triggers,e=b.panels}this.length=Math.ceil(e.length/b.steps);this.nav=g||b.hasTriggers&&d[0]&&d[0].parentNode;if(b.hasTriggers&&(!this.nav||0==d.length))d=this._generateTriggersMarkup(this.length);this.triggers=m(d);this.panels=m(e);this.content=h||e[0].parentNode},_generateTriggersMarkup:function(a){var b=this.config,g=this.nav||c.create("<ul>"),
h,d;g.className=b.navCls;for(d=0;d<a;d++)h=c.create("<li>"),d===this.activeIndex&&(h.className=b.activeTriggerCls),h.innerHTML=d+1,g.appendChild(h);this.container.appendChild(g);this.nav=g;return c.children(g)},_bindTriggers:function(){var a=this,b=a.config,c=d.one(a.nav);d.each(a.triggers,function(b){a._initTrigger(b)});c.delegate("click",".ks-switchable-trigger-internal",function(b){var c=a._getTriggerIndex(b.currentTarget);a._onFocusTrigger(c,b)});"mouse"===b.triggerType&&c.delegate("mouseenter",
".ks-switchable-trigger-internal",function(b){var c=a._getTriggerIndex(b.currentTarget);a._onMouseEnterTrigger(c,b)}).delegate("mouseleave",".ks-switchable-trigger-internal",function(){a._onMouseLeaveTrigger()})},_initTrigger:function(a){c.addClass(a,"ks-switchable-trigger-internal")},_bindPanels:function(){var a=this;d.each(a.panels,function(b){a._initPanel(b)})},_initPanel:function(a){c.addClass(a,"ks-switchable-panel-internal")},_onFocusTrigger:function(a,b){this._triggerIsValid(a)&&(this._cancelSwitchTimer(),
this.switchTo(a,f,k(b)))},_onMouseEnterTrigger:function(a,b){var c=this;if(c._triggerIsValid(a)){var h=k(b);c.switchTimer=d.later(function(){c.switchTo(a,f,h)},1E3*c.config.delay)}},_onMouseLeaveTrigger:function(){this._cancelSwitchTimer()},_triggerIsValid:function(a){return this.activeIndex!==a},_cancelSwitchTimer:function(){this.switchTimer&&(this.switchTimer.cancel(),this.switchTimer=f)},_getTriggerIndex:function(a){return d.indexOf(a,this.triggers)},_resetLength:function(){this.length=this._getLength()},
_getLength:function(a){var b=this.config;a===f&&(a=this.panels.length);return Math.ceil(a/b.steps)},_afterAdd:function(a,b,c){this._resetLength();a=this._getLength(a+1)-1;1==this.config.steps&&this.activeIndex>=a&&(this.activeIndex+=1);var d=this.activeIndex;this.activeIndex=-1;this.switchTo(d);b?this.switchTo(a,f,f,c):c()},add:function(a){var b=a.callback||d.noop,g=this.nav,h=this.content,e=a.trigger,f=a.panel,k=a.active,p=this.panels.length,a=null!=a.index?a.index:p,i=this.triggers,n=this.panels,
j=this.length,q=null,q=null,a=Math.max(0,Math.min(a,p)),p=n[a]||null;n.splice(a,0,f);h.insertBefore(f,p);1==this.config.steps?(q=i[a],g.insertBefore(e,q),i.splice(a,0,e)):(q=this._getLength(),q!=j&&(c.append(e,g),i.push(e)));this._initPanel(f);this._initTrigger(e);this._afterAdd(a,k,b);this.fire("add",{index:a,trigger:e,panel:f})},remove:function(a){function b(){l&&(c.remove(l),j.splice(i,1));if(n){c.remove(n);for(var a=0;a<o.length;a++)if(o[a]==n){h.triggers.splice(a,1);break}}h._resetLength();h.fire(p,
{index:i,trigger:n,panel:l})}var g=a.callback||d.noop,h=this,e=h.config.steps,k=h.length,i,j=h.panels;i="index"in a?a.index:a.panel;var a=h._getLength(j.length-1),o=h.triggers,n=null,l=null;if(j.length&&(i=d.isNumber(i)?Math.max(0,Math.min(i,j.length-1)):d.indexOf(i,j),n=1==e?o[i]:a!==k?o[k-1]:null,l=j[i],!1!==h.fire("beforeRemove",{index:i,panel:l,trigger:n})))if(0==a)b(),g();else{var q=h.activeIndex;1<e?q==a?h.switchTo(q-1,f,f,function(){b();g()}):(b(),h.activeIndex=-1,h.switchTo(q,f,f,function(){g()})):
q==i?h.switchTo(0<q?q-1:q+1,f,f,function(){b();0==q&&(h.activeIndex=0);g()}):(q>i&&(q--,h.activeIndex=q),b(),g())}},switchTo:function(a,b,c,d){var e=this,i=e.config,k=e.activeIndex,j=e.triggers;if(!e._triggerIsValid(a)||!1===e.fire("beforeSwitch",{fromIndex:k,toIndex:a}))return e;e.fromIndex=k;i.hasTriggers&&e._switchTrigger(j[k]||null,j[a]);b===f&&(b=a>k?"forward":"backward");e.activeIndex=a;e._switchView(b,c,function(){d&&d.call(e)});return e},_switchTrigger:function(a,b){var d=this.config.activeTriggerCls;
a&&c.removeClass(a,d);c.addClass(b,d)},_getFromToPanels:function(){var a=this.fromIndex,b;b=this.config.steps;var c=this.panels,d=this.activeIndex,a=-1<a?c.slice(a*b,(a+1)*b):null;b=c.slice(d*b,(d+1)*b);return{fromPanels:a,toPanels:b}},_switchView:function(a,b,d){var e=this,i=e._getFromToPanels(),a=i.fromPanels,i=i.toPanels;a&&c.css(a,"display","none");c.css(i,"display","block");setTimeout(function(){e._fireOnSwitch(b)},0);d&&d.call(this)},_fireOnSwitch:function(a){this.fire("switch",d.merge(a,{fromIndex:this.fromIndex,
currentIndex:this.activeIndex}))},prev:function(a){this.switchTo((this.activeIndex-1+this.length)%this.length,"backward",a)},next:function(a){this.switchTo((this.activeIndex+1)%this.length,"forward",a)},destroy:function(a){for(var b=this,e=b.constructor;e;)d.each(e.Plugins,function(a){a.destroy&&a.destroy(b)}),e=e.superclass?e.superclass.constructor:null;a?j.remove(b.container):c.remove(b.container);b.nav=null;b.content=null;b.container=null;b.triggers=[];b.panels=[];b.detach()}});return l},{requires:["dom",
"event"]});
KISSY.add("switchable/carousel/aria",function(d,c,j,f,l,k){function m(a){var c=a.currentIndex,b=this.activeIndex,e=this.panels,n=e[c*this.config.steps],g=this.triggers,c=g[c];if((a=!(!a.originalEvent.target&&!a.originalEvent.srcElement))||-1==b)d.each(g,function(a){o(a,-1)}),d.each(e,function(a){o(a,-1)}),c&&o(c,0),o(n,0),a&&n.focus()}function e(a){var b=null;d.each(this.triggers,function(d){if(d==a||c.contains(d,a))return b=d,!1});return b}function i(a){var b=a.target;switch(a.keyCode){case u:case t:if(b=e.call(this,
b)){var i=c.next(b),f=this.triggers;i||(i=f[0]);o(b,-1);i&&(o(i,0),i.focus());a.halt()}break;case h:case g:if(b=e.call(this,b))i=c.prev(b),f=this.triggers,i||(i=f[f.length-1]),o(b,-1),i&&(o(i,0),i.focus()),a.halt();break;case r:case s:if(b=e.call(this,b))this.switchTo(d.indexOf(b,this.triggers),void 0,n),a.halt()}}function p(a){var b=null;d.each(this.panels,function(d){if(d==a||c.contains(d,a))return b=d,!1});return b}function a(a,b){var c=d.indexOf(a,this.panels),e=this.config.steps,g=Math.floor(c/
e);return g==this.activeIndex?1:0==c%e||c%e==e-1?(this.switchTo(g,b,n),0):1}function b(b){var d=b.target;switch(b.keyCode){case u:case t:if(d=p.call(this,d)){var e=c.next(d),n=this.panels;e||(e=n[0]);o(d,-1);o(e,0);a.call(this,e,z)&&e.focus();b.halt()}break;case h:case g:if(d=p.call(this,d))e=c.prev(d),n=this.panels,e||(e=n[n.length-1]),o(d,-1),o(e,0),a.call(this,e,q)&&e.focus(),b.halt();break;case r:case s:if(d=p.call(this,d))this.fire("itemSelected",{item:d}),b.halt()}}var g=37,h=38,t=39,u=40,s=
32,r=13,o=f.setTabIndex,n={originalEvent:{target:1}},z="forward",q="backward";d.mix(l.Config,{aria:!1});k.addPlugin({name:"aria",init:function(a){if(a.config.aria){var c=a.triggers,e=a.panels,g=a.content,h=a.activeIndex;g.id||(g.id=d.guid("ks-switchbale-content"));g.setAttribute("role","listbox");var f=0;d.each(c,function(a){o(a,h==f?"0":"-1");a.setAttribute("role","button");a.setAttribute("aria-controls",g.id);f++});f=0;d.each(e,function(a){o(a,"-1");a.setAttribute("role","option");f++});a.on("switch",
m,a);if(c=a.nav)j.on(c,"keydown",i,a);j.on(g,"keydown",b,a);c=a.prevBtn;e=a.nextBtn;c&&(o(c,0),c.setAttribute("role","button"),j.on(c,"keydown",function(b){if(b.keyCode==r||b.keyCode==s){a.prev(n);b.preventDefault()}}));e&&(o(e,0),e.setAttribute("role","button"),j.on(e,"keydown",function(b){if(b.keyCode==r||b.keyCode==s){a.next(n);b.preventDefault()}}))}}},l)},{requires:["dom","event","../aria","./base","../base"]});
KISSY.add("switchable/carousel/base",function(d,c,j,f){function l(c,d){if(!(this instanceof l))return new l(c,d);l.superclass.constructor.apply(this,arguments)}var k="prevBtn",m="nextBtn",e={originalEvent:{target:1}};l.Config={circular:!0,prevBtnCls:"ks-switchable-prev-btn",nextBtnCls:"ks-switchable-next-btn",disableBtnCls:"ks-switchable-disable-btn"};d.extend(l,f,{_init:function(){function i(a){c.removeClass([f[k],f[m]],b);0==a&&c.addClass(f[k],b);a==f.length-1&&c.addClass(f[m],b)}var f=this;l.superclass._init.call(f);
var a=f.config,b=a.disableBtnCls;d.each(["prev","next"],function(b){var d=f[b+"Btn"]=c.get("."+a[b+"BtnCls"],f.container);j.on(d,"mousedown",function(c){c.preventDefault();c=f.activeIndex;if("prev"==b&&(0!=c||a.circular))f[b](e);if("next"==b&&(c!=f.length-1||a.circular))f[b](e)})});a.circular||(f.on("added removed",function(){i(f.activeIndex)}),f.on("switch",function(a){i(a.currentIndex)}));j.delegate(f.content,"click",".ks-switchable-panel-internal",function(a){f.fire("itemSelected",{item:a.currentTarget})})}});
return l},{requires:["dom","event","../base"]});
KISSY.add("switchable/circular",function(d,c,j,f){function l(b,d){var e=this,f=e.fromIndex,n=e.config,i=e.length,l=n.scrollType===t,w=l?p:a,v=e.activeIndex,y=e.viewSize[l?0:1],l=-y*v,x=e.panels,A=e.config.steps,C={},D,B=d===h;D=B&&0===f&&v===i-1||!B&&f===i-1&&0===v;e.anim&&(e.anim.stop(),"relative"==x[f*A].style.position&&m.call(e,x,f,w,y,1));D&&(l=k.call(e,x,B,w,y));C[w]=l+g;-1<f?e.anim=(new j(e.content,C,n.duration,n.easing,function(){D&&m.call(e,x,B,w,y,1);e.anim=void 0;b&&b()})).run():(c.css(e.content,
C),b&&b())}function k(a,b,d,f){var n=this.config.steps,g=this.length,h=b?g-1:0,a=a.slice(h*n,(h+1)*n);c.css(a,e,i);c.css(a,d,(b?-1:1)*f*g);return b?f:-f*g}function m(a,d,f,g,n){var i=this.config.steps,h=this.length,k=d?h-1:0,a=a.slice(k*i,(k+1)*i);c.css(a,e,b);c.css(a,f,b);n&&c.css(this.content,f,d?-g*(h-1):b)}var e="position",i="relative",p="left",a="top",b="",g="px",h="backward",t="scrollx";d.mix(f.Config,{circular:!1});f.adjustPosition=k;f.resetPosition=m;f.addPlugin({name:"circular",init:function(a){a=
a.config;if(a.circular&&(a.effect===t||"scrolly"===a.effect))a.scrollType=a.effect,a.effect=l}})},{requires:["dom","anim","./base","./effect"]});
KISSY.add("switchable/effect",function(d,c,j,f,l,k){var m;d.mix(l.Config,{effect:"none",duration:0.5,easing:"easeNone"});l.Effects={none:function(e){var d=this._getFromToPanels(),f=d.fromPanels,d=d.toPanels;f&&c.css(f,"display","none");c.css(d,"display","block");e&&e()},fade:function(d){var i=this,j=i._getFromToPanels(),a=j.fromPanels,b=i.config,g=a?a[0]:null,h=j.toPanels[0];i.anim&&(i.anim.stop(),c.css(i.anim.fromEl,{zIndex:1,opacity:0}),c.css(i.anim.toEl,"zIndex",9));c.css(h,"opacity",1);g?(i.anim=
(new f(g,{opacity:0},b.duration,b.easing,function(){i.anim=k;c.css(h,"z-index",9);c.css(g,"z-index",1);d&&d()})).run(),i.anim.toEl=h,i.anim.fromEl=g):(c.css(h,"z-index",9),d&&d())},scroll:function(d,i,j){var a=this,i=a.fromIndex,b=a.config,g="scrollx"===b.effect,h={};h[g?"left":"top"]=-(a.viewSize[g?0:1]*a.activeIndex)+"px";a.anim&&a.anim.stop();j||-1<i?a.anim=(new f(a.content,h,b.duration,b.easing,function(){a.anim=k;d&&d()})).run():(c.css(a.content,h),d&&d())}};m=l.Effects;m.scrollx=m.scrolly=m.scroll;
l.addPlugin({priority:10,name:"effect",init:function(e){var f=e.config,k=f.effect,a=e.panels,b=e.content,g=f.steps,h=a[0],j=e.activeIndex;if("none"!==k)switch(c.css(a,"display","block"),k){case "scrollx":case "scrolly":c.css(b,"position","absolute");"static"==c.css(b.parentNode,"position")&&c.css(b.parentNode,"position","relative");"scrollx"===k&&(c.css(a,"float","left"),c.width(b,"9999px"));e.viewSize=[f.viewSize[0]||h&&h.offsetWidth*g,f.viewSize[1]||h&&h.offsetHeight*g];break;case "fade":var l=
j*g,m=l+g-1,r;d.each(a,function(a,b){r=b>=l&&b<=m;c.css(a,{opacity:r?1:0,position:"absolute",zIndex:r?9:1})})}}});d.augment(l,{_switchView:function(c,f,k){var a=this,b=a.config.effect;(d.isFunction(b)?b:m[b]).call(a,function(){a._fireOnSwitch(f);k&&k.call(a)},c)}});return l},{requires:["dom","event","anim","./base"]});
KISSY.add("switchable/lazyload",function(d,c,j){var f="beforeSwitch",l="img",k="textarea",m={};m[l]="lazyImgAttribute";m[k]="lazyTextareaClass";d.mix(j.Config,{lazyImgAttribute:"data-ks-lazyload-custom",lazyTextareaClass:"ks-datalazyload-custom",lazyDataType:k});j.addPlugin({name:"lazyload",init:function(e){function i(d){var m=a.steps,d=d.toIndex*m;j.loadCustomLazyData(e.panels.slice(d,d+m),b,g);a:{var u,s,r;if(d=(m=b===l)?"img":b===k?"textarea":""){d=c.query(d,e.container);u=0;for(r=d.length;u<r;u++)if(s=
d[u],m?c.attr(s,g):c.hasClass(s,g)){m=!1;break a}}m=!0}m&&e.detach(f,i)}var j=d.require("datalazyload"),a=e.config,b,g;"img-src"===a.lazyDataType&&(a.lazyDataType=l);"area-data"===a.lazyDataType&&(a.lazyDataType=k);b=a.lazyDataType;g=a[m[b]];if(j&&b&&g)e.on(f,i)}});return j},{requires:["dom","./base"]});
KISSY.add("switchable/slide/base",function(d,c){function j(c,d){if(!(this instanceof j))return new j(c,d);j.superclass.constructor.apply(this,arguments)}j.Config={autoplay:!0,circular:!0};d.extend(j,c);return j},{requires:["../base"]});KISSY.add("switchable",function(d,c,j,f,l,k,m,e,i,p,a,b,g){d.mix(c,{Accordion:f,Carousel:m,Slide:b,Tabs:g,Aria:j});return c},{requires:"switchable/base,switchable/aria,switchable/accordion/base,switchable/accordion/aria,switchable/autoplay,switchable/carousel/base,switchable/carousel/aria,switchable/circular,switchable/effect,switchable/lazyload,switchable/slide/base,switchable/tabs/base,switchable/tabs/aria".split(",")});
KISSY.add("switchable/tabs/aria",function(d,c,j,f,l,k){function m(a){var b=null;d.each(this.triggers,function(d){if(d==a||c.contains(d,a))b=d});return b}function e(c){switch(c.keyCode){case a:case b:c.ctrlKey&&!c.altKey&&!c.shiftKey&&c.halt();break;case s:c.ctrlKey&&!c.altKey&&c.halt()}}function i(c){var d=c.target,e=c.ctrlKey&&!c.shiftKey&&!c.altKey;switch(c.keyCode){case g:case h:m.call(this,d)&&(this.prev(o(c)),c.halt());break;case t:case u:m.call(this,d)&&(this.next(o(c)),c.halt());break;case b:e&&
(c.halt(),this.next(o(c)));break;case a:e&&(c.halt(),this.prev(o(c)));break;case s:c.ctrlKey&&!c.altKey&&(c.halt(),c.shiftKey?this.prev(o(c)):this.next(o(c)))}}function p(a){var c=!(!a.originalEvent.target&&!a.originalEvent.srcElement),b=a.fromIndex,d=a.currentIndex;if(b!=d){var a=this.triggers[b],e=this.triggers[d],b=this.panels[b],d=this.panels[d];a&&r(a,"-1");r(e,"0");c&&e.focus();b&&b.setAttribute("aria-hidden","true");d.setAttribute("aria-hidden","false")}}var a=33,b=34,g=37,h=38,t=39,u=40,s=
9;d.mix(k.Config,{aria:!0});f.addPlugin({name:"aria",init:function(a){function b(a){a.setAttribute("role","tab");r(a,"-1");a.id||(a.id=d.guid("ks-switchable"))}function f(a,b){a.setAttribute("role","tabpanel");a.setAttribute("aria-hidden","true");a.setAttribute("aria-labelledby",b.id)}if(a.config.aria){var g=a.triggers,h=a.activeIndex,k=a.panels,l=a.container;a.nav&&c.attr(a.nav,"role","tablist");var m=0;d.each(g,b);a.on("added",function(a){var c;b(c=a.trigger);f(a.panel,c)});m=0;d.each(k,function(a){f(a,
g[m]);m++});-1<h&&(r(g[h],"0"),k[h].setAttribute("aria-hidden","false"));a.on("switch",p,a);j.on(l,"keydown",i,a);j.on(l,"keypress",e,a)}}},k);var r=l.setTabIndex,o=f.getDomEvent},{requires:["dom","event","../base","../aria","./base"]});KISSY.add("switchable/tabs/base",function(d,c){function j(c,d){if(!(this instanceof j))return new j(c,d);j.superclass.constructor.call(this,c,d);return 0}d.extend(j,c);j.Config={};return j},{requires:["../base"]});
KISSY.add("switchable/touch",function(d,c,j,f,l){d.mix(f.Config,{mouseAsTouch:!1});f.addPlugin({priority:5,name:"touch",init:function(k){var m=k.config,e=m.scrollType||m.effect;if("scrolly"==e||"scrollx"==e){var i=k.content,p=k.container,a,b=m.mouseAsTouch,g,h=0,t=0,u={},s={},r="left",o,n;"scrolly"==e&&(r="top");var z=function(){if("relative"!=k.panels[k.activeIndex].style.position){k.stop&&k.stop();t=1;u=c.offset(i);var a=c.offset(p);a.bottom=a.top+p.offsetHeight;a.right=a.left+p.offsetWidth;s=a}},
q=function(b){if(t){var d=-1!=b.type.indexOf("touch")?b.originalEvent.changedTouches[0]:b,j={};"scrolly"==e?(n=k.viewSize[1],o=d.pageY-g,j.top=u.top+o,d=d.pageY>=s.top&&d.pageY<=s.bottom):(n=k.viewSize[0],o=d.pageX-a,j.left=u.left+o,d=d.pageX>=s.left&&d.pageX<=s.right);if(h||3<Math.abs(o))(-1!=b.type.indexOf("touch")&&b.preventDefault(),k.anim&&(k.anim.stop(),k.anim=l),d)?(h||(h=1,m.circular&&(b=k.activeIndex,b==k.length-1?f.adjustPosition.call(k,k.panels,!1,r,n):0==b&&f.adjustPosition.call(k,k.panels,
!0,r,n))),c.offset(i,j)):w()}},w=function(){if(h){t=h=0;var a=k.activeIndex,b=k.length-1;!m.circular&&(0>o&&a==b||0<o&&0==a)?f.Effects[e].call(k,l,l,!0):(0>o&&a==b||0<o&&0==a||(0==a||a==b)&&f.resetPosition.call(k,k.panels,0==a,r,n),k[0>o?"next":"prev"](),k.start&&k.start())}};j.on(i,"touchstart",function(b){z();a=b.pageX;g=b.pageY});j.on(i,"touchmove",q);j.on(i,"touchend",w);b&&!("ontouchstart"in d.Env.host.document.documentElement)&&d.use("dd",function(b,c){var d=new c.Draggable({node:i});d.on("dragstart",
function(){z();a=d.startMousePos.left;g=d.startMousePos.top});d.on("drag",q);d.on("dragend",w);k.__touchDD=d})}},destroy:function(c){var d;(d=c.__touchDD)&&d.destroy()}})},{requires:["dom","event","./base"]});
