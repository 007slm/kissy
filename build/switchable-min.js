/*
Copyright 2012, KISSY UI Library v1.30rc
MIT Licensed
build time: Jul 20 03:09
*/
KISSY.add("switchable/accordion/aria",function(l,d,x,u,v,q){function y(g){var r=null;l.each(this.triggers,function(C){if(C==g||d.contains(C,g))r=C});return r}function m(g){var r=null;l.each(this.panels,function(C){if(C==g||d.contains(C,g))r=C});return r}function p(g){var r=y.call(this,g);if(!r){g=m.call(this,g);r=this.triggers[l.indexOf(g,this.panels)]}return r}function i(g){switch(g.keyCode){case f:case k:g.ctrlKey&&!g.altKey&&!g.shiftKey&&g.halt();break;case c:g.ctrlKey&&!g.altKey&&g.halt()}}function h(g){var r=
g.target,C=this.triggers,E=!g.ctrlKey&&!g.shiftKey&&!g.altKey,G=g.ctrlKey&&!g.shiftKey&&!g.altKey;switch(g.keyCode){case z:case o:if((r=y.call(this,r))&&E){this.switchTo(l.indexOf(r,this.triggers));g.halt()}break;case j:case B:if(r=y.call(this,r)){a.call(this,r);g.halt()}break;case A:case s:if(r=y.call(this,r)){b.call(this,r);g.halt()}break;case k:if(G){g.halt();r=p.call(this,r);b.call(this,r)}break;case f:if(G){g.halt();r=p.call(this,r);a.call(this,r)}break;case t:if(E){p.call(this,r);n.call(this,
0,true);g.halt()}break;case w:if(E){p.call(this,r);n.call(this,C.length-1,true);g.halt()}break;case c:if(g.ctrlKey&&!g.altKey){g.halt();r=p.call(this,r);g.shiftKey?a.call(this,r):b.call(this,r)}}}function n(g,r){var C=this.triggers,E=C[g];l.each(C,function(G){if(G!==E){F(G,"-1");d.removeClass(G,"ks-switchable-select");G.setAttribute("aria-selected","false")}});r&&E.focus();F(E,"0");d.addClass(E,"ks-switchable-select");E.setAttribute("aria-selected","true")}function a(g){var r=this.triggers;g=l.indexOf(g,
r);n.call(this,g==0?r.length-1:g-1,true)}function b(g){var r=this.triggers;g=l.indexOf(g,r);n.call(this,g==r.length-1?0:g+1,true)}function e(g){var r=!!(g.originalEvent.target||g.originalEvent.srcElement);g=g.currentIndex;var C=this.panels,E=this.triggers,G=E[g],H=C[g];if(!this.config.multiple){l.each(C,function(D){D!==H&&D.setAttribute("aria-hidden","true")});l.each(E,function(D){D!==G&&D.setAttribute("aria-hidden","true")})}C=H.getAttribute("aria-hidden");H.setAttribute("aria-hidden",C=="false"?
"true":"false");G.setAttribute("aria-expanded",C=="false"?"false":"true");n.call(this,g,r)}var f=33,k=34,w=35,t=36,j=37,B=38,A=39,s=40,c=9,o=32,z=13;l.mix(v.Config,{aria:true});q.addPlugin({name:"aria",init:function(g){if(g.config.aria){var r=g.container,C=g.activeIndex;d.attr(r,"aria-multiselectable",g.config.multiple?"true":"false");g.nav&&d.attr(g.nav,"role","tablist");var E=g.triggers,G=g.panels,H=0;l.each(G,function(D){if(!D.id)D.id=l.guid("ks-accordion-tab-panel")});l.each(E,function(D){if(!D.id)D.id=
l.guid("ks-accordion-tab")});l.each(E,function(D){D.setAttribute("role","tab");D.setAttribute("aria-expanded",C==H?"true":"false");D.setAttribute("aria-selected",C==H?"true":"false");D.setAttribute("aria-controls",G[H].id);F(D,C==H?"0":"-1");H++});H=0;l.each(G,function(D){var I=E[H];D.setAttribute("role","tabpanel");D.setAttribute("aria-hidden",C==H?"false":"true");D.setAttribute("aria-labelledby",I.id);H++});g.on("switch",e,g);x.on(r,"keydown",h,g);x.on(r,"keypress",i,g)}}},v);var F=u.setTabIndex},
{requires:["dom","event","../aria","./base","../base"]});
KISSY.add("switchable/accordion/base",function(l,d,x){function u(v,q){if(!(this instanceof u))return new u(v,q);u.superclass.constructor.apply(this,arguments)}l.extend(u,x,{_switchTrigger:function(v,q){var y=this.config;y.multiple?d.toggleClass(q,y.activeTriggerCls):u.superclass._switchTrigger.apply(this,arguments)},_triggerIsValid:function(v){return this.config.multiple||u.superclass._triggerIsValid.call(this,v)},_switchView:function(v,q,y){var m=this.config,p=this._getFromToPanels().toPanels;if(m.multiple){d.toggle(p);
this._fireOnSwitch(q);y&&y.call(this)}else u.superclass._switchView.apply(this,arguments)}});u.Config={markupType:1,triggerType:"click",multiple:false};return u},{requires:["dom","../base"]});
KISSY.add("switchable/aria",function(l,d,x,u){function v(){this.stop&&this.stop()}function q(){this.start&&this.start()}u.addPlugin({name:"aria",init:function(m){if(m.config.aria){var p=m.container;x.on(p,"focusin",v,m);x.on(p,"focusout",q,m)}}});var y=["a","input","button","object"];return{setTabIndex:function(m,p){m.tabIndex=p;l.each(d.query("*",m),function(i){var h=i.nodeName.toLowerCase();if(l.inArray(h,y)){d.hasAttr(i,"oriTabIndex")||d.attr(i,"oriTabIndex",i.tabIndex);i.tabIndex=p!=-1?d.attr(i,
"oriTabIndex"):p}})}}},{requires:["dom","event","./base"]});
KISSY.add("switchable/autoplay",function(l,d,x,u,v){var q=l.Env.host,y=function(m){var p=d.scrollTop(),i=d.viewportHeight(),h=d.offset(m);m=d.height(m);return h.top>p&&h.top+m<p+i};l.mix(u.Config,{pauseOnScroll:false,autoplay:false,interval:5,pauseOnHover:true});u.addPlugin({name:"autoplay",init:function(m){function p(){n=l.later(function(){m.paused||m.next()},h,true)}var i=m.config,h=i.interval*1E3,n;if(i.autoplay){if(i.pauseOnScroll){m.__scrollDetect=l.buffer(function(){m[y(m.container)?"start":
"stop"]()},200);x.on(q,"scroll",m.__scrollDetect)}p();m.stop=function(){if(n){n.cancel();n=v}m.paused=true};m.start=function(){if(n){n.cancel();n=v}m.paused=false;p()};if(i.pauseOnHover){x.on(m.container,"mouseenter",m.stop,m);x.on(m.container,"mouseleave",m.start,m)}}},destroy:function(m){m.__scrollDetect&&x.remove(q,"scroll",m.__scrollDetect)}});return u},{requires:["dom","event","./base"]});
KISSY.add("switchable/base",function(l,d,x,u){function v(a,b){this._triggerInternalCls=l.guid(h);this._panelInternalCls=l.guid(n);b=b||{};if(!("markupType"in b))if(b.panelCls)b.markupType=1;else if(b.panels)b.markupType=2;for(var e=this.constructor;e;){b=l.merge(e.Config,b);e=e.superclass?e.superclass.constructor:null}this.container=d.get(a);this.config=b;this.activeIndex=b.activeIndex;var f;if(!(this.activeIndex>-1))if(typeof b.switchTo=="number")f=b.switchTo;else this.activeIndex=0;this._init();
this._initPlugins();this.fire(p);f!==u&&this.switchTo(f)}function q(a){var b={};b.type=a.type;b.target=a.target;return{originalEvent:b}}var y=l.makeArray,m=x.Target,p="init",i="remove",h="ks-switchable-trigger-internal",n="ks-switchable-panel-internal";v.getDomEvent=q;v.addPlugin=function(a,b){b=b||v;for(var e=a.priority=a.priority||0,f=0,k=b.Plugins=b.Plugins||[];f<k.length;f++)if(k[f].priority<e)break;k.splice(f,0,a)};v.Config={markupType:0,navCls:"ks-switchable-nav",contentCls:"ks-switchable-content",
triggerCls:"ks-switchable-trigger",panelCls:"ks-switchable-panel",triggers:[],panels:[],hasTriggers:true,triggerType:"mouse",delay:0.1,activeIndex:-1,activeTriggerCls:"ks-active",switchTo:u,steps:1,viewSize:[]};l.augment(v,m,{_initPlugins:function(){for(var a=this,b=[],e=a.constructor;e;){e.Plugins&&b.push.apply(b,[].concat(e.Plugins).reverse());e=e.superclass?e.superclass.constructor:null}b.reverse();l.each(b,function(f){f.init&&f.init(a)})},_init:function(){var a=this.config;this._parseMarkup();
a.hasTriggers&&this._bindTriggers();this._bindPanels()},_parseMarkup:function(){var a=this.container,b=this.config,e,f,k=[],w=[];switch(b.markupType){case 0:if(e=d.get("."+b.navCls,a))k=d.children(e);f=d.get("."+b.contentCls,a);w=d.children(f);break;case 1:k=d.query("."+b.triggerCls,a);w=d.query("."+b.panelCls,a);break;case 2:k=b.triggers;w=b.panels}this.length=Math.ceil(w.length/b.steps);this.nav=e||b.hasTriggers&&k[0]&&k[0].parentNode;if(b.hasTriggers&&(!this.nav||k.length==0))k=this._generateTriggersMarkup(this.length);
this.triggers=y(k);this.panels=y(w);this.content=f||w[0].parentNode},_generateTriggersMarkup:function(a){var b=this.config,e=this.nav||d.create("<ul>"),f,k;e.className=b.navCls;for(k=0;k<a;k++){f=d.create("<li>");if(k===this.activeIndex)f.className=b.activeTriggerCls;f.innerHTML=k+1;e.appendChild(f)}this.container.appendChild(e);this.nav=e;return d.children(e)},_bindTriggers:function(){var a=this,b=a.config,e=a._triggerInternalCls,f=l.one(a.nav);l.each(a.triggers,function(k){a._initTrigger(k)});f.delegate("click",
"."+e,function(k){var w=a._getTriggerIndex(k.currentTarget);a._onFocusTrigger(w,k)});b.triggerType==="mouse"&&f.delegate("mouseenter","."+e,function(k){var w=a._getTriggerIndex(k.currentTarget);a._onMouseEnterTrigger(w,k)}).delegate("mouseleave","."+e,function(){a._onMouseLeaveTrigger()})},_initTrigger:function(a){d.addClass(a,this._triggerInternalCls)},_bindPanels:function(){var a=this;l.each(a.panels,function(b){a._initPanel(b)})},_initPanel:function(a){d.addClass(a,this._panelInternalCls)},_onFocusTrigger:function(a,
b){if(this._triggerIsValid(a)){this._cancelSwitchTimer();this.switchTo(a,u,q(b))}},_onMouseEnterTrigger:function(a,b){var e=this;if(e._triggerIsValid(a)){var f=q(b);e.switchTimer=l.later(function(){e.switchTo(a,u,f)},e.config.delay*1E3)}},_onMouseLeaveTrigger:function(){this._cancelSwitchTimer()},_triggerIsValid:function(a){return this.activeIndex!==a},_cancelSwitchTimer:function(){if(this.switchTimer){this.switchTimer.cancel();this.switchTimer=u}},_getTriggerIndex:function(a){return l.indexOf(a,
this.triggers)},_resetLength:function(){this.length=this._getLength()},_getLength:function(a){var b=this.config;if(a===u)a=this.panels.length;return Math.ceil(a/b.steps)},_afterAdd:function(a,b,e){this._resetLength();a=this._getLength(a+1)-1;if(this.config.steps==1)if(this.activeIndex>=a)this.activeIndex+=1;var f=this.activeIndex;this.activeIndex=-1;this.switchTo(f);b?this.switchTo(a,u,u,e):e()},add:function(a){var b=a.callback||l.noop,e=this.nav,f=this.content,k=a.trigger,w=a.panel,t=a.active,j=
this.panels.length;a=a.index!=null?a.index:j;var B=this.triggers,A=this.panels,s=this.length,c=null;c=null;a=Math.max(0,Math.min(a,j));j=A[a]||null;A.splice(a,0,w);f.insertBefore(w,j);if(this.config.steps==1){c=B[a];e.insertBefore(k,c);B.splice(a,0,k)}else{c=this._getLength();if(c!=s){d.append(k,e);B.push(k)}}this._initPanel(w);this._initTrigger(k);this._afterAdd(a,t,b);this.fire("add",{index:a,trigger:k,panel:w})},remove:function(a){function b(){if(s){d.remove(s);j.splice(t,1)}if(A){d.remove(A);
for(var o=0;o<B.length;o++)if(B[o]==A){f.triggers.splice(o,1);break}}f._resetLength();f.fire(i,{index:t,trigger:A,panel:s})}var e=a.callback||l.noop,f=this,k=f.config.steps,w=f.length,t,j=f.panels;t="index"in a?a.index:a.panel;a=f._getLength(j.length-1);var B=f.triggers,A=null,s=null;if(j.length){t=l.isNumber(t)?Math.max(0,Math.min(t,j.length-1)):l.indexOf(t,j);A=k==1?B[t]:a!==w?B[w-1]:null;s=j[t];if(f.fire("beforeRemove",{index:t,panel:s,trigger:A})!==false)if(a==0){b();e()}else{var c=f.activeIndex;
if(k>1)if(c==a)f.switchTo(c-1,u,u,function(){b();e()});else{b();f.activeIndex=-1;f.switchTo(c,u,u,function(){e()})}else if(c==t)f.switchTo(c>0?c-1:c+1,u,u,function(){b();if(c==0)f.activeIndex=0;e()});else{if(c>t){c--;f.activeIndex=c}b();e()}}}},switchTo:function(a,b,e,f){var k=this,w=k.config,t=k.activeIndex,j=k.triggers;if(!k._triggerIsValid(a))return k;if(k.fire("beforeSwitch",{fromIndex:t,toIndex:a})===false)return k;k.fromIndex=t;if(w.hasTriggers)k._switchTrigger(j[t]||null,j[a]);if(b===u)b=a>
t?"forward":"backward";k.activeIndex=a;k._switchView(b,e,function(){f&&f.call(k)});return k},_switchTrigger:function(a,b){var e=this.config.activeTriggerCls;a&&d.removeClass(a,e);d.addClass(b,e)},_getFromToPanels:function(){var a=this.fromIndex,b;b=this.config.steps;var e=this.panels,f=this.activeIndex;a=a>-1?e.slice(a*b,(a+1)*b):null;b=e.slice(f*b,(f+1)*b);return{fromPanels:a,toPanels:b}},_switchView:function(a,b,e){var f=this,k=f._getFromToPanels();a=k.fromPanels;k=k.toPanels;a&&d.css(a,"display",
"none");d.css(k,"display","block");setTimeout(function(){f._fireOnSwitch(b)},0);e&&e.call(this)},_fireOnSwitch:function(a){this.fire("switch",l.merge(a,{fromIndex:this.fromIndex,currentIndex:this.activeIndex}))},prev:function(a){this.switchTo((this.activeIndex-1+this.length)%this.length,"backward",a)},next:function(a){this.switchTo((this.activeIndex+1)%this.length,"forward",a)},destroy:function(a){for(var b=this,e=b.constructor;e;){l.each(e.Plugins,function(f){f.destroy&&f.destroy(b)});e=e.superclass?
e.superclass.constructor:null}a?x.remove(b.container):d.remove(b.container);b.nav=null;b.content=null;b.container=null;b.triggers=[];b.panels=[];b.detach()}});return v},{requires:["dom","event"]});
KISSY.add("switchable/carousel/aria",function(l,d,x,u,v,q){function y(s){var c=s.currentIndex,o=this.activeIndex,z=this.panels,F=z[c*this.config.steps],g=this.triggers;c=g[c];if((s=!!(s.originalEvent.target||s.originalEvent.srcElement))||o==-1){l.each(g,function(r){t(r,-1)});l.each(z,function(r){t(r,-1)});c&&t(c,0);t(F,0);s&&F.focus()}}function m(s){var c=null;l.each(this.triggers,function(o){if(o==s||d.contains(o,s)){c=o;return false}});return c}function p(s){var c=s.target;switch(s.keyCode){case f:case e:if(c=
m.call(this,c)){c=c;var o=d.next(c),z=this.triggers;o||(o=z[0]);t(c,-1);if(o){t(o,0);o.focus()}s.halt()}break;case b:case a:if(c=m.call(this,c)){c=c;o=d.prev(c);z=this.triggers;o||(o=z[z.length-1]);t(c,-1);if(o){t(o,0);o.focus()}s.halt()}break;case w:case k:if(c=m.call(this,c)){this.switchTo(l.indexOf(c,this.triggers),undefined,j);s.halt()}}}function i(s){var c=null;l.each(this.panels,function(o){if(o==s||d.contains(o,s)){c=o;return false}});return c}function h(s,c){var o=l.indexOf(s,this.panels),
z=this.config.steps,F=Math.floor(o/z);if(F==this.activeIndex)return 1;if(o%z==0||o%z==z-1){this.switchTo(F,c,j);return 0}return 1}function n(s){var c=s.target;switch(s.keyCode){case f:case e:if(c=i.call(this,c)){c=c;var o=d.next(c),z=this.panels;o||(o=z[0]);t(c,-1);t(o,0);h.call(this,o,B)&&o.focus();s.halt()}break;case b:case a:if(c=i.call(this,c)){c=c;o=d.prev(c);z=this.panels;o||(o=z[z.length-1]);t(c,-1);t(o,0);h.call(this,o,A)&&o.focus();s.halt()}break;case w:case k:if(c=i.call(this,c)){this.fire("itemSelected",
{item:c});s.halt()}}}var a=37,b=38,e=39,f=40,k=32,w=13,t=u.setTabIndex,j={originalEvent:{target:1}},B="forward",A="backward";l.mix(v.Config,{aria:false});q.addPlugin({name:"aria",init:function(s){if(s.config.aria){var c=s.triggers,o=s.panels,z=s.content,F=s.activeIndex;if(!z.id)z.id=l.guid("ks-switchbale-content");z.setAttribute("role","listbox");var g=0;l.each(c,function(r){t(r,F==g?"0":"-1");r.setAttribute("role","button");r.setAttribute("aria-controls",z.id);g++});g=0;l.each(o,function(r){t(r,
"-1");r.setAttribute("role","option");g++});s.on("switch",y,s);(c=s.nav)&&x.on(c,"keydown",p,s);x.on(z,"keydown",n,s);c=s.prevBtn;o=s.nextBtn;if(c){t(c,0);c.setAttribute("role","button");x.on(c,"keydown",function(r){if(r.keyCode==w||r.keyCode==k){s.prev(j);r.preventDefault()}})}if(o){t(o,0);o.setAttribute("role","button");x.on(o,"keydown",function(r){if(r.keyCode==w||r.keyCode==k){s.next(j);r.preventDefault()}})}}}},v)},{requires:["dom","event","../aria","./base","../base"]});
KISSY.add("switchable/carousel/base",function(l,d,x,u){function v(p,i){if(!(this instanceof v))return new v(p,i);v.superclass.constructor.apply(this,arguments)}var q="prevBtn",y="nextBtn",m={originalEvent:{target:1}};v.Config={circular:true,prevBtnCls:"ks-switchable-prev-btn",nextBtnCls:"ks-switchable-next-btn",disableBtnCls:"ks-switchable-disable-btn"};l.extend(v,u,{_init:function(){function p(a){d.removeClass([i[q],i[y]],n);a==0&&d.addClass(i[q],n);a==i.length-1&&d.addClass(i[y],n)}var i=this;v.superclass._init.call(i);
var h=i.config,n=h.disableBtnCls;l.each(["prev","next"],function(a){var b=i[a+"Btn"]=d.get("."+h[a+"BtnCls"],i.container);x.on(b,"mousedown",function(e){e.preventDefault();e=i.activeIndex;if(a=="prev"&&(e!=0||h.circular))i[a](m);if(a=="next"&&(e!=i.length-1||h.circular))i[a](m)})});if(!h.circular){i.on("added removed",function(){p(i.activeIndex)});i.on("switch",function(a){p(a.currentIndex)})}x.delegate(i.content,"click","."+i._panelInternalCls,function(a){i.fire("itemSelected",{item:a.currentTarget})})}});
return v},{requires:["dom","event","../base"]});
KISSY.add("switchable/circular",function(l,d,x,u){function v(i){var h=this,n=h.fromIndex,a=h.config,b=h.length,e=a.scrollType==="scrollx",f=e?"left":"top",k=h.activeIndex;e=h.viewSize[e?0:1];var w=h.panels,t={},j={},B=h._realStep,A=e*b;t[f]=-e*k;if(n==-1){d.css(h.content,t);i&&i()}else{if(k+B>b&&d.css(w[0],"position")!="relative"){j={position:"relative"};j[f]=A;d.css(w.slice(0,B),j);n>=0&&n<B&&d.css(h.content,f,-(e*(b+n)))}else if(k>0&&k<B&&d.css(w[0],"position")=="relative"){d.css(w.slice(0,B),p);
n>=0&&n<B&&d.css(h.content,f,-(e*n))}if(w[k].style.position=="relative")t[f]=-e*(b+k);h.anim&&h.anim.stop();h.anim=(new x(h.content,t,a.duration,a.easing,function(){if(k==0){d.css(w.slice(0,B),p);d.css(h.content,f,"")}h.anim=0;i&&i()})).run()}}function q(i,h){var n=this,a=n.fromIndex,b=n.config,e=n.length,f=b.scrollType==="scrollx",k=f?"left":"top",w=n.activeIndex,t=n.viewSize[f?0:1];f=-t*w;var j=n.panels,B=n.config.steps,A={},s,c=h==="backward";s=c&&a===0&&w===e-1||!c&&a===e-1&&w===0;if(n.anim){n.anim.stop();
j[a*B].style.position=="relative"&&m.call(n,j,a,k,t,1)}if(s)f=y.call(n,j,w,k,t);A[k]=f+"px";if(a>-1)n.anim=(new x(n.content,A,b.duration,b.easing,function(){s&&m.call(n,j,w,k,t,1);n.anim=undefined;i&&i()})).run();else{d.css(n.content,A);i&&i()}}function y(i,h,n,a){var b=this.config.steps,e=this.length;i=i.slice(h*b,(h+1)*b);d.css(i,"position","relative");d.css(i,n,(h?-1:1)*a*e);return h?a:-a*e}function m(i,h,n,a,b){var e=this.config.steps,f=this.length;i=i.slice(h*e,(h+1)*e);d.css(i,"position","");
d.css(i,n,"");if(b)d.css(this.content,n,h?-a*(f-1):"")}var p={position:"",left:"",top:""};l.mix(u.Config,{circular:false});u.adjustPosition=y;u.resetPosition=m;u.addPlugin({name:"circular",priority:5,init:function(i){var h=i.config,n,a,b,e,f=h.effect;if(h.circular&&(f==="scrollx"||f==="scrolly")){h.scrollType=f;b=i.panels;e=i.container;if(h.steps==1&&b.length){n=1;a=b[0].parentNode.parentNode;a=[Math.min(d.width(e),d.width(a)),Math.min(d.height(e),d.height(a))];if(f=="scrollx")n=Math.floor(a[0]/d.outerWidth(b[0],
true));else if(f=="scrolly")n=Math.floor(a[1]/d.outerHeight(b[0],true));if(n>h.steps){i._realStep=n;h.effect=v}}if(!i._realStep)h.effect=q}}})},{requires:["dom","anim","./base","./effect"]});
KISSY.add("switchable/effect",function(l,d,x,u,v,q){var y;l.mix(v.Config,{effect:"none",duration:0.5,easing:"easeNone"});v.Effects={none:function(m){var p=this._getFromToPanels(),i=p.fromPanels;p=p.toPanels;i&&d.css(i,"display","none");d.css(p,"display","block");m&&m()},fade:function(m){var p=this,i=p._getFromToPanels(),h=i.fromPanels,n=p.config,a=h?h[0]:null,b=i.toPanels[0];if(p.anim){p.anim.stop();d.css(p.anim.fromEl,{zIndex:1,opacity:0});d.css(p.anim.toEl,"zIndex",9)}d.css(b,"opacity",1);if(a){p.anim=
(new u(a,{opacity:0},n.duration,n.easing,function(){p.anim=q;d.css(b,"z-index",9);d.css(a,"z-index",1);m&&m()})).run();p.anim.toEl=b;p.anim.fromEl=a}else{d.css(b,"z-index",9);m&&m()}},scroll:function(m,p,i){var h=this;p=h.fromIndex;var n=h.config,a=n.effect==="scrollx",b={};b[a?"left":"top"]=-(h.viewSize[a?0:1]*h.activeIndex)+"px";h.anim&&h.anim.stop();if(i||p>-1)h.anim=(new u(h.content,b,n.duration,n.easing,function(){h.anim=q;m&&m()})).run();else{d.css(h.content,b);m&&m()}}};y=v.Effects;y.scrollx=
y.scrolly=y.scroll;v.addPlugin({priority:10,name:"effect",init:function(m){var p=m.config,i=p.effect,h=m.panels,n=m.content,a=p.steps,b=h[0],e=m.activeIndex;if(i!=="none"){d.css(h,"display","block");switch(i){case "scrollx":case "scrolly":d.css(n,"position","absolute");d.css(n.parentNode,"position")=="static"&&d.css(n.parentNode,"position","relative");if(i==="scrollx"){d.css(h,"float","left");d.width(n,"9999px")}m.viewSize=[p.viewSize[0]||b&&d.outerWidth(b,true)*a,p.viewSize[1]||b&&d.outerHeight(b,
true)*a];break;case "fade":var f=e*a,k=f+a-1,w;l.each(h,function(t,j){w=j>=f&&j<=k;d.css(t,{opacity:w?1:0,position:"absolute",zIndex:w?9:1})})}}}});l.augment(v,{_switchView:function(m,p,i){var h=this,n=h.config.effect;(l.isFunction(n)?n:y[n]).call(h,function(){h._fireOnSwitch(p);i&&i.call(h)},m)}});return v},{requires:["dom","event","anim","./base"]});
KISSY.add("switchable/lazyload",function(l,d,x){var u="beforeSwitch",v="img",q="textarea",y={};y[v]="lazyImgAttribute";y[q]="lazyTextareaClass";l.mix(x.Config,{lazyImgAttribute:"data-ks-lazyload-custom",lazyTextareaClass:"ks-datalazyload-custom",lazyDataType:q});x.addPlugin({name:"lazyload",init:function(m){function p(b){var e=h.steps;b=b.toIndex*e;i.loadCustomLazyData(m.panels.slice(b,b+e),n,a);a:{var f,k,w;if(b=(e=n===v)?"img":n===q?"textarea":""){b=d.query(b,m.container);f=0;for(w=b.length;f<w;f++){k=
b[f];if(e?d.attr(k,a):d.hasClass(k,a)){e=false;break a}}}e=true}e&&m.detach(u,p)}var i=l.require("datalazyload"),h=m.config,n,a;if(h.lazyDataType==="img-src")h.lazyDataType=v;if(h.lazyDataType==="area-data")h.lazyDataType=q;n=h.lazyDataType;a=h[y[n]];!i||!n||!a||m.on(u,p)}});return x},{requires:["dom","./base"]});
KISSY.add("switchable/slide/base",function(l,d){function x(u,v){if(!(this instanceof x))return new x(u,v);x.superclass.constructor.apply(this,arguments)}x.Config={autoplay:true,circular:true};l.extend(x,d);return x},{requires:["../base"]});
KISSY.add("switchable",function(l,d,x,u,v,q){l.mix(d,{Accordion:x,Carousel:u,Slide:v,Tabs:q});return l.Switchable=d},{requires:["switchable/base","switchable/accordion/base","switchable/carousel/base","switchable/slide/base","switchable/tabs/base","switchable/lazyload","switchable/effect","switchable/circular","switchable/carousel/aria","switchable/autoplay","switchable/aria","switchable/tabs/aria","switchable/accordion/aria"]});
KISSY.add("switchable/tabs/aria",function(l,d,x,u,v,q){function y(j){var B=null;l.each(this.triggers,function(A){if(A==j||d.contains(A,j))B=A});return B}function m(j){switch(j.keyCode){case h:case n:j.ctrlKey&&!j.altKey&&!j.shiftKey&&j.halt();break;case k:j.ctrlKey&&!j.altKey&&j.halt()}}function p(j){var B=j.target,A=j.ctrlKey&&!j.shiftKey&&!j.altKey;switch(j.keyCode){case a:case b:if(y.call(this,B)){this.prev(t(j));j.halt()}break;case e:case f:if(y.call(this,B)){this.next(t(j));j.halt()}break;case n:if(A){j.halt();
this.next(t(j))}break;case h:if(A){j.halt();this.prev(t(j))}break;case k:if(j.ctrlKey&&!j.altKey){j.halt();j.shiftKey?this.prev(t(j)):this.next(t(j))}}}function i(j){var B=!!(j.originalEvent.target||j.originalEvent.srcElement),A=j.fromIndex,s=j.currentIndex;if(A!=s){j=this.triggers[A];var c=this.triggers[s];A=this.panels[A];s=this.panels[s];j&&w(j,"-1");w(c,"0");B&&c.focus();A&&A.setAttribute("aria-hidden","true");s.setAttribute("aria-hidden","false")}}var h=33,n=34,a=37,b=38,e=39,f=40,k=9;l.mix(q.Config,
{aria:true});u.addPlugin({name:"aria",init:function(j){function B(g){g.setAttribute("role","tab");w(g,"-1");if(!g.id)g.id=l.guid("ks-switchable")}function A(g,r){g.setAttribute("role","tabpanel");g.setAttribute("aria-hidden","true");g.setAttribute("aria-labelledby",r.id)}if(j.config.aria){var s=j.triggers,c=j.activeIndex,o=j.panels,z=j.container;j.nav&&d.attr(j.nav,"role","tablist");var F=0;l.each(s,B);j.on("added",function(g){var r;B(r=g.trigger);A(g.panel,r)});F=0;l.each(o,function(g){A(g,s[F]);
F++});if(c>-1){w(s[c],"0");o[c].setAttribute("aria-hidden","false")}j.on("switch",i,j);x.on(z,"keydown",p,j);x.on(z,"keypress",m,j)}}},q);var w=v.setTabIndex,t=u.getDomEvent},{requires:["dom","event","../base","../aria","./base"]});KISSY.add("switchable/tabs/base",function(l,d){function x(u,v){if(!(this instanceof x))return new x(u,v);x.superclass.constructor.call(this,u,v);return 0}l.extend(x,d);x.Config={};return x},{requires:["../base"]});
KISSY.add("switchable/touch",function(l,d,x,u,v){l.mix(u.Config,{mouseAsTouch:false});u.addPlugin({name:"touch",init:function(q){if(!q._realStep){var y=q.config,m=y.scrollType||y.effect;if(m=="scrolly"||m=="scrollx"){var p=q.content,i=q.container,h,n=y.mouseAsTouch,a,b=0,e=0,f={},k={},w="left",t,j;if(m=="scrolly")w="top";var B=function(){if(q.panels[q.activeIndex].style.position!="relative"){q.stop&&q.stop();e=1;f=d.offset(p);var c=d.offset(i);c.bottom=c.top+i.offsetHeight;c.right=c.left+i.offsetWidth;
k=c}},A=function(c){if(e){var o=c.type.indexOf("touch")!=-1?c.originalEvent.changedTouches[0]:c,z={};if(m=="scrolly"){j=q.viewSize[1];t=o.pageY-a;z.top=f.top+t;o=o.pageY>=k.top&&o.pageY<=k.bottom}else{j=q.viewSize[0];t=o.pageX-h;z.left=f.left+t;o=o.pageX>=k.left&&o.pageX<=k.right}if(b||Math.abs(t)>3){c.type.indexOf("touch")!=-1&&c.preventDefault();if(q.anim){q.anim.stop();q.anim=v}if(o){if(!b){b=1;if(y.circular){c=q.activeIndex;o=q.length-1;if(c==o)u.adjustPosition.call(q,q.panels,0,w,j);else c==
0&&u.adjustPosition.call(q,q.panels,o,w,j)}}d.offset(p,z)}else s()}}},s=function(){if(b){e=b=0;var c=q.activeIndex,o=q.length-1;if(!y.circular)if(t<0&&c==o||t>0&&c==0){u.Effects[m].call(q,v,v,true);return}if(!(t<0&&c==o))if(!(t>0&&c==0))if(c==0||c==o)u.resetPosition.call(q,q.panels,c==0?o:0,w,j);q[t<0?"next":"prev"]();q.start&&q.start()}};x.on(p,"touchstart",function(c){B();h=c.pageX;a=c.pageY});x.on(p,"touchmove",A);x.on(p,"touchend",s);n&&!("ontouchstart"in l.Env.host.document.documentElement)&&
l.use("dd",function(c,o){var z=new o.Draggable({node:p});z.on("dragstart",function(){B();h=z.startMousePos.left;a=z.startMousePos.top});z.on("drag",A);z.on("dragend",s);q.__touchDD=z})}}},destroy:function(q){if(q=q.__touchDD)q.destroy()}})},{requires:["dom","event","./base"]});
