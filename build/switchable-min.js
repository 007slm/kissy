/*
Copyright 2012, KISSY UI Library v1.30dev
MIT Licensed
build time: May 30 20:28
*/
KISSY.add("switchable/accordion/aria",function(d,f,g,k,m,j){function l(a){var c=null;d.each(this.triggers,function(i){if(i==a||f.contains(i,a))c=i});return c}function b(a){var c=null;d.each(this.panels,function(i){if(i==a||f.contains(i,a))c=i});return c}function n(a){var c=l.call(this,a);c||(a=b.call(this,a),c=this.triggers[d.indexOf(a,this.panels)]);return c}function e(a){switch(a.keyCode){case t:case q:a.ctrlKey&&!a.altKey&&!a.shiftKey&&a.halt();break;case w:a.ctrlKey&&!a.altKey&&a.halt()}}function a(a){var b=
a.target,f=this.triggers,e=!a.ctrlKey&&!a.shiftKey&&!a.altKey,v=a.ctrlKey&&!a.shiftKey&&!a.altKey;switch(a.keyCode){case z:case A:if((b=l.call(this,b))&&e)this.switchTo(d.indexOf(b,this.triggers)),a.halt();break;case p:case u:if(b=l.call(this,b))i.call(this,b),a.halt();break;case s:case x:if(b=l.call(this,b))h.call(this,b),a.halt();break;case q:v&&(a.halt(),b=n.call(this,b),h.call(this,b));break;case t:v&&(a.halt(),b=n.call(this,b),i.call(this,b));break;case o:e&&(n.call(this,b),c.call(this,0,!0),
a.halt());break;case r:e&&(n.call(this,b),c.call(this,f.length-1,!0),a.halt());break;case w:a.ctrlKey&&!a.altKey&&(a.halt(),b=n.call(this,b),a.shiftKey?i.call(this,b):h.call(this,b))}}function c(a,c){var b=this.triggers,i=b[a];d.each(b,function(a){a!==i&&(y(a,"-1"),f.removeClass(a,"ks-switchable-select"),a.setAttribute("aria-selected","false"))});c&&i.focus();y(i,"0");f.addClass(i,"ks-switchable-select");i.setAttribute("aria-selected","true")}function i(a){var i=this.triggers,a=d.indexOf(a,i);c.call(this,
0==a?i.length-1:a-1,!0)}function h(a){var i=this.triggers,a=d.indexOf(a,i);c.call(this,a==i.length-1?0:a+1,!0)}function v(a){var i=!(!a.originalEvent.target&&!a.originalEvent.srcElement),a=a.currentIndex,b=this.panels,h=this.triggers,f=h[a],e=b[a];this.config.multiple||(d.each(b,function(a){a!==e&&a.setAttribute("aria-hidden","true")}),d.each(h,function(a){a!==f&&a.setAttribute("aria-hidden","true")}));b=e.getAttribute("aria-hidden");e.setAttribute("aria-hidden","false"==b?"true":"false");f.setAttribute("aria-expanded",
"false"==b?"false":"true");c.call(this,a,i)}var t=33,q=34,r=35,o=36,p=37,u=38,s=39,x=40,w=9,A=32,z=13;d.mix(m.Config,{aria:!0});j.addPlugin({name:"aria",init:function(c){if(c.config.aria){var i=c.container,b=c.activeIndex;f.attr(i,"aria-multiselectable",c.config.multiple?"true":"false");c.nav&&f.attr(c.nav,"role","tablist");var h=c.triggers,n=c.panels,w=0;d.each(n,function(a){a.id||(a.id=d.guid("ks-accordion-tab-panel"))});d.each(h,function(a){a.id||(a.id=d.guid("ks-accordion-tab"))});d.each(h,function(a){a.setAttribute("role",
"tab");a.setAttribute("aria-expanded",b==w?"true":"false");a.setAttribute("aria-selected",b==w?"true":"false");a.setAttribute("aria-controls",n[w].id);y(a,b==w?"0":"-1");w++});w=0;d.each(n,function(a){var c=h[w];a.setAttribute("role","tabpanel");a.setAttribute("aria-hidden",b==w?"false":"true");a.setAttribute("aria-labelledby",c.id);w++});c.on("switch",v,c);g.on(i,"keydown",a,c);g.on(i,"keypress",e,c)}}},m);var y=k.setTabIndex},{requires:["dom","event","../aria","./base","../base"]});
KISSY.add("switchable/accordion/base",function(d,f,g){function k(f,d){if(!(this instanceof k))return new k(f,d);k.superclass.constructor.apply(this,arguments)}d.extend(k,g,{_switchTrigger:function(d,j){var g=this.config;g.multiple?f.toggleClass(j,g.activeTriggerCls):k.superclass._switchTrigger.apply(this,arguments)},_triggerIsValid:function(f){return this.config.multiple||k.superclass._triggerIsValid.call(this,f)},_switchView:function(d,j,g){var b=this.config,n=this._getFromToPanels().toPanels;b.multiple?
(f.toggle(n),this._fireOnSwitch(j),g&&g.call(this)):k.superclass._switchView.apply(this,arguments)}});k.Config={markupType:1,triggerType:"click",multiple:!1};return k},{requires:["dom","../base"]});
KISSY.add("switchable/aria",function(d,f,g,k){function m(){this.stop&&this.stop()}function j(){this.start&&this.start()}k.addPlugin({name:"aria",init:function(b){if(b.config.aria){var f=b.container;g.on(f,"focusin",m,b);g.on(f,"focusout",j,b)}}});var l=["a","input","button","object"];return{setTabIndex:function(b,n){b.tabIndex=n;d.each(f.query("*",b),function(b){var a=b.nodeName.toLowerCase();d.inArray(a,l)&&(f.hasAttr(b,"oriTabIndex")||f.attr(b,"oriTabIndex",b.tabIndex),b.tabIndex=-1!=n?f.attr(b,
"oriTabIndex"):n)})}}},{requires:["dom","event","./base"]});
KISSY.add("switchable/autoplay",function(d,f,g,k,m){var j=d.Env.host,l=function(b){var d=f.scrollTop(),e=f.viewportHeight(),a=f.offset(b),b=f.height(b);return a.top>d&&a.top+b<d+e};d.mix(k.Config,{pauseOnScroll:!1,autoplay:!1,interval:5,pauseOnHover:!0});k.addPlugin({name:"autoplay",init:function(b){function f(){c=d.later(function(){b.paused||b.next()},a,!0)}var e=b.config,a=1E3*e.interval,c;if(e.autoplay&&(e.pauseOnScroll&&(b.__scrollDetect=d.buffer(function(){b[l(b.container)?"start":"stop"]()},
200),g.on(j,"scroll",b.__scrollDetect)),f(),b.stop=function(){if(c){c.cancel();c=m}b.paused=true},b.start=function(){if(c){c.cancel();c=m}b.paused=false;f()},e.pauseOnHover))g.on(b.container,"mouseenter",b.stop,b),g.on(b.container,"mouseleave",b.start,b)},destroy:function(b){b.__scrollDetect&&g.remove(j,"scroll",b.__scrollDetect)}});return k},{requires:["dom","event","./base"]});
KISSY.add("switchable/base",function(d,f,g,k){function m(a,c){c=c||{};"markupType"in c||(c.panelCls?c.markupType=1:c.panels&&(c.markupType=2));for(var b=this.constructor;b;)c=d.merge(b.Config,c),b=b.superclass?b.superclass.constructor:null;this.container=f.get(a);this.config=c;this.activeIndex=c.activeIndex;var h;-1<this.activeIndex||("number"==typeof c.switchTo?h=c.switchTo:this.activeIndex=0);this._init();this._initPlugins();this.fire(n);h!==k&&this.switchTo(h)}function j(a){var c={};c.type=a.type;
c.target=a.target;return{originalEvent:c}}var l=d.makeArray,b=g.Target,n="init",e="remove";m.getDomEvent=j;m.addPlugin=function(a,c){for(var c=c||m,b=a.priority=a.priority||0,h=0,f=c.Plugins=c.Plugins||[];h<f.length&&!(f[h].priority<b);h++);f.splice(h,0,a)};m.Config={markupType:0,navCls:"ks-switchable-nav",contentCls:"ks-switchable-content",triggerCls:"ks-switchable-trigger",panelCls:"ks-switchable-panel",triggers:[],panels:[],hasTriggers:!0,triggerType:"mouse",delay:0.1,activeIndex:-1,activeTriggerCls:"ks-active",
switchTo:k,steps:1,viewSize:[]};d.augment(m,b,{_initPlugins:function(){for(var a=this,c=[],b=a.constructor;b;)b.Plugins&&c.push.apply(c,[].concat(b.Plugins).reverse()),b=b.superclass?b.superclass.constructor:null;c.reverse();d.each(c,function(c){c.init&&c.init(a)})},_init:function(){var a=this.config;this._parseMarkup();a.hasTriggers&&this._bindTriggers();this._bindPanels()},_parseMarkup:function(){var a=this.container,c=this.config,b,h,d=[],e=[];switch(c.markupType){case 0:(b=f.get("."+c.navCls,
a))&&(d=f.children(b));h=f.get("."+c.contentCls,a);e=f.children(h);break;case 1:d=f.query("."+c.triggerCls,a);e=f.query("."+c.panelCls,a);break;case 2:d=c.triggers,e=c.panels}this.length=Math.ceil(e.length/c.steps);this.nav=b||c.hasTriggers&&d[0]&&d[0].parentNode;if(c.hasTriggers&&(!this.nav||0==d.length))d=this._generateTriggersMarkup(this.length);this.triggers=l(d);this.panels=l(e);this.content=h||e[0].parentNode},_generateTriggersMarkup:function(a){var c=this.config,b=this.nav||f.create("<ul>"),
h,d;b.className=c.navCls;for(d=0;d<a;d++)h=f.create("<li>"),d===this.activeIndex&&(h.className=c.activeTriggerCls),h.innerHTML=d+1,b.appendChild(h);this.container.appendChild(b);this.nav=b;return f.children(b)},_bindTriggers:function(){var a=this,c=a.config,b=d.one(a.nav);d.each(a.triggers,function(c){a._initTrigger(c)});b.delegate("click",".ks-switchable-trigger-internal",function(c){var b=a._getTriggerIndex(c.currentTarget);a._onFocusTrigger(b,c)});"mouse"===c.triggerType&&b.delegate("mouseenter",
".ks-switchable-trigger-internal",function(c){var b=a._getTriggerIndex(c.currentTarget);a._onMouseEnterTrigger(b,c)}).delegate("mouseleave",".ks-switchable-trigger-internal",function(){a._onMouseLeaveTrigger()})},_initTrigger:function(a){f.addClass(a,"ks-switchable-trigger-internal")},_bindPanels:function(){var a=this;d.each(a.panels,function(c){a._initPanel(c)})},_initPanel:function(a){f.addClass(a,"ks-switchable-panel-internal")},_onFocusTrigger:function(a,c){this._triggerIsValid(a)&&(this._cancelSwitchTimer(),
this.switchTo(a,k,j(c)))},_onMouseEnterTrigger:function(a,c){var b=this;if(b._triggerIsValid(a)){var f=j(c);b.switchTimer=d.later(function(){b.switchTo(a,k,f)},1E3*b.config.delay)}},_onMouseLeaveTrigger:function(){this._cancelSwitchTimer()},_triggerIsValid:function(a){return this.activeIndex!==a},_cancelSwitchTimer:function(){this.switchTimer&&(this.switchTimer.cancel(),this.switchTimer=k)},_getTriggerIndex:function(a){return d.indexOf(a,this.triggers)},_resetLength:function(){this.length=this._getLength()},
_getLength:function(a){var c=this.config;a===k&&(a=this.panels.length);return Math.ceil(a/c.steps)},_afterAdd:function(a,c,b){this._resetLength();a=this._getLength(a+1)-1;1==this.config.steps&&this.activeIndex>=a&&(this.activeIndex+=1);var f=this.activeIndex;this.activeIndex=-1;this.switchTo(f);c?this.switchTo(a,k,k,b):b()},add:function(a){var b=a.callback||d.noop,i=this.nav,h=this.content,e=a.trigger,n=a.panel,k=a.active,j=this.panels.length,a=null!=a.index?a.index:j,g=this.triggers,p=this.panels,
m=this.length,l=null,l=null,a=Math.max(0,Math.min(a,j)),j=p[a]||null;p.splice(a,0,n);h.insertBefore(n,j);1==this.config.steps?(l=g[a],i.insertBefore(e,l),g.splice(a,0,e)):(l=this._getLength(),l!=m&&(f.append(e,i),g.push(e)));this._initPanel(n);this._initTrigger(e);this._afterAdd(a,k,b);this.fire("add",{index:a,trigger:e,panel:n})},remove:function(a){function b(){u&&(f.remove(u),m.splice(g,1));if(p){f.remove(p);for(var a=0;a<l.length;a++)if(l[a]==p){h.triggers.splice(a,1);break}}h._resetLength();h.fire(e,
{index:g,trigger:p,panel:u})}var i=a.callback||d.noop,h=this,n=h.config.steps,j=h.length,g,m=h.panels;g="index"in a?a.index:a.panel;var a=h._getLength(m.length-1),l=h.triggers,p=null,u=null;if(m.length&&(g=d.isNumber(g)?Math.max(0,Math.min(g,m.length-1)):d.indexOf(g,m),p=1==n?l[g]:a!==j?l[j-1]:null,u=m[g],!1!==h.fire("beforeRemove",{index:g,panel:u,trigger:p})))if(0==a)b(),i();else{var s=h.activeIndex;1<n?s==a?h.switchTo(s-1,k,k,function(){b();i()}):(b(),h.activeIndex=-1,h.switchTo(s,k,k,function(){i()})):
s==g?h.switchTo(0<s?s-1:s+1,k,k,function(){b();0==s&&(h.activeIndex=0);i()}):(s>g&&(s--,h.activeIndex=s),b(),i())}},switchTo:function(a,b,f,d){var e=this,n=e.config,g=e.activeIndex,j=e.triggers;if(!e._triggerIsValid(a)||!1===e.fire("beforeSwitch",{fromIndex:g,toIndex:a}))return e;e.fromIndex=g;n.hasTriggers&&e._switchTrigger(j[g]||null,j[a]);b===k&&(b=a>g?"forward":"backward");e.activeIndex=a;e._switchView(b,f,function(){d&&d.call(e)});return e},_switchTrigger:function(a,b){var e=this.config.activeTriggerCls;
a&&f.removeClass(a,e);f.addClass(b,e)},_getFromToPanels:function(){var a=this.fromIndex,b;b=this.config.steps;var e=this.panels,f=this.activeIndex,a=-1<a?e.slice(a*b,(a+1)*b):null;b=e.slice(f*b,(f+1)*b);return{fromPanels:a,toPanels:b}},_switchView:function(a,b,e){var d=this,n=d._getFromToPanels(),a=n.fromPanels,n=n.toPanels;a&&f.css(a,"display","none");f.css(n,"display","block");setTimeout(function(){d._fireOnSwitch(b)},0);e&&e.call(this)},_fireOnSwitch:function(a){this.fire("switch",d.merge(a,{fromIndex:this.fromIndex,
currentIndex:this.activeIndex}))},prev:function(a){this.switchTo((this.activeIndex-1+this.length)%this.length,"backward",a)},next:function(a){this.switchTo((this.activeIndex+1)%this.length,"forward",a)},destroy:function(a){for(var b=this,e=b.constructor;e;)d.each(e.Plugins,function(a){a.destroy&&a.destroy(b)}),e=e.superclass?e.superclass.constructor:null;a?g.remove(b.container):f.remove(b.container);b.nav=null;b.content=null;b.container=null;b.triggers=[];b.panels=[];b.detach()}});return m},{requires:["dom",
"event"]});
KISSY.add("switchable/carousel/aria",function(d,f,g,k,m,j){function l(a){var b=a.currentIndex,c=this.activeIndex,e=this.panels,f=e[b*this.config.steps],n=this.triggers,b=n[b];if((a=!(!a.originalEvent.target&&!a.originalEvent.srcElement))||-1==c)d.each(n,function(a){o(a,-1)}),d.each(e,function(a){o(a,-1)}),b&&o(b,0),o(f,0),a&&f.focus()}function b(a){var b=null;d.each(this.triggers,function(c){if(c==a||f.contains(c,a))return b=c,!1});return b}function n(a){var c=a.target;switch(a.keyCode){case t:case v:if(c=b.call(this,
c)){var e=f.next(c),n=this.triggers;e||(e=n[0]);o(c,-1);e&&(o(e,0),e.focus());a.halt()}break;case h:case i:if(c=b.call(this,c))e=f.prev(c),n=this.triggers,e||(e=n[n.length-1]),o(c,-1),e&&(o(e,0),e.focus()),a.halt();break;case r:case q:if(c=b.call(this,c))this.switchTo(d.indexOf(c,this.triggers),void 0,p),a.halt()}}function e(a){var b=null;d.each(this.panels,function(c){if(c==a||f.contains(c,a))return b=c,!1});return b}function a(a,b){var c=d.indexOf(a,this.panels),e=this.config.steps,f=Math.floor(c/
e);return f==this.activeIndex?1:0==c%e||c%e==e-1?(this.switchTo(f,b,p),0):1}function c(b){var c=b.target;switch(b.keyCode){case t:case v:if(c=e.call(this,c)){var d=f.next(c),n=this.panels;d||(d=n[0]);o(c,-1);o(d,0);a.call(this,d,u)&&d.focus();b.halt()}break;case h:case i:if(c=e.call(this,c))d=f.prev(c),n=this.panels,d||(d=n[n.length-1]),o(c,-1),o(d,0),a.call(this,d,s)&&d.focus(),b.halt();break;case r:case q:if(c=e.call(this,c))this.fire("itemSelected",{item:c}),b.halt()}}var i=37,h=38,v=39,t=40,q=
32,r=13,o=k.setTabIndex,p={originalEvent:{target:1}},u="forward",s="backward";d.mix(m.Config,{aria:!1});j.addPlugin({name:"aria",init:function(a){if(a.config.aria){var b=a.triggers,e=a.panels,f=a.content,h=a.activeIndex;f.id||(f.id=d.guid("ks-switchbale-content"));f.setAttribute("role","listbox");var i=0;d.each(b,function(a){o(a,h==i?"0":"-1");a.setAttribute("role","button");a.setAttribute("aria-controls",f.id);i++});i=0;d.each(e,function(a){o(a,"-1");a.setAttribute("role","option");i++});a.on("switch",
l,a);if(b=a.nav)g.on(b,"keydown",n,a);g.on(f,"keydown",c,a);b=a.prevBtn;e=a.nextBtn;b&&(o(b,0),b.setAttribute("role","button"),g.on(b,"keydown",function(b){if(b.keyCode==r||b.keyCode==q){a.prev(p);b.preventDefault()}}));e&&(o(e,0),e.setAttribute("role","button"),g.on(e,"keydown",function(b){if(b.keyCode==r||b.keyCode==q){a.next(p);b.preventDefault()}}))}}},m)},{requires:["dom","event","../aria","./base","../base"]});
KISSY.add("switchable/carousel/base",function(d,f,g,k){function m(b,e){if(!(this instanceof m))return new m(b,e);m.superclass.constructor.apply(this,arguments)}var j="prevBtn",l="nextBtn",b={originalEvent:{target:1}};m.Config={circular:!0,prevBtnCls:"ks-switchable-prev-btn",nextBtnCls:"ks-switchable-next-btn",disableBtnCls:"ks-switchable-disable-btn"};d.extend(m,k,{_init:function(){function n(a){f.removeClass([e[j],e[l]],c);0==a&&f.addClass(e[j],c);a==e.length-1&&f.addClass(e[l],c)}var e=this;m.superclass._init.call(e);
var a=e.config,c=a.disableBtnCls;d.each(["prev","next"],function(c){var d=e[c+"Btn"]=f.get("."+a[c+"BtnCls"],e.container);g.on(d,"mousedown",function(f){f.preventDefault();f=e.activeIndex;if("prev"==c&&(0!=f||a.circular))e[c](b);if("next"==c&&(f!=e.length-1||a.circular))e[c](b)})});a.circular||(e.on("added removed",function(){n(e.activeIndex)}),e.on("switch",function(a){n(a.currentIndex)}));g.delegate(e.content,"click",".ks-switchable-panel-internal",function(a){e.fire("itemSelected",{item:a.currentTarget})})}});
return m},{requires:["dom","event","../base"]});
KISSY.add("switchable/circular",function(d,f,g,k){function m(b,d){var e=this,a=e.fromIndex,c=e.config,i=e.length,h="scrollx"===c.scrollType,k=h?"left":"top",m=e.activeIndex,q=e.viewSize[h?0:1],h=-q*m,r=e.panels,o=e.config.steps,p={},u,s="backward"===d;u=s&&0===a&&m===i-1||!s&&a===i-1&&0===m;e.anim&&(e.anim.stop(),"relative"==r[a*o].style.position&&l.call(e,r,a,k,q,1));u&&(h=j.call(e,r,m,k,q));p[k]=h+"px";-1<a?e.anim=(new g(e.content,p,c.duration,c.easing,function(){u&&l.call(e,r,m,k,q,1);e.anim=void 0;
b&&b()})).run():(f.css(e.content,p),b&&b())}function j(b,d,e,a){var c=this.config.steps,i=this.length,b=b.slice(d*c,(d+1)*c);f.css(b,"position","relative");f.css(b,e,(d?-1:1)*a*i);return d?a:-a*i}function l(b,d,e,a,c){var i=this.config.steps,h=this.length,b=b.slice(d*i,(d+1)*i);f.css(b,"position","");f.css(b,e,"");c&&f.css(this.content,e,d?-a*(h-1):"")}d.mix(k.Config,{circular:!1});k.adjustPosition=j;k.resetPosition=l;k.addPlugin({name:"circular",init:function(b){var b=b.config,f=b.effect;if(b.circular&&
("scrollx"===f||"scrolly"===f))b.scrollType=f,b.effect=m}})},{requires:["dom","anim","./base","./effect"]});
KISSY.add("switchable/effect",function(d,f,g,k,m,j){var l;d.mix(m.Config,{effect:"none",duration:0.5,easing:"easeNone"});m.Effects={none:function(b){var d=this._getFromToPanels(),e=d.fromPanels,d=d.toPanels;e&&f.css(e,"display","none");f.css(d,"display","block");b&&b()},fade:function(b){var d=this,e=d._getFromToPanels(),a=e.fromPanels,c=d.config,i=a?a[0]:null,h=e.toPanels[0];d.anim&&(d.anim.stop(),f.css(d.anim.fromEl,{zIndex:1,opacity:0}),f.css(d.anim.toEl,"zIndex",9));f.css(h,"opacity",1);i?(d.anim=
(new k(i,{opacity:0},c.duration,c.easing,function(){d.anim=j;f.css(h,"z-index",9);f.css(i,"z-index",1);b&&b()})).run(),d.anim.toEl=h,d.anim.fromEl=i):(f.css(h,"z-index",9),b&&b())},scroll:function(b,d,e){var a=this,d=a.fromIndex,c=a.config,i="scrollx"===c.effect,h={};h[i?"left":"top"]=-(a.viewSize[i?0:1]*a.activeIndex)+"px";a.anim&&a.anim.stop();e||-1<d?a.anim=(new k(a.content,h,c.duration,c.easing,function(){a.anim=j;b&&b()})).run():(f.css(a.content,h),b&&b())}};l=m.Effects;l.scrollx=l.scrolly=l.scroll;
m.addPlugin({priority:10,name:"effect",init:function(b){var g=b.config,e=g.effect,a=b.panels,c=b.content,i=g.steps,h=a[0],j=b.activeIndex;if("none"!==e)switch(f.css(a,"display","block"),e){case "scrollx":case "scrolly":f.css(c,"position","absolute");"static"==f.css(c.parentNode,"position")&&f.css(c.parentNode,"position","relative");"scrollx"===e&&(f.css(a,"float","left"),f.width(c,"9999px"));b.viewSize=[g.viewSize[0]||h&&h.offsetWidth*i,g.viewSize[1]||h&&h.offsetHeight*i];break;case "fade":var k=
j*i,m=k+i-1,l;d.each(a,function(a,b){l=b>=k&&b<=m;f.css(a,{opacity:l?1:0,position:"absolute",zIndex:l?9:1})})}}});d.augment(m,{_switchView:function(b,f,e){var a=this,c=a.config.effect;(d.isFunction(c)?c:l[c]).call(a,function(){a._fireOnSwitch(f);e&&e.call(a)},b)}});return m},{requires:["dom","event","anim","./base"]});
KISSY.add("switchable/lazyload",function(d,f,g){var k="beforeSwitch",m="img",j="textarea",l={};l[m]="lazyImgAttribute";l[j]="lazyTextareaClass";d.mix(g.Config,{lazyImgAttribute:"data-ks-lazyload-custom",lazyTextareaClass:"ks-datalazyload-custom",lazyDataType:j});g.addPlugin({name:"lazyload",init:function(b){function g(d){var l=a.steps,d=d.toIndex*l;e.loadCustomLazyData(b.panels.slice(d,d+l),c,i);a:{var t,q,r;if(d=(l=c===m)?"img":c===j?"textarea":""){d=f.query(d,b.container);t=0;for(r=d.length;t<r;t++)if(q=
d[t],l?f.attr(q,i):f.hasClass(q,i)){l=!1;break a}}l=!0}l&&b.detach(k,g)}var e=d.require("datalazyload"),a=b.config,c,i;"img-src"===a.lazyDataType&&(a.lazyDataType=m);"area-data"===a.lazyDataType&&(a.lazyDataType=j);c=a.lazyDataType;i=a[l[c]];if(e&&c&&i)b.on(k,g)}});return g},{requires:["dom","./base"]});
KISSY.add("switchable/slide/base",function(d,f){function g(d,f){if(!(this instanceof g))return new g(d,f);g.superclass.constructor.apply(this,arguments)}g.Config={autoplay:!0,circular:!0};d.extend(g,f);return g},{requires:["../base"]});KISSY.add("switchable",function(d,f,g,k,m,j,l,b,n,e,a,c,i){d.mix(f,{Accordion:k,Carousel:l,Slide:c,Tabs:i,Aria:g});return d.Switchable=f},{requires:"switchable/base,switchable/aria,switchable/accordion/base,switchable/accordion/aria,switchable/autoplay,switchable/carousel/base,switchable/carousel/aria,switchable/circular,switchable/effect,switchable/lazyload,switchable/slide/base,switchable/tabs/base,switchable/tabs/aria".split(",")});
KISSY.add("switchable/tabs/aria",function(d,f,g,k,m,j){function l(a){var b=null;d.each(this.triggers,function(c){if(c==a||f.contains(c,a))b=c});return b}function b(b){switch(b.keyCode){case a:case c:b.ctrlKey&&!b.altKey&&!b.shiftKey&&b.halt();break;case q:b.ctrlKey&&!b.altKey&&b.halt()}}function n(b){var d=b.target,e=b.ctrlKey&&!b.shiftKey&&!b.altKey;switch(b.keyCode){case i:case h:l.call(this,d)&&(this.prev(o(b)),b.halt());break;case v:case t:l.call(this,d)&&(this.next(o(b)),b.halt());break;case c:e&&
(b.halt(),this.next(o(b)));break;case a:e&&(b.halt(),this.prev(o(b)));break;case q:b.ctrlKey&&!b.altKey&&(b.halt(),b.shiftKey?this.prev(o(b)):this.next(o(b)))}}function e(a){var b=!(!a.originalEvent.target&&!a.originalEvent.srcElement),c=a.fromIndex,d=a.currentIndex;if(c!=d){var a=this.triggers[c],e=this.triggers[d],c=this.panels[c],d=this.panels[d];a&&r(a,"-1");r(e,"0");b&&e.focus();c&&c.setAttribute("aria-hidden","true");d.setAttribute("aria-hidden","false")}}var a=33,c=34,i=37,h=38,v=39,t=40,q=
9;d.mix(j.Config,{aria:!0});k.addPlugin({name:"aria",init:function(a){function c(a){a.setAttribute("role","tab");r(a,"-1");a.id||(a.id=d.guid("ks-switchable"))}function i(a,b){a.setAttribute("role","tabpanel");a.setAttribute("aria-hidden","true");a.setAttribute("aria-labelledby",b.id)}if(a.config.aria){var h=a.triggers,j=a.activeIndex,k=a.panels,l=a.container;a.nav&&f.attr(a.nav,"role","tablist");var m=0;d.each(h,c);a.on("added",function(a){var b;c(b=a.trigger);i(a.panel,b)});m=0;d.each(k,function(a){i(a,
h[m]);m++});-1<j&&(r(h[j],"0"),k[j].setAttribute("aria-hidden","false"));a.on("switch",e,a);g.on(l,"keydown",n,a);g.on(l,"keypress",b,a)}}},j);var r=m.setTabIndex,o=k.getDomEvent},{requires:["dom","event","../base","../aria","./base"]});KISSY.add("switchable/tabs/base",function(d,f){function g(d,f){if(!(this instanceof g))return new g(d,f);g.superclass.constructor.call(this,d,f);return 0}d.extend(g,f);g.Config={};return g},{requires:["../base"]});
KISSY.add("switchable/touch",function(d,f,g,k,m){d.mix(k.Config,{mouseAsTouch:!1});k.addPlugin({priority:5,name:"touch",init:function(j){var l=j.config,b=l.scrollType||l.effect;if("scrolly"==b||"scrollx"==b){var n=j.content,e=j.container,a,c=l.mouseAsTouch,i,h=0,v=0,t={},q={},r="left",o,p;"scrolly"==b&&(r="top");var u=function(){if("relative"!=j.panels[j.activeIndex].style.position){j.stop&&j.stop();v=1;t=f.offset(n);var a=f.offset(e);a.bottom=a.top+e.offsetHeight;a.right=a.left+e.offsetWidth;q=a}},
s=function(c){if(v){var d=-1!=c.type.indexOf("touch")?c.originalEvent.changedTouches[0]:c,e={};"scrolly"==b?(p=j.viewSize[1],o=d.pageY-i,e.top=t.top+o,d=d.pageY>=q.top&&d.pageY<=q.bottom):(p=j.viewSize[0],o=d.pageX-a,e.left=t.left+o,d=d.pageX>=q.left&&d.pageX<=q.right);if(h||3<Math.abs(o))(-1!=c.type.indexOf("touch")&&c.preventDefault(),j.anim&&(j.anim.stop(),j.anim=m),d)?(h||(h=1,l.circular&&(c=j.activeIndex,d=j.length-1,c==d?k.adjustPosition.call(j,j.panels,0,r,p):0==c&&k.adjustPosition.call(j,
j.panels,d,r,p))),f.offset(n,e)):x()}},x=function(){if(h){v=h=0;var a=j.activeIndex,c=j.length-1;if(!l.circular&&(0>o&&a==c||0<o&&0==a))k.Effects[b].call(j,m,m,!0);else{if(!(0>o&&a==c)&&!(0<o&&0==a)&&(0==a||a==c))k.resetPosition.call(j,j.panels,0==a?c:0,r,p);j[0>o?"next":"prev"]();j.start&&j.start()}}};g.on(n,"touchstart",function(b){u();a=b.pageX;i=b.pageY});g.on(n,"touchmove",s);g.on(n,"touchend",x);c&&!("ontouchstart"in d.Env.host.document.documentElement)&&d.use("dd",function(b,c){var d=new c.Draggable({node:n});
d.on("dragstart",function(){u();a=d.startMousePos.left;i=d.startMousePos.top});d.on("drag",s);d.on("dragend",x);j.__touchDD=d})}},destroy:function(d){var f;(f=d.__touchDD)&&f.destroy()}})},{requires:["dom","event","./base"]});
