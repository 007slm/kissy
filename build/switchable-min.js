/*
Copyright 2012, KISSY UI Library v1.30dev
MIT Licensed
build time: May 17 16:44
*/
KISSY.add("switchable/accordion/aria",function(e,d,h,i,l){function g(a){var b=null;e.each(this.triggers,function(c){if(c==a||d.contains(c,a))b=c});return b}function m(a){var b;e.each(this.panels,function(c){if(c==a||d.contains(c,a))b=c});return b}function j(a){var b=g.call(this,a);b||(a=m.call(this,a),b=this.triggers[e.indexOf(a,this.panels)]);return b}function k(a){switch(a.keyCode){case u:case t:a.ctrlKey&&!a.altKey&&!a.shiftKey&&a.halt();break;case v:a.ctrlKey&&!a.altKey&&a.halt()}}function a(a){var f=
a.target,d=this.triggers,k=!a.ctrlKey&&!a.shiftKey&&!a.altKey,i=a.ctrlKey&&!a.shiftKey&&!a.altKey;switch(a.keyCode){case x:case p:if((f=g.call(this,f))&&k)this.switchTo(e.indexOf(f,this.triggers)),a.halt();break;case r:case q:if(f=g.call(this,f))c.call(this,f),a.halt();break;case y:case A:if(f=g.call(this,f))n.call(this,f),a.halt();break;case t:i&&(a.halt(),f=j.call(this,f),n.call(this,f));break;case u:i&&(a.halt(),f=j.call(this,f),c.call(this,f));break;case o:k&&(j.call(this,f),b.call(this,0,!0),
a.halt());break;case s:k&&(j.call(this,f),b.call(this,d.length-1,!0),a.halt());break;case v:a.ctrlKey&&!a.altKey&&(a.halt(),f=j.call(this,f),a.shiftKey?c.call(this,f):n.call(this,f))}}function b(a,b){var c=this.triggers,f=c[a];e.each(c,function(a){a!==f&&(w(a,"-1"),d.removeClass(a,"ks-switchable-select"),a.setAttribute("aria-selected","false"))});b&&f.focus();w(f,"0");d.addClass(f,"ks-switchable-select");f.setAttribute("aria-selected","true")}function c(a){var c=this.triggers,a=e.indexOf(a,c);b.call(this,
0==a?c.length-1:a-1,!0)}function n(a){var c=this.triggers,a=e.indexOf(a,c);b.call(this,a==c.length-1?0:a+1,!0)}function f(a){var c=!(!a.originalEvent.target&&!a.originalEvent.srcElement),a=a.currentIndex,f=this.panels,d=this.triggers,n=d[a],j=f[a];this.config.multiple||(e.each(f,function(a){a!==j&&a.setAttribute("aria-hidden","true")}),e.each(d,function(a){a!==n&&a.setAttribute("aria-hidden","true")}));f=j.getAttribute("aria-hidden");j.setAttribute("aria-hidden","false"==f?"true":"false");n.setAttribute("aria-expanded",
"false"==f?"false":"true");b.call(this,a,c)}var u=33,t=34,s=35,o=36,r=37,q=38,y=39,A=40,v=9,p=32,x=13;e.mix(l.Config,{aria:!0});l.Plugins.push({name:"aria",init:function(b){if(b.config.aria){var c=b.container,n=b.activeIndex;d.attr(c,"aria-multiselectable",b.config.multiple?"true":"false");b.nav&&d.attr(b.nav,"role","tablist");var j=b.triggers,q=b.panels,p=0;e.each(q,function(a){a.id||(a.id=e.guid("ks-accordion-tab-panel"))});e.each(j,function(a){a.id||(a.id=e.guid("ks-accordion-tab"))});e.each(j,
function(a){a.setAttribute("role","tab");a.setAttribute("aria-expanded",n==p?"true":"false");a.setAttribute("aria-selected",n==p?"true":"false");a.setAttribute("aria-controls",q[p].id);w(a,n==p?"0":"-1");p++});p=0;e.each(q,function(a){var b=j[p];a.setAttribute("role","tabpanel");a.setAttribute("aria-hidden",n==p?"false":"true");a.setAttribute("aria-labelledby",b.id);p++});b.on("switch",f,b);h.on(c,"keydown",a,b);h.on(c,"keypress",k,b)}}});var w=i.setTabIndex},{requires:["dom","event","../aria","./base"]});
KISSY.add("switchable/accordion/base",function(e,d,h){function i(d,e){if(!(this instanceof i))return new i(d,e);i.superclass.constructor.apply(this,arguments)}e.extend(i,h,{_switchTrigger:function(e,g){var h=this.config;h.multiple?d.toggleClass(g,h.activeTriggerCls):i.superclass._switchTrigger.apply(this,arguments)},_triggerIsValid:function(d){return this.config.multiple||i.superclass._triggerIsValid.call(this,d)},_switchView:function(e,g,h){var j=this.config,k=this._getFromToPanels().toPanels;j.multiple?
(d.toggle(k),this._fireOnSwitch(g),h&&h.call(this)):i.superclass._switchView.apply(this,arguments)}});i.Plugins=[];i.Config={markupType:1,triggerType:"click",multiple:!1};return i},{requires:["dom","../base"]});
KISSY.add("switchable/aria",function(e,d,h,i){function l(){this.stop&&this.stop()}function g(){this.start&&this.start()}i.Plugins.push({name:"aria",init:function(d){if(d.config.aria){var e=d.container;h.on(e,"focusin",l,d);h.on(e,"focusout",g,d)}}});var m=["a","input","button","object"];return{setTabIndex:function(j,k){j.tabIndex=k;e.each(d.query("*",j),function(a){var b=a.nodeName.toLowerCase();e.inArray(b,m)&&(d.hasAttr(a,"oriTabIndex")||d.attr(a,"oriTabIndex",a.tabIndex),a.tabIndex=-1!=k?d.attr(a,
"oriTabIndex"):k)})}}},{requires:["dom","event","./base"]});
KISSY.add("switchable/autoplay",function(e,d,h,i,l){var g=e.Env.host,m=function(j){var e=d.scrollTop(),a=d.viewportHeight(),b=d.offset(j),j=d.height(j);return b.top>e&&b.top+j<e+a};e.mix(i.Config,{pauseOnScroll:!1,autoplay:!1,interval:5,pauseOnHover:!0});i.Plugins.push({name:"autoplay",init:function(d){function k(){c=e.later(function(){d.paused||d.next()},b,!0)}var a=d.config,b=1E3*a.interval,c;if(a.autoplay&&(a.pauseOnScroll&&(d.__scrollDetect=e.buffer(function(){d[m(d.container)?"start":"stop"]()},
200),h.on(g,"scroll",d.__scrollDetect)),k(),d.stop=function(){if(c){c.cancel();c=l}d.paused=true},d.start=function(){if(c){c.cancel();c=l}d.paused=false;k()},a.pauseOnHover))h.on(d.container,"mouseenter",d.stop,d),h.on(d.container,"mouseleave",d.start,d)},destroy:function(d){d.__scrollDetect&&h.remove(g,"scroll",d.__scrollDetect)}});return i},{requires:["dom","event","./base"]});
KISSY.add("switchable/autorender",function(e,d,h,i){i.autoRender=function(l,g){e.each(d.query("."+(l||"KS_Widget"),g),function(d){var e=d.getAttribute("data-widget-type"),k;if(e&&-1<"Switchable Tabs Slide Carousel Accordion".indexOf(e))try{(k=d.getAttribute("data-widget-config"))&&(k=k.replace(/'/g,'"')),new ("Switchable"==e?i:i[e])(d,h.parse(k))}catch(a){}})}},{requires:["dom","json","./base"]});
KISSY.add("switchable/base",function(e,d,h,i){function l(a,b){b=b||{};"markupType"in b||(b.panelCls?b.markupType=1:b.panels&&(b.markupType=2));for(var c=this.constructor;c;)b=e.merge(c.Config,b),c=c.superclass?c.superclass.constructor:null;this.container=d.get(a);this.config=b;this.activeIndex=b.activeIndex;var n;-1<this.activeIndex||("number"==typeof b.switchTo?n=b.switchTo:this.activeIndex=0);this._init();this._initPlugins();this.fire(j);n!==i&&this.switchTo(n)}function g(a){var b={};b.type=a.type;
b.target=a.target;return{originalEvent:b}}var m=e.makeArray,h=h.Target,j="init",k="remove";l.getDomEvent=g;l.Config={markupType:0,navCls:"ks-switchable-nav",contentCls:"ks-switchable-content",triggerCls:"ks-switchable-trigger",panelCls:"ks-switchable-panel",triggers:[],panels:[],hasTriggers:!0,triggerType:"mouse",delay:0.1,activeIndex:-1,activeTriggerCls:"ks-active",switchTo:i,steps:1,viewSize:[]};l.Plugins=[];e.augment(l,h,{_initPlugins:function(){for(var a=this,b=[],c=a.constructor;c;)b.push.apply(b,
c.Plugins.reverse()),c=c.superclass?c.superclass.constructor:null;b.reverse();e.each(b,function(b){b.init&&b.init(a)})},_init:function(){var a=this.config;this._parseMarkup();a.hasTriggers&&this._bindTriggers();this._bindPanels()},_parseMarkup:function(){var a=this.container,b=this.config,c,n,f=[],e=[];switch(b.markupType){case 0:(c=d.get("."+b.navCls,a))&&(f=d.children(c));n=d.get("."+b.contentCls,a);e=d.children(n);break;case 1:f=d.query("."+b.triggerCls,a);e=d.query("."+b.panelCls,a);break;case 2:f=
b.triggers,e=b.panels}this.length=Math.ceil(e.length/b.steps);this.nav=c||b.hasTriggers&&f[0]&&f[0].parentNode;if(b.hasTriggers&&(!this.nav||0==f.length))f=this._generateTriggersMarkup(this.length);this.triggers=m(f);this.panels=m(e);this.content=n||e[0].parentNode},_generateTriggersMarkup:function(a){var b=this.config,c=this.nav||d.create("<ul>"),e,f;c.className=b.navCls;for(f=0;f<a;f++)e=d.create("<li>"),f===this.activeIndex&&(e.className=b.activeTriggerCls),e.innerHTML=f+1,c.appendChild(e);this.container.appendChild(c);
this.nav=c;return d.children(c)},_bindTriggers:function(){var a=this,b=a.config,c=e.one(a.nav);e.each(a.triggers,function(b){a._initTrigger(b)});c.delegate("click",".ks-switchable-trigger-internal",function(b){var c=a._getTriggerIndex(b.currentTarget);a._onFocusTrigger(c,b)});"mouse"===b.triggerType&&c.delegate("mouseenter",".ks-switchable-trigger-internal",function(b){var c=a._getTriggerIndex(b.currentTarget);a._onMouseEnterTrigger(c,b)}).delegate("mouseleave",".ks-switchable-trigger-internal",function(){a._onMouseLeaveTrigger()})},
_initTrigger:function(a){d.addClass(a,"ks-switchable-trigger-internal")},_bindPanels:function(){var a=this;e.each(a.panels,function(b){a._initPanel(b)})},_initPanel:function(a){d.addClass(a,"ks-switchable-panel-internal")},_onFocusTrigger:function(a,b){this._triggerIsValid(a)&&(this._cancelSwitchTimer(),this.switchTo(a,i,g(b)))},_onMouseEnterTrigger:function(a,b){var c=this;if(c._triggerIsValid(a)){var d=g(b);c.switchTimer=e.later(function(){c.switchTo(a,i,d)},1E3*c.config.delay)}},_onMouseLeaveTrigger:function(){this._cancelSwitchTimer()},
_triggerIsValid:function(a){return this.activeIndex!==a},_cancelSwitchTimer:function(){this.switchTimer&&(this.switchTimer.cancel(),this.switchTimer=i)},_getTriggerIndex:function(a){return e.indexOf(a,this.triggers)},_resetLength:function(){this.length=this._getLength()},_getLength:function(a){var b=this.config;a===i&&(a=this.panels.length);return Math.ceil(a/b.steps)},_afterAdd:function(a,b){this._resetLength();var c=this._getLength(a+1)-1;1==this.config.steps&&this.activeIndex>=c&&(this.activeIndex+=
1);var d=this.activeIndex;this.activeIndex=-1;this.switchTo(d);b&&this.switchTo(c)},add:function(a){var b=this.nav,c=this.content,e=a.trigger,f=a.panel,j=a.active,k=this.panels.length,a=null!=a.index?a.index:k,g=this.triggers,i=this.panels,h=this.length,q=null,q=null,a=Math.max(0,Math.min(a,k)),k=i[a]||null;i.splice(a,0,f);c.insertBefore(f,k);1==this.config.steps?(q=g[a],b.insertBefore(e,q),g.splice(a,0,e)):(q=this._getLength(),q!=h&&(d.append(e,b),g.push(e)));this._initPanel(f);this._initTrigger(e);
this.fire("add",{index:a,trigger:e,panel:f});this._afterAdd(a,j)},remove:function(a){function b(){l&&(d.remove(l),g.splice(a,1));if(o){d.remove(o);for(var b=0;b<h.length;b++)if(h[b]==o){c.triggers.splice(b,1);break}}c._resetLength();c.fire(k,{index:a,trigger:o,panel:l})}var c=this,n=c.config.steps,f=c.length,g=c.panels,j=c._getLength(g.length-1),h=c.triggers,o=null,l=null,a=e.isNumber(a)?Math.max(0,Math.min(a,g.length-1)):e.indexOf(a,g),o=1==n?h[a]:j!==f?h[f-1]:null,l=g[a];!1!==c.fire("beforeRemove",
{index:a,panel:l,trigger:o})&&(0==j?b():(f=c.activeIndex,1<n?f>=j?c.switchTo(j-1,i,i,b):(b(),c.activeIndex=-1,c.switchTo(f)):f==a?c.switchTo(0<f?f-1:f+1,i,i,b):(f>a&&(f--,c.activeIndex=f),b())))},switchTo:function(a,b,c,d){var f=this,e=f.config,g=f.activeIndex,j=f.triggers;if(!f._triggerIsValid(a)||!1===f.fire("beforeSwitch",{fromIndex:g,toIndex:a}))return f;f.fromIndex=g;e.hasTriggers&&f._switchTrigger(j[g]||null,j[a]);b===i&&(b=a>g?"forward":"backward");f.activeIndex=a;f._switchView(b,c,function(){d&&
d.call(f)});return f},_switchTrigger:function(a,b){var c=this.config.activeTriggerCls;a&&d.removeClass(a,c);d.addClass(b,c)},_getFromToPanels:function(){var a=this.fromIndex,b;b=this.config.steps;var c=this.panels,d=this.activeIndex,a=-1<a?c.slice(a*b,(a+1)*b):null;b=c.slice(d*b,(d+1)*b);return{fromPanels:a,toPanels:b}},_switchView:function(a,b,c){var e=this,f=e._getFromToPanels(),a=f.fromPanels,f=f.toPanels;a&&d.css(a,"display","none");d.css(f,"display","block");setTimeout(function(){e._fireOnSwitch(b)},
0);c&&c.call(this)},_fireOnSwitch:function(a){this.fire("switch",e.merge(a,{fromIndex:this.fromIndex,currentIndex:this.activeIndex}))},prev:function(a){this.switchTo((this.activeIndex-1+this.length)%this.length,"backward",a)},next:function(a){this.switchTo((this.activeIndex+1)%this.length,"forward",a)},destroy:function(){for(var a=this,b=a.constructor;b;)e.each(b.Plugins,function(b){b.destroy&&b.destroy(a)}),b=b.superclass?b.superclass.constructor:null;d.remove(a.container);a.nav=null;a.content=null;
a.container=null;a.triggers=[];a.panels=[];a.detach()}});return l},{requires:["dom","event"]});
KISSY.add("switchable/carousel/aria",function(e,d,h,i,l){function g(a){var b=a.currentIndex,d=this.activeIndex,c=this.panels,f=c[b*this.config.steps],g=this.triggers,b=g[b];if((a=!(!a.originalEvent.target&&!a.originalEvent.srcElement))||-1==d)e.each(g,function(a){o(a,-1)}),e.each(c,function(a){o(a,-1)}),b&&o(b,0),o(f,0),a&&f.focus()}function m(a){var b=null;e.each(this.triggers,function(c){if(c==a||d.contains(c,a))return b=c,!1});return b}function j(a){var b=a.target;switch(a.keyCode){case u:case f:if(b=
m.call(this,b)){var p=d.next(b),g=this.triggers;p||(p=g[0]);o(b,-1);p&&(o(p,0),p.focus());a.halt()}break;case n:case c:if(b=m.call(this,b))p=d.prev(b),g=this.triggers,p||(p=g[g.length-1]),o(b,-1),p&&(o(p,0),p.focus()),a.halt();break;case s:case t:if(b=m.call(this,b))this.switchTo(e.indexOf(b,this.triggers),void 0,r),a.halt()}}function k(a){var b=null;e.each(this.panels,function(c){if(c==a||d.contains(c,a))return b=c,!1});return b}function a(a,b){var c=e.indexOf(a,this.panels),d=this.config.steps,
f=Math.floor(c/d);return f==this.activeIndex?1:0==c%d||c%d==d-1?(this.switchTo(f,b,r),0):1}function b(b){var e=b.target;switch(b.keyCode){case u:case f:if(e=k.call(this,e)){var g=d.next(e),j=this.panels;g||(g=j[0]);o(e,-1);o(g,0);a.call(this,g,q)&&g.focus();b.halt()}break;case n:case c:if(e=k.call(this,e))g=d.prev(e),j=this.panels,g||(g=j[j.length-1]),o(e,-1),o(g,0),a.call(this,g,y)&&g.focus(),b.halt();break;case s:case t:if(e=k.call(this,e))this.fire("itemSelected",{item:e}),b.halt()}}var c=37,n=
38,f=39,u=40,t=32,s=13,o=i.setTabIndex,r={originalEvent:{target:1}},q="forward",y="backward";e.mix(l.Config,{aria:!1});l.Plugins.push({name:"aria",init:function(a){if(a.config.aria){var c=a.triggers,d=a.panels,f=a.content,q=a.activeIndex;f.id||(f.id=e.guid("ks-switchbale-content"));f.setAttribute("role","listbox");var k=0;e.each(c,function(a){o(a,q==k?"0":"-1");a.setAttribute("role","button");a.setAttribute("aria-controls",f.id);k++});k=0;e.each(d,function(a){o(a,"-1");a.setAttribute("role","option");
k++});a.on("switch",g,a);if(c=a.nav)h.on(c,"keydown",j,a);h.on(f,"keydown",b,a);c=a.prevBtn;d=a.nextBtn;c&&(o(c,0),c.setAttribute("role","button"),h.on(c,"keydown",function(b){if(b.keyCode==s||b.keyCode==t){a.prev(r);b.preventDefault()}}));d&&(o(d,0),d.setAttribute("role","button"),h.on(d,"keydown",function(b){if(b.keyCode==s||b.keyCode==t){a.next(r);b.preventDefault()}}))}}})},{requires:["dom","event","../aria","./base"]});
KISSY.add("switchable/carousel/base",function(e,d,h,i){function l(d,a){if(!(this instanceof l))return new l(d,a);l.superclass.constructor.apply(this,arguments)}var g="prevBtn",m="nextBtn",j={originalEvent:{target:1}};l.Config={circular:!0,prevBtnCls:"ks-switchable-prev-btn",nextBtnCls:"ks-switchable-next-btn",disableBtnCls:"ks-switchable-disable-btn"};l.Plugins=[];e.extend(l,i,{_init:function(){function k(b){d.removeClass([a[g],a[m]],c);0==b&&d.addClass(a[g],c);b==a.length-1&&d.addClass(a[m],c)}var a=
this;l.superclass._init.call(a);var b=a.config,c=b.disableBtnCls;e.each(["prev","next"],function(c){var f=a[c+"Btn"]=d.get("."+b[c+"BtnCls"],a.container);h.on(f,"mousedown",function(d){d.preventDefault();d=a.activeIndex;if("prev"==c&&(0!=d||b.circular))a[c](j);if("next"==c&&(d!=a.length-1||b.circular))a[c](j)})});b.circular||(a.on("added removed",function(){k(a.activeIndex)}),a.on("switch",function(a){k(a.currentIndex)}));h.delegate(a.content,"click",".ks-switchable-panel-internal",function(b){a.fire("itemSelected",
{item:b.currentTarget})})}});return l},{requires:["dom","event","../base"]});
KISSY.add("switchable/circular",function(e,d,h,i){function l(c,e){var j=this,k=j.fromIndex,q=j.config,i=j.length,l=q.scrollType===u,v=l?a:b,p=j.activeIndex,x=j.viewSize[l?0:1],l=-x*p,w=j.panels,D=j.config.steps,B={},C,z=e===f;C=z&&0===k&&p===i-1||!z&&k===i-1&&0===p;j.anim&&(j.anim.stop(),"relative"==w[k*D].style.position&&m.call(j,w,k,v,x,1));C&&(l=g.call(j,w,z,v,x));B[v]=l+n;-1<k?j.anim=(new h(j.content,B,q.duration,q.easing,function(){C&&m.call(j,w,z,v,x,1);j.anim=void 0;c&&c()})).run():(d.css(j.content,
B),c&&c())}function g(a,b,c,f){var e=this.config.steps,g=this.length,i=b?g-1:0,a=a.slice(i*e,(i+1)*e);d.css(a,j,k);d.css(a,c,(b?-1:1)*f*g);return b?f:-f*g}function m(a,b,f,e,g){var k=this.config.steps,i=this.length,h=b?i-1:0,a=a.slice(h*k,(h+1)*k);d.css(a,j,c);d.css(a,f,c);g&&d.css(this.content,f,b?-e*(i-1):c)}var j="position",k="relative",a="left",b="top",c="",n="px",f="backward",u="scrollx";e.mix(i.Config,{circular:!1});i.adjustPosition=g;i.resetPosition=m;i.Plugins.push({name:"circular",init:function(a){a=
a.config;if(a.circular&&(a.effect===u||"scrolly"===a.effect))a.scrollType=a.effect,a.effect=l}})},{requires:["dom","anim","./base","./effect"]});
KISSY.add("switchable/effect",function(e,d,h,i,l,g){var m;e.mix(l.Config,{effect:"none",duration:0.5,easing:"easeNone"});l.Effects={none:function(e){var g=this._getFromToPanels(),a=g.fromPanels,g=g.toPanels;a&&d.css(a,"display","none");d.css(g,"display","block");e&&e()},fade:function(e){var k=this,a=k._getFromToPanels(),b=a.fromPanels,c=k.config,h=b?b[0]:null,f=a.toPanels[0];k.anim&&(k.anim.stop(),d.css(k.anim.fromEl,{zIndex:1,opacity:0}),d.css(k.anim.toEl,"zIndex",9));d.css(f,"opacity",1);h?(k.anim=
(new i(h,{opacity:0},c.duration,c.easing,function(){k.anim=g;d.css(f,"z-index",9);d.css(h,"z-index",1);e&&e()})).run(),k.anim.toEl=f,k.anim.fromEl=h):(d.css(f,"z-index",9),e&&e())},scroll:function(e,k){var a=this,b=a.fromIndex,c=a.config,h="scrollx"===c.effect,f={};f[h?"left":"top"]=-(a.viewSize[h?0:1]*a.activeIndex)+"px";a.anim&&a.anim.stop();k||-1<b?a.anim=(new i(a.content,f,c.duration,c.easing,function(){a.anim=g;e&&e()})).run():(d.css(a.content,f),e&&e())}};m=l.Effects;m.scrollx=m.scrolly=m.scroll;
l.Plugins.push({name:"effect",init:function(g){var h=g.config,a=h.effect,b=g.panels,c=g.content,i=h.steps,f=b[0],l=g.activeIndex;if("none"!==a)switch(d.css(b,"display","block"),a){case "scrollx":case "scrolly":d.css(c,"position","absolute");"static"==d.css(c.parentNode,"position")&&d.css(c.parentNode,"position","relative");"scrollx"===a&&(d.css(b,"float","left"),d.width(c,"9999px"));g.viewSize=[h.viewSize[0]||f&&f.offsetWidth*i,h.viewSize[1]||f&&f.offsetHeight*i];break;case "fade":var m=l*i,s=m+i-
1,o;e.each(b,function(a,b){o=b>=m&&b<=s;d.css(a,{opacity:o?1:0,position:"absolute",zIndex:o?9:1})})}}});e.augment(l,{_switchView:function(d,g,a){var b=this,c=b.config.effect;(e.isFunction(c)?c:m[c]).call(b,function(){b._fireOnSwitch(g);a&&a.call(b)},d)}});return l},{requires:["dom","event","anim","./base"]});
KISSY.add("switchable/lazyload",function(e,d,h){var i="beforeSwitch",l="img",g="textarea",m={};m[l]="lazyImgAttribute";m[g]="lazyTextareaClass";e.mix(h.Config,{lazyImgAttribute:"data-ks-lazyload-custom",lazyTextareaClass:"ks-datalazyload-custom",lazyDataType:g});h.Plugins.push({name:"lazyload",init:function(h){function k(e){var m=b.steps,e=e.toIndex*m;a.loadCustomLazyData(h.panels.slice(e,e+m),c,n);a:{var t,s,o;if(e=(m=c===l)?"img":c===g?"textarea":""){e=d.query(e,h.container);t=0;for(o=e.length;t<
o;t++)if(s=e[t],m?d.attr(s,n):d.hasClass(s,n)){m=!1;break a}}m=!0}m&&h.detach(i,k)}var a=e.require("datalazyload"),b=h.config,c,n;"img-src"===b.lazyDataType&&(b.lazyDataType=l);"area-data"===b.lazyDataType&&(b.lazyDataType=g);c=b.lazyDataType;n=b[m[c]];if(a&&c&&n)h.on(i,k)}});return h},{requires:["dom","./base"]});
KISSY.add("switchable/slide/base",function(e,d){function h(d,e){if(!(this instanceof h))return new h(d,e);h.superclass.constructor.apply(this,arguments)}h.Config={autoplay:!0,circular:!0};h.Plugins=[];e.extend(h,d);return h},{requires:["../base"]});KISSY.add("switchable",function(e,d,h,i,l,g,m,j,k,a,b,c,n,f){e.mix(d,{Accordion:i,Carousel:j,Slide:n,Tabs:f,Aria:h});return d},{requires:"switchable/base,switchable/aria,switchable/accordion/base,switchable/accordion/aria,switchable/autoplay,switchable/autorender,switchable/carousel/base,switchable/carousel/aria,switchable/circular,switchable/effect,switchable/lazyload,switchable/slide/base,switchable/tabs/base,switchable/tabs/aria".split(",")});
KISSY.add("switchable/tabs/aria",function(e,d,h,i,l,g){function m(a){var b=null;e.each(this.triggers,function(c){if(c==a||d.contains(c,a))b=c});return b}function j(a){switch(a.keyCode){case b:case c:a.ctrlKey&&!a.altKey&&!a.shiftKey&&a.halt();break;case s:a.ctrlKey&&!a.altKey&&a.halt()}}function k(a){var d=a.target,e=a.ctrlKey&&!a.shiftKey&&!a.altKey;switch(a.keyCode){case n:case f:m.call(this,d)&&(this.prev(r(a)),a.halt());break;case u:case t:m.call(this,d)&&(this.next(r(a)),a.halt());break;case c:e&&
(a.halt(),this.next(r(a)));break;case b:e&&(a.halt(),this.prev(r(a)));break;case s:a.ctrlKey&&!a.altKey&&(a.halt(),a.shiftKey?this.prev(r(a)):this.next(r(a)))}}function a(a){var b=!(!a.originalEvent.target&&!a.originalEvent.srcElement),c=a.fromIndex,d=a.currentIndex;if(c!=d){var a=this.triggers[c],e=this.triggers[d],c=this.panels[c],d=this.panels[d];a&&o(a,"-1");o(e,"0");b&&e.focus();c&&c.setAttribute("aria-hidden","true");d.setAttribute("aria-hidden","false")}}var b=33,c=34,n=37,f=38,u=39,t=40,s=
9;e.mix(g.Config,{aria:!0});g.Plugins.push({name:"aria",init:function(b){function c(a){a.setAttribute("role","tab");o(a,"-1");a.id||(a.id=e.guid("ks-switchable"))}function f(a,b){a.setAttribute("role","tabpanel");a.setAttribute("aria-hidden","true");a.setAttribute("aria-labelledby",b.id)}if(b.config.aria){var g=b.triggers,i=b.activeIndex,l=b.panels,m=b.container;b.nav&&d.attr(b.nav,"role","tablist");var n=0;e.each(g,c);b.on("added",function(a){var b;c(b=a.trigger);f(a.panel,b)});n=0;e.each(l,function(a){f(a,
g[n]);n++});-1<i&&(o(g[i],"0"),l[i].setAttribute("aria-hidden","false"));b.on("switch",a,b);h.on(m,"keydown",k,b);h.on(m,"keypress",j,b)}}});var o=l.setTabIndex,r=i.getDomEvent},{requires:["dom","event","../base","../aria","./base"]});KISSY.add("switchable/tabs/base",function(e,d){function h(d,e){if(!(this instanceof h))return new h(d,e);h.superclass.constructor.call(this,d,e);return 0}e.extend(h,d);h.Config={};h.Plugins=[];return h},{requires:["../base"]});
KISSY.add("switchable/touch",function(e,d,h,i,l){e.mix(i.Config,{mouseAsTouch:!1});i.Plugins.push({name:"touch",init:function(g){var m=g.config,j=m.scrollType||m.effect;if("scrolly"==j||"scrollx"==j){var k=g.content,a=g.container,b,c=m.mouseAsTouch,n,f=0,u=0,t={},s={},o="left",r,q;"scrolly"==j&&(o="top");var y=function(){if("relative"!=g.panels[g.activeIndex].style.position){g.stop&&g.stop();u=1;t=d.offset(k);var b=d.offset(a);b.bottom=b.top+a.offsetHeight;b.right=b.left+a.offsetWidth;s=b}},A=function(a){if(u){var c=
-1!=a.type.indexOf("touch")?a.originalEvent.changedTouches[0]:a,e={};"scrolly"==j?(q=g.viewSize[1],r=c.pageY-n,e.top=t.top+r,c=c.pageY>=s.top&&c.pageY<=s.bottom):(q=g.viewSize[0],r=c.pageX-b,e.left=t.left+r,c=c.pageX>=s.left&&c.pageX<=s.right);if(f||3<Math.abs(r))(-1!=a.type.indexOf("touch")&&a.preventDefault(),g.anim&&(g.anim.stop(),g.anim=l),c)?(f||(f=1,m.circular&&(a=g.activeIndex,a==g.length-1?i.adjustPosition.call(g,g.panels,!1,o,q):0==a&&i.adjustPosition.call(g,g.panels,!0,o,q))),d.offset(k,
e)):v()}},v=function(){if(f){u=f=0;var a=g.activeIndex,b=g.length-1;!m.circular&&(0>r&&a==b||0<r&&0==a)?i.Effects[j].call(g,l,!0):(0>r&&a==b||0<r&&0==a||(0==a||a==b)&&i.resetPosition.call(g,g.panels,0==a,o,q),g[0>r?"next":"prev"](),g.start&&g.start())}};h.on(k,"touchstart",function(a){y();b=a.pageX;n=a.pageY});h.on(k,"touchmove",A);h.on(k,"touchend",v);c&&!("ontouchstart"in e.Env.host.document.documentElement)&&e.use("dd",function(a,c){var d=new c.Draggable({node:k});d.on("dragstart",function(){y();
b=d.startMousePos.left;n=d.startMousePos.top});d.on("drag",A);d.on("dragend",v);g.__touchDD=d})}},destroy:function(d){var e;(e=d.__touchDD)&&e.destroy()}})},{requires:["dom","event","./base"]});
