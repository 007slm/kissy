/*
Copyright 2012, KISSY UI Library v1.30dev
MIT Licensed
build time: May 17 18:33
*/
KISSY.add("switchable/accordion/aria",function(d,c,f,h,l){function j(a){var b=null;d.each(this.triggers,function(i){if(i==a||c.contains(i,a))b=i});return b}function m(a){var b;d.each(this.panels,function(i){if(i==a||c.contains(i,a))b=i});return b}function e(a){var b=j.call(this,a);b||(a=m.call(this,a),b=this.triggers[d.indexOf(a,this.panels)]);return b}function o(a){switch(a.keyCode){case v:case u:a.ctrlKey&&!a.altKey&&!a.shiftKey&&a.halt();break;case x:a.ctrlKey&&!a.altKey&&a.halt()}}function k(g){var c=
g.target,k=this.triggers,o=!g.ctrlKey&&!g.shiftKey&&!g.altKey,h=g.ctrlKey&&!g.shiftKey&&!g.altKey;switch(g.keyCode){case y:case q:if((c=j.call(this,c))&&o)this.switchTo(d.indexOf(c,this.triggers)),g.halt();break;case s:case r:if(c=j.call(this,c))b.call(this,c),g.halt();break;case z:case p:if(c=j.call(this,c))i.call(this,c),g.halt();break;case u:h&&(g.halt(),c=e.call(this,c),i.call(this,c));break;case v:h&&(g.halt(),c=e.call(this,c),b.call(this,c));break;case n:o&&(e.call(this,c),a.call(this,0,!0),
g.halt());break;case t:o&&(e.call(this,c),a.call(this,k.length-1,!0),g.halt());break;case x:g.ctrlKey&&!g.altKey&&(g.halt(),c=e.call(this,c),g.shiftKey?b.call(this,c):i.call(this,c))}}function a(a,b){var g=this.triggers,i=g[a];d.each(g,function(a){a!==i&&(w(a,"-1"),c.removeClass(a,"ks-switchable-select"),a.setAttribute("aria-selected","false"))});b&&i.focus();w(i,"0");c.addClass(i,"ks-switchable-select");i.setAttribute("aria-selected","true")}function b(b){var g=this.triggers,b=d.indexOf(b,g);a.call(this,
0==b?g.length-1:b-1,!0)}function i(b){var g=this.triggers,b=d.indexOf(b,g);a.call(this,b==g.length-1?0:b+1,!0)}function g(b){var g=!(!b.originalEvent.target&&!b.originalEvent.srcElement),b=b.currentIndex,i=this.panels,c=this.triggers,e=c[b],p=i[b];this.config.multiple||(d.each(i,function(a){a!==p&&a.setAttribute("aria-hidden","true")}),d.each(c,function(a){a!==e&&a.setAttribute("aria-hidden","true")}));i=p.getAttribute("aria-hidden");p.setAttribute("aria-hidden","false"==i?"true":"false");e.setAttribute("aria-expanded",
"false"==i?"false":"true");a.call(this,b,g)}var v=33,u=34,t=35,n=36,s=37,r=38,z=39,p=40,x=9,q=32,y=13;d.mix(l.Config,{aria:!0});l.Plugins.push({name:"aria",init:function(a){if(a.config.aria){var b=a.container,i=a.activeIndex;c.attr(b,"aria-multiselectable",a.config.multiple?"true":"false");a.nav&&c.attr(a.nav,"role","tablist");var e=a.triggers,p=a.panels,q=0;d.each(p,function(a){a.id||(a.id=d.guid("ks-accordion-tab-panel"))});d.each(e,function(a){a.id||(a.id=d.guid("ks-accordion-tab"))});d.each(e,
function(a){a.setAttribute("role","tab");a.setAttribute("aria-expanded",i==q?"true":"false");a.setAttribute("aria-selected",i==q?"true":"false");a.setAttribute("aria-controls",p[q].id);w(a,i==q?"0":"-1");q++});q=0;d.each(p,function(a){var b=e[q];a.setAttribute("role","tabpanel");a.setAttribute("aria-hidden",i==q?"false":"true");a.setAttribute("aria-labelledby",b.id);q++});a.on("switch",g,a);f.on(b,"keydown",k,a);f.on(b,"keypress",o,a)}}});var w=h.setTabIndex},{requires:["dom","event","../aria","./base"]});
KISSY.add("switchable/accordion/base",function(d,c,f){function h(c,d){if(!(this instanceof h))return new h(c,d);h.superclass.constructor.apply(this,arguments)}d.extend(h,f,{_switchTrigger:function(d,j){var f=this.config;f.multiple?c.toggleClass(j,f.activeTriggerCls):h.superclass._switchTrigger.apply(this,arguments)},_triggerIsValid:function(c){return this.config.multiple||h.superclass._triggerIsValid.call(this,c)},_switchView:function(d,j,f){var e=this.config,o=this._getFromToPanels().toPanels;e.multiple?
(c.toggle(o),this._fireOnSwitch(j),f&&f.call(this)):h.superclass._switchView.apply(this,arguments)}});h.Plugins=[];h.Config={markupType:1,triggerType:"click",multiple:!1};return h},{requires:["dom","../base"]});
KISSY.add("switchable/aria",function(d,c,f,h){function l(){this.stop&&this.stop()}function j(){this.start&&this.start()}h.Plugins.push({name:"aria",init:function(c){if(c.config.aria){var d=c.container;f.on(d,"focusin",l,c);f.on(d,"focusout",j,c)}}});var m=["a","input","button","object"];return{setTabIndex:function(e,o){e.tabIndex=o;d.each(c.query("*",e),function(e){var a=e.nodeName.toLowerCase();d.inArray(a,m)&&(c.hasAttr(e,"oriTabIndex")||c.attr(e,"oriTabIndex",e.tabIndex),e.tabIndex=-1!=o?c.attr(e,
"oriTabIndex"):o)})}}},{requires:["dom","event","./base"]});
KISSY.add("switchable/autoplay",function(d,c,f,h,l){var j=d.Env.host,m=function(e){var d=c.scrollTop(),k=c.viewportHeight(),a=c.offset(e),e=c.height(e);return a.top>d&&a.top+e<d+k};d.mix(h.Config,{pauseOnScroll:!1,autoplay:!1,interval:5,pauseOnHover:!0});h.Plugins.push({name:"autoplay",init:function(c){function h(){b=d.later(function(){c.paused||c.next()},a,!0)}var k=c.config,a=1E3*k.interval,b;if(k.autoplay&&(k.pauseOnScroll&&(c.__scrollDetect=d.buffer(function(){c[m(c.container)?"start":"stop"]()},
200),f.on(j,"scroll",c.__scrollDetect)),h(),c.stop=function(){if(b){b.cancel();b=l}c.paused=true},c.start=function(){if(b){b.cancel();b=l}c.paused=false;h()},k.pauseOnHover))f.on(c.container,"mouseenter",c.stop,c),f.on(c.container,"mouseleave",c.start,c)},destroy:function(c){c.__scrollDetect&&f.remove(j,"scroll",c.__scrollDetect)}});return h},{requires:["dom","event","./base"]});
KISSY.add("switchable/autorender",function(d,c,f,h){h.autoRender=function(l,j){d.each(c.query("."+(l||"KS_Widget"),j),function(c){var d=c.getAttribute("data-widget-type"),j;if(d&&-1<"Switchable Tabs Slide Carousel Accordion".indexOf(d))try{(j=c.getAttribute("data-widget-config"))&&(j=j.replace(/'/g,'"')),new ("Switchable"==d?h:h[d])(c,f.parse(j))}catch(k){}})}},{requires:["dom","json","./base"]});
KISSY.add("switchable/base",function(d,c,f,h){function l(a,b){b=b||{};"markupType"in b||(b.panelCls?b.markupType=1:b.panels&&(b.markupType=2));for(var i=this.constructor;i;)b=d.merge(i.Config,b),i=i.superclass?i.superclass.constructor:null;this.container=c.get(a);this.config=b;this.activeIndex=b.activeIndex;var g;-1<this.activeIndex||("number"==typeof b.switchTo?g=b.switchTo:this.activeIndex=0);this._init();this._initPlugins();this.fire(o);g!==h&&this.switchTo(g)}function j(a){var b={};b.type=a.type;
b.target=a.target;return{originalEvent:b}}var m=d.makeArray,e=f.Target,o="init",k="remove";l.getDomEvent=j;l.Config={markupType:0,navCls:"ks-switchable-nav",contentCls:"ks-switchable-content",triggerCls:"ks-switchable-trigger",panelCls:"ks-switchable-panel",triggers:[],panels:[],hasTriggers:!0,triggerType:"mouse",delay:0.1,activeIndex:-1,activeTriggerCls:"ks-active",switchTo:h,steps:1,viewSize:[]};l.Plugins=[];d.augment(l,e,{_initPlugins:function(){for(var a=this,b=[],c=a.constructor;c;)b.push.apply(b,
c.Plugins.reverse()),c=c.superclass?c.superclass.constructor:null;b.reverse();d.each(b,function(b){b.init&&b.init(a)})},_init:function(){var a=this.config;this._parseMarkup();a.hasTriggers&&this._bindTriggers();this._bindPanels()},_parseMarkup:function(){var a=this.container,b=this.config,i,g,d=[],e=[];switch(b.markupType){case 0:(i=c.get("."+b.navCls,a))&&(d=c.children(i));g=c.get("."+b.contentCls,a);e=c.children(g);break;case 1:d=c.query("."+b.triggerCls,a);e=c.query("."+b.panelCls,a);break;case 2:d=
b.triggers,e=b.panels}this.length=Math.ceil(e.length/b.steps);this.nav=i||b.hasTriggers&&d[0]&&d[0].parentNode;if(b.hasTriggers&&(!this.nav||0==d.length))d=this._generateTriggersMarkup(this.length);this.triggers=m(d);this.panels=m(e);this.content=g||e[0].parentNode},_generateTriggersMarkup:function(a){var b=this.config,i=this.nav||c.create("<ul>"),g,d;i.className=b.navCls;for(d=0;d<a;d++)g=c.create("<li>"),d===this.activeIndex&&(g.className=b.activeTriggerCls),g.innerHTML=d+1,i.appendChild(g);this.container.appendChild(i);
this.nav=i;return c.children(i)},_bindTriggers:function(){var a=this,b=a.config,c=d.one(a.nav);d.each(a.triggers,function(b){a._initTrigger(b)});c.delegate("click",".ks-switchable-trigger-internal",function(b){var c=a._getTriggerIndex(b.currentTarget);a._onFocusTrigger(c,b)});"mouse"===b.triggerType&&c.delegate("mouseenter",".ks-switchable-trigger-internal",function(b){var c=a._getTriggerIndex(b.currentTarget);a._onMouseEnterTrigger(c,b)}).delegate("mouseleave",".ks-switchable-trigger-internal",function(){a._onMouseLeaveTrigger()})},
_initTrigger:function(a){c.addClass(a,"ks-switchable-trigger-internal")},_bindPanels:function(){var a=this;d.each(a.panels,function(b){a._initPanel(b)})},_initPanel:function(a){c.addClass(a,"ks-switchable-panel-internal")},_onFocusTrigger:function(a,b){this._triggerIsValid(a)&&(this._cancelSwitchTimer(),this.switchTo(a,h,j(b)))},_onMouseEnterTrigger:function(a,b){var c=this;if(c._triggerIsValid(a)){var g=j(b);c.switchTimer=d.later(function(){c.switchTo(a,h,g)},1E3*c.config.delay)}},_onMouseLeaveTrigger:function(){this._cancelSwitchTimer()},
_triggerIsValid:function(a){return this.activeIndex!==a},_cancelSwitchTimer:function(){this.switchTimer&&(this.switchTimer.cancel(),this.switchTimer=h)},_getTriggerIndex:function(a){return d.indexOf(a,this.triggers)},_resetLength:function(){this.length=this._getLength()},_getLength:function(a){var b=this.config;a===h&&(a=this.panels.length);return Math.ceil(a/b.steps)},_afterAdd:function(a,b,c){this._resetLength();a=this._getLength(a+1)-1;1==this.config.steps&&this.activeIndex>=a&&(this.activeIndex+=
1);var g=this.activeIndex;this.activeIndex=-1;this.switchTo(g);b?this.switchTo(a,h,h,c):c()},add:function(a){var b=a.callback||d.noop,i=this.nav,g=this.content,e=a.trigger,h=a.panel,j=a.active,k=this.panels.length,a=null!=a.index?a.index:k,f=this.triggers,r=this.panels,o=this.length,p=null,p=null,a=Math.max(0,Math.min(a,k)),k=r[a]||null;r.splice(a,0,h);g.insertBefore(h,k);1==this.config.steps?(p=f[a],i.insertBefore(e,p),f.splice(a,0,e)):(p=this._getLength(),p!=o&&(c.append(e,i),f.push(e)));this._initPanel(h);
this._initTrigger(e);this._afterAdd(a,j,b);this.fire("add",{index:a,trigger:e,panel:h})},remove:function(a){function b(){l&&(c.remove(l),n.splice(f,1));if(r){c.remove(r);for(var a=0;a<o.length;a++)if(o[a]==r){g.triggers.splice(a,1);break}}g._resetLength();g.fire(k,{index:f,trigger:r,panel:l})}var i=a.callback||d.noop,g=this,e=g.config.steps,j=g.length,f,n=g.panels;f="index"in a?a.index:a.panel;var a=g._getLength(n.length-1),o=g.triggers,r=null,l=null;if(n.length&&(f=d.isNumber(f)?Math.max(0,Math.min(f,
n.length-1)):d.indexOf(f,n),r=1==e?o[f]:a!==j?o[j-1]:null,l=n[f],!1!==g.fire("beforeRemove",{index:f,panel:l,trigger:r})))if(0==a)b(),i();else{var p=g.activeIndex;1<e?p==a?g.switchTo(p-1,h,h,function(){b();i()}):(b(),g.activeIndex=-1,g.switchTo(p,h,h,function(){i()})):p==f?g.switchTo(0<p?p-1:p+1,h,h,function(){b();0==p&&(g.activeIndex=0);i()}):(p>f&&(p--,g.activeIndex=p),b(),i())}},switchTo:function(a,b,c,g){var d=this,e=d.config,f=d.activeIndex,j=d.triggers;if(!d._triggerIsValid(a)||!1===d.fire("beforeSwitch",
{fromIndex:f,toIndex:a}))return d;d.fromIndex=f;e.hasTriggers&&d._switchTrigger(j[f]||null,j[a]);b===h&&(b=a>f?"forward":"backward");d.activeIndex=a;d._switchView(b,c,function(){g&&g.call(d)});return d},_switchTrigger:function(a,b){var d=this.config.activeTriggerCls;a&&c.removeClass(a,d);c.addClass(b,d)},_getFromToPanels:function(){var a=this.fromIndex,b;b=this.config.steps;var c=this.panels,d=this.activeIndex,a=-1<a?c.slice(a*b,(a+1)*b):null;b=c.slice(d*b,(d+1)*b);return{fromPanels:a,toPanels:b}},
_switchView:function(a,b,d){var g=this,e=g._getFromToPanels(),a=e.fromPanels,e=e.toPanels;a&&c.css(a,"display","none");c.css(e,"display","block");setTimeout(function(){g._fireOnSwitch(b)},0);d&&d.call(this)},_fireOnSwitch:function(a){this.fire("switch",d.merge(a,{fromIndex:this.fromIndex,currentIndex:this.activeIndex}))},prev:function(a){this.switchTo((this.activeIndex-1+this.length)%this.length,"backward",a)},next:function(a){this.switchTo((this.activeIndex+1)%this.length,"forward",a)},destroy:function(a){for(var b=
this,i=b.constructor;i;)d.each(i.Plugins,function(a){a.destroy&&a.destroy(b)}),i=i.superclass?i.superclass.constructor:null;a?f.remove(b.container):c.remove(b.container);b.nav=null;b.content=null;b.container=null;b.triggers=[];b.panels=[];b.detach()}});return l},{requires:["dom","event"]});
KISSY.add("switchable/carousel/aria",function(d,c,f,h,l){function j(a){var b=a.currentIndex,c=this.activeIndex,g=this.panels,i=g[b*this.config.steps],e=this.triggers,b=e[b];if((a=!(!a.originalEvent.target&&!a.originalEvent.srcElement))||-1==c)d.each(e,function(a){n(a,-1)}),d.each(g,function(a){n(a,-1)}),b&&n(b,0),n(i,0),a&&i.focus()}function m(a){var b=null;d.each(this.triggers,function(d){if(d==a||c.contains(d,a))return b=d,!1});return b}function e(a){var e=a.target;switch(a.keyCode){case v:case g:if(e=
m.call(this,e)){var q=c.next(e),f=this.triggers;q||(q=f[0]);n(e,-1);q&&(n(q,0),q.focus());a.halt()}break;case i:case b:if(e=m.call(this,e))q=c.prev(e),f=this.triggers,q||(q=f[f.length-1]),n(e,-1),q&&(n(q,0),q.focus()),a.halt();break;case t:case u:if(e=m.call(this,e))this.switchTo(d.indexOf(e,this.triggers),void 0,s),a.halt()}}function o(a){var b=null;d.each(this.panels,function(d){if(d==a||c.contains(d,a))return b=d,!1});return b}function k(a,b){var c=d.indexOf(a,this.panels),g=this.config.steps,
e=Math.floor(c/g);return e==this.activeIndex?1:0==c%g||c%g==g-1?(this.switchTo(e,b,s),0):1}function a(a){var d=a.target;switch(a.keyCode){case v:case g:if(d=o.call(this,d)){var e=c.next(d),f=this.panels;e||(e=f[0]);n(d,-1);n(e,0);k.call(this,e,r)&&e.focus();a.halt()}break;case i:case b:if(d=o.call(this,d))e=c.prev(d),f=this.panels,e||(e=f[f.length-1]),n(d,-1),n(e,0),k.call(this,e,z)&&e.focus(),a.halt();break;case t:case u:if(d=o.call(this,d))this.fire("itemSelected",{item:d}),a.halt()}}var b=37,i=
38,g=39,v=40,u=32,t=13,n=h.setTabIndex,s={originalEvent:{target:1}},r="forward",z="backward";d.mix(l.Config,{aria:!1});l.Plugins.push({name:"aria",init:function(b){if(b.config.aria){var c=b.triggers,g=b.panels,i=b.content,r=b.activeIndex;i.id||(i.id=d.guid("ks-switchbale-content"));i.setAttribute("role","listbox");var h=0;d.each(c,function(a){n(a,r==h?"0":"-1");a.setAttribute("role","button");a.setAttribute("aria-controls",i.id);h++});h=0;d.each(g,function(a){n(a,"-1");a.setAttribute("role","option");
h++});b.on("switch",j,b);if(c=b.nav)f.on(c,"keydown",e,b);f.on(i,"keydown",a,b);c=b.prevBtn;g=b.nextBtn;c&&(n(c,0),c.setAttribute("role","button"),f.on(c,"keydown",function(a){if(a.keyCode==t||a.keyCode==u){b.prev(s);a.preventDefault()}}));g&&(n(g,0),g.setAttribute("role","button"),f.on(g,"keydown",function(a){if(a.keyCode==t||a.keyCode==u){b.next(s);a.preventDefault()}}))}}})},{requires:["dom","event","../aria","./base"]});
KISSY.add("switchable/carousel/base",function(d,c,f,h){function l(c,d){if(!(this instanceof l))return new l(c,d);l.superclass.constructor.apply(this,arguments)}var j="prevBtn",m="nextBtn",e={originalEvent:{target:1}};l.Config={circular:!0,prevBtnCls:"ks-switchable-prev-btn",nextBtnCls:"ks-switchable-next-btn",disableBtnCls:"ks-switchable-disable-btn"};l.Plugins=[];d.extend(l,h,{_init:function(){function h(a){c.removeClass([k[j],k[m]],b);0==a&&c.addClass(k[j],b);a==k.length-1&&c.addClass(k[m],b)}var k=
this;l.superclass._init.call(k);var a=k.config,b=a.disableBtnCls;d.each(["prev","next"],function(b){var d=k[b+"Btn"]=c.get("."+a[b+"BtnCls"],k.container);f.on(d,"mousedown",function(c){c.preventDefault();c=k.activeIndex;if("prev"==b&&(0!=c||a.circular))k[b](e);if("next"==b&&(c!=k.length-1||a.circular))k[b](e)})});a.circular||(k.on("added removed",function(){h(k.activeIndex)}),k.on("switch",function(a){h(a.currentIndex)}));f.delegate(k.content,"click",".ks-switchable-panel-internal",function(a){k.fire("itemSelected",
{item:a.currentTarget})})}});return l},{requires:["dom","event","../base"]});
KISSY.add("switchable/circular",function(d,c,f,h){function l(b,d){var e=this,h=e.fromIndex,r=e.config,o=e.length,p=r.scrollType===v,l=p?k:a,q=e.activeIndex,y=e.viewSize[p?0:1],p=-y*q,w=e.panels,D=e.config.steps,B={},C,A=d===g;C=A&&0===h&&q===o-1||!A&&h===o-1&&0===q;e.anim&&(e.anim.stop(),"relative"==w[h*D].style.position&&m.call(e,w,h,l,y,1));C&&(p=j.call(e,w,A,l,y));B[l]=p+i;-1<h?e.anim=(new f(e.content,B,r.duration,r.easing,function(){C&&m.call(e,w,A,l,y,1);e.anim=void 0;b&&b()})).run():(c.css(e.content,
B),b&&b())}function j(a,b,d,g){var i=this.config.steps,f=this.length,h=b?f-1:0,a=a.slice(h*i,(h+1)*i);c.css(a,e,o);c.css(a,d,(b?-1:1)*g*f);return b?g:-g*f}function m(a,d,g,i,f){var h=this.config.steps,j=this.length,k=d?j-1:0,a=a.slice(k*h,(k+1)*h);c.css(a,e,b);c.css(a,g,b);f&&c.css(this.content,g,d?-i*(j-1):b)}var e="position",o="relative",k="left",a="top",b="",i="px",g="backward",v="scrollx";d.mix(h.Config,{circular:!1});h.adjustPosition=j;h.resetPosition=m;h.Plugins.push({name:"circular",init:function(a){a=
a.config;if(a.circular&&(a.effect===v||"scrolly"===a.effect))a.scrollType=a.effect,a.effect=l}})},{requires:["dom","anim","./base","./effect"]});
KISSY.add("switchable/effect",function(d,c,f,h,l,j){var m;d.mix(l.Config,{effect:"none",duration:0.5,easing:"easeNone"});l.Effects={none:function(d){var f=this._getFromToPanels(),h=f.fromPanels,f=f.toPanels;h&&c.css(h,"display","none");c.css(f,"display","block");d&&d()},fade:function(d){var f=this,k=f._getFromToPanels(),a=k.fromPanels,b=f.config,i=a?a[0]:null,g=k.toPanels[0];f.anim&&(f.anim.stop(),c.css(f.anim.fromEl,{zIndex:1,opacity:0}),c.css(f.anim.toEl,"zIndex",9));c.css(g,"opacity",1);i?(f.anim=
(new h(i,{opacity:0},b.duration,b.easing,function(){f.anim=j;c.css(g,"z-index",9);c.css(i,"z-index",1);d&&d()})).run(),f.anim.toEl=g,f.anim.fromEl=i):(c.css(g,"z-index",9),d&&d())},scroll:function(d,f){var k=this,a=k.fromIndex,b=k.config,i="scrollx"===b.effect,g={};g[i?"left":"top"]=-(k.viewSize[i?0:1]*k.activeIndex)+"px";k.anim&&k.anim.stop();f||-1<a?k.anim=(new h(k.content,g,b.duration,b.easing,function(){k.anim=j;d&&d()})).run():(c.css(k.content,g),d&&d())}};m=l.Effects;m.scrollx=m.scrolly=m.scroll;
l.Plugins.push({name:"effect",init:function(e){var f=e.config,h=f.effect,a=e.panels,b=e.content,i=f.steps,g=a[0],j=e.activeIndex;if("none"!==h)switch(c.css(a,"display","block"),h){case "scrollx":case "scrolly":c.css(b,"position","absolute");"static"==c.css(b.parentNode,"position")&&c.css(b.parentNode,"position","relative");"scrollx"===h&&(c.css(a,"float","left"),c.width(b,"9999px"));e.viewSize=[f.viewSize[0]||g&&g.offsetWidth*i,f.viewSize[1]||g&&g.offsetHeight*i];break;case "fade":var l=j*i,m=l+i-
1,n;d.each(a,function(a,b){n=b>=l&&b<=m;c.css(a,{opacity:n?1:0,position:"absolute",zIndex:n?9:1})})}}});d.augment(l,{_switchView:function(c,f,h){var a=this,b=a.config.effect;(d.isFunction(b)?b:m[b]).call(a,function(){a._fireOnSwitch(f);h&&h.call(a)},c)}});return l},{requires:["dom","event","anim","./base"]});
KISSY.add("switchable/lazyload",function(d,c,f){var h="beforeSwitch",l="img",j="textarea",m={};m[l]="lazyImgAttribute";m[j]="lazyTextareaClass";d.mix(f.Config,{lazyImgAttribute:"data-ks-lazyload-custom",lazyTextareaClass:"ks-datalazyload-custom",lazyDataType:j});f.Plugins.push({name:"lazyload",init:function(e){function f(d){var m=a.steps,d=d.toIndex*m;k.loadCustomLazyData(e.panels.slice(d,d+m),b,i);a:{var u,t,n;if(d=(m=b===l)?"img":b===j?"textarea":""){d=c.query(d,e.container);u=0;for(n=d.length;u<
n;u++)if(t=d[u],m?c.attr(t,i):c.hasClass(t,i)){m=!1;break a}}m=!0}m&&e.detach(h,f)}var k=d.require("datalazyload"),a=e.config,b,i;"img-src"===a.lazyDataType&&(a.lazyDataType=l);"area-data"===a.lazyDataType&&(a.lazyDataType=j);b=a.lazyDataType;i=a[m[b]];if(k&&b&&i)e.on(h,f)}});return f},{requires:["dom","./base"]});
KISSY.add("switchable/slide/base",function(d,c){function f(c,d){if(!(this instanceof f))return new f(c,d);f.superclass.constructor.apply(this,arguments)}f.Config={autoplay:!0,circular:!0};f.Plugins=[];d.extend(f,c);return f},{requires:["../base"]});KISSY.add("switchable",function(d,c,f,h,l,j,m,e,o,k,a,b,i,g){d.mix(c,{Accordion:h,Carousel:e,Slide:i,Tabs:g,Aria:f});return c},{requires:"switchable/base,switchable/aria,switchable/accordion/base,switchable/accordion/aria,switchable/autoplay,switchable/autorender,switchable/carousel/base,switchable/carousel/aria,switchable/circular,switchable/effect,switchable/lazyload,switchable/slide/base,switchable/tabs/base,switchable/tabs/aria".split(",")});
KISSY.add("switchable/tabs/aria",function(d,c,f,h,l,j){function m(a){var b=null;d.each(this.triggers,function(d){if(d==a||c.contains(d,a))b=d});return b}function e(c){switch(c.keyCode){case a:case b:c.ctrlKey&&!c.altKey&&!c.shiftKey&&c.halt();break;case t:c.ctrlKey&&!c.altKey&&c.halt()}}function o(c){var d=c.target,e=c.ctrlKey&&!c.shiftKey&&!c.altKey;switch(c.keyCode){case i:case g:m.call(this,d)&&(this.prev(s(c)),c.halt());break;case v:case u:m.call(this,d)&&(this.next(s(c)),c.halt());break;case b:e&&
(c.halt(),this.next(s(c)));break;case a:e&&(c.halt(),this.prev(s(c)));break;case t:c.ctrlKey&&!c.altKey&&(c.halt(),c.shiftKey?this.prev(s(c)):this.next(s(c)))}}function k(a){var c=!(!a.originalEvent.target&&!a.originalEvent.srcElement),b=a.fromIndex,d=a.currentIndex;if(b!=d){var a=this.triggers[b],e=this.triggers[d],b=this.panels[b],d=this.panels[d];a&&n(a,"-1");n(e,"0");c&&e.focus();b&&b.setAttribute("aria-hidden","true");d.setAttribute("aria-hidden","false")}}var a=33,b=34,i=37,g=38,v=39,u=40,t=
9;d.mix(j.Config,{aria:!0});j.Plugins.push({name:"aria",init:function(a){function b(a){a.setAttribute("role","tab");n(a,"-1");a.id||(a.id=d.guid("ks-switchable"))}function g(a,b){a.setAttribute("role","tabpanel");a.setAttribute("aria-hidden","true");a.setAttribute("aria-labelledby",b.id)}if(a.config.aria){var h=a.triggers,i=a.activeIndex,j=a.panels,l=a.container;a.nav&&c.attr(a.nav,"role","tablist");var m=0;d.each(h,b);a.on("added",function(a){var c;b(c=a.trigger);g(a.panel,c)});m=0;d.each(j,function(a){g(a,
h[m]);m++});-1<i&&(n(h[i],"0"),j[i].setAttribute("aria-hidden","false"));a.on("switch",k,a);f.on(l,"keydown",o,a);f.on(l,"keypress",e,a)}}});var n=l.setTabIndex,s=h.getDomEvent},{requires:["dom","event","../base","../aria","./base"]});KISSY.add("switchable/tabs/base",function(d,c){function f(c,d){if(!(this instanceof f))return new f(c,d);f.superclass.constructor.call(this,c,d);return 0}d.extend(f,c);f.Config={};f.Plugins=[];return f},{requires:["../base"]});
KISSY.add("switchable/touch",function(d,c,f,h,l){d.mix(h.Config,{mouseAsTouch:!1});h.Plugins.push({name:"touch",init:function(j){var m=j.config,e=m.scrollType||m.effect;if("scrolly"==e||"scrollx"==e){var o=j.content,k=j.container,a,b=m.mouseAsTouch,i,g=0,v=0,u={},t={},n="left",s,r;"scrolly"==e&&(n="top");var z=function(){if("relative"!=j.panels[j.activeIndex].style.position){j.stop&&j.stop();v=1;u=c.offset(o);var a=c.offset(k);a.bottom=a.top+k.offsetHeight;a.right=a.left+k.offsetWidth;t=a}},p=function(b){if(v){var d=
-1!=b.type.indexOf("touch")?b.originalEvent.changedTouches[0]:b,f={};"scrolly"==e?(r=j.viewSize[1],s=d.pageY-i,f.top=u.top+s,d=d.pageY>=t.top&&d.pageY<=t.bottom):(r=j.viewSize[0],s=d.pageX-a,f.left=u.left+s,d=d.pageX>=t.left&&d.pageX<=t.right);if(g||3<Math.abs(s))(-1!=b.type.indexOf("touch")&&b.preventDefault(),j.anim&&(j.anim.stop(),j.anim=l),d)?(g||(g=1,m.circular&&(b=j.activeIndex,b==j.length-1?h.adjustPosition.call(j,j.panels,!1,n,r):0==b&&h.adjustPosition.call(j,j.panels,!0,n,r))),c.offset(o,
f)):x()}},x=function(){if(g){v=g=0;var a=j.activeIndex,b=j.length-1;!m.circular&&(0>s&&a==b||0<s&&0==a)?h.Effects[e].call(j,l,!0):(0>s&&a==b||0<s&&0==a||(0==a||a==b)&&h.resetPosition.call(j,j.panels,0==a,n,r),j[0>s?"next":"prev"](),j.start&&j.start())}};f.on(o,"touchstart",function(b){z();a=b.pageX;i=b.pageY});f.on(o,"touchmove",p);f.on(o,"touchend",x);b&&!("ontouchstart"in d.Env.host.document.documentElement)&&d.use("dd",function(b,c){var d=new c.Draggable({node:o});d.on("dragstart",function(){z();
a=d.startMousePos.left;i=d.startMousePos.top});d.on("drag",p);d.on("dragend",x);j.__touchDD=d})}},destroy:function(c){var d;(d=c.__touchDD)&&d.destroy()}})},{requires:["dom","event","./base"]});
