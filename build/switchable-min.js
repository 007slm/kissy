/*
Copyright 2012, KISSY UI Library v1.40dev
MIT Licensed
build time: Nov 5 20:46
*/
KISSY.add("switchable/accordion/aria",function(e,b,l,h,m,k){function o(a){var c=null;e.each(this.triggers,function(j){if(j==a||b.contains(j,a))c=j});return c}function n(a){var c=null;e.each(this.panels,function(j){if(j==a||b.contains(j,a))c=j});return c}function i(a){var c=o.call(this,a);c||(a=n.call(this,a),c=this.triggers[e.indexOf(a,this.panels)]);return c}function g(a){switch(a.keyCode){case p:case r:a.ctrlKey&&!a.altKey&&!a.shiftKey&&a.halt();break;case t:a.ctrlKey&&!a.altKey&&a.halt()}}function f(j){var b=
j.target,g=this.triggers,f=!j.ctrlKey&&!j.shiftKey&&!j.altKey,n=j.ctrlKey&&!j.shiftKey&&!j.altKey;switch(j.keyCode){case z:case A:if((b=o.call(this,b))&&f)this.switchTo(e.indexOf(b,this.triggers)),j.halt();break;case q:case w:if(b=o.call(this,b))a.call(this,b),j.halt();break;case u:case x:if(b=o.call(this,b))c.call(this,b),j.halt();break;case r:n&&(j.halt(),b=i.call(this,b),c.call(this,b));break;case p:n&&(j.halt(),b=i.call(this,b),a.call(this,b));break;case s:f&&(i.call(this,b),d.call(this,0,!0),
j.halt());break;case v:f&&(i.call(this,b),d.call(this,g.length-1,!0),j.halt());break;case t:j.ctrlKey&&!j.altKey&&(j.halt(),b=i.call(this,b),j.shiftKey?a.call(this,b):c.call(this,b))}}function d(a,c){var j=this.triggers,p=j[a];e.each(j,function(a){a!==p&&(y(a,"-1"),b.removeClass(a,"ks-switchable-select"),a.setAttribute("aria-selected","false"))});c&&p.focus();y(p,"0");b.addClass(p,"ks-switchable-select");p.setAttribute("aria-selected","true")}function a(a){var c=this.triggers,a=e.indexOf(a,c);d.call(this,
0==a?c.length-1:a-1,!0)}function c(a){var c=this.triggers,a=e.indexOf(a,c);d.call(this,a==c.length-1?0:a+1,!0)}function j(a){var c=!(!a.originalEvent.target&&!a.originalEvent.srcElement),a=a.currentIndex,j=this.panels,b=this.triggers,p=b[a],f=j[a];this.config.multiple||(e.each(j,function(a){a!==f&&a.setAttribute("aria-hidden","true")}),e.each(b,function(a){a!==p&&a.setAttribute("aria-hidden","true")}));j=f.getAttribute("aria-hidden");f.setAttribute("aria-hidden","false"==j?"true":"false");p.setAttribute("aria-expanded",
"false"==j?"false":"true");d.call(this,a,c)}var p=33,r=34,v=35,s=36,q=37,w=38,u=39,x=40,t=9,A=32,z=13;e.mix(m.Config,{aria:!0});k.addPlugin({name:"aria",init:function(a){if(a.config.aria){var c=a.container,p=a.activeIndex;b.attr(c,"aria-multiselectable",a.config.multiple?"true":"false");a.nav&&b.attr(a.nav,"role","tablist");var n=a.triggers,d=a.panels,r=0;e.each(d,function(a){a.id||(a.id=e.guid("ks-accordion-tab-panel"))});e.each(n,function(a){a.id||(a.id=e.guid("ks-accordion-tab"))});e.each(n,function(a){a.setAttribute("role",
"tab");a.setAttribute("aria-expanded",p==r?"true":"false");a.setAttribute("aria-selected",p==r?"true":"false");a.setAttribute("aria-controls",d[r].id);y(a,p==r?"0":"-1");r++});r=0;e.each(d,function(a){var c=n[r];a.setAttribute("role","tabpanel");a.setAttribute("aria-hidden",p==r?"false":"true");a.setAttribute("aria-labelledby",c.id);r++});a.on("switch",j,a);l.on(c,"keydown",f,a);l.on(c,"keypress",g,a)}}},m);var y=h.setTabIndex},{requires:["dom","event","../aria","./base","../base"]});
KISSY.add("switchable/accordion/base",function(e,b,l){function h(b,e){if(!(this instanceof h))return new h(b,e);h.superclass.constructor.apply(this,arguments)}e.extend(h,l,{_switchTrigger:function(e,k){var l=this.config;l.multiple?b.toggleClass(k,l.activeTriggerCls):h.superclass._switchTrigger.apply(this,arguments)},_triggerIsValid:function(b){return this.config.multiple||h.superclass._triggerIsValid.call(this,b)},_switchView:function(e,k,l){var n=this.config,i=this._getFromToPanels().toPanels;n.multiple?
(b.toggle(i),this._fireOnSwitch(k),l&&l.call(this)):h.superclass._switchView.apply(this,arguments)}});h.Config={markupType:1,triggerType:"click",multiple:!1};return h},{requires:["dom","../base"]});
KISSY.add("switchable/aria",function(e,b,l,h){function m(){this.stop&&this.stop()}function k(){this.start&&this.start()}h.addPlugin({name:"aria",init:function(b){if(b.config.aria){var e=b.container;l.on(e,"focusin",m,b);l.on(e,"focusout",k,b)}}});var o=["a","input","button","object"];return{setTabIndex:function(n,i){n.tabIndex=i;e.each(b.query("*",n),function(g){var f=g.nodeName.toLowerCase();e.inArray(f,o)&&(b.hasAttr(g,"oriTabIndex")||b.attr(g,"oriTabIndex",g.tabIndex),g.tabIndex=-1!=i?b.attr(g,
"oriTabIndex"):i)})}}},{requires:["dom","event","./base"]});
KISSY.add("switchable/autoplay",function(e,b,l,h,m){var k=e.Env.host,o=function(n){var e=b.scrollTop(),g=b.viewportHeight(),f=b.offset(n),n=b.height(n);return f.top>e&&f.top+n<e+g};e.mix(h.Config,{pauseOnScroll:!1,autoplay:!1,interval:5,pauseOnHover:!0});h.addPlugin({name:"autoplay",init:function(b){function h(){d=e.later(function(){b.paused||b.next()},f,!0)}var g=b.config,f=1E3*g.interval,d;if(g.autoplay&&(g.pauseOnScroll&&(b.__scrollDetect=e.buffer(function(){b[o(b.container)?"start":"stop"]()},
200),l.on(k,"scroll",b.__scrollDetect)),h(),b.stop=function(){if(d){d.cancel();d=m}b.paused=true},b.start=function(){if(d){d.cancel();d=m}b.paused=false;h()},g.pauseOnHover))l.on(b.container,"mouseenter",b.stop,b),l.on(b.container,"mouseleave",b.start,b)},destroy:function(b){b.__scrollDetect&&(l.remove(k,"scroll",b.__scrollDetect),b.__scrollDetect.stop())}});return h},{requires:["dom","event","./base"]});
KISSY.add("switchable/base",function(e,b,l,h){function m(a,c){this._triggerInternalCls=e.guid(f);this._panelInternalCls=e.guid(d);c=c||{};"markupType"in c||(c.panelCls?c.markupType=1:c.panels&&(c.markupType=2));for(var j=this.constructor;j;)c=e.merge(j.Config,c),j=j.superclass?j.superclass.constructor:null;this.container=b.get(a);this.config=c;this.activeIndex=c.activeIndex;var p;-1<this.activeIndex||("number"==typeof c.switchTo?p=c.switchTo:this.activeIndex=0);this._init();this._initPlugins();this.fire(i);
p!==h&&this.switchTo(p)}function k(a){var c={};c.type=a.type;c.target=a.target;return{originalEvent:c}}var o=e.makeArray,n=l.Target,i="init",g="remove",f="ks-switchable-trigger-internal",d="ks-switchable-panel-internal";m.getDomEvent=k;m.addPlugin=function(a,c){for(var c=c||m,b=a.priority=a.priority||0,p=0,f=c.Plugins=c.Plugins||[];p<f.length&&!(f[p].priority<b);p++);f.splice(p,0,a)};m.Config={markupType:0,navCls:"ks-switchable-nav",contentCls:"ks-switchable-content",triggerCls:"ks-switchable-trigger",
panelCls:"ks-switchable-panel",triggers:[],panels:[],hasTriggers:!0,triggerType:"mouse",delay:0.1,activeIndex:-1,activeTriggerCls:"ks-active",switchTo:h,steps:1,viewSize:[]};e.augment(m,n,{_initPlugins:function(){for(var a=this,c=[],b=a.constructor;b;)b.Plugins&&c.push.apply(c,[].concat(b.Plugins).reverse()),b=b.superclass?b.superclass.constructor:null;c.reverse();e.each(c,function(c){c.init&&c.init(a)})},_init:function(){var a=this.config;this._parseMarkup();a.hasTriggers&&this._bindTriggers();this._bindPanels()},
_parseMarkup:function(){var a=this.container,c=this.config,j,p,f=[],d=[];switch(c.markupType){case 0:(j=b.get("."+c.navCls,a))&&(f=b.children(j));p=b.get("."+c.contentCls,a);d=b.children(p);break;case 1:f=b.query("."+c.triggerCls,a);d=b.query("."+c.panelCls,a);break;case 2:f=c.triggers,d=c.panels}this.length=Math.ceil(d.length/c.steps);this.nav=j||c.hasTriggers&&f[0]&&f[0].parentNode;if(c.hasTriggers&&(!this.nav||0==f.length))f=this._generateTriggersMarkup(this.length);this.triggers=o(f);this.panels=
o(d);this.content=p||d[0].parentNode},_generateTriggersMarkup:function(a){var c=this.config,j=this.nav||b.create("<ul>"),f,d;j.className=c.navCls;for(d=0;d<a;d++)f=b.create("<li>"),d===this.activeIndex&&(f.className=c.activeTriggerCls),f.innerHTML=d+1,j.appendChild(f);this.container.appendChild(j);this.nav=j;return b.children(j)},_bindTriggers:function(){var a=this,c=a.config,b=a._triggerInternalCls,f=e.one(a.nav);e.each(a.triggers,function(c){a._initTrigger(c)});f.delegate("click","."+b,function(c){var b=
a._getTriggerIndex(c.currentTarget);a._onFocusTrigger(b,c)});"mouse"===c.triggerType&&f.delegate("mouseenter","."+b,function(c){var b=a._getTriggerIndex(c.currentTarget);a._onMouseEnterTrigger(b,c)}).delegate("mouseleave","."+b,function(){a._onMouseLeaveTrigger()})},_initTrigger:function(a){b.addClass(a,this._triggerInternalCls)},_bindPanels:function(){var a=this;e.each(a.panels,function(c){a._initPanel(c)})},_initPanel:function(a){b.addClass(a,this._panelInternalCls)},_onFocusTrigger:function(a,
c){this._triggerIsValid(a)&&(this._cancelSwitchTimer(),this.switchTo(a,h,k(c)))},_onMouseEnterTrigger:function(a,c){var b=this;if(b._triggerIsValid(a)){var f=k(c);b.switchTimer=e.later(function(){b.switchTo(a,h,f)},1E3*b.config.delay)}},_onMouseLeaveTrigger:function(){this._cancelSwitchTimer()},_triggerIsValid:function(a){return this.activeIndex!==a},_cancelSwitchTimer:function(){this.switchTimer&&(this.switchTimer.cancel(),this.switchTimer=h)},_getTriggerIndex:function(a){return e.indexOf(a,this.triggers)},
_resetLength:function(){this.length=this._getLength()},_getLength:function(a){var c=this.config;a===h&&(a=this.panels.length);return Math.ceil(a/c.steps)},_afterAdd:function(a,c,b){this._resetLength();a=this._getLength(a+1)-1;1==this.config.steps&&this.activeIndex>=a&&(this.activeIndex+=1);var f=this.activeIndex;this.activeIndex=-1;this.switchTo(f);c?this.switchTo(a,h,h,b):b()},add:function(a){var c=a.callback||e.noop,j=this.nav,f=this.content,d=a.trigger,g=a.panel,n=a.active,q=this.panels.length,
a=null!=a.index?a.index:q,h=this.triggers,u=this.panels,x=this.length,t=null,t=null,a=Math.max(0,Math.min(a,q)),q=u[a]||null;u.splice(a,0,g);f.insertBefore(g,q);1==this.config.steps?(t=h[a],j.insertBefore(d,t),h.splice(a,0,d)):(t=this._getLength(),t!=x&&(b.append(d,j),h.push(d)));this._initPanel(g);this._initTrigger(d);this._afterAdd(a,n,c);this.fire("add",{index:a,trigger:d,panel:g})},remove:function(a){function c(){x&&(b.remove(x),q.splice(i,1));if(u){b.remove(u);for(var a=0;a<l.length;a++)if(l[a]==
u){d.triggers.splice(a,1);break}}d._resetLength();d.fire(g,{index:i,trigger:u,panel:x})}var f=a.callback||e.noop,d=this,n=d.config.steps,k=d.length,i,q=d.panels;i="index"in a?a.index:a.panel;var a=d._getLength(q.length-1),l=d.triggers,u=null,x=null;if(q.length&&(i=e.isNumber(i)?Math.max(0,Math.min(i,q.length-1)):e.indexOf(i,q),u=1==n?l[i]:a!==k?l[k-1]:null,x=q[i],!1!==d.fire("beforeRemove",{index:i,panel:x,trigger:u})))if(0==a)c(),f();else{var t=d.activeIndex;1<n?t==a?d.switchTo(t-1,h,h,function(){c();
f()}):(c(),d.activeIndex=-1,d.switchTo(t,h,h,function(){f()})):t==i?d.switchTo(0<t?t-1:t+1,h,h,function(){c();0==t&&(d.activeIndex=0);f()}):(t>i&&(t--,d.activeIndex=t),c(),f())}},switchTo:function(a,c,b,f){var d=this,g=d.config,e=d.activeIndex,q=d.triggers;if(!d._triggerIsValid(a)||!1===d.fire("beforeSwitch",{fromIndex:e,toIndex:a}))return d;d.fromIndex=e;g.hasTriggers&&d._switchTrigger(q[e]||null,q[a]);c===h&&(c=a>e?"forward":"backward");d.activeIndex=a;d._switchView(c,b,function(){f&&f.call(d)});
return d},_switchTrigger:function(a,c){var d=this.config.activeTriggerCls;a&&b.removeClass(a,d);b.addClass(c,d)},_getFromToPanels:function(){var a=this.fromIndex,b;b=this.config.steps;var d=this.panels,f=this.activeIndex,a=-1<a?d.slice(a*b,(a+1)*b):null;b=d.slice(f*b,(f+1)*b);return{fromPanels:a,toPanels:b}},_switchView:function(a,c,d){var f=this,g=f._getFromToPanels(),a=g.fromPanels,g=g.toPanels;a&&b.css(a,"display","none");b.css(g,"display","block");setTimeout(function(){f._fireOnSwitch(c)},0);
d&&d.call(this)},_fireOnSwitch:function(a){this.fire("switch",e.merge(a,{fromIndex:this.fromIndex,currentIndex:this.activeIndex}))},prev:function(a){this.switchTo((this.activeIndex-1+this.length)%this.length,"backward",a)},next:function(a){this.switchTo((this.activeIndex+1)%this.length,"forward",a)},destroy:function(a){for(var c=this,d=c.constructor;d;)e.each(d.Plugins,function(a){a.destroy&&a.destroy(c)}),d=d.superclass?d.superclass.constructor:null;a?l.remove(c.container):b.remove(c.container);
c.nav=null;c.content=null;c.container=null;c.triggers=[];c.panels=[];c.detach()}});return m},{requires:["dom","event"]});
KISSY.add("switchable/carousel/aria",function(e,b,l,h,m,k){function o(a){var b=a.currentIndex,c=this.activeIndex,d=this.panels,f=d[b*this.config.steps],g=this.triggers,b=g[b];if((a=!(!a.originalEvent.target&&!a.originalEvent.srcElement))||-1==c)e.each(g,function(a){s(a,-1)}),e.each(d,function(a){s(a,-1)}),b&&s(b,0),s(f,0),a&&f.focus()}function n(a){var c=null;e.each(this.triggers,function(d){if(d==a||b.contains(d,a))return c=d,!1});return c}function i(d){var f=d.target;switch(d.keyCode){case p:case j:if(f=
n.call(this,f)){var g=b.next(f),i=this.triggers;g||(g=i[0]);s(f,-1);g&&(s(g,0),g.focus());d.halt()}break;case c:case a:if(f=n.call(this,f))g=b.prev(f),i=this.triggers,g||(g=i[i.length-1]),s(f,-1),g&&(s(g,0),g.focus()),d.halt();break;case v:case r:if(f=n.call(this,f))this.switchTo(e.indexOf(f,this.triggers),void 0,q),d.halt()}}function g(a){var c=null;e.each(this.panels,function(d){if(d==a||b.contains(d,a))return c=d,!1});return c}function f(a,b){var c=e.indexOf(a,this.panels),d=this.config.steps,
f=Math.floor(c/d);return f==this.activeIndex?1:0==c%d||c%d==d-1?(this.switchTo(f,b,q),0):1}function d(d){var e=d.target;switch(d.keyCode){case p:case j:if(e=g.call(this,e)){var q=b.next(e),i=this.panels;q||(q=i[0]);s(e,-1);s(q,0);f.call(this,q,w)&&q.focus();d.halt()}break;case c:case a:if(e=g.call(this,e))q=b.prev(e),i=this.panels,q||(q=i[i.length-1]),s(e,-1),s(q,0),f.call(this,q,u)&&q.focus(),d.halt();break;case v:case r:if(e=g.call(this,e))this.fire("itemSelected",{item:e}),d.halt()}}var a=37,c=
38,j=39,p=40,r=32,v=13,s=h.setTabIndex,q={originalEvent:{target:1}},w="forward",u="backward";e.mix(m.Config,{aria:!1});k.addPlugin({name:"aria",init:function(a){if(a.config.aria){var b=a.triggers,c=a.panels,f=a.content,g=a.activeIndex;f.id||(f.id=e.guid("ks-switchbale-content"));f.setAttribute("role","listbox");var j=0;e.each(b,function(a){s(a,g==j?"0":"-1");a.setAttribute("role","button");a.setAttribute("aria-controls",f.id);j++});j=0;e.each(c,function(a){s(a,"-1");a.setAttribute("role","option");
j++});a.on("switch",o,a);if(b=a.nav)l.on(b,"keydown",i,a);l.on(f,"keydown",d,a);b=a.prevBtn;c=a.nextBtn;b&&(s(b,0),b.setAttribute("role","button"),l.on(b,"keydown",function(b){if(b.keyCode==v||b.keyCode==r){a.prev(q);b.preventDefault()}}));c&&(s(c,0),c.setAttribute("role","button"),l.on(c,"keydown",function(b){if(b.keyCode==v||b.keyCode==r){a.next(q);b.preventDefault()}}))}}},m)},{requires:["dom","event","../aria","./base","../base"]});
KISSY.add("switchable/carousel/base",function(e,b,l,h){function m(b,g){if(!(this instanceof m))return new m(b,g);m.superclass.constructor.apply(this,arguments)}var k="prevBtn",o="nextBtn",n={originalEvent:{target:1}};m.Config={circular:!0,prevBtnCls:"ks-switchable-prev-btn",nextBtnCls:"ks-switchable-next-btn",disableBtnCls:"ks-switchable-disable-btn"};e.extend(m,h,{_init:function(){function i(a){b.removeClass([g[k],g[o]],d);0==a&&b.addClass(g[k],d);a==g.length-1&&b.addClass(g[o],d)}var g=this;m.superclass._init.call(g);
var f=g.config,d=f.disableBtnCls;e.each(["prev","next"],function(a){var c=g[a+"Btn"]=b.get("."+f[a+"BtnCls"],g.container);l.on(c,"mousedown",function(b){b.preventDefault();b=g.activeIndex;if("prev"==a&&(0!=b||f.circular))g[a](n);if("next"==a&&(b!=g.length-1||f.circular))g[a](n)})});f.circular||(g.on("added removed",function(){i(g.activeIndex)}),g.on("switch",function(a){i(a.currentIndex)}));l.delegate(g.content,"click","."+g._panelInternalCls,function(a){g.fire("itemSelected",{item:a.currentTarget})})}});
return m},{requires:["dom","event","../base"]});
KISSY.add("switchable/circular",function(e,b,l,h){function m(g){var f=this,d=f.fromIndex,a=f.config,c=f.length,e="scrollx"===a.scrollType,n=e?"left":"top",h=f.activeIndex,e=f.viewSize[e?0:1],k=f.panels,m={},q={},o,u=f._realStep;o=e*c;m[n]=-e*h;-1==d?(b.css(f.content,m),g&&g()):(h+u>c?(q={position:"relative"},q[n]=o,o=h+u-c,b.css(k.slice(0,o),q),b.css(k.slice(o,u),i)):b.css(k.slice(0,u),i),k=b.css(k[d],"position"),(d+c-h)%c<(h-d+c)%c&&"relative"==k?b.css(f.content,n,-(e*(c+d))):d==c-1&&0==h?b.css(f.content,
n,e):b.css(f.content,n,-(e*d)),f.anim&&f.anim.stop(),f.anim=(new l(f.content,m,a.duration,a.easing,function(){f.anim=0;g&&g()})).run())}function k(g,f){var d=this,a=d.fromIndex,c=d.config,e=d.length,i="scrollx"===c.scrollType,h=i?"left":"top",k=d.activeIndex,m=d.viewSize[i?0:1],i=-m*k,q=d.panels,w=d.config.steps,u={},x,t="backward"===f;x=t&&0===a&&k===e-1||!t&&a===e-1&&0===k;d.anim&&(d.anim.stop(),"relative"==q[a*w].style.position&&n.call(d,q,a,h,m,1));x&&(i=o.call(d,q,k,h,m));u[h]=i+"px";-1<a?d.anim=
(new l(d.content,u,c.duration,c.easing,function(){x&&n.call(d,q,k,h,m,1);d.anim=void 0;g&&g()})).run():(b.css(d.content,u),g&&g())}function o(e,f,d,a){var c=this.config.steps,j=this.length,e=e.slice(f*c,(f+1)*c);b.css(e,"position","relative");b.css(e,d,(f?-1:1)*a*j);return f?a:-a*j}function n(e,f,d,a,c){var j=this.config.steps,i=this.length,e=e.slice(f*j,(f+1)*j);b.css(e,"position","");b.css(e,d,"");c&&b.css(this.content,d,f?-a*(i-1):"")}var i={position:"",left:"",top:""};e.mix(h.Config,{circular:!1});
h.adjustPosition=o;h.resetPosition=n;h.addPlugin({name:"circular",priority:5,init:function(b){var f=b.config,d=f.effect;if(f.circular&&("scrollx"===d||"scrolly"===d))f.scrollType=d,f.effect=b._realStep?m:k}})},{requires:["dom","anim","./base","./effect"]});
KISSY.add("switchable/effect",function(e,b,l,h,m,k){var o;e.mix(m.Config,{effect:"none",duration:0.5,easing:"easeNone"});m.Effects={none:function(e){var i=this._getFromToPanels(),g=i.fromPanels,i=i.toPanels;g&&b.css(g,"display","none");b.css(i,"display","block");e&&e()},fade:function(e){var i=this,g=i._getFromToPanels(),f=g.fromPanels,d=i.config,a=f?f[0]:null,c=g.toPanels[0];i.anim&&(i.anim.stop(),b.css(i.anim.fromEl,{zIndex:1,opacity:0}),b.css(i.anim.toEl,"zIndex",9));b.css(c,"opacity",1);a?(i.anim=
(new h(a,{opacity:0},d.duration,d.easing,function(){i.anim=k;b.css(c,"z-index",9);b.css(a,"z-index",1);e&&e()})).run(),i.anim.toEl=c,i.anim.fromEl=a):(b.css(c,"z-index",9),e&&e())},scroll:function(e,i,g){var f=this,i=f.fromIndex,d=f.config,a="scrollx"===d.effect,c={};c[a?"left":"top"]=-(f.viewSize[a?0:1]*f.activeIndex)+"px";f.anim&&f.anim.stop();g||-1<i?f.anim=(new h(f.content,c,d.duration,d.easing,function(){f.anim=k;e&&e()})).run():(b.css(f.content,c),e&&e())}};o=m.Effects;o.scrollx=o.scrolly=o.scroll;
m.addPlugin({priority:10,name:"effect",init:function(h){var i=h.config,g=i.effect,f=h.panels,d=h.content,a=i.steps,c=f[0],j=h.container,k=h.activeIndex;if("none"!==g)switch(b.css(f,"display","block"),g){case "scrollx":case "scrolly":b.css(d,"position","absolute");"static"==b.css(d.parentNode,"position")&&b.css(d.parentNode,"position","relative");"scrollx"===g&&(b.css(f,"float","left"),b.width(d,"999999px"));h.viewSize=[i.viewSize[0]||c&&b.outerWidth(c,!0)*a,i.viewSize[1]||c&&b.outerHeight(c,!0)*a];
1==a&&c&&(f=1,d=h.viewSize,c=c.parentNode.parentNode,j=[Math.min(b.width(j),b.width(c)),Math.min(b.height(j),b.height(c))],"scrollx"==g?f=Math.floor(j[0]/d[0]):"scrolly"==g&&(f=Math.floor(j[1]/d[1])),f>i.steps&&(h._realStep=f));break;case "fade":var l=k*a,m=l+a-1,o;e.each(f,function(a,c){o=c>=l&&c<=m;b.css(a,{opacity:o?1:0,position:"absolute",zIndex:o?9:1})})}}});e.augment(m,{_switchView:function(b,h,g){var f=this,d=f.config.effect;(e.isFunction(d)?d:o[d]).call(f,function(){f._fireOnSwitch(h);g&&
g.call(f)},b)}});return m},{requires:["dom","event","anim","./base"]});
KISSY.add("switchable/lazyload",function(e,b,l){var h="beforeSwitch",m="img",k="textarea",o={};o[m]="lazyImgAttribute";o[k]="lazyTextareaClass";e.mix(l.Config,{lazyImgAttribute:"data-ks-lazyload-custom",lazyTextareaClass:"ks-datalazyload-custom",lazyDataType:k});l.addPlugin({name:"lazyload",init:function(l){function i(c){var e=l._realStep||f.steps,c=c.toIndex*e;g.loadCustomLazyData(l.panels.slice(c,c+e),d,a);a:{var o,r,v;if(c=(e=d===m)?"img":d===k?"textarea":""){c=b.query(c,l.container);o=0;for(v=
c.length;o<v;o++)if(r=c[o],e?b.attr(r,a):b.hasClass(r,a)){e=!1;break a}}e=!0}e&&l.detach(h,i)}var g=e.require("datalazyload"),f=l.config,d=f.lazyDataType,a;"img-src"===d?d=m:"area-data"===d&&(d=k);f.lazyDataType=d;a=f[o[d]];g&&d&&a&&(l.on(h,i),i({toIndex:l.activeIndex}))}});return l},{requires:["dom","./base"]});
KISSY.add("switchable/slide/base",function(e,b){function l(b,e){if(!(this instanceof l))return new l(b,e);l.superclass.constructor.apply(this,arguments)}l.Config={autoplay:!0,circular:!0};e.extend(l,b);return l},{requires:["../base"]});KISSY.add("switchable",function(e,b,l,h,m,k){e.mix(b,{Accordion:l,Carousel:h,Slide:m,Tabs:k});return e.Switchable=b},{requires:"switchable/base,switchable/accordion/base,switchable/carousel/base,switchable/slide/base,switchable/tabs/base,switchable/lazyload,switchable/effect,switchable/circular,switchable/carousel/aria,switchable/autoplay,switchable/aria,switchable/tabs/aria,switchable/accordion/aria,switchable/touch".split(",")});
KISSY.add("switchable/tabs/aria",function(e,b,l,h,m,k){function o(a){var c=null;e.each(this.triggers,function(d){if(d==a||b.contains(d,a))c=d});return c}function n(a){switch(a.keyCode){case f:case d:a.ctrlKey&&!a.altKey&&!a.shiftKey&&a.halt();break;case r:a.ctrlKey&&!a.altKey&&a.halt()}}function i(b){var e=b.target,g=b.ctrlKey&&!b.shiftKey&&!b.altKey;switch(b.keyCode){case a:case c:o.call(this,e)&&(this.prev(s(b)),b.halt());break;case j:case p:o.call(this,e)&&(this.next(s(b)),b.halt());break;case d:g&&
(b.halt(),this.next(s(b)));break;case f:g&&(b.halt(),this.prev(s(b)));break;case r:b.ctrlKey&&!b.altKey&&(b.halt(),b.shiftKey?this.prev(s(b)):this.next(s(b)))}}function g(a){var b=!(!a.originalEvent.target&&!a.originalEvent.srcElement),c=a.fromIndex,d=a.currentIndex;if(c!=d){var a=this.triggers[c],f=this.triggers[d],c=this.panels[c],d=this.panels[d];a&&v(a,"-1");v(f,"0");b&&f.focus();c&&c.setAttribute("aria-hidden","true");d.setAttribute("aria-hidden","false")}}var f=33,d=34,a=37,c=38,j=39,p=40,r=
9;e.mix(k.Config,{aria:!0});h.addPlugin({name:"aria",init:function(a){function c(a){a.setAttribute("role","tab");v(a,"-1");a.id||(a.id=e.guid("ks-switchable"))}function d(a,b){a.setAttribute("role","tabpanel");a.setAttribute("aria-hidden","true");a.setAttribute("aria-labelledby",b.id)}if(a.config.aria){var f=a.triggers,h=a.activeIndex,j=a.panels,k=a.container;a.nav&&b.attr(a.nav,"role","tablist");var m=0;e.each(f,c);a.on("added",function(a){var b;c(b=a.trigger);d(a.panel,b)});m=0;e.each(j,function(a){d(a,
f[m]);m++});-1<h&&(v(f[h],"0"),j[h].setAttribute("aria-hidden","false"));a.on("switch",g,a);l.on(k,"keydown",i,a);l.on(k,"keypress",n,a)}}},k);var v=m.setTabIndex,s=h.getDomEvent},{requires:["dom","event","../base","../aria","./base"]});KISSY.add("switchable/tabs/base",function(e,b){function l(b,e){if(!(this instanceof l))return new l(b,e);l.superclass.constructor.call(this,b,e);return 0}e.extend(l,b);l.Config={};return l},{requires:["../base"]});
KISSY.add("switchable/touch",function(e,b,l,h,m){e.mix(h.Config,{isMouseAsTouch:!1});h.addPlugin({name:"touch",init:function(k){if(!k._realStep){var l=k.config,n=l.scrollType||l.effect;if("scrolly"==n||"scrollx"==n){var i=k.content,g=k.container,f,d,a={},c={},j="left",p,r=0,v;"scrolly"==n&&(j="top");var s=function(e){if(!r){var g={};"scrolly"==n?(v=k.viewSize[1],p=e.pageY-d,g.top=a.top+p,e=e.pageY>=c.top&&e.pageY<=c.bottom):(v=k.viewSize[0],p=e.pageX-f,g.left=a.left+p,e=e.pageX>=c.left&&e.pageX<=
c.right);k.anim&&(k.anim.stop(),k.anim=void 0);if(e){if(l.circular){var e=k.activeIndex,m=k.length-1;e==m?h.adjustPosition.call(k,k.panels,0,j,v):0==e&&h.adjustPosition.call(k,k.panels,m,j,v)}b.offset(i,g)}else w.stopDrag()}},q=function(){if(r)r=0;else{var a=k.activeIndex,b=k.length-1;if(!l.circular&&(0>p&&a==b||0<p&&0==a))h.Effects[n].call(k,void 0,void 0,!0);else{if(!(0>p&&a==b)&&!(0<p&&0==a)&&(0==a||a==b))h.resetPosition.call(k,k.panels,0==a?b:0,j,v);k[0>p?"next":"prev"]();k.start&&k.start()}}};
l.isMouseAsTouch&&(m=e.require("dd/base"));if(m){var w=new m.Draggable({node:i});w.on("dragstart",function(){if("relative"==k.panels[k.activeIndex].style.position)r=1;else{r=0;k.stop&&k.stop();a=b.offset(i);var e=b.offset(g);e.bottom=e.top+g.offsetHeight;e.right=e.left+g.offsetWidth;c=e}f=w.get("startMousePos").left;d=w.get("startMousePos").top});w.on("drag",s);w.on("dragend",q);k.__touchDD=w}}}},destroy:function(b){var e;(e=b.__touchDD)&&e.destroy()}})},{requires:["dom","event","./base",KISSY.Features.isTouchSupported||
KISSY.Features.isMsPointerEnabled?"dd/base":"empty"]});
