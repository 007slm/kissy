/*
Copyright 2012, KISSY UI Library v1.30dev
MIT Licensed
build time: May 17 17:42
*/
KISSY.add("switchable/accordion/aria",function(d,c,j,k,m){function h(a){var b=null;d.each(this.triggers,function(f){if(f==a||c.contains(f,a))b=f});return b}function n(a){var b;d.each(this.panels,function(f){if(f==a||c.contains(f,a))b=f});return b}function e(a){var b=h.call(this,a);b||(a=n.call(this,a),b=this.triggers[d.indexOf(a,this.panels)]);return b}function l(a){switch(a.keyCode){case s:case t:a.ctrlKey&&!a.altKey&&!a.shiftKey&&a.halt();break;case v:a.ctrlKey&&!a.altKey&&a.halt()}}function i(c){var g=
c.target,i=this.triggers,l=!c.ctrlKey&&!c.shiftKey&&!c.altKey,k=c.ctrlKey&&!c.shiftKey&&!c.altKey;switch(c.keyCode){case x:case u:if((g=h.call(this,g))&&l)this.switchTo(d.indexOf(g,this.triggers)),c.halt();break;case q:case o:if(g=h.call(this,g))b.call(this,g),c.halt();break;case y:case A:if(g=h.call(this,g))f.call(this,g),c.halt();break;case t:k&&(c.halt(),g=e.call(this,g),f.call(this,g));break;case s:k&&(c.halt(),g=e.call(this,g),b.call(this,g));break;case p:l&&(e.call(this,g),a.call(this,0,!0),
c.halt());break;case r:l&&(e.call(this,g),a.call(this,i.length-1,!0),c.halt());break;case v:c.ctrlKey&&!c.altKey&&(c.halt(),g=e.call(this,g),c.shiftKey?b.call(this,g):f.call(this,g))}}function a(a,b){var f=this.triggers,g=f[a];d.each(f,function(a){a!==g&&(w(a,"-1"),c.removeClass(a,"ks-switchable-select"),a.setAttribute("aria-selected","false"))});b&&g.focus();w(g,"0");c.addClass(g,"ks-switchable-select");g.setAttribute("aria-selected","true")}function b(b){var f=this.triggers,b=d.indexOf(b,f);a.call(this,
0==b?f.length-1:b-1,!0)}function f(b){var f=this.triggers,b=d.indexOf(b,f);a.call(this,b==f.length-1?0:b+1,!0)}function g(b){var f=!(!b.originalEvent.target&&!b.originalEvent.srcElement),b=b.currentIndex,g=this.panels,c=this.triggers,e=c[b],u=g[b];this.config.multiple||(d.each(g,function(a){a!==u&&a.setAttribute("aria-hidden","true")}),d.each(c,function(a){a!==e&&a.setAttribute("aria-hidden","true")}));g=u.getAttribute("aria-hidden");u.setAttribute("aria-hidden","false"==g?"true":"false");e.setAttribute("aria-expanded",
"false"==g?"false":"true");a.call(this,b,f)}var s=33,t=34,r=35,p=36,q=37,o=38,y=39,A=40,v=9,u=32,x=13;d.mix(m.Config,{aria:!0});m.Plugins.push({name:"aria",init:function(a){if(a.config.aria){var b=a.container,f=a.activeIndex;c.attr(b,"aria-multiselectable",a.config.multiple?"true":"false");a.nav&&c.attr(a.nav,"role","tablist");var e=a.triggers,u=a.panels,o=0;d.each(u,function(a){a.id||(a.id=d.guid("ks-accordion-tab-panel"))});d.each(e,function(a){a.id||(a.id=d.guid("ks-accordion-tab"))});d.each(e,
function(a){a.setAttribute("role","tab");a.setAttribute("aria-expanded",f==o?"true":"false");a.setAttribute("aria-selected",f==o?"true":"false");a.setAttribute("aria-controls",u[o].id);w(a,f==o?"0":"-1");o++});o=0;d.each(u,function(a){var b=e[o];a.setAttribute("role","tabpanel");a.setAttribute("aria-hidden",f==o?"false":"true");a.setAttribute("aria-labelledby",b.id);o++});a.on("switch",g,a);j.on(b,"keydown",i,a);j.on(b,"keypress",l,a)}}});var w=k.setTabIndex},{requires:["dom","event","../aria","./base"]});
KISSY.add("switchable/accordion/base",function(d,c,j){function k(c,d){if(!(this instanceof k))return new k(c,d);k.superclass.constructor.apply(this,arguments)}d.extend(k,j,{_switchTrigger:function(d,h){var j=this.config;j.multiple?c.toggleClass(h,j.activeTriggerCls):k.superclass._switchTrigger.apply(this,arguments)},_triggerIsValid:function(c){return this.config.multiple||k.superclass._triggerIsValid.call(this,c)},_switchView:function(d,h,j){var e=this.config,l=this._getFromToPanels().toPanels;e.multiple?
(c.toggle(l),this._fireOnSwitch(h),j&&j.call(this)):k.superclass._switchView.apply(this,arguments)}});k.Plugins=[];k.Config={markupType:1,triggerType:"click",multiple:!1};return k},{requires:["dom","../base"]});
KISSY.add("switchable/aria",function(d,c,j,k){function m(){this.stop&&this.stop()}function h(){this.start&&this.start()}k.Plugins.push({name:"aria",init:function(c){if(c.config.aria){var d=c.container;j.on(d,"focusin",m,c);j.on(d,"focusout",h,c)}}});var n=["a","input","button","object"];return{setTabIndex:function(e,l){e.tabIndex=l;d.each(c.query("*",e),function(e){var a=e.nodeName.toLowerCase();d.inArray(a,n)&&(c.hasAttr(e,"oriTabIndex")||c.attr(e,"oriTabIndex",e.tabIndex),e.tabIndex=-1!=l?c.attr(e,
"oriTabIndex"):l)})}}},{requires:["dom","event","./base"]});
KISSY.add("switchable/autoplay",function(d,c,j,k,m){var h=d.Env.host,n=function(e){var d=c.scrollTop(),i=c.viewportHeight(),a=c.offset(e),e=c.height(e);return a.top>d&&a.top+e<d+i};d.mix(k.Config,{pauseOnScroll:!1,autoplay:!1,interval:5,pauseOnHover:!0});k.Plugins.push({name:"autoplay",init:function(c){function l(){b=d.later(function(){c.paused||c.next()},a,!0)}var i=c.config,a=1E3*i.interval,b;if(i.autoplay&&(i.pauseOnScroll&&(c.__scrollDetect=d.buffer(function(){c[n(c.container)?"start":"stop"]()},
200),j.on(h,"scroll",c.__scrollDetect)),l(),c.stop=function(){if(b){b.cancel();b=m}c.paused=true},c.start=function(){if(b){b.cancel();b=m}c.paused=false;l()},i.pauseOnHover))j.on(c.container,"mouseenter",c.stop,c),j.on(c.container,"mouseleave",c.start,c)},destroy:function(c){c.__scrollDetect&&j.remove(h,"scroll",c.__scrollDetect)}});return k},{requires:["dom","event","./base"]});
KISSY.add("switchable/autorender",function(d,c,j,k){k.autoRender=function(m,h){d.each(c.query("."+(m||"KS_Widget"),h),function(c){var d=c.getAttribute("data-widget-type"),l;if(d&&-1<"Switchable Tabs Slide Carousel Accordion".indexOf(d))try{(l=c.getAttribute("data-widget-config"))&&(l=l.replace(/'/g,'"')),new ("Switchable"==d?k:k[d])(c,j.parse(l))}catch(i){}})}},{requires:["dom","json","./base"]});
KISSY.add("switchable/base",function(d,c,j,k){function m(a,b){b=b||{};"markupType"in b||(b.panelCls?b.markupType=1:b.panels&&(b.markupType=2));for(var f=this.constructor;f;)b=d.merge(f.Config,b),f=f.superclass?f.superclass.constructor:null;this.container=c.get(a);this.config=b;this.activeIndex=b.activeIndex;var g;-1<this.activeIndex||("number"==typeof b.switchTo?g=b.switchTo:this.activeIndex=0);this._init();this._initPlugins();this.fire(l);g!==k&&this.switchTo(g)}function h(a){var b={};b.type=a.type;
b.target=a.target;return{originalEvent:b}}var n=d.makeArray,e=j.Target,l="init",i="remove";m.getDomEvent=h;m.Config={markupType:0,navCls:"ks-switchable-nav",contentCls:"ks-switchable-content",triggerCls:"ks-switchable-trigger",panelCls:"ks-switchable-panel",triggers:[],panels:[],hasTriggers:!0,triggerType:"mouse",delay:0.1,activeIndex:-1,activeTriggerCls:"ks-active",switchTo:k,steps:1,viewSize:[]};m.Plugins=[];d.augment(m,e,{_initPlugins:function(){for(var a=this,b=[],c=a.constructor;c;)b.push.apply(b,
c.Plugins.reverse()),c=c.superclass?c.superclass.constructor:null;b.reverse();d.each(b,function(b){b.init&&b.init(a)})},_init:function(){var a=this.config;this._parseMarkup();a.hasTriggers&&this._bindTriggers();this._bindPanels()},_parseMarkup:function(){var a=this.container,b=this.config,f,g,d=[],e=[];switch(b.markupType){case 0:(f=c.get("."+b.navCls,a))&&(d=c.children(f));g=c.get("."+b.contentCls,a);e=c.children(g);break;case 1:d=c.query("."+b.triggerCls,a);e=c.query("."+b.panelCls,a);break;case 2:d=
b.triggers,e=b.panels}this.length=Math.ceil(e.length/b.steps);this.nav=f||b.hasTriggers&&d[0]&&d[0].parentNode;if(b.hasTriggers&&(!this.nav||0==d.length))d=this._generateTriggersMarkup(this.length);this.triggers=n(d);this.panels=n(e);this.content=g||e[0].parentNode},_generateTriggersMarkup:function(a){var b=this.config,f=this.nav||c.create("<ul>"),g,d;f.className=b.navCls;for(d=0;d<a;d++)g=c.create("<li>"),d===this.activeIndex&&(g.className=b.activeTriggerCls),g.innerHTML=d+1,f.appendChild(g);this.container.appendChild(f);
this.nav=f;return c.children(f)},_bindTriggers:function(){var a=this,b=a.config,c=d.one(a.nav);d.each(a.triggers,function(b){a._initTrigger(b)});c.delegate("click",".ks-switchable-trigger-internal",function(b){var c=a._getTriggerIndex(b.currentTarget);a._onFocusTrigger(c,b)});"mouse"===b.triggerType&&c.delegate("mouseenter",".ks-switchable-trigger-internal",function(b){var c=a._getTriggerIndex(b.currentTarget);a._onMouseEnterTrigger(c,b)}).delegate("mouseleave",".ks-switchable-trigger-internal",function(){a._onMouseLeaveTrigger()})},
_initTrigger:function(a){c.addClass(a,"ks-switchable-trigger-internal")},_bindPanels:function(){var a=this;d.each(a.panels,function(b){a._initPanel(b)})},_initPanel:function(a){c.addClass(a,"ks-switchable-panel-internal")},_onFocusTrigger:function(a,b){this._triggerIsValid(a)&&(this._cancelSwitchTimer(),this.switchTo(a,k,h(b)))},_onMouseEnterTrigger:function(a,b){var c=this;if(c._triggerIsValid(a)){var g=h(b);c.switchTimer=d.later(function(){c.switchTo(a,k,g)},1E3*c.config.delay)}},_onMouseLeaveTrigger:function(){this._cancelSwitchTimer()},
_triggerIsValid:function(a){return this.activeIndex!==a},_cancelSwitchTimer:function(){this.switchTimer&&(this.switchTimer.cancel(),this.switchTimer=k)},_getTriggerIndex:function(a){return d.indexOf(a,this.triggers)},_resetLength:function(){this.length=this._getLength()},_getLength:function(a){var b=this.config;a===k&&(a=this.panels.length);return Math.ceil(a/b.steps)},_afterAdd:function(a,b){this._resetLength();var c=this._getLength(a+1)-1;1==this.config.steps&&this.activeIndex>=c&&(this.activeIndex+=
1);var g=this.activeIndex;this.activeIndex=-1;this.switchTo(g);b&&this.switchTo(c)},add:function(a){var b=this.nav,f=this.content,g=a.trigger,d=a.panel,e=a.active,i=this.panels.length,a=null!=a.index?a.index:i,l=this.triggers,h=this.panels,o=this.length,k=null,k=null,a=Math.max(0,Math.min(a,i)),i=h[a]||null;h.splice(a,0,d);f.insertBefore(d,i);1==this.config.steps?(k=l[a],b.insertBefore(g,k),l.splice(a,0,g)):(k=this._getLength(),k!=o&&(c.append(g,b),l.push(g)));this._initPanel(d);this._initTrigger(g);
this.fire("add",{index:a,trigger:g,panel:d});this._afterAdd(a,e)},remove:function(a){function b(){o&&(c.remove(o),l.splice(a,1));if(j){c.remove(j);for(var b=0;b<p.length;b++)if(p[b]==j){f.triggers.splice(b,1);break}}f._resetLength();f.fire(i,{index:a,trigger:j,panel:o})}var f=this,g=f.config.steps,e=f.length,l=f.panels,h=f._getLength(l.length-1),p=f.triggers,j=null,o=null,a=d.isNumber(a)?Math.max(0,Math.min(a,l.length-1)):d.indexOf(a,l),j=1==g?p[a]:h!==e?p[e-1]:null,o=l[a];if(!1!==f.fire("beforeRemove",
{index:a,panel:o,trigger:j}))if(0==h)b();else{var m=f.activeIndex;1<g?m>=h?f.switchTo(h-1,k,k,b):(b(),f.activeIndex=-1,f.switchTo(m)):m==a?f.switchTo(0<m?m-1:m+1,k,k,function(){b();0==m&&(f.activeIndex=0)}):(m>a&&(m--,f.activeIndex=m),b())}},switchTo:function(a,b,c,d){var e=this,l=e.config,i=e.activeIndex,h=e.triggers;if(!e._triggerIsValid(a)||!1===e.fire("beforeSwitch",{fromIndex:i,toIndex:a}))return e;e.fromIndex=i;l.hasTriggers&&e._switchTrigger(h[i]||null,h[a]);b===k&&(b=a>i?"forward":"backward");
e.activeIndex=a;e._switchView(b,c,function(){d&&d.call(e)});return e},_switchTrigger:function(a,b){var f=this.config.activeTriggerCls;a&&c.removeClass(a,f);c.addClass(b,f)},_getFromToPanels:function(){var a=this.fromIndex,b;b=this.config.steps;var c=this.panels,d=this.activeIndex,a=-1<a?c.slice(a*b,(a+1)*b):null;b=c.slice(d*b,(d+1)*b);return{fromPanels:a,toPanels:b}},_switchView:function(a,b,d){var g=this,e=g._getFromToPanels(),a=e.fromPanels,e=e.toPanels;a&&c.css(a,"display","none");c.css(e,"display",
"block");setTimeout(function(){g._fireOnSwitch(b)},0);d&&d.call(this)},_fireOnSwitch:function(a){this.fire("switch",d.merge(a,{fromIndex:this.fromIndex,currentIndex:this.activeIndex}))},prev:function(a){this.switchTo((this.activeIndex-1+this.length)%this.length,"backward",a)},next:function(a){this.switchTo((this.activeIndex+1)%this.length,"forward",a)},destroy:function(a){for(var b=this,f=b.constructor;f;)d.each(f.Plugins,function(a){a.destroy&&a.destroy(b)}),f=f.superclass?f.superclass.constructor:
null;a?j.remove(b.container):c.remove(b.container);b.nav=null;b.content=null;b.container=null;b.triggers=[];b.panels=[];b.detach()}});return m},{requires:["dom","event"]});
KISSY.add("switchable/carousel/aria",function(d,c,j,k,m){function h(a){var b=a.currentIndex,c=this.activeIndex,f=this.panels,e=f[b*this.config.steps],g=this.triggers,b=g[b];if((a=!(!a.originalEvent.target&&!a.originalEvent.srcElement))||-1==c)d.each(g,function(a){p(a,-1)}),d.each(f,function(a){p(a,-1)}),b&&p(b,0),p(e,0),a&&e.focus()}function n(a){var b=null;d.each(this.triggers,function(d){if(d==a||c.contains(d,a))return b=d,!1});return b}function e(a){var e=a.target;switch(a.keyCode){case s:case g:if(e=
n.call(this,e)){var o=c.next(e),i=this.triggers;o||(o=i[0]);p(e,-1);o&&(p(o,0),o.focus());a.halt()}break;case f:case b:if(e=n.call(this,e))o=c.prev(e),i=this.triggers,o||(o=i[i.length-1]),p(e,-1),o&&(p(o,0),o.focus()),a.halt();break;case r:case t:if(e=n.call(this,e))this.switchTo(d.indexOf(e,this.triggers),void 0,q),a.halt()}}function l(a){var b=null;d.each(this.panels,function(d){if(d==a||c.contains(d,a))return b=d,!1});return b}function i(a,b){var c=d.indexOf(a,this.panels),e=this.config.steps,
f=Math.floor(c/e);return f==this.activeIndex?1:0==c%e||c%e==e-1?(this.switchTo(f,b,q),0):1}function a(a){var d=a.target;switch(a.keyCode){case s:case g:if(d=l.call(this,d)){var e=c.next(d),h=this.panels;e||(e=h[0]);p(d,-1);p(e,0);i.call(this,e,o)&&e.focus();a.halt()}break;case f:case b:if(d=l.call(this,d))e=c.prev(d),h=this.panels,e||(e=h[h.length-1]),p(d,-1),p(e,0),i.call(this,e,y)&&e.focus(),a.halt();break;case r:case t:if(d=l.call(this,d))this.fire("itemSelected",{item:d}),a.halt()}}var b=37,f=
38,g=39,s=40,t=32,r=13,p=k.setTabIndex,q={originalEvent:{target:1}},o="forward",y="backward";d.mix(m.Config,{aria:!1});m.Plugins.push({name:"aria",init:function(b){if(b.config.aria){var c=b.triggers,f=b.panels,g=b.content,o=b.activeIndex;g.id||(g.id=d.guid("ks-switchbale-content"));g.setAttribute("role","listbox");var i=0;d.each(c,function(a){p(a,o==i?"0":"-1");a.setAttribute("role","button");a.setAttribute("aria-controls",g.id);i++});i=0;d.each(f,function(a){p(a,"-1");a.setAttribute("role","option");
i++});b.on("switch",h,b);if(c=b.nav)j.on(c,"keydown",e,b);j.on(g,"keydown",a,b);c=b.prevBtn;f=b.nextBtn;c&&(p(c,0),c.setAttribute("role","button"),j.on(c,"keydown",function(a){if(a.keyCode==r||a.keyCode==t){b.prev(q);a.preventDefault()}}));f&&(p(f,0),f.setAttribute("role","button"),j.on(f,"keydown",function(a){if(a.keyCode==r||a.keyCode==t){b.next(q);a.preventDefault()}}))}}})},{requires:["dom","event","../aria","./base"]});
KISSY.add("switchable/carousel/base",function(d,c,j,k){function m(c,d){if(!(this instanceof m))return new m(c,d);m.superclass.constructor.apply(this,arguments)}var h="prevBtn",n="nextBtn",e={originalEvent:{target:1}};m.Config={circular:!0,prevBtnCls:"ks-switchable-prev-btn",nextBtnCls:"ks-switchable-next-btn",disableBtnCls:"ks-switchable-disable-btn"};m.Plugins=[];d.extend(m,k,{_init:function(){function l(a){c.removeClass([i[h],i[n]],b);0==a&&c.addClass(i[h],b);a==i.length-1&&c.addClass(i[n],b)}var i=
this;m.superclass._init.call(i);var a=i.config,b=a.disableBtnCls;d.each(["prev","next"],function(b){var d=i[b+"Btn"]=c.get("."+a[b+"BtnCls"],i.container);j.on(d,"mousedown",function(c){c.preventDefault();c=i.activeIndex;if("prev"==b&&(0!=c||a.circular))i[b](e);if("next"==b&&(c!=i.length-1||a.circular))i[b](e)})});a.circular||(i.on("added removed",function(){l(i.activeIndex)}),i.on("switch",function(a){l(a.currentIndex)}));j.delegate(i.content,"click",".ks-switchable-panel-internal",function(a){i.fire("itemSelected",
{item:a.currentTarget})})}});return m},{requires:["dom","event","../base"]});
KISSY.add("switchable/circular",function(d,c,j,k){function m(b,d){var e=this,l=e.fromIndex,o=e.config,k=e.length,m=o.scrollType===s,v=m?i:a,u=e.activeIndex,x=e.viewSize[m?0:1],m=-x*u,w=e.panels,D=e.config.steps,B={},C,z=d===g;C=z&&0===l&&u===k-1||!z&&l===k-1&&0===u;e.anim&&(e.anim.stop(),"relative"==w[l*D].style.position&&n.call(e,w,l,v,x,1));C&&(m=h.call(e,w,z,v,x));B[v]=m+f;-1<l?e.anim=(new j(e.content,B,o.duration,o.easing,function(){C&&n.call(e,w,z,v,x,1);e.anim=void 0;b&&b()})).run():(c.css(e.content,
B),b&&b())}function h(a,b,d,f){var g=this.config.steps,i=this.length,h=b?i-1:0,a=a.slice(h*g,(h+1)*g);c.css(a,e,l);c.css(a,d,(b?-1:1)*f*i);return b?f:-f*i}function n(a,d,f,g,o){var i=this.config.steps,h=this.length,l=d?h-1:0,a=a.slice(l*i,(l+1)*i);c.css(a,e,b);c.css(a,f,b);o&&c.css(this.content,f,d?-g*(h-1):b)}var e="position",l="relative",i="left",a="top",b="",f="px",g="backward",s="scrollx";d.mix(k.Config,{circular:!1});k.adjustPosition=h;k.resetPosition=n;k.Plugins.push({name:"circular",init:function(a){a=
a.config;if(a.circular&&(a.effect===s||"scrolly"===a.effect))a.scrollType=a.effect,a.effect=m}})},{requires:["dom","anim","./base","./effect"]});
KISSY.add("switchable/effect",function(d,c,j,k,m,h){var n;d.mix(m.Config,{effect:"none",duration:0.5,easing:"easeNone"});m.Effects={none:function(d){var h=this._getFromToPanels(),i=h.fromPanels,h=h.toPanels;i&&c.css(i,"display","none");c.css(h,"display","block");d&&d()},fade:function(d){var l=this,i=l._getFromToPanels(),a=i.fromPanels,b=l.config,f=a?a[0]:null,g=i.toPanels[0];l.anim&&(l.anim.stop(),c.css(l.anim.fromEl,{zIndex:1,opacity:0}),c.css(l.anim.toEl,"zIndex",9));c.css(g,"opacity",1);f?(l.anim=
(new k(f,{opacity:0},b.duration,b.easing,function(){l.anim=h;c.css(g,"z-index",9);c.css(f,"z-index",1);d&&d()})).run(),l.anim.toEl=g,l.anim.fromEl=f):(c.css(g,"z-index",9),d&&d())},scroll:function(d,l){var i=this,a=i.fromIndex,b=i.config,f="scrollx"===b.effect,g={};g[f?"left":"top"]=-(i.viewSize[f?0:1]*i.activeIndex)+"px";i.anim&&i.anim.stop();l||-1<a?i.anim=(new k(i.content,g,b.duration,b.easing,function(){i.anim=h;d&&d()})).run():(c.css(i.content,g),d&&d())}};n=m.Effects;n.scrollx=n.scrolly=n.scroll;
m.Plugins.push({name:"effect",init:function(e){var h=e.config,i=h.effect,a=e.panels,b=e.content,f=h.steps,g=a[0],k=e.activeIndex;if("none"!==i)switch(c.css(a,"display","block"),i){case "scrollx":case "scrolly":c.css(b,"position","absolute");"static"==c.css(b.parentNode,"position")&&c.css(b.parentNode,"position","relative");"scrollx"===i&&(c.css(a,"float","left"),c.width(b,"9999px"));e.viewSize=[h.viewSize[0]||g&&g.offsetWidth*f,h.viewSize[1]||g&&g.offsetHeight*f];break;case "fade":var j=k*f,m=j+f-
1,n;d.each(a,function(a,b){n=b>=j&&b<=m;c.css(a,{opacity:n?1:0,position:"absolute",zIndex:n?9:1})})}}});d.augment(m,{_switchView:function(c,h,i){var a=this,b=a.config.effect;(d.isFunction(b)?b:n[b]).call(a,function(){a._fireOnSwitch(h);i&&i.call(a)},c)}});return m},{requires:["dom","event","anim","./base"]});
KISSY.add("switchable/lazyload",function(d,c,j){var k="beforeSwitch",m="img",h="textarea",n={};n[m]="lazyImgAttribute";n[h]="lazyTextareaClass";d.mix(j.Config,{lazyImgAttribute:"data-ks-lazyload-custom",lazyTextareaClass:"ks-datalazyload-custom",lazyDataType:h});j.Plugins.push({name:"lazyload",init:function(e){function l(d){var j=a.steps,d=d.toIndex*j;i.loadCustomLazyData(e.panels.slice(d,d+j),b,f);a:{var n,r,p;if(d=(j=b===m)?"img":b===h?"textarea":""){d=c.query(d,e.container);n=0;for(p=d.length;n<
p;n++)if(r=d[n],j?c.attr(r,f):c.hasClass(r,f)){j=!1;break a}}j=!0}j&&e.detach(k,l)}var i=d.require("datalazyload"),a=e.config,b,f;"img-src"===a.lazyDataType&&(a.lazyDataType=m);"area-data"===a.lazyDataType&&(a.lazyDataType=h);b=a.lazyDataType;f=a[n[b]];if(i&&b&&f)e.on(k,l)}});return j},{requires:["dom","./base"]});
KISSY.add("switchable/slide/base",function(d,c){function j(c,d){if(!(this instanceof j))return new j(c,d);j.superclass.constructor.apply(this,arguments)}j.Config={autoplay:!0,circular:!0};j.Plugins=[];d.extend(j,c);return j},{requires:["../base"]});KISSY.add("switchable",function(d,c,j,k,m,h,n,e,l,i,a,b,f,g){d.mix(c,{Accordion:k,Carousel:e,Slide:f,Tabs:g,Aria:j});return c},{requires:"switchable/base,switchable/aria,switchable/accordion/base,switchable/accordion/aria,switchable/autoplay,switchable/autorender,switchable/carousel/base,switchable/carousel/aria,switchable/circular,switchable/effect,switchable/lazyload,switchable/slide/base,switchable/tabs/base,switchable/tabs/aria".split(",")});
KISSY.add("switchable/tabs/aria",function(d,c,j,k,m,h){function n(a){var b=null;d.each(this.triggers,function(d){if(d==a||c.contains(d,a))b=d});return b}function e(c){switch(c.keyCode){case a:case b:c.ctrlKey&&!c.altKey&&!c.shiftKey&&c.halt();break;case r:c.ctrlKey&&!c.altKey&&c.halt()}}function l(c){var d=c.target,e=c.ctrlKey&&!c.shiftKey&&!c.altKey;switch(c.keyCode){case f:case g:n.call(this,d)&&(this.prev(q(c)),c.halt());break;case s:case t:n.call(this,d)&&(this.next(q(c)),c.halt());break;case b:e&&
(c.halt(),this.next(q(c)));break;case a:e&&(c.halt(),this.prev(q(c)));break;case r:c.ctrlKey&&!c.altKey&&(c.halt(),c.shiftKey?this.prev(q(c)):this.next(q(c)))}}function i(a){var b=!(!a.originalEvent.target&&!a.originalEvent.srcElement),c=a.fromIndex,d=a.currentIndex;if(c!=d){var a=this.triggers[c],e=this.triggers[d],c=this.panels[c],d=this.panels[d];a&&p(a,"-1");p(e,"0");b&&e.focus();c&&c.setAttribute("aria-hidden","true");d.setAttribute("aria-hidden","false")}}var a=33,b=34,f=37,g=38,s=39,t=40,r=
9;d.mix(h.Config,{aria:!0});h.Plugins.push({name:"aria",init:function(a){function b(a){a.setAttribute("role","tab");p(a,"-1");a.id||(a.id=d.guid("ks-switchable"))}function f(a,b){a.setAttribute("role","tabpanel");a.setAttribute("aria-hidden","true");a.setAttribute("aria-labelledby",b.id)}if(a.config.aria){var g=a.triggers,h=a.activeIndex,k=a.panels,m=a.container;a.nav&&c.attr(a.nav,"role","tablist");var n=0;d.each(g,b);a.on("added",function(a){var c;b(c=a.trigger);f(a.panel,c)});n=0;d.each(k,function(a){f(a,
g[n]);n++});-1<h&&(p(g[h],"0"),k[h].setAttribute("aria-hidden","false"));a.on("switch",i,a);j.on(m,"keydown",l,a);j.on(m,"keypress",e,a)}}});var p=m.setTabIndex,q=k.getDomEvent},{requires:["dom","event","../base","../aria","./base"]});KISSY.add("switchable/tabs/base",function(d,c){function j(c,d){if(!(this instanceof j))return new j(c,d);j.superclass.constructor.call(this,c,d);return 0}d.extend(j,c);j.Config={};j.Plugins=[];return j},{requires:["../base"]});
KISSY.add("switchable/touch",function(d,c,j,k,m){d.mix(k.Config,{mouseAsTouch:!1});k.Plugins.push({name:"touch",init:function(h){var n=h.config,e=n.scrollType||n.effect;if("scrolly"==e||"scrollx"==e){var l=h.content,i=h.container,a,b=n.mouseAsTouch,f,g=0,s=0,t={},r={},p="left",q,o;"scrolly"==e&&(p="top");var y=function(){if("relative"!=h.panels[h.activeIndex].style.position){h.stop&&h.stop();s=1;t=c.offset(l);var a=c.offset(i);a.bottom=a.top+i.offsetHeight;a.right=a.left+i.offsetWidth;r=a}},A=function(b){if(s){var d=
-1!=b.type.indexOf("touch")?b.originalEvent.changedTouches[0]:b,i={};"scrolly"==e?(o=h.viewSize[1],q=d.pageY-f,i.top=t.top+q,d=d.pageY>=r.top&&d.pageY<=r.bottom):(o=h.viewSize[0],q=d.pageX-a,i.left=t.left+q,d=d.pageX>=r.left&&d.pageX<=r.right);if(g||3<Math.abs(q))(-1!=b.type.indexOf("touch")&&b.preventDefault(),h.anim&&(h.anim.stop(),h.anim=m),d)?(g||(g=1,n.circular&&(b=h.activeIndex,b==h.length-1?k.adjustPosition.call(h,h.panels,!1,p,o):0==b&&k.adjustPosition.call(h,h.panels,!0,p,o))),c.offset(l,
i)):v()}},v=function(){if(g){s=g=0;var a=h.activeIndex,b=h.length-1;!n.circular&&(0>q&&a==b||0<q&&0==a)?k.Effects[e].call(h,m,!0):(0>q&&a==b||0<q&&0==a||(0==a||a==b)&&k.resetPosition.call(h,h.panels,0==a,p,o),h[0>q?"next":"prev"](),h.start&&h.start())}};j.on(l,"touchstart",function(b){y();a=b.pageX;f=b.pageY});j.on(l,"touchmove",A);j.on(l,"touchend",v);b&&!("ontouchstart"in d.Env.host.document.documentElement)&&d.use("dd",function(b,c){var d=new c.Draggable({node:l});d.on("dragstart",function(){y();
a=d.startMousePos.left;f=d.startMousePos.top});d.on("drag",A);d.on("dragend",v);h.__touchDD=d})}},destroy:function(c){var d;(d=c.__touchDD)&&d.destroy()}})},{requires:["dom","event","./base"]});
