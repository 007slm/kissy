/*
Copyright 2012, KISSY UI Library v1.30dev
MIT Licensed
build time: Apr 23 11:53
*/
KISSY.add("switchable/accordion/aria",function(e,c,g,h,b){function n(a){var d;e.each(this.triggers,function(f){if(f==a||c.contains(f,a))d=f});return d}function j(a){var d;e.each(this.panels,function(f){if(f==a||c.contains(f,a))d=f});return d}function m(a){var d=n.call(this,a);d||(a=j.call(this,a),d=this.triggers[e.indexOf(a,this.panels)]);return d}function q(a){switch(a.keyCode){case t:case k:a.ctrlKey&&!a.altKey&&!a.shiftKey&&a.halt();break;case D:a.ctrlKey&&!a.altKey&&a.halt()}}function a(a){var c=
a.target,r=this.triggers,b=!a.ctrlKey&&!a.shiftKey&&!a.altKey,h=a.ctrlKey&&!a.shiftKey&&!a.altKey;switch(a.keyCode){case w:case x:if((c=n.call(this,c))&&b)this.switchTo(e.indexOf(c,this.triggers)),a.halt();break;case u:case p:if(c=n.call(this,c))f.call(this,c),a.halt();break;case y:case s:if(c=n.call(this,c))i.call(this,c),a.halt();break;case k:h&&(a.halt(),c=m.call(this,c),i.call(this,c));break;case t:h&&(a.halt(),c=m.call(this,c),f.call(this,c));break;case l:b&&(m.call(this,c),d.call(this,0,!0),
a.halt());break;case o:b&&(m.call(this,c),d.call(this,r.length-1,!0),a.halt());break;case D:a.ctrlKey&&!a.altKey&&(a.halt(),c=m.call(this,c),a.shiftKey?f.call(this,c):i.call(this,c))}}function d(a,d){var f=this.triggers,i=f[a];e.each(f,function(a){a!==i&&(v(a,"-1"),c.removeClass(a,"ks-switchable-select"),a.setAttribute("aria-selected","false"))});d&&i.focus();v(i,"0");c.addClass(i,"ks-switchable-select");i.setAttribute("aria-selected","true")}function f(a){var c=this.triggers,a=e.indexOf(a,c);d.call(this,
0==a?c.length-1:a-1,!0)}function i(a){var c=this.triggers,a=e.indexOf(a,c);d.call(this,a==c.length-1?0:a+1,!0)}function r(a){var c=!(!a.originalEvent.target&&!a.originalEvent.srcElement),a=a.currentIndex,f=this.panels,i=this.triggers,s=i[a],r=f[a];this.config.multiple||(e.each(f,function(a){a!==r&&a.setAttribute("aria-hidden","true")}),e.each(i,function(a){a!==s&&a.setAttribute("aria-hidden","true")}));f=r.getAttribute("aria-hidden");r.setAttribute("aria-hidden","false"==f?"true":"false");s.setAttribute("aria-expanded",
"false"==f?"false":"true");d.call(this,a,c)}var t=33,k=34,o=35,l=36,u=37,p=38,y=39,s=40,D=9,x=32,w=13;e.mix(b.Config,{aria:!0});b.Plugins.push({name:"aria",init:function(d){if(d.config.aria){var f=d.container,i=d.activeIndex;c.attr(f,"aria-multiselectable",d.config.multiple?"true":"false");d.nav&&c.attr(d.nav,"role","tablist");var s=d.triggers,m=d.panels,b=0;e.each(m,function(a){a.id||(a.id=e.guid("ks-accordion-tab-panel"))});e.each(s,function(a){a.id||(a.id=e.guid("ks-accordion-tab"))});e.each(s,
function(a){a.setAttribute("role","tab");a.setAttribute("aria-expanded",i==b?"true":"false");a.setAttribute("aria-selected",i==b?"true":"false");a.setAttribute("aria-controls",m[b].id);v(a,i==b?"0":"-1");b++});b=0;e.each(m,function(a){var d=s[b];a.setAttribute("role","tabpanel");a.setAttribute("aria-hidden",i==b?"false":"true");a.setAttribute("aria-labelledby",d.id);b++});d.on("switch",r,d);g.on(f,"keydown",a,d);g.on(f,"keypress",q,d)}}});var v=h.setTabIndex},{requires:["dom","event","../aria","./base"]});
KISSY.add("switchable/accordion/base",function(e,c,g){function h(c,e){if(!(this instanceof h))return new h(c,e);h.superclass.constructor.apply(this,arguments)}e.extend(h,g,{_switchTrigger:function(b,e){var j=this.config;j.multiple?c.toggleClass(e,j.activeTriggerCls):h.superclass._switchTrigger.apply(this,arguments)},_triggerIsValid:function(c){return this.config.multiple||h.superclass._triggerIsValid.call(this,c)},_switchView:function(b,e,j,m,q,a,d){var f=e[0];this.config.multiple?(c.toggle(f),this._fireOnSwitch(j,
m,a),d&&d.call(this)):h.superclass._switchView.apply(this,arguments)}});h.Plugins=[];h.Config={markupType:1,triggerType:"click",multiple:!1};return h},{requires:["dom","../base"]});
KISSY.add("switchable/aria",function(e,c,g,h){function b(){this.stop&&this.stop()}function n(){this.start&&this.start()}h.Plugins.push({name:"aria",init:function(c){if(c.config.aria){var e=c.container;g.on(e,"focusin",b,c);g.on(e,"focusout",n,c)}}});var j=["a","input","button","object"];return{setTabIndex:function(b,h){b.tabIndex=h;e.each(c.query("*",b),function(a){var d=a.nodeName.toLowerCase();e.inArray(d,j)&&(c.hasAttr(a,"oriTabIndex")||c.attr(a,"oriTabIndex",a.tabIndex),a.tabIndex=-1!=h?c.attr(a,
"oriTabIndex"):h)})}}},{requires:["dom","event","./base"]});
KISSY.add("switchable/autoplay",function(e,c,g,h,b){var n=e.Env.host,j=function(b){var e=c.scrollTop(),a=c.viewportHeight(),d=c.offset(b),b=c.height(b);return d.top>e&&d.top+b<e+a};e.mix(h.Config,{pauseOnScroll:!1,autoplay:!1,interval:5,pauseOnHover:!0});h.Plugins.push({name:"autoplay",init:function(c){function h(){f=e.later(function(){c.paused||c.next()},d,!0)}var a=c.config,d=1E3*a.interval,f;if(a.autoplay&&(a.pauseOnScroll&&(c.__scrollDetect=e.buffer(function(){c[j(c.container)?"start":"stop"]()},
200),g.on(n,"scroll",c.__scrollDetect)),h(),c.stop=function(){if(f){f.cancel();f=b}c.paused=true},c.start=function(){if(f){f.cancel();f=b}c.paused=false;h()},a.pauseOnHover))g.on(c.container,"mouseenter",c.stop,c),g.on(c.container,"mouseleave",c.start,c)},destroy:function(c){c.__scrollDetect&&g.remove(n,"scroll",c.__scrollDetect)}});return h},{requires:["dom","event","./base"]});
KISSY.add("switchable/autorender",function(e,c,g,h){h.autoRender=function(b,n){e.each(c.query("."+(b||"KS_Widget"),n),function(c){var b=c.getAttribute("data-widget-type"),e;if(b&&-1<"Switchable Tabs Slide Carousel Accordion".indexOf(b))try{(e=c.getAttribute("data-widget-config"))&&(e=e.replace(/'/g,'"')),new ("Switchable"==b?h:h[b])(c,g.parse(e))}catch(a){}})}},{requires:["dom","json","./base"]});
KISSY.add("switchable/base",function(e,c,g,h){function b(a,d){d=d||{};"markupType"in d||(d.panelCls?d.markupType=1:d.panels&&(d.markupType=2));for(var f=this.constructor;f;)d=e.merge(f.Config,d),f=f.superclass?f.superclass.constructor:null;this.container=c.get(a);this.config=d;this.activeIndex=d.activeIndex;!(-1<this.activeIndex)&&"number"!=typeof d.switchTo&&(this.activeIndex=0);this._init();this._initPlugins();this.fire(m);-1<this.activeIndex||"number"==typeof d.switchTo&&this.switchTo(d.switchTo)}
function n(a){var d={};d.type=a.originalEvent.type;d.target=a.originalEvent.target||a.originalEvent.srcElement;return{originalEvent:d}}var j=e.makeArray,g=g.Target,m="init",q="removed";b.getDomEvent=n;b.Config={markupType:0,navCls:"ks-switchable-nav",contentCls:"ks-switchable-content",triggerCls:"ks-switchable-trigger",panelCls:"ks-switchable-panel",triggers:[],panels:[],hasTriggers:!0,triggerType:"mouse",delay:0.1,activeIndex:-1,activeTriggerCls:"ks-active",steps:1,viewSize:[]};b.Plugins=[];e.augment(b,
g,{_initPlugins:function(){for(var a=this,d=a.constructor;d;)e.each(d.Plugins,function(d){d.init&&d.init(a)}),d=d.superclass?d.superclass.constructor:null},_init:function(){var a=this.config;this._parseMarkup();a.hasTriggers&&this._bindTriggers();this._bindPanels()},_parseMarkup:function(){var a=this.container,d=this.config,f,i,b=[],e=[];switch(d.markupType){case 0:(f=c.get("."+d.navCls,a))&&(b=c.children(f));i=c.get("."+d.contentCls,a);e=c.children(i);break;case 1:b=c.query("."+d.triggerCls,a);e=
c.query("."+d.panelCls,a);break;case 2:b=d.triggers,e=d.panels}this.length=Math.ceil(e.length/d.steps);this.nav=f||d.hasTriggers&&b[0]&&b[0].parentNode;if(d.hasTriggers&&(!this.nav||0==b.length))b=this._generateTriggersMarkup(this.length);this.triggers=j(b);this.panels=j(e);this.content=i||e[0].parentNode},_generateTriggersMarkup:function(a){var d=this.config,f=this.nav||c.create("<ul>"),i,b;f.className=d.navCls;for(b=0;b<a;b++)i=c.create("<li>"),b===this.activeIndex&&(i.className=d.activeTriggerCls),
i.innerHTML=b+1,f.appendChild(i);this.container.appendChild(f);this.nav=f;return c.children(f)},_bindTriggers:function(){var a=this,d=a.config,c=e.one(a.nav);e.each(a.triggers,function(d){a._initTrigger(d)});c.delegate("click",".ks-switchable-trigger-internal",function(d){var c=a._getTriggerIndex(d.currentTarget);a._onFocusTrigger(c,d)});"mouse"===d.triggerType&&c.delegate("mouseenter",".ks-switchable-trigger-internal",function(d){var c=a._getTriggerIndex(d.currentTarget);a._onMouseEnterTrigger(c,
d)}).delegate("mouseleave",".ks-switchable-trigger-internal",function(){a._onMouseLeaveTrigger()})},_initTrigger:function(a){c.addClass(a,"ks-switchable-trigger-internal")},_bindPanels:function(){var a=this;e.each(a.panels,function(d){a._initPanel(d)})},_initPanel:function(a){c.addClass(a,"ks-switchable-panel-internal")},_onFocusTrigger:function(a,d){this._triggerIsValid(a)&&(this._cancelSwitchTimer(),this.switchTo(a,h,n(d)))},_onMouseEnterTrigger:function(a,d){var c=this;if(c._triggerIsValid(a)){var b=
n(d);c.switchTimer=e.later(function(){c.switchTo(a,h,b)},1E3*c.config.delay)}},_onMouseLeaveTrigger:function(){this._cancelSwitchTimer()},_triggerIsValid:function(a){return this.activeIndex!==a},_cancelSwitchTimer:function(){this.switchTimer&&(this.switchTimer.cancel(),this.switchTimer=h)},_getTriggerIndex:function(a){return e.indexOf(a,this.triggers)},_resetLength:function(){this.length=this._getLength()},_getLength:function(a){var d=this.config;a===h&&(a=this.panels.length);return Math.ceil(a/d.steps)},
_afterAdd:function(a,d){this._resetLength();var c=this._getLength(a+1)-1;1==this.config.steps&&this.activeIndex>=c&&(this.activeIndex+=1);var b=this.activeIndex;this.activeIndex=-1;this.switchTo(b);d&&this.switchTo(c)},add:function(a){var d=this.nav,b=this.content,i=a.trigger,e=a.panel,h=a.activated,k=this.panels.length,a=null!=a.index?a.index:k,o=this.triggers,l=this.panels,g=this.length,p=null,p=null,a=Math.max(0,Math.min(a,k)),k=l[a];l.splice(a,0,e);k?c.insertBefore(e,k):c.append(e,b);1==this.config.steps?
((p=o[a])?c.insertBefore(i,p):c.append(i,d),o.splice(a,0,i)):(p=this._getLength(),p!=g&&(c.append(i,d),o.push(i)));this._initPanel(e);this._initTrigger(i);this.fire("added",{index:a,trigger:i,panel:e});this._afterAdd(a,h)},remove:function(a){function d(){m&&(c.remove(m),g.splice(a,1));l&&(c.remove(l),1==i?b.triggers.splice(a,1):b.triggers.splice(r-1,1));b._resetLength();b.fire(q,{index:a,trigger:l,panel:m})}var b=this,i=b.config.steps,r=b.length,g=b.panels,k=b._getLength(g.length-1),o=b.triggers,
l=null,m=null,a=e.isNumber(a)?Math.max(0,Math.min(a,g.length-1)):e.indexOf(a,g),l=1==i?o[a]:k!==r?o[r-1]:null,m=g[a];!1!==b.fire("beforeRemove",{index:a,panel:m,trigger:l})&&(0==k?d():(o=b.activeIndex,1!=i?o>=k?b.switchTo(k-1,h,h,d):(d(),b.activeIndex=-1,b.switchTo(o)):b.switchTo(0<o?o-1:o+1,h,h,d)))},switchTo:function(a,d,c,b){var e=this,g=e.config,k=e.triggers,o=e.panels,l=e.activeIndex,m=g.steps,p=l*m,j=a*m;if(!e._triggerIsValid(a)||!1===e.fire("beforeSwitch",{fromIndex:l,toIndex:a}))return e;
g.hasTriggers&&e._switchTrigger(-1<l?k[l]:null,k[a]);d===h&&(d=a>l?"forward":"backward");e.activeIndex=a;e._switchView(-1<l?o.slice(p,p+m):null,o.slice(j,j+m),l,a,d,c,function(){b&&b.call(e,a)});return e},_switchTrigger:function(a,d){var b=this.config.activeTriggerCls;a&&c.removeClass(a,b);c.addClass(d,b)},_switchView:function(a,d,b,e,h,g,k){var o=this;a&&c.css(a,"display","none");c.css(d,"display","block");setTimeout(function(){o._fireOnSwitch(b,e,g)},0);k&&k.call(this)},_fireOnSwitch:function(a,
c,b){this.fire("switch",e.mix(b||{},{fromIndex:a,currentIndex:c}))},prev:function(a){var c=this.activeIndex;this.switchTo(0<c?c-1:this.length-1,"backward",a)},next:function(a){var c=this.activeIndex;this.switchTo(c<this.length-1?c+1:0,"forward",a)},destroy:function(){for(var a=this,d=a.constructor;d;)e.each(d.Plugins,function(c){c.destroy&&c.destroy(a)}),d=d.superclass?d.superclass.constructor:null;c.remove(a.container);a.nav=null;a.content=null;a.container=null;a.triggers=[];a.panels=[];a.detach()}});
return b},{requires:["dom","event"]});
KISSY.add("switchable/carousel/aria",function(e,c,g,h,b){function n(a){var c=a.currentIndex,d=this.activeIndex,b=this.panels,i=b[c*this.config.steps],f=this.triggers,c=f[c];if((a=!(!a.originalEvent.target&&!a.originalEvent.srcElement))||-1==d)e.each(f,function(a){l(a,-1)}),e.each(b,function(a){l(a,-1)}),c&&l(c,0),l(i,0),a&&i.focus()}function j(a){var d=null;e.each(this.triggers,function(b){if(b==a||c.contains(b,a))return d=b,!1});return d}function m(a){var d=a.target;switch(a.keyCode){case t:case r:if(d=
j.call(this,d)){var b=c.next(d),p=this.triggers;b||(b=p[0]);l(d,-1);b&&(l(b,0),b.focus());a.halt()}break;case i:case f:if(d=j.call(this,d))b=c.prev(d),p=this.triggers,b||(b=p[p.length-1]),l(d,-1),b&&(l(b,0),b.focus()),a.halt();break;case o:case k:if(d=j.call(this,d))this.switchTo(e.indexOf(d,this.triggers),void 0,u),a.halt()}}function q(a){var d=null;e.each(this.panels,function(b){if(b==a||c.contains(b,a))return d=b,!1});return d}function a(a,c){var d=e.indexOf(a,this.panels),b=this.config.steps,
i=Math.floor(d/b);return i==this.activeIndex?1:0==d%b||d%b==b-1?(this.switchTo(i,c,u),0):1}function d(d){var b=d.target;switch(d.keyCode){case t:case r:if(b=q.call(this,b)){var e=c.next(b),h=this.panels;e||(e=h[0]);l(b,-1);l(e,0);a.call(this,e,p)&&e.focus();d.halt()}break;case i:case f:if(b=q.call(this,b))e=c.prev(b),h=this.panels,e||(e=h[h.length-1]),l(b,-1),l(e,0),a.call(this,e,y)&&e.focus(),d.halt();break;case o:case k:if(b=q.call(this,b))this.fire("itemSelected",{item:b}),d.halt()}}var f=37,i=
38,r=39,t=40,k=32,o=13,l=h.setTabIndex,u={originalEvent:{target:1}},p="forward",y="backward";e.mix(b.Config,{aria:!1});b.Plugins.push({name:"aria",init:function(a){if(a.config.aria){var c=a.triggers,b=a.panels,i=a.content,f=a.activeIndex;i.id||(i.id=e.guid("ks-switchbale-content"));i.setAttribute("role","listbox");var p=0;e.each(c,function(a){l(a,f==p?"0":"-1");a.setAttribute("role","button");a.setAttribute("aria-controls",i.id);p++});p=0;e.each(b,function(a){l(a,"-1");a.setAttribute("role","option");
p++});a.on("switch",n,a);if(c=a.nav)g.on(c,"keydown",m,a);g.on(i,"keydown",d,a);c=a.prevBtn;b=a.nextBtn;c&&(l(c,0),c.setAttribute("role","button"),g.on(c,"keydown",function(c){if(c.keyCode==o||c.keyCode==k){a.prev(u);c.preventDefault()}}));b&&(l(b,0),b.setAttribute("role","button"),g.on(b,"keydown",function(c){if(c.keyCode==o||c.keyCode==k){a.next(u);c.preventDefault()}}))}}})},{requires:["dom","event","../aria","./base"]});
KISSY.add("switchable/carousel/base",function(e,c,g,h){function b(c,a){if(!(this instanceof b))return new b(c,a);b.superclass.constructor.apply(this,arguments)}var n="prevBtn",j="nextBtn",m={originalEvent:{target:1}};b.Config={circular:!0,prevBtnCls:"ks-switchable-prev-btn",nextBtnCls:"ks-switchable-next-btn",disableBtnCls:"ks-switchable-disable-btn"};b.Plugins=[];e.extend(b,h,{_init:function(){function h(d){c.removeClass([a[n],a[j]],f);0==d&&c.addClass(a[n],f);d==a.length-1&&c.addClass(a[j],f)}var a=
this;b.superclass._init.call(a);var d=a.config,f=d.disableBtnCls;e.each(["prev","next"],function(b){var e=a[b+"Btn"]=c.get("."+d[b+"BtnCls"],a.container);g.on(e,"mousedown",function(c){c.preventDefault();c=a.activeIndex;if("prev"==b&&(0!=c||d.circular))a[b](m);if("next"==b&&(c!=a.length-1||d.circular))a[b](m)})});d.circular||(a.on("added removed",function(){h(a.activeIndex)}),a.on("switch",function(a){h(a.currentIndex)}));g.delegate(a.content,"click",".ks-switchable-panel-internal",function(c){a.fire("itemSelected",
{item:c.currentTarget})})}});return b},{requires:["dom","event","../base"]});
KISSY.add("switchable/circular",function(e,c,g,h){function b(b,e,f,h,p,m){var s=this,e=s.config,q=s.length,x=e.scrollType===t,w=x?a:d,v=s.viewSize[x?0:1],x=-v*p,z=s.panels,B={},C,A=m===r;C=A&&0===h&&p===q-1||!A&&h===q-1&&0===p;s.anim&&(s.anim.stop(),j.call(s,z,1,w,v),j.call(s,z,0,w,v));C&&(x=n.call(s,z,A,w,v));B[w]=x+i;b?s.anim=(new g(s.content,B,e.duration,e.easing,function(){C&&j.call(s,z,A,w,v,1);s.anim=void 0;f&&f()})).run():(c.css(s.content,B),f&&f())}function n(a,b,d,e){var i=this.config.steps,
f=this.length,h=b?f-1:0,a=a.slice(h*i,(h+1)*i);c.css(a,m,q);c.css(a,d,(b?-1:1)*e*f);return b?e:-e*f}function j(a,b,d,e,i){var h=this.config.steps,g=this.length,j=b?g-1:0,a=a.slice(j*h,(j+1)*h);c.css(a,m,f);c.css(a,d,f);i&&c.css(this.content,d,b?-e*(g-1):f)}var m="position",q="relative",a="left",d="top",f="",i="px",r="backward",t="scrollx";e.mix(h.Config,{circular:!1});h.adjustPosition=n;h.resetPosition=j;h.Plugins.push({name:"circular",init:function(a){a=a.config;if(a.circular&&(a.effect===t||"scrolly"===
a.effect))a.scrollType=a.effect,a.effect=b}})},{requires:["dom","anim","./base","./effect"]});
KISSY.add("switchable/countdown",function(e,c,g,h,b,n){e.mix(b.Config,{countdown:!1,countdownFromStyle:"",countdownToStyle:"width: 0"});b.Plugins.push({name:"countdown",init:function(b){function m(a){q();k=(new h(i[a],t,f-1)).run()}function q(){d&&(clearTimeout(d),d=null);k&&(k.stop(),k=n)}var a=b.config,d,f=a.interval,i=[],r=a.countdownFromStyle,t=a.countdownToStyle,k;a.autoplay&&a.hasTriggers&&a.countdown&&(e.each(b.triggers,function(a,b){a.innerHTML='<div class="ks-switchable-trigger-mask"></div><div class="ks-switchable-trigger-content">'+
a.innerHTML+"</div>";i[b]=a.firstChild}),a.pauseOnHover&&(g.on(b.container,"mouseenter",function(){q();var a=i[b.activeIndex];r?k=(new h(a,r,0.2,"easeOut")).run():c.attr(a,"style","")}),g.on(b.container,"mouseleave",function(){q();var a=b.activeIndex;c.attr(i[a],"style",r);d=setTimeout(function(){m(a)},200)})),b.on("beforeSwitch",function(){q();i[b.activeIndex]&&c.attr(i[b.activeIndex],"style",r||"")}),b.on("switch",function(a){b.paused||m(a.currentIndex)}),-1<b.activeIndex&&m(b.activeIndex))}});
return b},{requires:["dom","event","anim","./base"]});
KISSY.add("switchable/effect",function(e,c,g,h,b,n){var j;e.mix(b.Config,{effect:"none",duration:0.5,easing:"easeNone"});b.Effects={none:function(b,e,a){b&&c.css(b,"display","none");c.css(e,"display","block");a&&a()},fade:function(b,e,a){var d=this,f=d.config,i=b?b[0]:null,g=e[0];d.anim&&(d.anim.stop(),c.css(d.anim.fromEl,{zIndex:1,opacity:0}),c.css(d.anim.toEl,"zIndex",9));c.css(g,"opacity",1);i?(d.anim=(new h(i,{opacity:0},f.duration,f.easing,function(){d.anim=n;c.css(g,"z-index",9);c.css(i,"z-index",
1);a&&a()})).run(),d.anim.toEl=g,d.anim.fromEl=i):(c.css(g,"z-index",9),a&&a())},scroll:function(b,e,a,d,f){var i=this,e=i.config,d="scrollx"===e.effect,g={};g[d?"left":"top"]=-(i.viewSize[d?0:1]*f)+"px";i.anim&&i.anim.stop();b?i.anim=(new h(i.content,g,e.duration,e.easing,function(){i.anim=n;a&&a()})).run():(c.css(i.content,g),a&&a())}};j=b.Effects;j.scrollx=j.scrolly=j.scroll;b.Plugins.push({name:"effect",init:function(b){var h=b.config,a=h.effect,d=b.panels,f=b.content,i=h.steps,g=d[0],j=b.activeIndex;
b.viewSize=[h.viewSize[0]||g&&g.offsetWidth*i,h.viewSize[1]||g&&g.offsetHeight*i];if("none"!==a)switch(c.css(d,"display","block"),a){case "scrollx":case "scrolly":c.css(f,"position","absolute");"static"==c.css(f.parentNode,"position")&&c.css(f.parentNode,"position","relative");"scrollx"===a&&(c.css(d,"float","left"),c.width(f,"9999px"));break;case "fade":var k=j*i,n=k+i-1,l;e.each(d,function(a,b){l=b>=k&&b<=n;c.css(a,{opacity:l?1:0,position:"absolute",zIndex:l?9:1})})}}});e.augment(b,{_switchView:function(b,
c,a,d,f,i,h){var g=this,k=g.config.effect;(e.isFunction(k)?k:j[k]).call(g,b,c,function(){g._fireOnSwitch(a,d,i);h&&h.call(g)},a,d,f)}});return b},{requires:["dom","event","anim","./base"]});
KISSY.add("switchable/lazyload",function(e,c,g){var h="beforeSwitch",b="img",n="textarea",j={};j[b]="lazyImgAttribute";j[n]="lazyTextareaClass";e.mix(g.Config,{lazyImgAttribute:"data-ks-lazyload-custom",lazyTextareaClass:"ks-datalazyload-custom",lazyDataType:n});g.Plugins.push({name:"lazyload",init:function(g){function q(e){var j=d.steps,e=e.toIndex*j;a.loadCustomLazyData(g.panels.slice(e,e+j),f,i);a:{var k,o,l;if(e=(j=f===b)?"img":f===n?"textarea":""){e=c.query(e,g.container);k=0;for(l=e.length;k<
l;k++)if(o=e[k],j?c.attr(o,i):c.hasClass(o,i)){j=!1;break a}}j=!0}j&&g.detach(h,q)}var a=e.require("datalazyload"),d=g.config,f,i;"img-src"===d.lazyDataType&&(d.lazyDataType=b);"area-data"===d.lazyDataType&&(d.lazyDataType=n);f=d.lazyDataType;i=d[j[f]];if(a&&f&&i)g.on(h,q)}});return g},{requires:["dom","./base"]});
KISSY.add("switchable/slide/aria",function(e,c,g,h,b){function n(b){switch(b.keyCode){case a:case q:this.next(d);b.halt();break;case m:case j:this.prev(d),b.halt()}}var j=37,m=38,q=39,a=40;e.mix(b.Config,{aria:!1});var d={originalEvent:{target:1}},f=h.setTabIndex;b.Plugins.push({name:"aria",init:function(a){if(a.config.aria){var b=a.panels,d=0,h=a.activeIndex;e.each(a.triggers,function(a){f(a,"-1");d++});d=0;e.each(b,function(a){f(a,h==d?"0":"-1");c.attr(a,"role","option");d++});var j=a.content;c.attr(j,
"role","listbox");g.on(j,"keydown",n,a);f(b[0],0);a.on("switch",function(a){var c=a.currentIndex,d=!(!a.originalEvent.target&&!a.originalEvent.srcElement),a=a.fromIndex;-1<a&&f(b[a],-1);f(b[c],0);d&&b[c].focus()})}}})},{requires:["dom","event","../aria","./base"]});KISSY.add("switchable/slide/base",function(e,c){function g(c,b){if(!(this instanceof g))return new g(c,b);g.superclass.constructor.apply(this,arguments)}g.Config={autoplay:!0,circular:!0};g.Plugins=[];e.extend(g,c);return g},{requires:["../base"]});
KISSY.add("switchable",function(e,c,g,h,b,n,j,m,q,a,d,f,i,r,t,k){e.mix(c,{Accordion:h,Carousel:m,Slide:r,Tabs:k});return c},{requires:"switchable/base,switchable/aria,switchable/accordion/base,switchable/accordion/aria,switchable/autoplay,switchable/autorender,switchable/carousel/base,switchable/carousel/aria,switchable/circular,switchable/countdown,switchable/effect,switchable/lazyload,switchable/slide/base,switchable/slide/aria,switchable/tabs/base,switchable/tabs/aria".split(",")});
KISSY.add("switchable/tabs/aria",function(e,c,g,h,b,n){function j(a){var b=null;e.each(this.triggers,function(d){if(d==a||c.contains(d,a))b=d});return b}function m(a){switch(a.keyCode){case d:case f:a.ctrlKey&&!a.altKey&&!a.shiftKey&&a.halt();break;case o:a.ctrlKey&&!a.altKey&&a.halt()}}function q(a){var b=a.target,c=a.ctrlKey&&!a.shiftKey&&!a.altKey;switch(a.keyCode){case i:case r:j.call(this,b)&&(this.prev(u(a)),a.halt());break;case t:case k:j.call(this,b)&&(this.next(u(a)),a.halt());break;case f:c&&
(a.halt(),this.next(u(a)));break;case d:c&&(a.halt(),this.prev(u(a)));break;case o:a.ctrlKey&&!a.altKey&&(a.halt(),a.shiftKey?this.prev(u(a)):this.next(u(a)))}}function a(a){var b=!(!a.originalEvent.target&&!a.originalEvent.srcElement),c=a.fromIndex,d=a.currentIndex;if(c!=d){var a=this.triggers[c],e=this.triggers[d],c=this.panels[c],d=this.panels[d];a&&l(a,"-1");l(e,"0");b&&e.focus();c&&c.setAttribute("aria-hidden","true");d.setAttribute("aria-hidden","false")}}var d=33,f=34,i=37,r=38,t=39,k=40,o=
9;e.mix(n.Config,{aria:!0});n.Plugins.push({name:"aria",init:function(b){function d(a){a.setAttribute("role","tab");l(a,"-1");a.id||(a.id=e.guid("ks-switchable"))}function f(a,b){a.setAttribute("role","tabpanel");a.setAttribute("aria-hidden","true");a.setAttribute("aria-labelledby",b.id)}if(b.config.aria){var h=b.triggers,i=b.activeIndex,j=b.panels,n=b.container;b.nav&&c.attr(b.nav,"role","tablist");var k=0;e.each(h,d);b.on("added",function(a){var b;d(b=a.trigger);f(a.panel,b)});k=0;e.each(j,function(a){f(a,
h[k]);k++});-1<i&&(l(h[i],"0"),j[i].setAttribute("aria-hidden","false"));b.on("switch",a,b);g.on(n,"keydown",q,b);g.on(n,"keypress",m,b)}}});var l=b.setTabIndex,u=h.getDomEvent},{requires:["dom","event","../base","../aria","./base"]});KISSY.add("switchable/tabs/base",function(e,c){function g(c,b){if(!(this instanceof g))return new g(c,b);g.superclass.constructor.call(this,c,b);return 0}e.extend(g,c);g.Config={};g.Plugins=[];return g},{requires:["../base"]});
KISSY.add("switchable/touch",function(e,c,g,h){e.mix(h.Config,{mouseAsTouch:!1});h.Plugins.push({name:"touch",init:function(b){var n=b.config,j=n.effect;if("scrolly"==j||"scrollx"==j){var m=b.content,q=b.container,a,d=n.mouseAsTouch,f,i=0,r=0,t,k="left",o,l;"scrolly"==j&&(k="top");var u=function(){"relative"!=b.panels[b.activeIndex].style.position&&(b.stop&&b.stop(),t=c.offset(m),r=1)},p=function(d){if(r){var e=-1!=d.type.indexOf("touch")?d.originalEvent.changedTouches[0]:d,g={},p=c.offset(q);p.bottom=
p.top+q.offsetHeight;p.right=p.left+q.offsetWidth;"scrolly"==j?(l=b.viewSize[1],o=e.pageY-f,g.top=o+t.top,e=e.pageY>=p.top&&e.pageY<=p.bottom):(l=b.viewSize[0],o=e.pageX-a,g.left=o+t.left,e=e.pageX>=p.left&&e.pageX<=p.right);3<Math.abs(o)&&(-1!=d.type.indexOf("touch")&&d.preventDefault(),e?(d=b.activeIndex,i||(i=1,n.circular&&(d==b.length-1?h.adjustPosition.call(b,b.panels,!1,k,l):0==d&&h.adjustPosition.call(b,b.panels,!0,k,l))),n.circular?c.offset(m,g):0<o&&0==d||0>o&&d==b.length-1||c.offset(m,g)):
y())}},y=function(){if(i){r=i=0;var a=b.activeIndex,c=b.length-1;if(0>o&&a==c){if(!n.circular)return}else if(0<o&&0==a){if(!n.circular)return}else(0==a||a==c)&&h.resetPosition.call(b,b.panels,0==a,k,l);b[0>o?"next":"prev"]();b.start&&b.start()}};g.on(m,"touchstart",function(b){u();a=b.pageX;f=b.pageY});g.on(m,"touchmove",p);g.on(m,"touchend",y);d&&!("ontouchstart"in e.Env.host.document.documentElement)&&e.use("dd",function(c,d){var e=new d.Draggable({node:m});e.on("dragstart",function(){u();a=e.startMousePos.left;
f=e.startMousePos.top});e.on("drag",p);e.on("dragend",y);b.__touchDD=e})}},destroy:function(b){var c;(c=b.__touchDD)&&c.destroy()}})},{requires:["dom","event","./base"]});
