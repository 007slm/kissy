/*
Copyright 2011, KISSY UI Library v1.20dev
MIT Licensed
build time: Nov 28 12:39
*/
KISSY.add("event/base",function(a,b,d,c,g){function e(o,n){var r=B._data(o);return(r&&r.events||{})[n]||[]}function l(o,n){for(var r=e(o,n.type).slice(0),w,y,q=0,z=r.length;q<z;++q){w=r[q];w=w.fn.call(w.scope||o,n,w.data);if(w!==g){if(y!==false)y=w;w===false&&n.halt()}if(n.isImmediatePropagationStopped)break}return y}function j(o,n,r,w,y){var q=H[n]||{};if(!w.length&&(!q.setup||q.setup.call(o)===false))s(o,n,r);q.add&&q.add.call(o,y)}var h=c.isValidTarget,k=c.isIdenticalHandler,f=c.batchForType,p=
c.simpleRemove,s=c.simpleAdd,m=c.splitAndRun,t=b._nodeName,i=a.makeArray,u=a.each,v=a.trim,D="",F="trigger-none-"+a.now(),H={},I="ksEventTargetId"+a.now(),B={_clone:function(o,n){if(!(n.nodeType!==b.ELEMENT_NODE||!B._hasData(o))){var r=B._data(o).events;u(r,function(w,y){u(w,function(q){B.on(n,y,q.fn,q.scope,q.data)})})}},_hasData:function(o){return b.hasData(o,I)},_data:function(){var o=i(arguments);o.splice(1,0,I);return b.data.apply(b,o)},_removeData:function(){var o=i(arguments);o.splice(1,0,
I);return b.removeData.apply(b,o)},special:H,__add:function(o,n,r,w,y,q){var z;if(!(!n||!a.isFunction(w)||o&&!h(n))){(z=B._data(n))||B._data(n,z={});var x=z.events=z.events||{};x=x[r]=x[r]||[];w={fn:w,scope:y,data:q};var A=z.handler;if(!A){A=z.handler=function(C,E){if(!(C&&C.type==D)){var G=A.target;if(!C||!C.fixed)C=new d(G,C);var J=C.type;a.isPlainObject(E)&&a.mix(C,E);if(J)C.type=J;return l(G,C)}};A.target=n}for(z=x.length-1;z>=0;--z)if(k(x[z],w,n))return;if(o){j(n,r,A,x,w);n=null}x.push(w)}},
add:function(o,n,r,w,y){n=v(n);if(f(B,"add",o,n,r,w,y))return o;b.query(o).each(function(q){B.__add(true,q,n,r,w,y)});return o},__remove:function(o,n,r,w,y,q){if(!(!n||o&&!h(n))){var z=B._data(n),x=z&&z.events,A,C,E,G=o&&H[r]||{};if(x)if(r){if(A=x[r]){C=A.length;if(w&&C){var J={data:q,fn:w,scope:y},K;q=y=0;for(E=[];y<C;++y){K=A[y];if(k(K,J,n))G.remove&&G.remove.call(n,K);else E[q++]=K}x[r]=E;C=E.length}if(w===g||C===0){if(o&&(!G.tearDown||G.tearDown.call(n)===false))p(n,r,z.handler);delete x[r]}}if(a.isEmptyObject(x)){z.handler.target=
null;delete z.handler;delete z.events;B._removeData(n)}}else for(r in x)B.__remove(o,n,r)}},remove:function(o,n,r,w,y){n=v(n);if(f(B,"remove",o,n,r,w))return o;b.query(o).each(function(q){B.__remove(true,q,n,r,w,y)});return o},_handle:l,fire:function(o,n,r,w){var y=true;n=v(n);if(n.indexOf(" ")>-1){m(n,function(q){y=B.fire(o,q,r,w)&&y});return y}r=r||{};r.type=n;b.query(o).each(function(q){var z=n,x=r;if(h(q)){var A,C=true;if(x instanceof d)A=x;else{A=new d(q,g,z);a.mix(A,x)}A.type=z;w&&A.halt();
x=q;var E="on"+z;do{A.currentTarget=x;l(x,A);x[E]&&x[E].call(x)===false&&A.preventDefault();x=x.parentNode||x.ownerDocument||x===q.ownerDocument&&window}while(x&&!A.isPropagationStopped);if(A.isDefaultPrevented)C=false;else if(!(z==="click"&&t(q,"a"))){var G;try{if(E&&q[z]){if(G=q[E])q[E]=null;D=z;q[z]()}}catch(J){}if(G)q[E]=G;D=F}q=C}else q=false;y=q&&y});return y},__getListeners:e};B.on=B.add;B.detach=B.remove;return B},{requires:["dom","./object","./utils"]});
KISSY.add("event/change",function(a,b,d,c){a=document.documentMode;if(b.ie&&(b.ie<9||a&&a<9)){var g=/^(?:textarea|input|select)$/i,e=function(f){f=f.type;return f=="checkbox"||f=="radio"};d.special.change={setup:function(){if(g.test(this.nodeName))if(e(this)){d.on(this,"propertychange",l);d.on(this,"click",j)}else return false;else d.on(this,"beforeactivate",h)},tearDown:function(){if(g.test(this.nodeName))if(e(this)){d.remove(this,"propertychange",l);d.remove(this,"click",j)}else return false;else{d.remove(this,
"beforeactivate",h);c.query("textarea,input,select",this).each(function(f){if(f.__changeHandler){f.__changeHandler=0;d.remove(f,"change",k)}})}}};var l=function(f){if(f.originalEvent.propertyName=="checked")this.__changed=1},j=function(f){if(this.__changed){this.__changed=0;d.fire(this,"change",f)}},h=function(f){f=f.target;if(g.test(f.nodeName)&&!f.__changeHandler){f.__changeHandler=1;d.on(f,"change",k)}},k=function(f){if(!e(this)){var p;if(p=this.parentNode)d.fire(p,"change",f)}}}},{requires:["ua",
"./base","dom"]});
KISSY.add("event/delegate",function(a,b,d,c){function g(k,f){if(k.fn===undefined&&k.selector===undefined)return true;else if(k.fn===undefined)return this.selector==k.selector;else{var p=this.scope||f,s=k.scope||f;return this.fn==k.fn&&this.selector==k.selector&&p==s}}function e(k,f){var p=b.closest(k.target,[f.selector],this);if(p){for(var s=k.currentTarget,m=0;m<p.length;m++){k.currentTarget=p[m];f.fn.call(f.scope||this,k)===false&&k.halt();if(k.isPropagationStopped)break}k.currentTarget=s}}function l(k,
f){var p,s=k.target,m=k.relatedTarget;k.type=f.preType;if(s=b.closest(s,f.selector,this))if(s!==m&&(!m||!b.contains(s,m))){m=k.currentTarget;k.currentTarget=s;p=f.fn.call(f.scope||this,k);k.currentTarget=m}return p}var j=c.batchForType,h={focus:{type:"focusin"},blur:{type:"focusout"},mouseenter:{type:"mouseover",handler:l},mouseleave:{type:"mouseout",handler:l}};a.mix(d,{delegate:function(k,f,p,s,m){if(j(d,"delegate",k,f,p,s,m))return k;b.query(k).each(function(t){var i=f,u=e;if(h[f]){f=h[i].type;
u=h[i].handler||u}d.on(t,f,u,t,{fn:s,selector:p,preType:i,scope:m,equals:g})});return k},undelegate:function(k,f,p,s,m){if(j(d,"undelegate",k,f,p,s,m))return k;b.query(k).each(function(t){var i=f,u=e;if(h[f]){f=h[i].type;u=h[i].handler||u}d.remove(t,f,u,t,{fn:s,selector:p,preType:i,scope:m,equals:g})});return k}});return d},{requires:["dom","./base","./utils"]});
KISSY.add("event/focusin",function(a,b,d){b.ie||a.each([{name:"focusin",fix:"focus"},{name:"focusout",fix:"blur"}],function(c){function g(l){return d.fire(l.target,c.name)}var e=0;d.special[c.name]={setup:function(){e++===0&&document.addEventListener(c.fix,g,true)},tearDown:function(){--e===0&&document.removeEventListener(c.fix,g,true)}}});return d},{requires:["ua","./base"]});
KISSY.add("event/hashchange",function(a,b,d,c){var g=document;c=g.documentMode||c.ie;if(!("onhashchange"in window)||c&&c<8){var e=window,l="<html><head><title>"+(g.title||"")+" - {hash}</title>{head}</head><body>{hash}</body></html>",j=function(){return"#"+location.href.replace(/^[^#]*#?(.*)$/,"$1")},h,k,f=function(){var i=j();if(i!==k){k=i;p(i)}h=setTimeout(f,50)},p=c&&c<8?function(i){i=a.substitute(l,{hash:i,head:d._isCustomDomain()?"<script>document.domain = '"+g.domain+"';<\/script>":""});var u=
t.contentWindow.document;try{u.open();u.write(i);u.close()}catch(v){}}:function(){b.fire(e,"hashchange")},s=function(){h||f()},m=function(){h&&clearTimeout(h);h=0},t;if(c<8){s=function(){if(!t){var i=d._genEmptyIframeSrc();t=d.create("<iframe "+(i?'src="'+i+'"':"")+' style="display: none" height="0" width="0" tabindex="-1" title="empty"/>');d.prepend(t,g.documentElement);b.add(t,"load",function(){b.remove(t,"load");p(j());b.add(t,"load",u);f()});g.onpropertychange=function(){try{if(event.propertyName===
"title")t.contentWindow.document.title=g.title+" - "+j()}catch(v){}};var u=function(){var v=a.trim(t.contentWindow.document.body.innerText),D=j();if(v!=D)k=location.hash=v;b.fire(e,"hashchange")}}};m=function(){h&&clearTimeout(h);h=0;b.detach(t);d.remove(t);t=0}}b.special.hashchange={setup:function(){if(this===e){k=j();s()}},tearDown:function(){this===e&&m()}}}},{requires:["./base","dom","ua"]});
KISSY.add("event/keycodes",function(){var a={MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,
WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,
MAC_FF_META:224,WIN_IME:229};a.isTextModifyingKeyEvent=function(b){if(b.altKey&&!b.ctrlKey||b.metaKey||b.keyCode>=a.F1&&b.keyCode<=a.F12)return false;switch(b.keyCode){case a.ALT:case a.CAPS_LOCK:case a.CONTEXT_MENU:case a.CTRL:case a.DOWN:case a.END:case a.ESC:case a.HOME:case a.INSERT:case a.LEFT:case a.MAC_FF_META:case a.META:case a.NUMLOCK:case a.NUM_CENTER:case a.PAGE_DOWN:case a.PAGE_UP:case a.PAUSE:case a.PHANTOM:case a.PRINT_SCREEN:case a.RIGHT:case a.SHIFT:case a.UP:case a.WIN_KEY:case a.WIN_KEY_RIGHT:return false;
default:return true}};a.isCharacterKey=function(b){if(b>=a.ZERO&&b<=a.NINE)return true;if(b>=a.NUM_ZERO&&b<=a.NUM_MULTIPLY)return true;if(b>=a.A&&b<=a.Z)return true;if(goog.userAgent.WEBKIT&&b==0)return true;switch(b){case a.SPACE:case a.QUESTION_MARK:case a.NUM_PLUS:case a.NUM_MINUS:case a.NUM_PERIOD:case a.NUM_DIVISION:case a.SEMICOLON:case a.DASH:case a.EQUALS:case a.COMMA:case a.PERIOD:case a.SLASH:case a.APOSTROPHE:case a.SINGLE_QUOTE:case a.OPEN_SQUARE_BRACKET:case a.BACKSLASH:case a.CLOSE_SQUARE_BRACKET:return true;
default:return false}};return a});KISSY.add("event/mouseenter",function(a,b,d,c){c.ie||a.each([{name:"mouseenter",fix:"mouseover"},{name:"mouseleave",fix:"mouseout"}],function(g){function e(l){var j=l.relatedTarget;l.type=g.name;try{if(!(j&&j!==document&&!j.parentNode))if(j!==this&&(!j||!d.contains(this,j)))b._handle(this,l)}catch(h){}}b.special[g.name]={setup:function(){b.add(this,g.fix,e)},tearDown:function(){b.remove(this,g.fix,e)}}});return b},{requires:["./base","dom","ua"]});
KISSY.add("event/mousewheel",function(a,b,d,c){function g(h){var k=b._data(this).handler,f,p,s,m=h.detail;if(h.wheelDelta)s=h.wheelDelta/120;if(h.detail)s=-(m%3==0?m/3:m);if(h.axis!==undefined)if(h.axis===h.HORIZONTAL_AXIS){p=0;f=-1*s}else if(h.axis===h.VERTICAL_AXIS){f=0;p=s}if(h.wheelDeltaY!==undefined)p=h.wheelDeltaY/120;if(h.wheelDeltaX!==undefined)f=-1*h.wheelDeltaX/120;if(!f&&!p)p=s;return k(h,{deltaY:p,delta:s,deltaX:f,type:"mousewheel"})}var e=d.gecko?"DOMMouseScroll":"mousewheel",l=c.simpleRemove,
j=c.simpleAdd;b.special.mousewheel={setup:function(){var h;h=b._data(this)[h]=a.bind(g,this);j(this,e,h)},tearDown:function(){var h,k=b._data(this);h=k[h];l(this,e,h);delete k[h]}}},{requires:["./base","ua","./utils"]});
KISSY.add("event/object",function(a,b){function d(e,l,j){this.currentTarget=e;this.originalEvent=l||{};if(l){this.type=l.type;this._fix()}else{this.type=j;this.target=e}this.currentTarget=e;this.fixed=true}var c=document,g="altKey attrChange attrName bubbles button cancelable charCode clientX clientY ctrlKey currentTarget data detail eventPhase fromElement handler keyCode metaKey newValue offsetX offsetY originalTarget pageX pageY prevValue relatedNode relatedTarget screenX screenY shiftKey srcElement target toElement view wheelDelta which axis".split(" ");a.augment(d,
{_fix:function(){var e=this.originalEvent,l=g.length,j,h=this.currentTarget;for(h=h.nodeType===9?h:h.ownerDocument||c;l;){j=g[--l];this[j]=e[j]}if(!this.target)this.target=this.srcElement||c;if(this.target.nodeType===3)this.target=this.target.parentNode;if(!this.relatedTarget&&this.fromElement)this.relatedTarget=this.fromElement===this.target?this.toElement:this.fromElement;if(this.pageX===b&&this.clientX!==b){e=h.documentElement;l=h.body;this.pageX=this.clientX+(e&&e.scrollLeft||l&&l.scrollLeft||
0)-(e&&e.clientLeft||l&&l.clientLeft||0);this.pageY=this.clientY+(e&&e.scrollTop||l&&l.scrollTop||0)-(e&&e.clientTop||l&&l.clientTop||0)}if(this.which===b)this.which=this.charCode===b?this.keyCode:this.charCode;if(this.metaKey===b)this.metaKey=this.ctrlKey;if(!this.which&&this.button!==b)this.which=this.button&1?1:this.button&2?3:this.button&4?2:0},preventDefault:function(){var e=this.originalEvent;if(e.preventDefault)e.preventDefault();else e.returnValue=false;this.isDefaultPrevented=true},stopPropagation:function(){var e=
this.originalEvent;if(e.stopPropagation)e.stopPropagation();else e.cancelBubble=true;this.isPropagationStopped=true},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=true;this.stopPropagation()},halt:function(e){e?this.stopImmediatePropagation():this.stopPropagation();this.preventDefault()}});return d});
KISSY.add("event/submit",function(a,b,d,c){a=document.documentMode;if(b.ie&&(b.ie<9||a&&a<9)){var g=c._nodeName;d.special.submit={setup:function(){if(g(this,"form"))return false;d.on(this,"click keypress",e)},tearDown:function(){if(g(this,"form"))return false;d.remove(this,"click keypress",e);c.query("form",this).each(function(j){if(j.__submit__fix){j.__submit__fix=0;d.remove(j,"submit",l)}})}};var e=function(j){j=j.target;if((j=g(j,"input")||g(j,"button")?j.form:null)&&!j.__submit__fix){j.__submit__fix=
1;d.on(j,"submit",l)}},l=function(j){this.parentNode&&d.fire(this.parentNode,"submit",j)}}},{requires:["ua","./base","dom"]});
KISSY.add("event/target",function(a,b,d,c,g){function e(i,u,v){if(v instanceof d){v.currentTarget=i;return v}i=new d(i,g,u);a.isPlainObject(v)&&a.mix(i,v);i.type=u;return i}function l(i){i[f]=i[f]||{};return i[f]}function j(i){i[m]=i[m]||{};return i[m]}function h(i,u){var v=l(i);return v[u]&&v[u].bubbles||v[t]&&v[t].bubbles}function k(i){return function(u,v,D){var F=this;u=p(u);s(u,function(H){b["__"+i](false,F,H,v,D)});return F}}var f="__~ks_publish",p=a.trim,s=c.splitAndRun,m="__~ks_bubble_targets",
t="*";c={fire:function(i,u){var v=this,D,F,H;i=p(i);if(i.indexOf(" ")>0){s(i,function(I){F=v.fire(I,u);if(F===false)D=false});return D}H=e(v,i,u);D=b._handle(v,H);if(!H.isPropagationStopped&&h(v,i)){F=v.bubble(i,H);if(D!==false)D=F}return D},publish:function(i,u){var v=l(this);if(i=p(i))v[i]=u},bubble:function(i,u){var v,D=j(this);a.each(D,function(F){F=F.fire(i,u);if(v!==false)v=F});return v},addTarget:function(i){j(this)[a.stamp(i)]=i},removeTarget:function(i){delete j(this)[a.stamp(i)]},on:k("add")};
c.detach=k("remove");return c},{requires:["./base","./object","./utils"]});
KISSY.add("event/utils",function(a,b){var d=document;return{splitAndRun:function(c,g){a.each(c.split(/\s+/),g)},batchForType:function(c,g,e,l){if(l&&l.indexOf(" ")>0){var j=a.makeArray(arguments);a.each(l.split(/\s+/),function(h){var k=[].concat(j);k.splice(0,4,e,h);c[g].apply(c,k)});return true}return 0},isValidTarget:function(c){return c&&c.nodeType!==b.TEXT_NODE&&c.nodeType!==b.COMMENT_NODE},isIdenticalHandler:function(c,g,e){var l=c.scope||e,j=1,h=g.scope||e;if(c.fn!==g.fn||l!==h)j=0;else if((c=
c.data)!==(g=g.data))if(!c&&g||c&&!g)j=0;else if(c&&g)if(c.equals&&g.equals)c.equals(g,e)||(j=0);return j},simpleAdd:d.addEventListener?function(c,g,e,l){c.addEventListener&&c.addEventListener(g,e,!!l)}:function(c,g,e){c.attachEvent&&c.attachEvent("on"+g,e)},simpleRemove:d.removeEventListener?function(c,g,e,l){c.removeEventListener&&c.removeEventListener(g,e,!!l)}:function(c,g,e){c.detachEvent&&c.detachEvent("on"+g,e)}}},{requires:["dom"]});
KISSY.add("event/valuechange",function(a,b,d){function c(m){d.removeData(m,f);if(d.hasData(m,p)){var t=d.data(m,p);clearTimeout(t);d.removeData(m,p)}}function g(m){c(m.target)}function e(m){d.hasData(m,p)||d.data(m,p,setTimeout(function(){var t=m.value,i=d.data(m,f);if(t!==i){b.fire(m,h,{prevVal:i,newVal:t},true);d.data(m,f,t)}d.data(m,p,setTimeout(arguments.callee,s))},s))}function l(m){var t=m.target;m.type=="focus"&&d.data(t,f,t.value);e(t)}function j(m){c(m);b.remove(m,"blur",g);b.remove(m,"mousedown keyup keydown focus",
l)}var h="valuechange",k=d._nodeName,f="event/valuechange/history",p="event/valuechange/poll",s=50;b.special[h]={setup:function(){if(k(this,"input")||k(this,"textarea")){j(this);b.on(this,"blur",g);b.on(this,"mousedown keyup keydown focus",l)}},tearDown:function(){j(this)}};return b},{requires:["./base","dom"]});
KISSY.add("event",function(a,b,d,c,g){d.KeyCodes=b;d.Target=c;d.Object=g;return d},{requires:["event/keycodes","event/base","event/target","event/object","event/focusin","event/hashchange","event/valuechange","event/delegate","event/mouseenter","event/submit","event/change","event/mousewheel"]});
