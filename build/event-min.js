/*
Copyright 2011, KISSY UI Library v1.20dev
MIT Licensed
build time: Oct 11 18:19
*/
KISSY.add("event/base",function(a,b,c,l){function n(d,j,p){if((p=a.trim(p))&&p.indexOf(u)>0){var s=f(arguments);a.each(p.split(u),function(w){var e=[].concat(s);e.splice(0,3,j,w);o[d].apply(o,e)});return true}return l}function h(d){return d&&d.nodeType!==3&&d.nodeType!==8}function g(d,j,p,s,w){var e=o.special[j]||{};if(!s.length&&(!e.setup||e.setup.call(d)===false))q(d,j,p);e.add&&e.add.call(d,w)}var m=document,f=a.makeArray,q=m.addEventListener?function(d,j,p,s){d.addEventListener&&d.addEventListener(j,
p,!!s)}:function(d,j,p){d.attachEvent&&d.attachEvent("on"+j,p)},i=m.removeEventListener?function(d,j,p,s){d.removeEventListener&&d.removeEventListener(j,p,!!s)}:function(d,j,p){d.detachEvent&&d.detachEvent("on"+j,p)},u=" ",k="",r="trigger-none-"+a.now(),v="ksEventTargetId"+a.now(),o={_clone:function(d,j){if(!(j.nodeType!==b.ELEMENT_NODE||!o._hasData(d))){var p=o._data(d).events;a.each(p,function(s,w){a.each(s,function(e){o.on(j,w,e.fn,e.scope,e.data)})})}},_hasData:function(d){return b.hasData(d,
v)},_data:function(){var d=f(arguments);d.splice(1,0,v);return b.data.apply(b,d)},_removeData:function(){var d=f(arguments);d.splice(1,0,v);return b.removeData.apply(b,d)},special:{},add:function(d,j,p,s,w){if(n("add",d,j,p,s,w))return d;b.query(d).each(function(e){var x=!e.isCustomEventTarget,t;if(!(!e||!j||!a.isFunction(p)||x&&!h(e))){(t=o._data(e))||o._data(e,t={});var B=t.events=t.events||{};B=B[j]=B[j]||[];var z={fn:p,scope:s,data:w},A=t.handler;if(!A){A=t.handler=function(y,C){if(!(y&&y.type==
k)){var E=A.target;if(!y||!y.fixed)y=new c(E,y);a.isPlainObject(C)&&a.mix(y,C);return o._handle(E,y)}};A.target=e}if(x){g(e,j,A,B,z);e=null}B.push(z)}});return d},__getListeners:function(d,j){return(o.__getEvents(d)||{})[j]||[]},__getEvents:function(d){return(d=o._data(d))&&d.events},remove:function(d,j,p,s,w){if(n("remove",d,j,p,s))return d;b.query(d).each(function(e){var x=o._data(e),t=x&&x.events,B,z,A,y,C,E=!e.isCustomEventTarget,G=E&&o.special[j]||{};if(!(!e||!E&&!h(e)||!t))if(j===l)for(j in t)o.remove.call(o,
e,j);else{s=s||e;if(B=t[j]){z=B.length;if(p&&z){y=A=0;for(C=[];A<z;++A){var H=false,D=B[A],I=D.scope||e;if(p!==D.fn||s!==I){C[y++]=D;H=true}else if(w!==F){var F=D.data;if(!w&&F||F&&!w){C[y++]=D;H=true}else if(w&&F)if(w.equals&&F.equals)if(!F.equals(w)){C[y++]=D;H=true}}!H&&G.remove&&G.remove.call(e,D)}t[j]=C;z=C.length}if(p===l||z===0){if(E&&(!G.tearDown||G.tearDown.call(e)===false))i(e,j,x.handler);delete t[j]}}if(a.isEmptyObject(t)){x.handler.target=null;delete x.handler;delete x.events;o._removeData(e)}}});
return d},_handle:function(d,j){for(var p=o.__getListeners(d,j.type).slice(0),s,w,e=0,x=p.length;e<x;++e){s=p[e];s=s.fn.call(s.scope||d,j,s.data);if(s!==l){if(w!==false)w=s;s===false&&j.halt()}if(j.isImmediatePropagationStopped)break}return w},fire:function(d,j,p,s){if(!n("fire",d,j,p)){var w;b.query(d).each(function(e){var x=!e.isCustomEventTarget;p=p||{};p.type=j;if(x){var t=p,B;if(h(e)){x=new c(e);x.target=e;a.mix(x,t);if(s){x.stopPropagation();x.preventDefault()}t=e;var z="on"+j;do{var A=(o._data(t)||
{}).handler;x.currentTarget=t;A&&A.call(t,x);if(t[z]&&t[z].call(t)===false){B=false;x.preventDefault()}t=t.parentNode||t.ownerDocument||t===e.ownerDocument&&window}while(t&&!x.isPropagationStopped);if(!x.isDefaultPrevented)if(!(j==="click"&&e.nodeName.toLowerCase()=="a")){var y;try{if(z&&e[j]){if(y=e[z])e[z]=null;k=j;e[j]()}}catch(C){}if(y)e[z]=y;k=r}}e=B;if(e!==l)w=e}else if((e=o._data(e))&&a.isFunction(e.handler))w=e.handler(l,p)});return w}},_batchForType:n,_simpleAdd:q,_simpleRemove:i};o.on=o.add;
o.detach=o.remove;return o},{requires:["dom","event/object"]});
KISSY.add("event/change",function(a,b,c,l){a=document.documentMode;if(b.ie&&(b.ie<9||a&&a<9)){var n=/^(?:textarea|input|select)$/i,h=function(i){i=i.type;return i=="checkbox"||i=="radio"};c.special.change={setup:function(){if(n.test(this.nodeName))if(h(this)){c.on(this,"propertychange",g);c.on(this,"click",m)}else return false;else c.on(this,"beforeactivate",f)},tearDown:function(){if(n.test(this.nodeName))if(h(this)){c.remove(this,"propertychange",g);c.remove(this,"click",m)}else return false;else{c.remove(this,
"beforeactivate",f);l.query("textarea,input,select",this).each(function(i){if(i.__changeHandler){i.__changeHandler=0;c.remove(i,"change",q)}})}}};var g=function(i){if(i.originalEvent.propertyName=="checked")this.__changed=1},m=function(i){if(this.__changed){this.__changed=0;c.fire(this,"change",i)}},f=function(i){i=i.target;if(n.test(i.nodeName)&&!i.__changeHandler){i.__changeHandler=1;c.on(i,"change",q)}},q=function(i){if(!h(this)){var u;if(u=this.parentNode)c.fire(u,"change",i)}}}},{requires:["ua",
"./base","dom"]});
KISSY.add("event/delegate",function(a,b,c){function l(f){return f.fn===undefined&&f.selector===undefined?true:f.fn===undefined?this.selector==f.selector:this.fn==f.fn&&this.selector==f.selector&&this.scope==f.scope}function n(f,q){var i=b.closest(f.target,[q.selector],this),u;if(i)for(var k=0;k<i.length;k++){f.currentTarget=i[k];var r=q.fn.call(q.scope||this,f);if(r===false||f.isPropagationStopped||f.isImmediatePropagationStopped){if(r===false)u=r;if(f.isPropagationStopped||f.isImmediatePropagationStopped)break}}return u}function h(f,
q){var i=f.target,u=f.relatedTarget;f.type=q.preType;if(i=b.closest(i,q.selector,this))if(i!==u&&(!u||!b.contains(i,u))){f.currentTarget=i;return q.fn.call(q.scope||this,f)}}var g=c._batchForType,m={focus:{type:"focusin"},blur:{type:"focusout"},mouseenter:{type:"mouseover",handler:h},mouseleave:{type:"mouseout",handler:h}};a.mix(c,{delegate:function(f,q,i,u,k){if(g("delegate",f,q,i,u,k))return f;b.query(f).each(function(r){if(!r.isCustomEventTarget){var v=q,o=n;if(m[q]){q=m[v].type;o=m[v].handler||
o}c.on(r,q,o,r,{fn:u,selector:i,preType:v,scope:k,equals:l})}});return f},undelegate:function(f,q,i,u,k){if(g("undelegate",f,q,i,u,k))return f;b.query(f).each(function(r){if(!r.isCustomEventTarget){var v=q,o=n;if(m[q]){q=m[v].type;o=m[v].handler||o}c.remove(r,q,o,r,{fn:u,selector:i,preType:v,scope:k,equals:l})}});return f}});return c},{requires:["dom","./base"]});
KISSY.add("event/focusin",function(a,b,c){b.ie||a.each([{name:"focusin",fix:"focus"},{name:"focusout",fix:"blur"}],function(l){function n(g){return c.fire(g.target,l.name)}var h=0;c.special[l.name]={setup:function(){h++===0&&document.addEventListener(l.fix,n,true)},tearDown:function(){--h===0&&document.removeEventListener(l.fix,n,true)}}});return c},{requires:["ua","./base"]});
KISSY.add("event/hashchange",function(a,b,c,l){l=h||l.ie;if(!("onhashchange"in window)||l<8){var n=window,h=document.documentMode,g=function(){return"#"+location.href.replace(/^[^#]*#?(.*)$/,"$1")},m,f=g(),q=function(){var v=g();if(v!==f){i(v);f=v}m=setTimeout(q,50)},i=l<8?function(v){v="<html><body>"+v+"</body></html>";var o=r.contentWindow.document;try{o.open();o.write(v);o.close();return true}catch(d){return false}}:function(){b.fire(n,"hashchange")},u=function(){m||q()},k=function(){m&&clearTimeout(m);
m=null},r;if(l<8){u=function(){if(!r){r=c.create('<iframe style="display: none" height="0" width="0" tabindex="-1" title="empty"/>');c.prepend(r,document.documentElement);b.add(r,"load",function(){b.remove(r,"load");i(g());b.add(r,"load",v);q()});var v=function(){var o=a.trim(c.html(r.contentWindow.document.body)),d=g();if(o!=d)f=location.hash=o;b.fire(n,"hashchange")}}};k=function(){m&&clearTimeout(m);m=null;b.detach(r);c.remove(r);r=null}}b.special.hashchange={setup:function(){this===n&&u()},tearDown:function(){this===
n&&k()}}}},{requires:["./base","dom","ua"]});
KISSY.add("event/keycodes",function(){var a={MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,
WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,
MAC_FF_META:224,WIN_IME:229};a.isTextModifyingKeyEvent=function(b){if(b.altKey&&!b.ctrlKey||b.metaKey||b.keyCode>=a.F1&&b.keyCode<=a.F12)return false;switch(b.keyCode){case a.ALT:case a.CAPS_LOCK:case a.CONTEXT_MENU:case a.CTRL:case a.DOWN:case a.END:case a.ESC:case a.HOME:case a.INSERT:case a.LEFT:case a.MAC_FF_META:case a.META:case a.NUMLOCK:case a.NUM_CENTER:case a.PAGE_DOWN:case a.PAGE_UP:case a.PAUSE:case a.PHANTOM:case a.PRINT_SCREEN:case a.RIGHT:case a.SHIFT:case a.UP:case a.WIN_KEY:case a.WIN_KEY_RIGHT:return false;
default:return true}};a.isCharacterKey=function(b){if(b>=a.ZERO&&b<=a.NINE)return true;if(b>=a.NUM_ZERO&&b<=a.NUM_MULTIPLY)return true;if(b>=a.A&&b<=a.Z)return true;if(goog.userAgent.WEBKIT&&b==0)return true;switch(b){case a.SPACE:case a.QUESTION_MARK:case a.NUM_PLUS:case a.NUM_MINUS:case a.NUM_PERIOD:case a.NUM_DIVISION:case a.SEMICOLON:case a.DASH:case a.EQUALS:case a.COMMA:case a.PERIOD:case a.SLASH:case a.APOSTROPHE:case a.SINGLE_QUOTE:case a.OPEN_SQUARE_BRACKET:case a.BACKSLASH:case a.CLOSE_SQUARE_BRACKET:return true;
default:return false}};return a});KISSY.add("event/mouseenter",function(a,b,c,l){l.ie||a.each([{name:"mouseenter",fix:"mouseover"},{name:"mouseleave",fix:"mouseout"}],function(n){function h(g){var m=g.relatedTarget;g.type=n.name;try{if(!(m&&m!==document&&!m.parentNode))if(m!==this&&(!m||!c.contains(this,m)))b._handle(this,g)}catch(f){}}b.special[n.name]={setup:function(){b.add(this,n.fix,h)},tearDown:function(){b.remove(this,n.fix,h)}}});return b},{requires:["./base","dom","ua"]});
KISSY.add("event/object",function(a,b){function c(h,g,m){this.currentTarget=h;this.originalEvent=g||{};if(g){this.type=g.type;this._fix()}else{this.type=m;this.target=h}this.currentTarget=h;this.fixed=true}var l=document,n="altKey attrChange attrName bubbles button cancelable charCode clientX clientY ctrlKey currentTarget data detail eventPhase fromElement handler keyCode layerX layerY metaKey newValue offsetX offsetY originalTarget pageX pageY prevValue relatedNode relatedTarget screenX screenY shiftKey srcElement target toElement view wheelDelta which".split(" ");
a.augment(c,{_fix:function(){var h=this.originalEvent,g=n.length,m,f=this.currentTarget;for(f=f.nodeType===9?f:f.ownerDocument||l;g;){m=n[--g];this[m]=h[m]}if(!this.target)this.target=this.srcElement||l;if(this.target.nodeType===3)this.target=this.target.parentNode;if(!this.relatedTarget&&this.fromElement)this.relatedTarget=this.fromElement===this.target?this.toElement:this.fromElement;if(this.pageX===b&&this.clientX!==b){h=f.documentElement;g=f.body;this.pageX=this.clientX+(h&&h.scrollLeft||g&&g.scrollLeft||
0)-(h&&h.clientLeft||g&&g.clientLeft||0);this.pageY=this.clientY+(h&&h.scrollTop||g&&g.scrollTop||0)-(h&&h.clientTop||g&&g.clientTop||0)}if(this.which===b)this.which=this.charCode===b?this.keyCode:this.charCode;if(this.metaKey===b)this.metaKey=this.ctrlKey;if(!this.which&&this.button!==b)this.which=this.button&1?1:this.button&2?3:this.button&4?2:0},preventDefault:function(){var h=this.originalEvent;if(h.preventDefault)h.preventDefault();else h.returnValue=false;this.isDefaultPrevented=true},stopPropagation:function(){var h=
this.originalEvent;if(h.stopPropagation)h.stopPropagation();else h.cancelBubble=true;this.isPropagationStopped=true},stopImmediatePropagation:function(){var h=this.originalEvent;h.stopImmediatePropagation?h.stopImmediatePropagation():this.stopPropagation();this.isImmediatePropagationStopped=true},halt:function(h){h?this.stopImmediatePropagation():this.stopPropagation();this.preventDefault()}});return c});
KISSY.add("event/submit",function(a,b,c,l){a=document.documentMode;if(b.ie&&(b.ie<9||a&&a<9)){c.special.submit={setup:function(){if(this.nodeName.toLowerCase()==="form")return false;c.on(this,"click keypress",n)},tearDown:function(){if(this.nodeName.toLowerCase()==="form")return false;c.remove(this,"click keypress",n);l.query("form",this).each(function(g){if(g.__submit__fix){g.__submit__fix=0;c.remove(g,"submit",h)}})}};var n=function(g){g=g.target;var m=g.nodeName.toLowerCase();if((g=m=="input"||
m=="button"?g.form:null)&&!g.__submit__fix){g.__submit__fix=1;c.on(g,"submit",h)}},h=function(g){this.parentNode&&c.fire(this.parentNode,"submit",g)}}},{requires:["ua","./base","dom"]});KISSY.add("event/target",function(a,b){return{isCustomEventTarget:true,fire:function(c,l){return b.fire(this,c,l)},on:function(c,l,n){b.add(this,c,l,n);return this},detach:function(c,l,n){b.remove(this,c,l,n);return this}}},{requires:["./base"]});
KISSY.add("event/valuechange",function(a,b,c){function l(k){c.removeData(k,q);if(c.hasData(k,i)){var r=c.data(k,i);clearTimeout(r);c.removeData(k,i)}}function n(k){l(k.target)}function h(k){c.hasData(k,i)||c.data(k,i,setTimeout(function(){var r=k.value,v=c.data(k,q);if(r!==v){b.fire(k,f,{prevVal:v,newVal:r},true);c.data(k,q,r)}c.data(k,i,setTimeout(arguments.callee,u))},u))}function g(k){var r=k.target;k.type=="focus"&&c.data(r,q,r.value);h(r)}function m(k){l(k);b.remove(k,"blur",n);b.remove(k,"mousedown keyup keydown focus",
g)}var f="valuechange",q="event/valuechange/history",i="event/valuechange/poll",u=50;b.special[f]={setup:function(){var k=this.nodeName.toLowerCase();if("input"==k||"textarea"==k){m(this);b.on(this,"blur",n);b.on(this,"mousedown keyup keydown focus",g)}},tearDown:function(){m(this)}};return b},{requires:["./base","dom"]});
KISSY.add("event",function(a,b,c,l,n){c.KeyCodes=b;c.Target=l;c.Object=n;return c},{requires:["event/keycodes","event/base","event/target","event/object","event/focusin","event/hashchange","event/valuechange","event/delegate","event/mouseenter","event/submit","event/change"]});
