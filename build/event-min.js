/*
Copyright 2011, KISSY UI Library v1.20dev
MIT Licensed
build time: Nov 24 20:59
*/
KISSY.add("event/base",function(a,b,e,c,g){function d(p,n){var r=A._data(p);r=((r&&r.events||{})[n.type]||[]).slice(0);for(var v,y,q=0,z=r.length;q<z;++q){v=r[q];v=v.fn.call(v.scope||p,n,v.data);if(v!==g){if(y!==false)y=v;v===false&&n.halt()}if(n.isImmediatePropagationStopped)break}return y}function l(p,n,r,v,y){var q=D[n]||{};if(!v.length&&(!q.setup||q.setup.call(p)===false))o(p,n,r);q.add&&q.add.call(p,y)}var j=c.isValidTarget,h=c.isIdenticalHandler,k=c.batchForType,f=c.simpleRemove,o=c.simpleAdd,
t=c.splitAndRun,m=b._nodeName,s=a.makeArray,i=a.each,w=a.trim,u="",E="trigger-none-"+a.now(),D={},H="ksEventTargetId"+a.now(),A={_clone:function(p,n){if(!(n.nodeType!==b.ELEMENT_NODE||!A._hasData(p))){var r=A._data(p).events;i(r,function(v,y){i(v,function(q){A.on(n,y,q.fn,q.scope,q.data)})})}},_hasData:function(p){return b.hasData(p,H)},_data:function(){var p=s(arguments);p.splice(1,0,H);return b.data.apply(b,p)},_removeData:function(){var p=s(arguments);p.splice(1,0,H);return b.removeData.apply(b,
p)},special:D,__add:function(p,n,r,v,y,q){var z;if(!(!n||!a.isFunction(v)||p&&!j(n))){(z=A._data(n))||A._data(n,z={});var x=z.events=z.events||{};x=x[r]=x[r]||[];v={fn:v,scope:y,data:q};var B=z.handler;if(!B){B=z.handler=function(C,F){if(!(C&&C.type==u)){var G=B.target;if(!C||!C.fixed)C=new e(G,C);var I=C.type;a.isPlainObject(F)&&a.mix(C,F);if(I)C.type=I;return d(G,C)}};B.target=n}for(z=x.length-1;z>=0;--z)if(h(x[z],v,n))return;if(p){l(n,r,B,x,v);n=null}x.push(v)}},add:function(p,n,r,v,y){n=w(n);
if(k(A,"add",p,n,r,v,y))return p;b.query(p).each(function(q){A.__add(true,q,n,r,v,y)});return p},__remove:function(p,n,r,v,y,q){if(!(!n||p&&!j(n))){var z=A._data(n),x=z&&z.events,B,C,F,G=p&&D[r]||{};if(x)if(r){if(B=x[r]){C=B.length;if(v&&C){var I={data:q,fn:v,scope:y},J;q=y=0;for(F=[];y<C;++y){J=B[y];if(h(J,I,n))G.remove&&G.remove.call(n,J);else F[q++]=J}x[r]=F;C=F.length}if(v===g||C===0){if(p&&(!G.tearDown||G.tearDown.call(n)===false))f(n,r,z.handler);delete x[r]}}if(a.isEmptyObject(x)){z.handler.target=
null;delete z.handler;delete z.events;A._removeData(n)}}else for(r in x)A.__remove(p,n,r)}},remove:function(p,n,r,v,y){n=w(n);if(k(A,"remove",p,n,r,v))return p;b.query(p).each(function(q){A.__remove(true,q,n,r,v,y)});return p},_handle:d,fire:function(p,n,r,v){var y=true;n=w(n);if(n.indexOf(" ")>-1){t(n,function(q){y=A.fire(p,q,r,v)&&y});return y}r=r||{};r.type=n;b.query(p).each(function(q){var z=n,x=r;if(j(q)){var B,C=true;if(x instanceof e)B=x;else{B=new e(q,g,z);a.mix(B,x)}B.type=z;v&&B.halt();
x=q;var F="on"+z;do{B.currentTarget=x;d(x,B);x[F]&&x[F].call(x)===false&&B.preventDefault();x=x.parentNode||x.ownerDocument||x===q.ownerDocument&&window}while(x&&!B.isPropagationStopped);if(B.isDefaultPrevented)C=false;else if(!(z==="click"&&m(q,"a"))){var G;try{if(F&&q[z]){if(G=q[F])q[F]=null;u=z;q[z]()}}catch(I){}if(G)q[F]=G;u=E}q=C}else q=false;y=q&&y});return y}};A.on=A.add;A.detach=A.remove;return A},{requires:["dom","./object","./utils"]});
KISSY.add("event/change",function(a,b,e,c){a=document.documentMode;if(b.ie&&(b.ie<9||a&&a<9)){var g=/^(?:textarea|input|select)$/i,d=function(f){f=f.type;return f=="checkbox"||f=="radio"};e.special.change={setup:function(){if(g.test(this.nodeName))if(d(this)){e.on(this,"propertychange",l);e.on(this,"click",j)}else return false;else e.on(this,"beforeactivate",h)},tearDown:function(){if(g.test(this.nodeName))if(d(this)){e.remove(this,"propertychange",l);e.remove(this,"click",j)}else return false;else{e.remove(this,
"beforeactivate",h);c.query("textarea,input,select",this).each(function(f){if(f.__changeHandler){f.__changeHandler=0;e.remove(f,"change",k)}})}}};var l=function(f){if(f.originalEvent.propertyName=="checked")this.__changed=1},j=function(f){if(this.__changed){this.__changed=0;e.fire(this,"change",f)}},h=function(f){f=f.target;if(g.test(f.nodeName)&&!f.__changeHandler){f.__changeHandler=1;e.on(f,"change",k)}},k=function(f){if(!d(this)){var o;if(o=this.parentNode)e.fire(o,"change",f)}}}},{requires:["ua",
"./base","dom"]});
KISSY.add("event/delegate",function(a,b,e,c){function g(k,f){if(k.fn===undefined&&k.selector===undefined)return true;else if(k.fn===undefined)return this.selector==k.selector;else{var o=this.scope||f,t=k.scope||f;return this.fn==k.fn&&this.selector==k.selector&&o==t}}function d(k,f){var o=b.closest(k.target,[f.selector],this);if(o){for(var t=k.currentTarget,m=0;m<o.length;m++){k.currentTarget=o[m];f.fn.call(f.scope||this,k)===false&&k.halt();if(k.isPropagationStopped)break}k.currentTarget=t}}function l(k,
f){var o,t=k.target,m=k.relatedTarget;k.type=f.preType;if(t=b.closest(t,f.selector,this))if(t!==m&&(!m||!b.contains(t,m))){m=k.currentTarget;k.currentTarget=t;o=f.fn.call(f.scope||this,k);k.currentTarget=m}return o}var j=c.batchForType,h={focus:{type:"focusin"},blur:{type:"focusout"},mouseenter:{type:"mouseover",handler:l},mouseleave:{type:"mouseout",handler:l}};a.mix(e,{delegate:function(k,f,o,t,m){if(j(e,"delegate",k,f,o,t,m))return k;b.query(k).each(function(s){var i=f,w=d;if(h[f]){f=h[i].type;
w=h[i].handler||w}e.on(s,f,w,s,{fn:t,selector:o,preType:i,scope:m,equals:g})});return k},undelegate:function(k,f,o,t,m){if(j(e,"undelegate",k,f,o,t,m))return k;b.query(k).each(function(s){var i=f,w=d;if(h[f]){f=h[i].type;w=h[i].handler||w}e.remove(s,f,w,s,{fn:t,selector:o,preType:i,scope:m,equals:g})});return k}});return e},{requires:["dom","./base","./utils"]});
KISSY.add("event/focusin",function(a,b,e){b.ie||a.each([{name:"focusin",fix:"focus"},{name:"focusout",fix:"blur"}],function(c){function g(l){return e.fire(l.target,c.name)}var d=0;e.special[c.name]={setup:function(){d++===0&&document.addEventListener(c.fix,g,true)},tearDown:function(){--d===0&&document.removeEventListener(c.fix,g,true)}}});return e},{requires:["ua","./base"]});
KISSY.add("event/hashchange",function(a,b,e,c){var g=document;c=g.documentMode||c.ie;if(!("onhashchange"in window)||c&&c<8){var d=window,l="<html><head><title>"+(g.title||"")+" - {hash}</title>{head}</head><body>{hash}</body></html>",j=function(){return"#"+location.href.replace(/^[^#]*#?(.*)$/,"$1")},h,k,f=function(){var i=j();if(i!==k){k=i;o(i)}h=setTimeout(f,50)},o=c&&c<8?function(i){i=a.substitute(l,{hash:i,head:e._isCustomDomain()?"<script>document.domain = '"+g.domain+"';<\/script>":""});var w=
s.contentWindow.document;try{w.open();w.write(i);w.close()}catch(u){}}:function(){b.fire(d,"hashchange")},t=function(){h||f()},m=function(){h&&clearTimeout(h);h=0},s;if(c<8){t=function(){if(!s){var i=e._genEmptyIframeSrc();s=e.create("<iframe "+(i?'src="'+i+'"':"")+' style="display: none" height="0" width="0" tabindex="-1" title="empty"/>');e.prepend(s,g.documentElement);b.add(s,"load",function(){b.remove(s,"load");o(j());b.add(s,"load",w);f()});g.onpropertychange=function(){try{if(event.propertyName===
"title")s.contentWindow.document.title=g.title+" - "+j()}catch(u){}};var w=function(){var u=a.trim(s.contentWindow.document.body.innerText),E=j();if(u!=E)k=location.hash=u;b.fire(d,"hashchange")}}};m=function(){h&&clearTimeout(h);h=0;b.detach(s);e.remove(s);s=0}}b.special.hashchange={setup:function(){if(this===d){k=j();t()}},tearDown:function(){this===d&&m()}}}},{requires:["./base","dom","ua"]});
KISSY.add("event/keycodes",function(){var a={MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,
WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,
MAC_FF_META:224,WIN_IME:229};a.isTextModifyingKeyEvent=function(b){if(b.altKey&&!b.ctrlKey||b.metaKey||b.keyCode>=a.F1&&b.keyCode<=a.F12)return false;switch(b.keyCode){case a.ALT:case a.CAPS_LOCK:case a.CONTEXT_MENU:case a.CTRL:case a.DOWN:case a.END:case a.ESC:case a.HOME:case a.INSERT:case a.LEFT:case a.MAC_FF_META:case a.META:case a.NUMLOCK:case a.NUM_CENTER:case a.PAGE_DOWN:case a.PAGE_UP:case a.PAUSE:case a.PHANTOM:case a.PRINT_SCREEN:case a.RIGHT:case a.SHIFT:case a.UP:case a.WIN_KEY:case a.WIN_KEY_RIGHT:return false;
default:return true}};a.isCharacterKey=function(b){if(b>=a.ZERO&&b<=a.NINE)return true;if(b>=a.NUM_ZERO&&b<=a.NUM_MULTIPLY)return true;if(b>=a.A&&b<=a.Z)return true;if(goog.userAgent.WEBKIT&&b==0)return true;switch(b){case a.SPACE:case a.QUESTION_MARK:case a.NUM_PLUS:case a.NUM_MINUS:case a.NUM_PERIOD:case a.NUM_DIVISION:case a.SEMICOLON:case a.DASH:case a.EQUALS:case a.COMMA:case a.PERIOD:case a.SLASH:case a.APOSTROPHE:case a.SINGLE_QUOTE:case a.OPEN_SQUARE_BRACKET:case a.BACKSLASH:case a.CLOSE_SQUARE_BRACKET:return true;
default:return false}};return a});KISSY.add("event/mouseenter",function(a,b,e,c){c.ie||a.each([{name:"mouseenter",fix:"mouseover"},{name:"mouseleave",fix:"mouseout"}],function(g){function d(l){var j=l.relatedTarget;l.type=g.name;try{if(!(j&&j!==document&&!j.parentNode))if(j!==this&&(!j||!e.contains(this,j)))b._handle(this,l)}catch(h){}}b.special[g.name]={setup:function(){b.add(this,g.fix,d)},tearDown:function(){b.remove(this,g.fix,d)}}});return b},{requires:["./base","dom","ua"]});
KISSY.add("event/mousewheel",function(a,b,e,c){function g(h){var k=b._data(this).handler,f,o,t,m=h.detail;if(h.wheelDelta)t=h.wheelDelta/120;if(h.detail)t=-(m%3==0?m/3:m);if(h.axis!==undefined)if(h.axis===h.HORIZONTAL_AXIS){o=0;f=-1*t}else if(h.axis===h.VERTICAL_AXIS){f=0;o=t}if(h.wheelDeltaY!==undefined)o=h.wheelDeltaY/120;if(h.wheelDeltaX!==undefined)f=-1*h.wheelDeltaX/120;if(!f&&!o)o=t;return k(h,{deltaY:o,delta:t,deltaX:f,type:"mousewheel"})}var d=e.gecko?"DOMMouseScroll":"mousewheel",l=c.simpleRemove,
j=c.simpleAdd;b.special.mousewheel={setup:function(){var h;h=b._data(this)[h]=a.bind(g,this);j(this,d,h)},tearDown:function(){var h,k=b._data(this);h=k[h];l(this,d,h);delete k[h]}}},{requires:["./base","ua","./utils"]});
KISSY.add("event/object",function(a,b){function e(d,l,j){this.currentTarget=d;this.originalEvent=l||{};if(l){this.type=l.type;this._fix()}else{this.type=j;this.target=d}this.currentTarget=d;this.fixed=true}var c=document,g="altKey attrChange attrName bubbles button cancelable charCode clientX clientY ctrlKey currentTarget data detail eventPhase fromElement handler keyCode metaKey newValue offsetX offsetY originalTarget pageX pageY prevValue relatedNode relatedTarget screenX screenY shiftKey srcElement target toElement view wheelDelta which axis".split(" ");a.augment(e,
{_fix:function(){var d=this.originalEvent,l=g.length,j,h=this.currentTarget;for(h=h.nodeType===9?h:h.ownerDocument||c;l;){j=g[--l];this[j]=d[j]}if(!this.target)this.target=this.srcElement||c;if(this.target.nodeType===3)this.target=this.target.parentNode;if(!this.relatedTarget&&this.fromElement)this.relatedTarget=this.fromElement===this.target?this.toElement:this.fromElement;if(this.pageX===b&&this.clientX!==b){d=h.documentElement;l=h.body;this.pageX=this.clientX+(d&&d.scrollLeft||l&&l.scrollLeft||
0)-(d&&d.clientLeft||l&&l.clientLeft||0);this.pageY=this.clientY+(d&&d.scrollTop||l&&l.scrollTop||0)-(d&&d.clientTop||l&&l.clientTop||0)}if(this.which===b)this.which=this.charCode===b?this.keyCode:this.charCode;if(this.metaKey===b)this.metaKey=this.ctrlKey;if(!this.which&&this.button!==b)this.which=this.button&1?1:this.button&2?3:this.button&4?2:0},preventDefault:function(){var d=this.originalEvent;if(d.preventDefault)d.preventDefault();else d.returnValue=false;this.isDefaultPrevented=true},stopPropagation:function(){var d=
this.originalEvent;if(d.stopPropagation)d.stopPropagation();else d.cancelBubble=true;this.isPropagationStopped=true},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=true;this.stopPropagation()},halt:function(d){d?this.stopImmediatePropagation():this.stopPropagation();this.preventDefault()}});return e});
KISSY.add("event/submit",function(a,b,e,c){a=document.documentMode;if(b.ie&&(b.ie<9||a&&a<9)){var g=c._nodeName;e.special.submit={setup:function(){if(g(this,"form"))return false;e.on(this,"click keypress",d)},tearDown:function(){if(g(this,"form"))return false;e.remove(this,"click keypress",d);c.query("form",this).each(function(j){if(j.__submit__fix){j.__submit__fix=0;e.remove(j,"submit",l)}})}};var d=function(j){j=j.target;if((j=g(j,"input")||g(j,"button")?j.form:null)&&!j.__submit__fix){j.__submit__fix=
1;e.on(j,"submit",l)}},l=function(j){this.parentNode&&e.fire(this.parentNode,"submit",j)}}},{requires:["ua","./base","dom"]});
KISSY.add("event/target",function(a,b,e,c,g){function d(i,w,u){if(u instanceof e){u.currentTarget=i;return u}i=new e(i,g,w);a.isPlainObject(u)&&a.mix(i,u);i.type=w;return i}function l(i){i[f]=i[f]||{};return i[f]}function j(i){i[m]=i[m]||{};return i[m]}function h(i,w){var u=l(i);return u[w]&&u[w].bubbles||u[s]&&u[s].bubbles}function k(i){return function(w,u,E){var D=this;t(w,function(H){b["__"+i](false,D,H,u,E)});return D}}var f="__~ks_publish",o=a.trim,t=c.splitAndRun,m="__~ks_bubble_targets",s=
"*";c={fire:function(i,w){var u=this,E,D,H;i=o(i);if(i.indexOf(" ")>0){t(i,function(A){D=u.fire(A,w);if(D===false)E=false});return E}H=d(u,i,w);E=b._handle(u,H);if(!H.isPropagationStopped&&h(u,i)){D=u.bubble(i,H);if(E!==false)E=D}return E},publish:function(i,w){var u=l(this);if(i=o(i))u[i]=w},bubble:function(i,w){var u,E=j(this);a.each(E,function(D){D=D.fire(i,w);if(u!==false)u=D});return u},addTarget:function(i){j(this)[a.stamp(i)]=i},removeTarget:function(i){delete j(this)[a.stamp(i)]},on:k("add")};
c.detach=k("remove");return c},{requires:["./base","./object","./utils"]});
KISSY.add("event/utils",function(a,b){var e=document;return{splitAndRun:function(c,g){a.each(c.split(/\s+/),g)},batchForType:function(c,g,d,l){if(l&&l.indexOf(" ")>0){var j=a.makeArray(arguments);a.each(l.split(/\s+/),function(h){var k=[].concat(j);k.splice(0,4,d,h);c[g].apply(c,k)});return true}return 0},isValidTarget:function(c){return c&&c.nodeType!==b.TEXT_NODE&&c.nodeType!==b.COMMENT_NODE},isIdenticalHandler:function(c,g,d){var l=c.scope||d,j=1,h=g.scope||d;if(c.fn!==g.fn||l!==h)j=0;else if((c=
c.data)!==(g=g.data))if(!c&&g||c&&!g)j=0;else if(c&&g)if(c.equals&&g.equals)c.equals(g,d)||(j=0);return j},simpleAdd:e.addEventListener?function(c,g,d,l){c.addEventListener&&c.addEventListener(g,d,!!l)}:function(c,g,d){c.attachEvent&&c.attachEvent("on"+g,d)},simpleRemove:e.removeEventListener?function(c,g,d,l){c.removeEventListener&&c.removeEventListener(g,d,!!l)}:function(c,g,d){c.detachEvent&&c.detachEvent("on"+g,d)}}},{requires:["dom"]});
KISSY.add("event/valuechange",function(a,b,e){function c(m){e.removeData(m,f);if(e.hasData(m,o)){var s=e.data(m,o);clearTimeout(s);e.removeData(m,o)}}function g(m){c(m.target)}function d(m){e.hasData(m,o)||e.data(m,o,setTimeout(function(){var s=m.value,i=e.data(m,f);if(s!==i){b.fire(m,h,{prevVal:i,newVal:s},true);e.data(m,f,s)}e.data(m,o,setTimeout(arguments.callee,t))},t))}function l(m){var s=m.target;m.type=="focus"&&e.data(s,f,s.value);d(s)}function j(m){c(m);b.remove(m,"blur",g);b.remove(m,"mousedown keyup keydown focus",
l)}var h="valuechange",k=e._nodeName,f="event/valuechange/history",o="event/valuechange/poll",t=50;b.special[h]={setup:function(){if(k(this,"input")||k(this,"textarea")){j(this);b.on(this,"blur",g);b.on(this,"mousedown keyup keydown focus",l)}},tearDown:function(){j(this)}};return b},{requires:["./base","dom"]});
KISSY.add("event",function(a,b,e,c,g){e.KeyCodes=b;e.Target=c;e.Object=g;return e},{requires:["event/keycodes","event/base","event/target","event/object","event/focusin","event/hashchange","event/valuechange","event/delegate","event/mouseenter","event/submit","event/change","event/mousewheel"]});
