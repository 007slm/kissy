/*
Copyright 2011, KISSY UI Library v1.20dev
MIT Licensed
build time: Oct 24 15:09
*/
KISSY.add("base/attribute",function(i,k){function l(a,b){if(i.isString(b))return a[b];return b}function n(a,b,c,d,e,g,m){m=m||c;return a.fire(b+v(c)+"Change",{attrName:m,subAttrName:g,prevVal:d,newVal:e})}function j(a,b,c){var d=a[b]||{};if(c)a[b]=d;return d}function f(a){return j(a,"__attrs",true)}function h(a){return j(a,"__attrVals",true)}function o(a,b){for(var c=0,d=b.length;a!=k&&c<d;c++)a=a[b[c]];return a}function q(a,b,c,d,e){d=d||{};var g,m,p,s=b;if(b.indexOf(".")!==-1){g=b.split(".");b=
g.shift()}p=a.get(b);if(g)m=o(p,g);if(!(!g&&p===c))if(!(g&&m===c)){if(g){var t=m=i.clone(p),w=g.length-1;if(w>=0){for(var u=0;u<w;u++)t=t[g[u]];if(t!=k)t[g[u]]=c}c=m}if(!d.silent)if(false===n(a,"before",b,p,c,s))return false;c=a.__set(b,c);if(c===false)return c;if(!d.silent){n(a,"after",b,p,h(a)[b],s);e?e.push({attrName:b,subAttrName:s}):n(a,"","*",p,h(a)[b],s,b)}return a}}function r(){}function v(a){return a.charAt(0).toUpperCase()+a.substring(1)}r.INVALID={};var x=r.INVALID;i.augment(r,{getAttrs:function(){return f(this)},
getAttrVals:function(){var a={},b,c=f(this);for(b in c)a[b]=this.get(b);return a},addAttr:function(a,b,c){var d=f(this);b=i.clone(b);if(d[a])i.mix(d[a],b,c);else d[a]=b;return this},addAttrs:function(a,b){var c=this;i.each(a,function(e,g){c.addAttr(g,e)});if(b)for(var d in b)c.set(d,b[d]);return c},hasAttr:function(a){return a&&f(this).hasOwnProperty(a)},removeAttr:function(a){if(this.hasAttr(a)){delete f(this)[a];delete h(this)[a]}return this},set:function(a,b,c){var d;if(i.isPlainObject(a)){var e=
a;a=0;d=true;c=b;b=[];for(a in e){d=q(this,a,e[a],c,b);if(d===false)break}a=[];c=[];for(e=0;e<b.length;e++){a.push(b[e].attrName);c.push(b[e].subAttrName)}a.length&&n(this,"","*",undefined,undefined,c,a);return d}return q(this,a,b,c)},__set:function(a,b){var c,d=j(f(this),a,true),e=d.validator;d=d.setter;if(e=l(this,e))if(!e.call(this,b,a))return false;if(d=l(this,d))c=d.call(this,b,a);if(c===x)return false;if(c!==k)b=c;h(this)[a]=b},get:function(a){var b,c,d;if(a.indexOf(".")!==-1){b=a.split(".");
a=b.shift()}c=j(f(this),a).getter;d=a in h(this)?h(this)[a]:this.__getDefAttrVal(a);if(c=l(this,c))d=c.call(this,d,a);if(b)d=o(d,b);return d},__getDefAttrVal:function(a){var b=j(f(this),a),c;if(c=l(this,b.valueFn)){c=c.call(this);if(c!==k)b.value=c;delete b.valueFn;f(this)[a]=b}return b.value},reset:function(a){if(a)return this.hasAttr(a)?this.set(a,this.__getDefAttrVal(a)):this;var b=f(this);for(a in b)this.reset(a);return this}});r.__capitalFirst=v;return r});
KISSY.add("base/base",function(i,k,l){function n(j){for(var f=this.constructor;f;){var h=f.ATTRS;if(h){var o=void 0;for(o in h)h.hasOwnProperty(o)&&this.addAttr(o,h[o],false)}f=f.superclass?f.superclass.constructor:null}if(j)for(var q in j)j.hasOwnProperty(q)&&this.__set(q,j[q])}i.augment(n,l.Target,k);return n},{requires:["./attribute","event"]});KISSY.add("base",function(i,k,l){k.Attribute=l;return k},{requires:["base/base","base/attribute"]});
