/*
Copyright 2011, KISSY UI Library v1.20dev
MIT Licensed
build time: Oct 22 15:39
*/
KISSY.add("base/attribute",function(h,j){function k(a,b){if(h.isString(b))return a[b];return b}function l(a,b,d){var c=a[b]||{};if(d)a[b]=c;return c}function f(a){return l(a,"__attrs",true)}function g(a){return l(a,"__attrVals",true)}function m(a,b){for(var d=0,c=b.length;a!=j&&d<c;d++)a=a[b[d]];return a}function i(){}function n(a){return a.charAt(0).toUpperCase()+a.substring(1)}i.INVALID={};var t=i.INVALID;h.augment(i,{getAttrs:function(){return f(this)},getAttrVals:function(){var a={},b,d=f(this);
for(b in d)a[b]=this.get(b);return a},addAttr:function(a,b,d){var c=f(this);b=h.clone(b);if(c[a])h.mix(c[a],b,d);else c[a]=b;return this},addAttrs:function(a,b){var d=this;h.each(a,function(e,o){d.addAttr(o,e)});if(b)for(var c in b)d.set(c,b[c]);return d},hasAttr:function(a){return a&&f(this).hasOwnProperty(a)},removeAttr:function(a){if(this.hasAttr(a)){delete f(this)[a];delete g(this)[a]}return this},set:function(a,b,d){var c;if(h.isPlainObject(a)){var e=a;a=0;c=true;d=b;for(a in e)c=c&&this.set(a,
e[a],d);return!!c}d=d||{};var o,r=a;if(a.indexOf(".")!==-1){c=a.split(".");a=c.shift()}e=this.get(a);if(c)o=m(e,c);if(!(!c&&e===b))if(!(c&&o===b)){if(c){var p=o=h.clone(e),s=c.length-1;if(s>=0){for(var q=0;q<s;q++)p=p[c[q]];if(p!=j)p[c[q]]=b}b=o}if(!d.silent)if(false===this.__fireAttrChange("before",a,e,b,r))return false;c=this.__set(a,b);if(c===false)return c;d.silent||this.__fireAttrChange("after",a,e,g(this)[a],r);return this}},__fireAttrChange:function(a,b,d,c,e){return this.fire(a+n(b)+"Change",
{attrName:b,subAttrName:e,prevVal:d,newVal:c})},__set:function(a,b){var d,c=l(f(this),a,true),e=c.validator;c=c.setter;if(e=k(this,e))if(!e.call(this,b,a))return false;if(c=k(this,c))d=c.call(this,b,a);if(d===t)return false;if(d!==j)b=d;g(this)[a]=b},get:function(a){var b,d,c;if(a.indexOf(".")!==-1){b=a.split(".");a=b.shift()}d=l(f(this),a).getter;c=a in g(this)?g(this)[a]:this.__getDefAttrVal(a);if(d=k(this,d))c=d.call(this,c,a);if(b)c=m(c,b);return c},__getDefAttrVal:function(a){var b=l(f(this),
a),d;if(d=k(this,b.valueFn)){d=d.call(this);if(d!==j)b.value=d;delete b.valueFn;f(this)[a]=b}return b.value},reset:function(a){if(a)return this.hasAttr(a)?this.set(a,this.__getDefAttrVal(a)):this;var b=f(this);for(a in b)this.reset(a);return this}});i.__capitalFirst=n;return i});
KISSY.add("base/base",function(h,j,k){function l(f){for(var g=this.constructor;g;){var m=g.ATTRS;if(m){var i=void 0;for(i in m)m.hasOwnProperty(i)&&this.addAttr(i,m[i],false)}g=g.superclass?g.superclass.constructor:null}if(f)for(var n in f)f.hasOwnProperty(n)&&this.__set(n,f[n])}h.augment(l,k.Target,j);return l},{requires:["./attribute","event"]});KISSY.add("base",function(h,j,k){j.Attribute=k;return j},{requires:["base/base","base/attribute"]});
