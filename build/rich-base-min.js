/*
Copyright 2012, KISSY UI Library v1.40dev
MIT Licensed
build time: Nov 22 14:09
*/
KISSY.add("rich-base",function(b,k){function j(){var c,d;k.apply(this,arguments);d=this.get("listeners");for(c in d)this.on(c,d[c]);this.callMethodByHierarchy("initializer","constructor");this.constructPlugins();this.callPluginsMethod("initializer")}var l=b.noop;b.extend(j,k,{callMethodByHierarchy:function(c,d){for(var a=this.constructor,e=[],b,h,f,g,i;a;){i=[];if(g=a.__ks_exts)for(f=0;f<g.length;f++)if(b=g[f])"constructor"!=d&&(b=b.prototype.hasOwnProperty(d)?b.prototype[d]:null),b&&i.push(b);a.prototype.hasOwnProperty(c)&&
(h=a.prototype[c])&&i.push(h);i.length&&e.push.apply(e,i.reverse());a=a.superclass&&a.superclass.constructor}for(f=e.length-1;0<=f;f--)e[f]&&e[f].call(this)},callPluginsMethod:function(c){var d=this;b.each(d.get("plugins"),function(a){if(a[c])a[c](d)})},constructPlugins:function(){var c=this.get("plugins");b.each(c,function(d,a){b.isFunction(d)&&(c[a]=new d)})},initializer:l,destructor:l,destroy:function(){this.callPluginsMethod("destructor");for(var c=this.constructor,d,a,b;c;){c.prototype.hasOwnProperty("destructor")&&
c.prototype.destructor.apply(this);if(d=c.__ks_exts)for(b=d.length-1;0<=b;b--)(a=d[b]&&d[b].prototype.__destructor)&&a.apply(this);c=c.superclass&&c.superclass.constructor}this.fire("destroy");this.detach();this.fire("destroy")},plug:function(c){b.isFunction(c)&&(c=new c);c.initializer&&c.initializer(this);this.get("plugins").push(c);return this},unplug:function(c){var d=[],a=this,e="string"==typeof c;b.each(a.get("plugins"),function(b){var h=0;if(c)if(e){if(!b.get||b.get("pluginId")!=c)d.push(b),
h=1}else b==c&&(d.push(b),h=1);h||b.destructor(a)});a.setInternal("plugins",d);return a}},{ATTRS:{plugins:{value:[]},listeners:{value:[]}}});b.mix(j,{extend:function d(a,e,j){var h="RichBaseDerived",f,g;f=b.makeArray(arguments);if(null==a||b.isObject(a))j=e,e=a,a=[];if("string"==typeof(f=f[f.length-1]))h=f;e=e||{};e.hasOwnProperty("constructor")?g=e.constructor:(g=function(){g.superclass.constructor.apply(this,arguments)},b.Config.debug&&eval("C=function "+h.replace(/[-.]/g,"_")+"(){ C.superclass.constructor.apply(this, arguments);}"));
g.name=h;b.extend(g,this,e,j);if(a){g.__ks_exts=a;var i={},k={};b.each(a.concat(g),function(a){if(a){b.each(a.ATTRS,function(a,d){var e=i[d]=i[d]||{};b.mix(e,a)});var a=a.prototype,d;for(d in a)a.hasOwnProperty(d)&&(k[d]=a[d])}});g.ATTRS=i;b.augment(g,k)}g.extend=d;return g}});return j},{requires:["base"]});
