/*
Copyright 2011, KISSY UI Library v1.20dev
MIT Licensed
build time: ${build.time}
*/
KISSY.add("anim/base",function(f,d,o,r,p,k){function a(b,c,e,g,i,j){if(!(b=d.get(b)))return k;if(!(this instanceof a))return new a(b,c,e,g,i,j);var m=f.isPlainObject(e);c=c;this.domEl=b;if(f.isPlainObject(c))c=String(f.param(c,";")).replace(/=/g,":").replace(/%23/g,"#").replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();this.props=v(c);this.targetStyle=c;if(m)b=f.merge(n,e);else{b=f.clone(n);if(e)b.duration=D(e)||1;if(f.isString(g)||f.isFunction(g))b.easing=g;if(f.isFunction(i))b.complete=i;if(j!==
k)b.nativeSupport=j}this.config=b;if(b.nativeSupport&&s()&&f.isString(g=b.easing))if(/cubic-bezier\([\s\d.,]+\)/.test(g)||(g=r.NativeTimeFunction[g])){b.easing=g;this.transitionName=s()}f.isFunction(i)&&this.on(w,i);return k}function s(){var b="transition",c;if(h.style[b]!==k)c=b;else f.each(["Webkit","Moz","O"],function(e){if(h.style[b=e+"Transition"]!==k){c=b;return false}});s=function(){return c};return c}function A(b,c,e){p.ie&&e.indexOf(t)>-1&&d.css(b,t,c[t].v);b.style.cssText+=";"+e}function v(b){var c=
{},e=q.length,g;h.innerHTML='<div style="'+b+'"></div>';for(b=h.firstChild.style;e--;)if(g=b[q[e]])c[q[e]]=E(g);return c}function E(b){var c=D(b);b=(b+"").replace(/^[-\d.]+/,"");return isNaN(c)?{v:b,u:"",f:u}:{v:c,u:b,f:x}}function x(b,c,e){return(b+(c-b)*e).toFixed(3)}function u(b,c,e){for(var g=2,i,j,m=[],B=[];i=3,j=arguments[g-1],g--;)if(l(j,0,4)==="rgb(")for(j=j.match(/\d+/g);i--;)m.push(~~j[i]);else if(l(j,0,k)==="#"){if(j.length===4)j="#"+l(j,1,k)+l(j,1,k)+l(j,2,k)+l(j,2,k)+l(j,3,k)+l(j,3,k);
for(;i--;)m.push(parseInt(l(j,1+i*2,2),16))}else return c;for(;i--;){g=~~(m[i+3]+(m[i]-m[i+3])*e);B.push(g<0?0:g>255?255:g)}return"rgb("+B.join(",")+")"}function l(b,c,e){return b.substr(c,e||1)}var D=parseFloat;o=f.require("event/target");var h=d.create("<div>"),q="backgroundColor borderBottomColor borderBottomWidth borderBottomStyle borderLeftColor borderLeftWidth borderLeftStyle borderRightColor borderRightWidth borderRightStyle borderSpacing borderTopColor borderTopWidth borderTopStyle bottom color font fontFamily fontSize fontWeight height left letterSpacing lineHeight marginBottom marginLeft marginRight marginTop maxHeight maxWidth minHeight minWidth opacity outlineColor outlineOffset outlineWidth paddingBottom paddingLeft paddingRight paddingTop right textIndent top width wordSpacing zIndex".split(" "),
t="opacity",w="complete",n={duration:1,easing:"easeNone",nativeSupport:true};f.augment(a,o,{run:function(){var b=this,c=b.config,e=b.domEl,g,i,j,m,B=b.props,G={},y;for(y in B)G[y]=E(d.css(e,y));if(b.fire("start")!==false){b.stop();if(b.transitionName)b._nativeRun();else{g=c.duration*1E3;j=f.now();m=j+g;i=c.easing;if(f.isString(i))i=r[i]||r.easeNone;b.timer=f.later(c=function(){var F=f.now(),I=F>m?1:(F-j)/g,C,z,H;for(y in B){C=G[y];z=B[y];if(z.v==0)z.u=C.u;if(C.u!==z.u)C.v=0;d.css(e,y,z.f(C.v,z.v,
i(I))+z.u)}if(b.fire("step")===false||(H=F>m)){b.stop();H&&b.fire(w)}},13,true);c()}return b}},_nativeRun:function(){var b=this,c=b.config,e=b.domEl,g=b.props,i=c.duration*1E3;c=c.easing;var j=b.transitionName,m={};m[j+"Property"]="all";m[j+"Duration"]=i+"ms";m[j+"TimingFunction"]=c;d.css(e,m);f.later(function(){A(e,g,b.targetStyle)},0);f.later(function(){b.stop(true)},i)},stop:function(b){if(this.transitionName)this._nativeStop(b);else{if(this.timer){this.timer.cancel();this.timer=k}if(b){A(this.domEl,
this.props,this.targetStyle);this.fire(w)}}return this},_nativeStop:function(b){var c=this.domEl,e=this.transitionName,g=this.props,i;if(b){d.css(c,e+"Property","none");this.fire(w)}else{for(i in g)d.css(c,i,d._getComputedStyle(c,i));d.css(c,e+"Property","none")}}});a.supportTransition=function(){return!!s()};return a},{requires:["dom","event","anim/easing","ua"]});
KISSY.add("anim/easing",function(){var f=Math,d=f.PI,o=f.pow,r=f.sin,p=1.70158,k={easeNone:function(a){return a},easeIn:function(a){return a*a},easeOut:function(a){return(2-a)*a},easeBoth:function(a){return(a*=2)<1?0.5*a*a:0.5*(1- --a*(a-2))},easeInStrong:function(a){return a*a*a*a},easeOutStrong:function(a){return 1- --a*a*a*a},easeBothStrong:function(a){return(a*=2)<1?0.5*a*a*a*a:0.5*(2-(a-=2)*a*a*a)},elasticIn:function(a){if(a===0||a===1)return a;return-(o(2,10*(a-=1))*r((a-0.075)*2*d/0.3))},elasticOut:function(a){if(a===
0||a===1)return a;return o(2,-10*a)*r((a-0.075)*2*d/0.3)+1},elasticBoth:function(a){if(a===0||(a*=2)===2)return a;if(a<1)return-0.5*o(2,10*(a-=1))*r((a-0.1125)*2*d/0.45);return o(2,-10*(a-=1))*r((a-0.1125)*2*d/0.45)*0.5+1},backIn:function(a){if(a===1)a-=0.0010;return a*a*((p+1)*a-p)},backOut:function(a){return(a-=1)*a*((p+1)*a+p)+1},backBoth:function(a){if((a*=2)<1)return 0.5*a*a*(((p*=1.525)+1)*a-p);return 0.5*((a-=2)*a*(((p*=1.525)+1)*a+p)+2)},bounceIn:function(a){return 1-k.bounceOut(1-a)},bounceOut:function(a){return a<
1/2.75?7.5625*a*a:a<2/2.75?7.5625*(a-=1.5/2.75)*a+0.75:a<2.5/2.75?7.5625*(a-=2.25/2.75)*a+0.9375:7.5625*(a-=2.625/2.75)*a+0.984375},bounceBoth:function(a){if(a<0.5)return k.bounceIn(a*2)*0.5;return k.bounceOut(a*2-1)*0.5+0.5}};k.NativeTimeFunction={easeNone:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeBoth:"ease-in-out",easeInStrong:"cubic-bezier(0.9, 0.0, 0.9, 0.5)",easeOutStrong:"cubic-bezier(0.1, 0.5, 0.1, 1.0)",easeBothStrong:"cubic-bezier(0.9, 0.0, 0.1, 1.0)"};return k});
KISSY.add("anim/node-plugin",function(f,d,o,r,p){function k(h,q,t,w,n){if(q==="toggle"){n=d.css(h,s)===A?1:0;q="show"}if(n)d.css(h,s,d.data(h,s)||"");var b={},c={};f.each(D[q],function(e){if(e===v){b[v]=d.css(h,v);d.css(h,v,E)}else if(e===x){b[x]=d.css(h,x);c.opacity=n?1:0;n&&d.css(h,x,0)}else if(e===u){b[u]=d.css(h,u);c.height=n?d.css(h,u)||h.naturalHeight:0;n&&d.css(h,u,0)}else if(e===l){b[l]=d.css(h,l);c.width=n?d.css(h,l)||h.naturalWidth:0;n&&d.css(h,l,0)}});(new o(h,c,t,"easeOut",function(){if(!n){var e=
h.style,g=e[s];if(g!==A){g&&d.data(h,s,g);e[s]=A}b[u]&&d.css(h,{height:b[u]});b[l]&&d.css(h,{width:b[l]});b[x]&&d.css(h,{opacity:b[x]});b[v]&&d.css(h,{overflow:b[v]})}w&&f.isFunction(w)&&w()})).run()}r=f.require("node/node").prototype;var a=f.require("node/nodelist").prototype,s="display",A="none",v="overflow",E="hidden",x="opacity",u="height",l="width",D={show:[v,x,u,l],fade:[x],slide:[v,u]};f.each([r,a],function(h){h.animate=function(){var q=f.makeArray(arguments);f.each(this,function(t){o.apply(p,
[t].concat(q)).run()});return this};f.each({show:["show",1],hide:["show",0],toggle:["toggle"],fadeIn:["fade",1],fadeOut:["fade",0],slideDown:["slide",1],slideUp:["slide",0]},function(q,t){h[t]=function(w,n){d[t]&&arguments.length===0?d[t](this):f.each(this,function(b){k(b,q[0],w,n,q[1])});return this}})})},{requires:["dom","anim/base","node"]});KISSY.add("anim",function(f,d,o){d.Easing=o;return d},{requires:["anim/base","anim/easing","anim/node-plugin"]});
