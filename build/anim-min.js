/*
Copyright 2011, KISSY UI Library v1.20dev
MIT Licensed
build time: Nov 9 22:49
*/
KISSY.add("anim/base",function(g,b,d,h,l,a,k){function j(e,c,f,m,s){if(e=b.get(e)){if(!(this instanceof j))return new j(e,c,f,m,s);if(g.isString(c))c=g.unparam(c,";",":");for(var r in c){var n=q(g.trim(r));if(r!=n){c[n]=c[r];delete c[r]}}f=g.isPlainObject(f)?f:{duration:parseFloat(f)||undefined,easing:m,complete:s};f=g.merge(C,f);f.duration*=1E3;this.config=f;this.elem=this.domEl=e;this.props=c;this._backupProps={};this._fxs={};f.complete&&this.on("complete",f.complete)}}var q=b._camelCase,D=b._isElementNode,
y={border:["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth"],borderBottom:["borderBottomWidth"],borderLeft:["borderLeftWidth"],borderTop:["borderTopWidth"],borderRight:["borderRightWidth"],font:["fontSize","fontWeight"],margin:["marginBottom","marginLeft","marginRight","marginTop"],padding:["paddingBottom","paddingLeft","paddingRight","paddingTop"]},C={duration:1,easing:"easeNone"},i=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i;j.SHORT_HANDS=y;g.augment(j,d.Target,{isRunning:false,
run:function(){var e=this._backupProps,c=this.elem,f,m={},s=this._fxs,r=this.config,n=this.props;if(this.fire("start")!==false){g.each(n,function(t,p){if(n.hasOwnProperty(p)){var o;if(g.isArray(t)){o=m[p]=t[1];n[p]=t[0]}else o=m[p]=r.easing;if(g.isString(o))o=m[p]=h[o];m[p]=o||h.easeNone}});g.each(y,function(t,p){var o,z,G;if(G=n[p]){z={};g.each(t,function(E){z[E]=b.css(c,E);m[E]=m[p]});b.css(c,p,G);for(o in z){n[o]=b.css(c,o);b.css(c,o,z[o])}delete n[p]}});for(f in n)if(n.hasOwnProperty(f)){var F=
g.trim(n[f]),u={elem:c,prop:f,duration:r.duration,easing:m[f]},A=k.getFx(u),v=F,B="",w=A.cur(),x=F.match(i);if(x){v=parseFloat(x[2]);if((B=x[3])&&B!=="px"){b.css(c,f,F);w=v/A.cur()*w;b.css(c,f,w+B)}if(x[1])v=(x[1]==="-="?-1:1)*v+w}u.from=w;u.to=v;u.unit=B;A.load(u);s[f]=A}if(D(c)&&(n.width||n.height)){g.mix(e,{overflow:b.css(c,"overflow"),"overflow-x":b.css(c,"overflowX"),"overflow-y":b.css(c,"overflowY")});b.css(c,"overflow","hidden");if(b.css(c,"display")==="inline"&&b.css(c,"float")==="none")l.ie?
b.css(c,"zoom",1):b.css(c,"display","inline-block")}a.start(this);this.isRunning=true;return this}},_frame:function(){var e,c=1,f=this._fxs;for(e in f)if(f.hasOwnProperty(e))c&=f[e].frame();if(this.fire("step")===false||c)this.stop(c)},stop:function(e){var c,f,m=this._fxs,s=this.elem;if(this.isRunning){if(e){for(f in m)m.hasOwnProperty(f)&&m[f].frame(1);this.fire("complete")}g.isEmptyObject(c=this._backupProps)||b.css(s,c);this._backupProps={};this._fxs={};a.stop(this);this.isRunning=false;return this}}});
return j},{requires:["dom","event","./easing","ua","./manager","./fx"]});
KISSY.add("anim/color",function(g,b,d,h){function l(i){i+="";var e;if(e=i.match(D))return[parseInt(e[1]),parseInt(e[2]),parseInt(e[3])];else if(e=i.match(y))return[parseInt(e[1]),parseInt(e[2]),parseInt(e[3]),parseInt(e[4])];else if(e=i.match(C)){for(i=1;i<e.length;i++)if(e[i].length<2)e[i]+=e[i];return[parseInt(e[1],k),parseInt(e[2],k),parseInt(e[3],k)]}if(q[i=i.toLowerCase()])return q[i];return[255,255,255]}function a(){a.superclass.constructor.apply(this,arguments)}var k=16,j=Math.floor,q={black:[0,
0,0],silver:[192,192,192],gray:[128,128,128],white:[255,255,255],maroon:[128,0,0],red:[255,0,0],purple:[128,0,128],fuchsia:[255,0,255],green:[0,128,0],lime:[0,255,0],olive:[128,128,0],yellow:[255,255,0],navy:[0,0,128],blue:[0,0,255],teal:[0,128,128],aqua:[0,255,255]},D=/^rgb\(([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\)$/i,y=/^rgba\(([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+),\s*([0-9]+)\)$/i,C=/^#?([0-9A-F]{1,2})([0-9A-F]{1,2})([0-9A-F]{1,2})$/i;b=d.SHORT_HANDS;b.background=["backgroundColor"];b.borderColor=
["borderBottomColor","borderLeftColor","borderRightColor","borderTopColor"];b.border.push("borderBottomColor","borderLeftColor","borderRightColor","borderTopColor");b.borderBottom.push("borderBottomColor");b.borderLeft.push("borderLeftColor");b.borderRight.push("borderRightColor");b.borderTop.push("borderTopColor");g.extend(a,h,{load:function(){a.superclass.load.apply(this,arguments);if(this.from)this.from=l(this.from);if(this.to)this.to=l(this.to)},interpolate:function(i,e,c){var f=a.superclass.interpolate;
if(i.length==3&&e.length==3)return"rgb("+[j(f(i[0],e[0],c)),j(f(i[1],e[1],c)),j(f(i[2],e[2],c))].join(", ")+")";else if(i.length==4||e.length==4)return"rgba("+[j(f(i[0],e[0],c)),j(f(i[1],e[1],c)),j(f(i[2],e[2],c)),j(f(i[3]||1,e[3]||1,c))].join(", ")+")"}});g.each(["backgroundColor","borderBottomColor","borderLeftColor","borderRightColor","borderTopColor","color","outlineColor"],function(i){h.Factories[i]=a});return a},{requires:["dom","./base","./fx"]});
KISSY.add("anim/easing",function(){var g=Math.PI,b=Math.pow,d=Math.sin,h=1.70158,l={swing:function(a){return-Math.cos(a*g)/2+0.5},easeNone:function(a){return a},easeIn:function(a){return a*a},easeOut:function(a){return(2-a)*a},easeBoth:function(a){return(a*=2)<1?0.5*a*a:0.5*(1- --a*(a-2))},easeInStrong:function(a){return a*a*a*a},easeOutStrong:function(a){return 1- --a*a*a*a},easeBothStrong:function(a){return(a*=2)<1?0.5*a*a*a*a:0.5*(2-(a-=2)*a*a*a)},elasticIn:function(a){if(a===0||a===1)return a;
return-(b(2,10*(a-=1))*d((a-0.075)*2*g/0.3))},elasticOut:function(a){if(a===0||a===1)return a;return b(2,-10*a)*d((a-0.075)*2*g/0.3)+1},elasticBoth:function(a){if(a===0||(a*=2)===2)return a;if(a<1)return-0.5*b(2,10*(a-=1))*d((a-0.1125)*2*g/0.45);return b(2,-10*(a-=1))*d((a-0.1125)*2*g/0.45)*0.5+1},backIn:function(a){if(a===1)a-=0.0010;return a*a*((h+1)*a-h)},backOut:function(a){return(a-=1)*a*((h+1)*a+h)+1},backBoth:function(a){if((a*=2)<1)return 0.5*a*a*(((h*=1.525)+1)*a-h);return 0.5*((a-=2)*a*
(((h*=1.525)+1)*a+h)+2)},bounceIn:function(a){return 1-l.bounceOut(1-a)},bounceOut:function(a){return a<1/2.75?7.5625*a*a:a<2/2.75?7.5625*(a-=1.5/2.75)*a+0.75:a<2.5/2.75?7.5625*(a-=2.25/2.75)*a+0.9375:7.5625*(a-=2.625/2.75)*a+0.984375},bounceBoth:function(a){if(a<0.5)return l.bounceIn(a*2)*0.5;return l.bounceOut(a*2-1)*0.5+0.5}};l.NativeTimeFunction={easeNone:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeBoth:"ease-in-out",easeInStrong:"cubic-bezier(0.9, 0.0, 0.9, 0.5)",easeOutStrong:"cubic-bezier(0.1, 0.5, 0.1, 1.0)",
easeBothStrong:"cubic-bezier(0.9, 0.0, 0.1, 1.0)"};return l});
KISSY.add("anim/fx",function(g,b,d){function h(a){this.load(a)}function l(a,k){if((!a.style||a.style[k]==null)&&b.attr(a,k,d,1)!=null)return 1;return 0}g.augment(h,{load:function(a){g.mix(this,a);this.startTime=g.now();this.pos=0;this.unit=this.unit||""},frame:function(a){var k=0,j=g.now();if(a||j>=this.duration+this.startTime)k=this.pos=1;else{a=j-this.startTime;this.pos=this.easing(a/this.duration)}this.update();return k},interpolate:function(a,k,j){return g.isNumber(a)&&g.isNumber(k)?(a+(k-a)*
j).toFixed(3):d},update:function(){var a=this.prop,k=this.elem,j=this.to,q=this.interpolate(this.from,j,this.pos);if(q===d){if(!this.finished){this.finished=1;b.css(k,a,j)}}else{q+=this.unit;l(k,a)?b.attr(k,a,q,1):b.css(k,a,q)}},cur:function(){var a=this.prop,k=this.elem;if(l(k,a))return b.attr(k,a,d,1);var j;a=b.css(k,a);return isNaN(j=parseFloat(a))?!a||a==="auto"?0:a:j}});h.Factories={};h.getFx=function(a){return new (h.Factories[a.prop]||h)(a)};return h},{requires:["dom"]});
KISSY.add("anim/manager",function(g){var b=g.stamp;return{interval:15,runnings:{},timer:null,start:function(d){var h=b(d);if(!this.runnings[h]){this.runnings[h]=d;this.startTimer()}},stop:function(d){this.notRun(d)},notRun:function(d){delete this.runnings[b(d)];g.isEmptyObject(this.runnings)&&this.stopTimer()},pause:function(d){this.notRun(d)},resume:function(d){this.start(d)},startTimer:function(){var d=this;if(!d.timer)d.timer=setTimeout(function(){if(d.runFrames())d.stopTimer();else{d.timer=0;
d.startTimer()}},d.interval)},stopTimer:function(){var d=this.timer;if(d){clearTimeout(d);this.timer=0}},runFrames:function(){var d=1,h=this.runnings,l;for(l in h)if(h.hasOwnProperty(l)){d=0;h[l]._frame()}return d}}});KISSY.add("anim",function(g,b,d){b.Easing=d;return b},{requires:["anim/base","anim/easing","anim/color"]});
