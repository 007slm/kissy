/*
Copyright 2012, KISSY UI Library v1.30dev
MIT Licensed
build time: Jun 4 13:27
*/
KISSY.add("anim",function(c,b,e){b.Easing=e;c.mix(c,{Anim:b,Easing:b.Easing});return b},{requires:["anim/base","anim/easing","anim/color","anim/backgroundPosition"]});
KISSY.add("anim/backgroundPosition",function(c,b,e,h){function a(a){a=a.replace(/left|top/g,"0px").replace(/right|bottom/g,"100%").replace(/([0-9\.]+)(\s|\)|$)/g,"$1px$2");a=a.match(/(-?[0-9\.]+)(px|%|em|pt)\s(-?[0-9\.]+)(px|%|em|pt)/);return[parseFloat(a[1]),a[2],parseFloat(a[3]),a[4]]}function d(){d.superclass.constructor.apply(this,arguments)}c.extend(d,h,{load:function(){d.superclass.load.apply(this,arguments);this.unit=["px","px"];if(this.from){var b=a(this.from);this.from=[b[0],b[2]]}else this.from=
[0,0];this.to?(b=a(this.to),this.to=[b[0],b[2]],this.unit=[b[1],b[3]]):this.to=[0,0]},interpolate:function(a,b,c){var e=this.unit,h=d.superclass.interpolate;return h(a[0],b[0],c)+e[0]+" "+h(a[1],b[1],c)+e[1]},cur:function(){return b.css(this.elem,"backgroundPosition")},update:function(){var a=this.prop,c=this.elem,d=this.interpolate(this.from,this.to,this.pos);b.css(c,a,d)}});return h.Factories.backgroundPosition=d},{requires:["dom","./base","./fx"]});
KISSY.add("anim/base",function(c,b,e,h,a,d,k,f){function g(a,d,f,e,h){if(a=b.get(a)){if(!(this instanceof g))return new g(a,d,f,e,h);var d=c.isString(d)?c.unparam(""+d,";",":"):c.clone(d),k;for(k in d){var n=i(c.trim(k));k!=n&&(d[n]=d[k],delete d[k])}f=c.isPlainObject(f)?c.clone(f):{duration:parseFloat(f)||void 0,easing:e,complete:h};this.config=f=c.merge(x,f);f.duration*=1E3;this.elem=this.domEl=a;this.props=d;this._backupProps={};this._fxs={};this.on("complete",o)}}function o(a){var d,f=this.config;
c.isEmptyObject(d=this._backupProps)||b.css(this.elem,d);f.complete&&f.complete.call(this,a)}function p(){var f=this.config,e=this._backupProps,g=this.elem,j,n,i,o=f.specialEasing||{},p=this._fxs,m=this.props;v(this);if(!1===this.fire("start"))this.stop(0);else{if(g.nodeType==b.ELEMENT_NODE)for(i in n="none"===b.css(g,"display"),m)if(j=m[i],"hide"==j&&n||"show"==j&&!n){this.stop(1);return}if(g.nodeType==b.ELEMENT_NODE&&(m.width||m.height))j=g.style,c.mix(e,{overflow:j.overflow,"overflow-x":j.overflowX,
"overflow-y":j.overflowY}),j.overflow="hidden","inline"===b.css(g,"display")&&"none"===b.css(g,"float")&&(a.ie?j.zoom=1:j.display="inline-block");c.each(m,function(a,b){if(m.hasOwnProperty(b)){var d;c.isArray(a)?(d=o[b]=a[1],m[b]=a[0]):d=o[b]=o[b]||f.easing;c.isString(d)&&(d=o[b]=h[d]);o[b]=d||h.easeNone}});c.each(w,function(a,d){var f,e,i;if(i=m[d]){e={};c.each(a,function(a){e[a]=b.css(g,a);o[a]=o[d]});b.css(g,d,i);for(f in e)m[f]=b.css(g,f),b.css(g,f,e[f]);delete m[d]}});for(i in m)if(m.hasOwnProperty(i)){j=
c.trim(m[i]);var q,r,l={elem:g,prop:i,duration:f.duration,easing:o[i]},s=k.getFx(l);c.inArray(j,y)?(e[i]=b.style(g,i),"toggle"==j&&(j=n?"show":"hide"),"hide"==j?(q=0,r=s.cur(),e.display="none"):(r=0,q=s.cur(),b.css(g,i,r),b.show(g)),j=q):(q=j,r=s.cur());j+="";var u="",t=j.match(z);if(t){q=parseFloat(t[2]);if((u=t[3])&&"px"!==u)b.css(g,i,j),r*=q/s.cur(),b.css(g,i,r+u);t[1]&&(q=("-="===t[1]?-1:1)*q+r)}l.from=r;l.to=q;l.unit=u;s.load(l);p[i]=s}d.start(this)}}function v(a){var d=a.elem,f=b.data(d,l);
f||b.data(d,l,f={});f[c.stamp(a)]=a}function n(a,d,e,g){e&&!1!==g&&f.removeQueue(a,g);var a=b.data(a,l),a=c.merge(a),i;for(i in a)e=a[i],e.config.queue==g&&e.stop(d)}var i=b._camelCase,y=["hide","show","toggle"],w={background:["backgroundPosition"],border:["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth"],borderBottom:["borderBottomWidth"],borderLeft:["borderLeftWidth"],borderTop:["borderTopWidth"],borderRight:["borderRightWidth"],font:["fontSize","fontWeight"],margin:["marginBottom",
"marginLeft","marginRight","marginTop"],padding:["paddingBottom","paddingLeft","paddingRight","paddingTop"]},x={duration:1,easing:"easeNone"},z=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i;g.SHORT_HANDS=w;c.augment(g,e.Target,{isRunning:function(){var a=b.data(this.elem,l);return a?!!a[c.stamp(this)]:0},_runInternal:p,run:function(){!1===this.config.queue?p.call(this):f.queue(this);return this},_frame:function(){var a,d=this.config,b=1,f,e,c=this._fxs;for(a in c)if(c.hasOwnProperty(a)&&!(e=c[a]).finished)d.frame&&
(f=d.frame(e)),1==f||0==f?(e.finished=f,b&=f):(b&=e.frame())&&d.frame&&d.frame(e);(!1===this.fire("step")||b)&&this.stop(b)},stop:function(a){var e=this.config,g=e.queue,i,n,h=this._fxs;if(this.isRunning()){if(a){for(i in h)if(h.hasOwnProperty(i)&&!(n=h[i]).finished)e.frame?e.frame(n,1):n.frame(1);this.fire("complete")}d.stop(this);a=this.elem;if(e=b.data(a,l))delete e[c.stamp(this)],c.isEmptyObject(e)&&b.removeData(a,l);!1!==g&&f.dequeue(this);return this}!1!==g&&f.remove(this)}});var l=c.guid("ks-anim-unqueued-"+
c.now()+"-");g.stop=function(a,d,e,g){if(null===g||c.isString(g)||!1===g)return n.apply(void 0,arguments);e&&f.removeQueues(a);var i=b.data(a,l),i=c.merge(i),h;for(h in i)i[h].stop(d)};g.isRunning=function(a){return(a=b.data(a,l))&&!c.isEmptyObject(a)};g.Q=f;return g},{requires:"dom,event,./easing,ua,./manager,./fx,./queue".split(",")});
KISSY.add("anim/color",function(c,b,e,h){function a(a){var a=a+"",d;if(d=a.match(o))return[parseInt(d[1]),parseInt(d[2]),parseInt(d[3])];if(d=a.match(p))return[parseInt(d[1]),parseInt(d[2]),parseInt(d[3]),parseInt(d[4])];if(d=a.match(v)){for(a=1;a<d.length;a++)2>d[a].length&&(d[a]+=d[a]);return[parseInt(d[1],k),parseInt(d[2],k),parseInt(d[3],k)]}return g[a=a.toLowerCase()]?g[a]:[255,255,255]}function d(){d.superclass.constructor.apply(this,arguments)}var k=16,f=Math.floor,g={black:[0,0,0],silver:[192,
192,192],gray:[128,128,128],white:[255,255,255],maroon:[128,0,0],red:[255,0,0],purple:[128,0,128],fuchsia:[255,0,255],green:[0,128,0],lime:[0,255,0],olive:[128,128,0],yellow:[255,255,0],navy:[0,0,128],blue:[0,0,255],teal:[0,128,128],aqua:[0,255,255]},o=/^rgb\(([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\)$/i,p=/^rgba\(([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+),\s*([0-9]+)\)$/i,v=/^#?([0-9A-F]{1,2})([0-9A-F]{1,2})([0-9A-F]{1,2})$/i,b=e.SHORT_HANDS;b.background=b.background||[];b.background.push("backgroundColor");
b.borderColor=["borderBottomColor","borderLeftColor","borderRightColor","borderTopColor"];b.border.push("borderBottomColor","borderLeftColor","borderRightColor","borderTopColor");b.borderBottom.push("borderBottomColor");b.borderLeft.push("borderLeftColor");b.borderRight.push("borderRightColor");b.borderTop.push("borderTopColor");c.extend(d,h,{load:function(){d.superclass.load.apply(this,arguments);this.from&&(this.from=a(this.from));this.to&&(this.to=a(this.to))},interpolate:function(a,b,e){var c=
d.superclass.interpolate;if(3==a.length&&3==b.length)return"rgb("+[f(c(a[0],b[0],e)),f(c(a[1],b[1],e)),f(c(a[2],b[2],e))].join(", ")+")";if(4==a.length||4==b.length)return"rgba("+[f(c(a[0],b[0],e)),f(c(a[1],b[1],e)),f(c(a[2],b[2],e)),f(c(a[3]||1,b[3]||1,e))].join(", ")+")"}});c.each("backgroundColor,borderBottomColor,borderLeftColor,borderRightColor,borderTopColor,color,outlineColor".split(","),function(a){h.Factories[a]=d});return d},{requires:["dom","./base","./fx"]});
KISSY.add("anim/easing",function(){var c=Math.PI,b=Math.pow,e=Math.sin,h={swing:function(a){return-Math.cos(a*c)/2+0.5},easeNone:function(a){return a},easeIn:function(a){return a*a},easeOut:function(a){return(2-a)*a},easeBoth:function(a){return 1>(a*=2)?0.5*a*a:0.5*(1- --a*(a-2))},easeInStrong:function(a){return a*a*a*a},easeOutStrong:function(a){return 1- --a*a*a*a},easeBothStrong:function(a){return 1>(a*=2)?0.5*a*a*a*a:0.5*(2-(a-=2)*a*a*a)},elasticIn:function(a){return 0===a||1===a?a:-(b(2,10*(a-=
1))*e((a-0.075)*2*c/0.3))},elasticOut:function(a){return 0===a||1===a?a:b(2,-10*a)*e((a-0.075)*2*c/0.3)+1},elasticBoth:function(a){return 0===a||2===(a*=2)?a:1>a?-0.5*b(2,10*(a-=1))*e((a-0.1125)*2*c/0.45):0.5*b(2,-10*(a-=1))*e((a-0.1125)*2*c/0.45)+1},backIn:function(a){1===a&&(a-=0.0010);return a*a*(2.70158*a-1.70158)},backOut:function(a){return(a-=1)*a*(2.70158*a+1.70158)+1},backBoth:function(a){var d,b=(d=2.5949095)+1;return 1>(a*=2)?0.5*a*a*(b*a-d):0.5*((a-=2)*a*(b*a+d)+2)},bounceIn:function(a){return 1-
h.bounceOut(1-a)},bounceOut:function(a){return a<1/2.75?7.5625*a*a:a<2/2.75?7.5625*(a-=1.5/2.75)*a+0.75:a<2.5/2.75?7.5625*(a-=2.25/2.75)*a+0.9375:7.5625*(a-=2.625/2.75)*a+0.984375},bounceBoth:function(a){return 0.5>a?0.5*h.bounceIn(2*a):0.5*h.bounceOut(2*a-1)+0.5}};return h});
KISSY.add("anim/fx",function(c,b,e){function h(a){this.load(a)}function a(a,c){return(!a.style||null==a.style[c])&&null!=b.attr(a,c,e,1)?1:0}c.augment(h,{load:function(a){c.mix(this,a);this.startTime=c.now();this.pos=0;this.unit=this.unit||""},frame:function(a){var b=0;if(this.finished)return 1;var e=c.now();a||e>=this.duration+this.startTime?b=this.pos=1:(a=e-this.startTime,this.pos=this.easing(a/this.duration));this.update();this.finished=this.finished||b;return b},interpolate:function(a,b,f){return c.isNumber(a)&&
c.isNumber(b)?(a+(b-a)*f).toFixed(3):e},update:function(){var d=this.prop,c=this.elem,f=this.to,g=this.interpolate(this.from,f,this.pos);g===e?this.finished||(this.finished=1,b.css(c,d,f)):(g+=this.unit,a(c,d)?b.attr(c,d,g,1):b.css(c,d,g))},cur:function(){var d=this.prop,c=this.elem;if(a(c,d))return b.attr(c,d,e,1);var f,d=b.css(c,d);return isNaN(f=parseFloat(d))?!d||"auto"===d?0:d:f}});h.Factories={};h.getFx=function(a){return new (h.Factories[a.prop]||h)(a)};return h},{requires:["dom"]});
KISSY.add("anim/manager",function(c){var b=c.stamp;return{interval:15,runnings:{},timer:null,start:function(e){var c=b(e);this.runnings[c]||(this.runnings[c]=e,this.startTimer())},stop:function(b){this.notRun(b)},notRun:function(e){delete this.runnings[b(e)];c.isEmptyObject(this.runnings)&&this.stopTimer()},pause:function(b){this.notRun(b)},resume:function(b){this.start(b)},startTimer:function(){var b=this;b.timer||(b.timer=setTimeout(function(){b.runFrames()?b.stopTimer():(b.timer=0,b.startTimer())},
b.interval))},stopTimer:function(){var b=this.timer;b&&(clearTimeout(b),this.timer=0)},runFrames:function(){var b=1,c=this.runnings,a;for(a in c)c.hasOwnProperty(a)&&(b=0,c[a]._frame());return b}}});
KISSY.add("anim/queue",function(c,b){function e(c,e,h){var e=e||d,p,k=b.data(c,a);!k&&!h&&b.data(c,a,k={});k&&(p=k[e],!p&&!h&&(p=k[e]=[]));return p}function h(f,e){var e=e||d,h=b.data(f,a);h&&delete h[e];c.isEmptyObject(h)&&b.removeData(f,a)}var a=c.guid("ks-queue-"+c.now()+"-"),d=c.guid("ks-queue-"+c.now()+"-"),k={queueCollectionKey:a,queue:function(a){var b=e(a.elem,a.config.queue);b.push(a);"..."!==b[0]&&k.dequeue(a);return b},remove:function(a){var b=e(a.elem,a.config.queue,1);b&&(a=c.indexOf(a,
b),-1<a&&b.splice(a,1))},removeQueues:function(c){b.removeData(c,a)},removeQueue:h,dequeue:function(a){var b=a.elem,a=a.config.queue,c=e(b,a,1),d=c&&c.shift();"..."==d&&(d=c.shift());d?(c.unshift("..."),d._runInternal()):h(b,a)}};return k},{requires:["dom"]});
