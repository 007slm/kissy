/*
Copyright 2011, KISSY UI Library v1.20dev
MIT Licensed
build time: Nov 10 21:46
*/
KISSY.add("anim/base",function(c,b,g,j,n,a,m,d){function h(f,i,e,o,q){if(f=b.get(f)){if(!(this instanceof h))return new h(f,i,e,o,q);i=c.isString(i)?c.unparam(i,";",":"):c.clone(i);for(var p in i){var w=l(c.trim(p));if(p!=w){i[w]=i[p];delete i[p]}}e=c.isPlainObject(e)?c.clone(e):{duration:parseFloat(e)||undefined,easing:o,complete:q};this.config=e=c.merge(L,e);e.duration*=1E3;this.elem=this.domEl=f;this.props=i;this._backupProps={};this._fxs={};this.on("complete",r)}}function r(){var f=this._backupProps,
i=this.config;c.isEmptyObject(f=this._backupProps)||b.css(this.elem,f);i.complete&&i.complete.call(this)}function s(){var f=this.config,i=this._backupProps,e=this.elem,o,q,p,w=f.specialEasing||{},M=this._fxs,t=this.props;y(this);if(this.fire("start")===false)this.stop(0);else{if(k(e)){o=b.css(e,"display")=="none";for(p in t){q=t[p];if(q=="hide"&&o||q=="show"&&!o){this.stop(1);return}}}c.each(t,function(E,u){if(t.hasOwnProperty(u)){var v;if(c.isArray(E)){v=w[u]=E[1];t[u]=E[0]}else v=w[u]=w[u]||f.easing;
if(c.isString(v))v=w[u]=j[v];w[u]=v||j.easeNone}});c.each(x,function(E,u){var v,H,K;if(K=t[u]){H={};c.each(E,function(J){H[J]=b.css(e,J);w[J]=w[u]});b.css(e,u,K);for(v in H){t[v]=b.css(e,v);b.css(e,v,H[v])}delete t[u]}});for(p in t)if(t.hasOwnProperty(p)){q=c.trim(t[p]);var z,B,F={elem:e,prop:p,duration:f.duration,easing:w[p]},D=m.getFx(F);if(c.inArray(q,A)){i[p]=b.style(e,p);if(q=="toggle")q=o?"show":"hide";if(q=="hide"){z=0;B=D.cur();i.display="none"}else{b.show(e);B=0;z=D.cur()}q=z}else{z=q;B=
D.cur()}q+="";var I="",G=q.match(N);if(G){z=parseFloat(G[2]);if((I=G[3])&&I!=="px"){b.css(e,p,q);B=z/D.cur()*B;b.css(e,p,B+I)}if(G[1])z=(G[1]==="-="?-1:1)*z+B}F.from=B;F.to=z;F.unit=I;D.load(F);M[p]=D}if(k(e)&&(t.width||t.height)){c.mix(i,{overflow:b.css(e,"overflow"),"overflow-x":b.css(e,"overflowX"),"overflow-y":b.css(e,"overflowY")});b.css(e,"overflow","hidden");if(b.css(e,"display")==="inline"&&b.css(e,"float")==="none")n.ie?b.css(e,"zoom",1):b.css(e,"display","inline-block")}a.start(this)}}function y(f){var i=
f.elem,e=b.data(i,C);e||b.data(i,C,e={});e[c.stamp(f)]=f}var l=b._camelCase,k=b._isElementNode,A=["hide","show","toggle"],x={border:["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth"],borderBottom:["borderBottomWidth"],borderLeft:["borderLeftWidth"],borderTop:["borderTopWidth"],borderRight:["borderRightWidth"],font:["fontSize","fontWeight"],margin:["marginBottom","marginLeft","marginRight","marginTop"],padding:["paddingBottom","paddingLeft","paddingRight","paddingTop"]},L=
{duration:1,easing:"easeNone"},N=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i;h.SHORT_HANDS=x;c.augment(h,g.Target,{isRunning:function(){var f;f=(f=b.data(this.elem,C))?!!f[c.stamp(this)]:0;return f},_runInternal:s,run:function(){this.config.queue===false?s.call(this):d.queue(this);return this},_frame:function(){var f,i=1,e=this._fxs;for(f in e)if(e.hasOwnProperty(f))i&=e[f].frame();if(this.fire("step")===false||i)this.stop(i)},stop:function(f){var i=this.config.queue,e,o=this._fxs;if(this.isRunning()){if(f){for(e in o)o.hasOwnProperty(e)&&
o[e].frame(1);this.fire("complete")}a.stop(this);f=this.elem;if(e=b.data(f,C)){delete e[c.stamp(this)];c.isEmptyObject(e)&&b.removeData(f,C)}i!==false&&d.dequeue(this);return this}else i!==false&&d.remove(this)}});var C=c.guid("ks-anim-unqueued-"+c.now()+"-");h.stop=function(f,i,e){e&&d.removeQueues(f);e=b.data(f,C);f=[];for(var o in e)f.push(e[o]);for(o=0;o<f.length;o++)f[o].stop(i)};h.stopQueue=function(f,i,e,o){o&&i!==false&&d.removeQueue(f,i);o=b.data(f,C);f=[];for(var q in o){var p=o[q];p.config.queue==
i&&f.push(p)}for(i=0;i<f.length;i++)f[i].stop(e)};h.isRunning=function(f){return(f=b.data(f,C))&&!c.isEmptyObject(f)};h.Q=d;return h},{requires:["dom","event","./easing","ua","./manager","./fx","./queue"]});
KISSY.add("anim/color",function(c,b,g,j){function n(l){l+="";var k;if(k=l.match(r))return[parseInt(k[1]),parseInt(k[2]),parseInt(k[3])];else if(k=l.match(s))return[parseInt(k[1]),parseInt(k[2]),parseInt(k[3]),parseInt(k[4])];else if(k=l.match(y)){for(l=1;l<k.length;l++)if(k[l].length<2)k[l]+=k[l];return[parseInt(k[1],m),parseInt(k[2],m),parseInt(k[3],m)]}if(h[l=l.toLowerCase()])return h[l];return[255,255,255]}function a(){a.superclass.constructor.apply(this,arguments)}var m=16,d=Math.floor,h={black:[0,
0,0],silver:[192,192,192],gray:[128,128,128],white:[255,255,255],maroon:[128,0,0],red:[255,0,0],purple:[128,0,128],fuchsia:[255,0,255],green:[0,128,0],lime:[0,255,0],olive:[128,128,0],yellow:[255,255,0],navy:[0,0,128],blue:[0,0,255],teal:[0,128,128],aqua:[0,255,255]},r=/^rgb\(([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\)$/i,s=/^rgba\(([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+),\s*([0-9]+)\)$/i,y=/^#?([0-9A-F]{1,2})([0-9A-F]{1,2})([0-9A-F]{1,2})$/i;b=g.SHORT_HANDS;b.background=["backgroundColor"];b.borderColor=
["borderBottomColor","borderLeftColor","borderRightColor","borderTopColor"];b.border.push("borderBottomColor","borderLeftColor","borderRightColor","borderTopColor");b.borderBottom.push("borderBottomColor");b.borderLeft.push("borderLeftColor");b.borderRight.push("borderRightColor");b.borderTop.push("borderTopColor");c.extend(a,j,{load:function(){a.superclass.load.apply(this,arguments);if(this.from)this.from=n(this.from);if(this.to)this.to=n(this.to)},interpolate:function(l,k,A){var x=a.superclass.interpolate;
if(l.length==3&&k.length==3)return"rgb("+[d(x(l[0],k[0],A)),d(x(l[1],k[1],A)),d(x(l[2],k[2],A))].join(", ")+")";else if(l.length==4||k.length==4)return"rgba("+[d(x(l[0],k[0],A)),d(x(l[1],k[1],A)),d(x(l[2],k[2],A)),d(x(l[3]||1,k[3]||1,A))].join(", ")+")"}});c.each(["backgroundColor","borderBottomColor","borderLeftColor","borderRightColor","borderTopColor","color","outlineColor"],function(l){j.Factories[l]=a});return a},{requires:["dom","./base","./fx"]});
KISSY.add("anim/easing",function(){var c=Math.PI,b=Math.pow,g=Math.sin,j=1.70158,n={swing:function(a){return-Math.cos(a*c)/2+0.5},easeNone:function(a){return a},easeIn:function(a){return a*a},easeOut:function(a){return(2-a)*a},easeBoth:function(a){return(a*=2)<1?0.5*a*a:0.5*(1- --a*(a-2))},easeInStrong:function(a){return a*a*a*a},easeOutStrong:function(a){return 1- --a*a*a*a},easeBothStrong:function(a){return(a*=2)<1?0.5*a*a*a*a:0.5*(2-(a-=2)*a*a*a)},elasticIn:function(a){if(a===0||a===1)return a;
return-(b(2,10*(a-=1))*g((a-0.075)*2*c/0.3))},elasticOut:function(a){if(a===0||a===1)return a;return b(2,-10*a)*g((a-0.075)*2*c/0.3)+1},elasticBoth:function(a){if(a===0||(a*=2)===2)return a;if(a<1)return-0.5*b(2,10*(a-=1))*g((a-0.1125)*2*c/0.45);return b(2,-10*(a-=1))*g((a-0.1125)*2*c/0.45)*0.5+1},backIn:function(a){if(a===1)a-=0.0010;return a*a*((j+1)*a-j)},backOut:function(a){return(a-=1)*a*((j+1)*a+j)+1},backBoth:function(a){if((a*=2)<1)return 0.5*a*a*(((j*=1.525)+1)*a-j);return 0.5*((a-=2)*a*
(((j*=1.525)+1)*a+j)+2)},bounceIn:function(a){return 1-n.bounceOut(1-a)},bounceOut:function(a){return a<1/2.75?7.5625*a*a:a<2/2.75?7.5625*(a-=1.5/2.75)*a+0.75:a<2.5/2.75?7.5625*(a-=2.25/2.75)*a+0.9375:7.5625*(a-=2.625/2.75)*a+0.984375},bounceBoth:function(a){if(a<0.5)return n.bounceIn(a*2)*0.5;return n.bounceOut(a*2-1)*0.5+0.5}};n.NativeTimeFunction={easeNone:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeBoth:"ease-in-out",easeInStrong:"cubic-bezier(0.9, 0.0, 0.9, 0.5)",easeOutStrong:"cubic-bezier(0.1, 0.5, 0.1, 1.0)",
easeBothStrong:"cubic-bezier(0.9, 0.0, 0.1, 1.0)"};return n});
KISSY.add("anim/fx",function(c,b,g){function j(a){this.load(a)}function n(a,m){if((!a.style||a.style[m]==null)&&b.attr(a,m,g,1)!=null)return 1;return 0}c.augment(j,{load:function(a){c.mix(this,a);this.startTime=c.now();this.pos=0;this.unit=this.unit||""},frame:function(a){var m=0,d=c.now();if(a||d>=this.duration+this.startTime)m=this.pos=1;else{a=d-this.startTime;this.pos=this.easing(a/this.duration)}this.update();return m},interpolate:function(a,m,d){return c.isNumber(a)&&c.isNumber(m)?(a+(m-a)*
d).toFixed(3):g},update:function(){var a=this.prop,m=this.elem,d=this.to,h=this.interpolate(this.from,d,this.pos);if(h===g){if(!this.finished){this.finished=1;b.css(m,a,d)}}else{h+=this.unit;n(m,a)?b.attr(m,a,h,1):b.css(m,a,h)}},cur:function(){var a=this.prop,m=this.elem;if(n(m,a))return b.attr(m,a,g,1);var d;a=b.css(m,a);return isNaN(d=parseFloat(a))?!a||a==="auto"?0:a:d}});j.Factories={};j.getFx=function(a){return new (j.Factories[a.prop]||j)(a)};return j},{requires:["dom"]});
KISSY.add("anim/manager",function(c){var b=c.stamp;return{interval:15,runnings:{},timer:null,start:function(g){var j=b(g);if(!this.runnings[j]){this.runnings[j]=g;this.startTimer()}},stop:function(g){this.notRun(g)},notRun:function(g){delete this.runnings[b(g)];c.isEmptyObject(this.runnings)&&this.stopTimer()},pause:function(g){this.notRun(g)},resume:function(g){this.start(g)},startTimer:function(){var g=this;if(!g.timer)g.timer=setTimeout(function(){if(g.runFrames())g.stopTimer();else{g.timer=0;
g.startTimer()}},g.interval)},stopTimer:function(){var g=this.timer;if(g){clearTimeout(g);this.timer=0}},runFrames:function(){var g=1,j=this.runnings,n;for(n in j)if(j.hasOwnProperty(n)){g=0;j[n]._frame()}return g}}});
KISSY.add("anim/queue",function(c,b){function g(d,h,r){h=h||a;var s,y=b.data(d,n);if(!y&&!r)b.data(d,n,y={});if(y){s=y[h];if(!s&&!r)s=y[h]=[]}return s}function j(d,h){h=h||a;var r=b.data(d,n);r&&delete r[h];c.isEmptyObject(r)&&b.removeData(d,n)}var n=c.guid("ks-queue-"+c.now()+"-"),a=c.guid("ks-queue-"+c.now()+"-"),m={queueCollectionKey:n,queue:function(d){var h=g(d.elem,d.config.queue);h.push(d);h[0]!=="..."&&m.dequeue(d);return h},remove:function(d){var h=g(d.elem,d.config.queue,1);if(h){d=c.indexOf(d,
h);d>-1&&h.splice(d,1)}},removeQueues:function(d){b.removeData(d,n)},removeQueue:j,dequeue:function(d){var h=d.elem;d=d.config.queue;var r=g(h,d,1),s=r&&r.shift();if(s=="...")s=r.shift();if(s){r.unshift("...");s._runInternal()}else j(h,d)}};return m},{requires:["dom"]});KISSY.add("anim",function(c,b,g){b.Easing=g;return b},{requires:["anim/base","anim/easing","anim/color"]});
