/*
Copyright 2013, KISSY UI Library v1.40dev
MIT Licensed
build time: Jan 7 01:53
*/
KISSY.add("anim",function(e,c,g){c.Easing=g;e.mix(e,{Anim:c,Easing:c.Easing});return c},{requires:["anim/base","anim/easing","anim/color"]});
KISSY.add("anim/base",function(e,c,g,l,k,b,i,f){function d(a,b,h,w,g){if(a.el)return h=a.el,b=a.props,delete a.el,delete a.props,new d(h,b,a);if(a=c.get(a)){if(!(this instanceof d))return new d(a,b,h,w,g);b="string"==typeof b?e.unparam(""+b,";",":"):e.clone(b);e.each(b,function(a,c){var r=e.trim(z(c));r?c!=r&&(b[r]=b[c],delete b[c]):delete b[c]});h=e.isPlainObject(h)?e.clone(h):{duration:parseFloat(h)||f,easing:w,complete:g};h=e.merge(p,h);h.el=a;h.props=b;this.config=h;this._duration=1E3*h.duration;
this.domEl=a;this._backupProps={};this._propsData={};this.on("complete",m)}}function m(a){var b,h,f=this.config;e.isEmptyObject(b=this._backupProps)||c.css(f.el,b);(h=f.complete)&&h.call(this,a)}function a(){var a=this.config,f=this._backupProps,h=a.el,d,g,j,q=this._propsData,i=a.props;u(this);if(!1===this.fire("beforeStart"))this.stop(0);else{if(h.nodeType==x.ELEMENT_NODE)for(j in g="none"===c.css(h,"display"),i)if(d=i[j],"hide"==d&&g||"show"==d&&!g){this.stop(1);return}if(h.nodeType==x.ELEMENT_NODE&&
(i.width||i.height))d=h.style,e.mix(f,{overflow:d.overflow,"overflow-x":d.overflowX,"overflow-y":d.overflowY}),d.overflow="hidden","inline"===c.css(h,"display")&&"none"===c.css(h,"float")&&(A.ie?d.zoom=1:d.display="inline-block");e.each(i,function(c,d){var b,h;e.isPlainObject(c)||(c={value:c});h=q[d]=e.mix({easing:a.easing,frame:a.frame},c);b=h.easing;"string"==typeof b&&(h.easing=l.toFn(b))});e.each(y,function(a,d){var b,r=q[d],f;r&&!r.fx&&(f=r.value,b={},e.each(a,function(a){b[a]=c.css(h,a)}),c.css(h,
d,f),e.each(b,function(a,d){d in q||(q[d]=e.merge(r,{value:c.css(h,d)}));c.css(h,d,a)}),delete q[d])});for(j in q)if(i=q[j],!i.fx){d=e.trim(i.value);var m,p,n={prop:j,anim:this,easing:i.easing},o=b.getFx(n);e.inArray(d,v)?(f[j]=c.style(h,j),"toggle"==d&&(d=g?"show":"hide"),"hide"==d?(m=0,p=o.cur(),f.display="none"):(p=0,m=o.cur(),c.css(h,j,p),c.show(h)),d=m):(m=d,p=o.cur());d+="";var s="",t=d.match(B);if(t){m=parseFloat(t[2]);if((s=t[3])&&"px"!==s)c.css(h,j,d),p*=m/o.cur(),c.css(h,j,p+s);t[1]&&(m=
("-="===t[1]?-1:1)*m+p)}p==m?delete q[j]:(n.from=p,n.to=m,n.unit=s,o.load(n),i.fx=o)}this._startTime=e.now();k.start(this)}}function u(a){var d=a.config.el,b=c.data(d,n);b||c.data(d,n,b={});b[e.stamp(a)]=a}function j(a){var d=a.config.el,b=c.data(d,n);b&&(delete b[e.stamp(a)],e.isEmptyObject(b)&&c.removeData(d,n))}function q(a){var d=a.config.el,b=c.data(d,o);b&&(delete b[e.stamp(a)],e.isEmptyObject(b)&&c.removeData(d,o))}function s(a,d,b){a=c.data(a,"resume"==b?o:n);a=e.merge(a);e.each(a,function(a){if(d===
f||a.config.queue==d)a[b]()})}function t(a,d,b,f){b&&!1!==f&&i.removeQueue(a,f);a=c.data(a,n);a=e.merge(a);e.each(a,function(a){a.config.queue==f&&a.stop(d)})}var A=e.UA,z=c._camelCase,x=c.NodeType,v=["hide","show","toggle"],y={background:["backgroundPosition","backgroundColor"],border:["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth"],borderBottom:["borderBottomWidth"],borderLeft:["borderLeftWidth"],borderTop:["borderTopWidth"],borderRight:["borderRightWidth"],font:["fontSize",
"fontWeight"],margin:["marginBottom","marginLeft","marginRight","marginTop"],padding:["paddingBottom","paddingLeft","paddingRight","paddingTop"]},p={duration:1,easing:"easeNone"},B=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i;d.SHORT_HANDS=y;d.prototype={constructor:d,isRunning:function(){var a=c.data(this.config.el,n);return a?!!a[e.stamp(this)]:0},isPaused:function(){var a=c.data(this.config.el,o);return a?!!a[e.stamp(this)]:0},pause:function(){if(this.isRunning()){this._pauseDiff=e.now()-this._startTime;
k.stop(this);j(this);var a=this.config.el,d=c.data(a,o);d||c.data(a,o,d={});d[e.stamp(this)]=this}return this},resume:function(){this.isPaused()&&(this._startTime=e.now()-this._pauseDiff,q(this),u(this),k.start(this));return this},_runInternal:a,run:function(){!1===this.config.queue?a.call(this):i.queue(this);return this},_frame:function(){var a,d=1,c,f,e,g,j=this._propsData;for(a in j)if(g=j[a],f=g.fx,!f.finished){e=b.getPos(this,g.easing);if(f.isNative){if(g.frame&&(c=g.frame(this,{prop:a,from:f.from,
to:f.to,pos:e}),!this.isRunning()))return;c&2&&(f.finished=1);c&1||f.frame(f.finished||e)}else if(f.finished=f.finished||1==e,f.frame(this,{prop:a,pos:e}),!this.isRunning())return;d&=f.finished}(!1===this.fire("step")||d)&&this.stop(d)},stop:function(a){var d=this.config.queue,b,c,f,e=this._propsData;if(!this.isRunning()&&!this.isPaused())return this;j(this);q(this);k.stop(this);if(a){for(b in e)f=e[b],a=f.fx,a.finished||(a.isNative?(f.frame&&(c=f.frame(this,{prop:b,from:a.from,to:a.to,pos:1})),c&
1||a.frame(1)):a.frame(this,{prop:b,pos:1}),a.finished=1);this.fire("complete")}!1!==d&&i.dequeue(this);this.fire("end");return this}};e.augment(d,g.Target);var n=e.guid("ks-anim-unqueued-"+e.now()+"-"),o=e.guid("ks-anim-paused-"+e.now()+"-");d.stop=function(a,d,b,g){if(null===g||"string"==typeof g||!1===g)return t.apply(f,arguments);b&&i.removeQueues(a);var j=c.data(a,n),j=e.merge(j);e.each(j,function(a){a.stop(d)});return f};e.each(["pause","resume"],function(a){d[a]=function(d,b){if(null===b||
"string"==typeof b||!1===b)return s(d,b,a);s(d,f,a);return f}});d.isRunning=function(a){return(a=c.data(a,n))&&!e.isEmptyObject(a)};d.isPaused=function(a){return(a=c.data(a,o))&&!e.isEmptyObject(a)};d.Q=i;d.PreventDefaultUpdate=1;d.StopToEnd=2;return d},{requires:"dom,event,./easing,./manager,./fx,./queue".split(",")});
KISSY.add("anim/color",function(e,c,g,l){function k(b){var b=b+"",f;if(f=b.match(m))return[parseInt(f[1]),parseInt(f[2]),parseInt(f[3])];if(f=b.match(a))return[parseInt(f[1]),parseInt(f[2]),parseInt(f[3]),parseInt(f[4])];if(f=b.match(u)){for(b=1;b<f.length;b++)2>f[b].length&&(f[b]+=f[b]);return[parseInt(f[1],i),parseInt(f[2],i),parseInt(f[3],i)]}return d[b=b.toLowerCase()]?d[b]:[255,255,255]}function b(){b.superclass.constructor.apply(this,arguments)}var i=16,f=Math.floor,d={black:[0,0,0],silver:[192,
192,192],gray:[128,128,128],white:[255,255,255],maroon:[128,0,0],red:[255,0,0],purple:[128,0,128],fuchsia:[255,0,255],green:[0,128,0],lime:[0,255,0],olive:[128,128,0],yellow:[255,255,0],navy:[0,0,128],blue:[0,0,255],teal:[0,128,128],aqua:[0,255,255]},m=/^rgb\(([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\)$/i,a=/^rgba\(([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+),\s*([0-9]+)\)$/i,u=/^#?([0-9A-F]{1,2})([0-9A-F]{1,2})([0-9A-F]{1,2})$/i,c=g.SHORT_HANDS;c.background=c.background||[];c.background.push("backgroundColor");
c.borderColor=["borderBottomColor","borderLeftColor","borderRightColor","borderTopColor"];c.border.push("borderBottomColor","borderLeftColor","borderRightColor","borderTopColor");c.borderBottom.push("borderBottomColor");c.borderLeft.push("borderLeftColor");c.borderRight.push("borderRightColor");c.borderTop.push("borderTopColor");e.extend(b,l,{load:function(){b.superclass.load.apply(this,arguments);this.from&&(this.from=k(this.from));this.to&&(this.to=k(this.to))},interpolate:function(a,d,c){var e=
b.superclass.interpolate;if(3==a.length&&3==d.length)return"rgb("+[f(e(a[0],d[0],c)),f(e(a[1],d[1],c)),f(e(a[2],d[2],c))].join(", ")+")";if(4==a.length||4==d.length)return"rgba("+[f(e(a[0],d[0],c)),f(e(a[1],d[1],c)),f(e(a[2],d[2],c)),f(e(a[3]||1,d[3]||1,c))].join(", ")+")"}});e.each("backgroundColor,borderBottomColor,borderLeftColor,borderRightColor,borderTopColor,color,outlineColor".split(","),function(a){l.Factories[a]=b});return b},{requires:["dom","./base","./fx"]});
KISSY.add("anim/easing",function(){function e(a){return a}function c(a,b,f,c){var e=3*a-3*f+1,g=3*f-6*a,i=3*a,l=3*b-3*c+1,k=3*c-6*b,v=3*b;return function(a){a:{for(var b=a,f,c,j=0;8>j;j++){c=((e*b+g)*b+i)*b-a;if(m(c)<d){a=b;break a}f=(3*e*b+2*g)*b+i;if(m(f)<d)break;b-=c/f}f=1;j=0;for(b=a;f>j;){c=((e*b+g)*b+i)*b-a;if(m(c)<d)break;0<c?f=b:j=b;b=(f+j)/2}a=b}return((l*a+k)*a+v)*a}}var g=Math.PI,l=Math.pow,k=Math.sin,b=parseFloat,i=/^cubic-bezier\(([^,]+),([^,]+),([^,]+),([^,]+)\)$/i,f={swing:function(a){return-Math.cos(a*
g)/2+0.5},easeNone:e,linear:e,easeIn:function(a){return a*a},ease:c(0.25,0.1,0.25,1),"ease-in":c(0.42,0,1,1),"ease-out":c(0,0,0.58,1),"ease-in-out":c(0.42,0,0.58,1),"ease-out-in":c(0,0.42,1,0.58),toFn:function(a){var d;return(d=a.match(i))?c(b(d[1]),b(d[2]),b(d[3]),b(d[4])):f[a]||e},easeOut:function(a){return(2-a)*a},easeBoth:function(a){return 1>(a*=2)?0.5*a*a:0.5*(1- --a*(a-2))},easeInStrong:function(a){return a*a*a*a},easeOutStrong:function(a){return 1- --a*a*a*a},easeBothStrong:function(a){return 1>
(a*=2)?0.5*a*a*a*a:0.5*(2-(a-=2)*a*a*a)},elasticIn:function(a){return 0===a||1===a?a:-(l(2,10*(a-=1))*k((a-0.075)*2*g/0.3))},elasticOut:function(a){return 0===a||1===a?a:l(2,-10*a)*k((a-0.075)*2*g/0.3)+1},elasticBoth:function(a){return 0===a||2===(a*=2)?a:1>a?-0.5*l(2,10*(a-=1))*k((a-0.1125)*2*g/0.45):0.5*l(2,-10*(a-=1))*k((a-0.1125)*2*g/0.45)+1},backIn:function(a){1===a&&(a-=0.0010);return a*a*(2.70158*a-1.70158)},backOut:function(a){return(a-=1)*a*(2.70158*a+1.70158)+1},backBoth:function(a){var b,
d=(b=2.5949095)+1;return 1>(a*=2)?0.5*a*a*(d*a-b):0.5*((a-=2)*a*(d*a+b)+2)},bounceIn:function(a){return 1-f.bounceOut(1-a)},bounceOut:function(a){return a<1/2.75?7.5625*a*a:a<2/2.75?7.5625*(a-=1.5/2.75)*a+0.75:a<2.5/2.75?7.5625*(a-=2.25/2.75)*a+0.9375:7.5625*(a-=2.625/2.75)*a+0.984375},bounceBoth:function(a){return 0.5>a?0.5*f.bounceIn(2*a):0.5*f.bounceOut(2*a-1)+0.5}},d=1.0E-6,m=Math.abs;return f});
KISSY.add("anim/fx",function(e,c,g){function l(b){this.load(b)}function k(b,e){return(!b.style||null==b.style[e])&&null!=c.attr(b,e,g,1)?1:0}l.prototype={isNative:1,constructor:l,load:function(b){e.mix(this,b);this.pos=0;this.unit=this.unit||""},frame:function(b){this.pos=b;this.update();this.finished=this.finished||1==b},interpolate:function(b,c,f){return e.isNumber(b)&&e.isNumber(c)?(b+(c-b)*f).toFixed(3):g},update:function(){var b=this.prop,e=this.anim.config.el,f=this.to,d=this.interpolate(this.from,
f,this.pos);d===g?this.finished||(this.finished=1,c.css(e,b,f)):(d+=this.unit,k(e,b)?c.attr(e,b,d,1):c.css(e,b,d))},cur:function(){var b=this.prop,e=this.anim.config.el;if(k(e,b))return c.attr(e,b,g,1);var f,b=c.css(e,b);return isNaN(f=parseFloat(b))?!b||"auto"===b?0:b:f}};l.Factories={};l.getPos=function(b,c){var f=e.now(),d=b._startTime,g=b._duration;return f>=g+d?1:c((f-d)/g)};l.getFx=function(b){return new (l.Factories[b.prop]||l)(b)};return l},{requires:["dom"]});
KISSY.add("anim/manager",function(e){var c=e.stamp;return{interval:15,runnings:{},timer:null,start:function(e){var l=c(e);this.runnings[l]||(this.runnings[l]=e,this.startTimer())},stop:function(c){this.notRun(c)},notRun:function(g){delete this.runnings[c(g)];e.isEmptyObject(this.runnings)&&this.stopTimer()},pause:function(c){this.notRun(c)},resume:function(c){this.start(c)},startTimer:function(){var c=this;c.timer||(c.timer=setTimeout(function(){c.runFrames()?c.stopTimer():(c.timer=0,c.startTimer())},
c.interval))},stopTimer:function(){var c=this.timer;c&&(clearTimeout(c),this.timer=0)},runFrames:function(){var c=1,e,k=this.runnings;for(e in k)c=0,k[e]._frame();return c}}});
KISSY.add("anim/queue",function(e,c){function g(f,d,e){var d=d||b,a,g=c.data(f,k);!g&&!e&&c.data(f,k,g={});g&&(a=g[d],!a&&!e&&(a=g[d]=[]));return a}function l(f,d){var d=d||b,g=c.data(f,k);g&&delete g[d];e.isEmptyObject(g)&&c.removeData(f,k)}var k=e.guid("ks-queue-"+e.now()+"-"),b=e.guid("ks-queue-"+e.now()+"-"),i={queueCollectionKey:k,queue:function(b){var d=g(b.config.el,b.config.queue);d.push(b);"..."!==d[0]&&i.dequeue(b);return d},remove:function(b){var d=g(b.config.el,b.config.queue,1);d&&(b=
e.indexOf(b,d),-1<b&&d.splice(b,1))},removeQueues:function(b){c.removeData(b,k)},removeQueue:l,dequeue:function(b){var d=b.config.el,b=b.config.queue,c=g(d,b,1),a=c&&c.shift();"..."==a&&(a=c.shift());a?(c.unshift("..."),a._runInternal()):l(d,b)}};return i},{requires:["dom"]});
