/*
Copyright 2013, KISSY UI Library v1.40dev
MIT Licensed
build time: Jan 5 15:42
*/
KISSY.add("anim",function(d,b,g){b.Easing=g;d.mix(d,{Anim:b,Easing:b.Easing});return b},{requires:["anim/base","anim/easing","anim/color","anim/background-position"]});
KISSY.add("anim/background-position",function(d,b,g,k){function j(b){b=b.replace(/left|top/g,"0px").replace(/right|bottom/g,"100%").replace(/([0-9\.]+)(\s|\)|$)/g,"$1px$2");b=b.match(/(-?[0-9\.]+)(px|%|em|pt)\s(-?[0-9\.]+)(px|%|em|pt)/);return[parseFloat(b[1]),b[2],parseFloat(b[3]),b[4]]}function e(){e.superclass.constructor.apply(this,arguments)}d.extend(e,k,{load:function(){e.superclass.load.apply(this,arguments);this.unit=["px","px"];if(this.from){var b=j(this.from);this.from=[b[0],b[2]]}else this.from=
[0,0];this.to?(b=j(this.to),this.to=[b[0],b[2]],this.unit=[b[1],b[3]]):this.to=[0,0]},interpolate:function(b,d,c){var g=this.unit,a=e.superclass.interpolate;return a(b[0],d[0],c)+g[0]+" "+a(b[1],d[1],c)+g[1]},cur:function(){return b.css(this.anim.config.el,"backgroundPosition")},update:function(){var d=this.prop,f=this.anim.config.el,c=this.interpolate(this.from,this.to,this.pos);b.css(f,d,c)}});return k.Factories.backgroundPosition=e},{requires:["dom","./base","./fx"]});
KISSY.add("anim/base",function(d,b,g,k,j,e,h,f){function c(a,e,i,g,h){if(a.el)return i=a.el,e=a.props,delete a.el,delete a.props,new c(i,e,a);if(a=b.get(a)){if(!(this instanceof c))return new c(a,e,i,g,h);e="string"==typeof e?d.unparam(""+e,";",":"):d.clone(e);d.each(e,function(a,b){var w=d.trim(s(b));w?b!=w&&(e[w]=e[b],delete e[b]):delete e[b]});i=d.isPlainObject(i)?d.clone(i):{duration:parseFloat(i)||f,easing:g,complete:h};i=d.merge(q,i);i.el=a;i.props=e;this.config=i;this._duration=1E3*i.duration;
this.domEl=a;this._backupProps={};this._fxs={};this.on("complete",l)}}function l(a){var e,i,f=this.config;d.isEmptyObject(e=this._backupProps)||b.css(f.el,e);(i=f.complete)&&i.call(this,a)}function a(){var a=this.config,f=this._backupProps,i=a.el,c,g,h,o=a.specialEasing||{},v=this._fxs,l=a.props;p(this);if(!1===this.fire("beforeStart"))this.stop(0);else{if(i.nodeType==x.ELEMENT_NODE)for(h in g="none"===b.css(i,"display"),l)if(c=l[h],"hide"==c&&g||"show"==c&&!g){this.stop(1);return}if(i.nodeType==
x.ELEMENT_NODE&&(l.width||l.height))c=i.style,d.mix(f,{overflow:c.overflow,"overflow-x":c.overflowX,"overflow-y":c.overflowY}),c.overflow="hidden","inline"===b.css(i,"display")&&"none"===b.css(i,"float")&&(y.ie?c.zoom=1:c.display="inline-block");d.each(l,function(b,c){var e;d.isArray(b)?(e=o[c]=b[1],l[c]=b[0]):e=o[c]=o[c]||a.easing;"string"==typeof e&&(o[c]=k.toFn(e))});d.each(u,function(a,c){var e,f;if(f=l[c])e={},d.each(a,function(a){e[a]=b.css(i,a);o[a]=o[c]}),b.css(i,c,f),d.each(e,function(a,
c){l[c]=b.css(i,c);b.css(i,c,a)}),delete l[c]});for(h in l){c=d.trim(l[h]);var m,n,r={prop:h,anim:this,easing:o[h]},q=e.getFx(r);d.inArray(c,z)?(f[h]=b.style(i,h),"toggle"==c&&(c=g?"show":"hide"),"hide"==c?(m=0,n=q.cur(),f.display="none"):(n=0,m=q.cur(),b.css(i,h,n),b.show(i)),c=m):(m=c,n=q.cur());c+="";var s="",t=c.match(A);if(t){m=parseFloat(t[2]);if((s=t[3])&&"px"!==s)b.css(i,h,c),n*=m/q.cur(),b.css(i,h,n+s);t[1]&&(m=("-="===t[1]?-1:1)*m+n)}r.from=n;r.to=m;r.unit=s;q.load(r);v[h]=q}this._startTime=
d.now();j.start(this)}}function p(a){var c=a.config.el,e=b.data(c,m);e||b.data(c,m,e={});e[d.stamp(a)]=a}function o(a){var c=a.config.el,e=b.data(c,m);e&&(delete e[d.stamp(a)],d.isEmptyObject(e)&&b.removeData(c,m))}function v(a,c,e){a=b.data(a,"resume"==e?n:m);a=d.merge(a);d.each(a,function(a){if(c===f||a.config.queue==c)a[e]()})}function r(a,c,e,f){e&&!1!==f&&h.removeQueue(a,f);a=b.data(a,m);a=d.merge(a);d.each(a,function(a){a.config.queue==f&&a.stop(c)})}var y=d.UA,s=b._camelCase,x=b.NodeType,z=
["hide","show","toggle"],u={background:["backgroundPosition"],border:["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth"],borderBottom:["borderBottomWidth"],borderLeft:["borderLeftWidth"],borderTop:["borderTopWidth"],borderRight:["borderRightWidth"],font:["fontSize","fontWeight"],margin:["marginBottom","marginLeft","marginRight","marginTop"],padding:["paddingBottom","paddingLeft","paddingRight","paddingTop"]},q={duration:1,easing:"easeNone"},A=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i;
c.SHORT_HANDS=u;c.prototype={constructor:c,isRunning:function(){var a=b.data(this.config.el,m);return a?!!a[d.stamp(this)]:0},isPaused:function(){var a=b.data(this.config.el,n);return a?!!a[d.stamp(this)]:0},pause:function(){if(this.isRunning()){this._pauseDiff=d.now()-this._startTime;j.stop(this);o(this);var a=this.config.el,c=b.data(a,n);c||b.data(a,n,c={});c[d.stamp(this)]=this}return this},resume:function(){if(this.isPaused()){this._startTime=d.now()-this._pauseDiff;var a=this.config.el,c=b.data(a,
n);c&&(delete c[d.stamp(this)],d.isEmptyObject(c)&&b.removeData(a,n));p(this);j.start(this)}return this},_runInternal:a,run:function(){!1===this.config.queue?a.call(this):h.queue(this);return this},_frame:function(){var a,c=this.config,b=1,e,d,f=this._fxs;for(a in f)if(!(d=f[a]).finished)c.frame&&(e=c.frame(d)),1==e||0==e?(d.finished=e,b&=e):(b&=d.frame())&&c.frame&&c.frame(d);(!1===this.fire("step")||b)&&this.stop(b)},stop:function(a){var c=this.config,b=c.queue,e,d=this._fxs;if(!this.isRunning())return!1!==
b&&h.remove(this),this;if(a){for(e in d)if(!(a=d[e]).finished)c.frame?c.frame(a,1):a.frame(1);this.fire("complete")}j.stop(this);o(this);!1!==b&&h.dequeue(this);return this}};d.augment(c,g.Target);var m=d.guid("ks-anim-unqueued-"+d.now()+"-"),n=d.guid("ks-anim-paused-"+d.now()+"-");c.stop=function(a,c,e,g){if(null===g||"string"==typeof g||!1===g)return r.apply(f,arguments);e&&h.removeQueues(a);var o=b.data(a,m),o=d.merge(o);d.each(o,function(a){a.stop(c)});return f};d.each(["pause","resume"],function(a){c[a]=
function(c,b){if(null===b||"string"==typeof b||!1===b)return v(c,b,a);v(c,f,a);return f}});c.isRunning=function(a){return(a=b.data(a,m))&&!d.isEmptyObject(a)};c.isPaused=function(a){return(a=b.data(a,n))&&!d.isEmptyObject(a)};c.Q=h;return c},{requires:"dom,event,./easing,./manager,./fx,./queue".split(",")});
KISSY.add("anim/color",function(d,b,g,k){function j(b){var b=b+"",e;if(e=b.match(l))return[parseInt(e[1]),parseInt(e[2]),parseInt(e[3])];if(e=b.match(a))return[parseInt(e[1]),parseInt(e[2]),parseInt(e[3]),parseInt(e[4])];if(e=b.match(p)){for(b=1;b<e.length;b++)2>e[b].length&&(e[b]+=e[b]);return[parseInt(e[1],h),parseInt(e[2],h),parseInt(e[3],h)]}return c[b=b.toLowerCase()]?c[b]:[255,255,255]}function e(){e.superclass.constructor.apply(this,arguments)}var h=16,f=Math.floor,c={black:[0,0,0],silver:[192,
192,192],gray:[128,128,128],white:[255,255,255],maroon:[128,0,0],red:[255,0,0],purple:[128,0,128],fuchsia:[255,0,255],green:[0,128,0],lime:[0,255,0],olive:[128,128,0],yellow:[255,255,0],navy:[0,0,128],blue:[0,0,255],teal:[0,128,128],aqua:[0,255,255]},l=/^rgb\(([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\)$/i,a=/^rgba\(([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+),\s*([0-9]+)\)$/i,p=/^#?([0-9A-F]{1,2})([0-9A-F]{1,2})([0-9A-F]{1,2})$/i,b=g.SHORT_HANDS;b.background=b.background||[];b.background.push("backgroundColor");
b.borderColor=["borderBottomColor","borderLeftColor","borderRightColor","borderTopColor"];b.border.push("borderBottomColor","borderLeftColor","borderRightColor","borderTopColor");b.borderBottom.push("borderBottomColor");b.borderLeft.push("borderLeftColor");b.borderRight.push("borderRightColor");b.borderTop.push("borderTopColor");d.extend(e,k,{load:function(){e.superclass.load.apply(this,arguments);this.from&&(this.from=j(this.from));this.to&&(this.to=j(this.to))},interpolate:function(a,b,c){var d=
e.superclass.interpolate;if(3==a.length&&3==b.length)return"rgb("+[f(d(a[0],b[0],c)),f(d(a[1],b[1],c)),f(d(a[2],b[2],c))].join(", ")+")";if(4==a.length||4==b.length)return"rgba("+[f(d(a[0],b[0],c)),f(d(a[1],b[1],c)),f(d(a[2],b[2],c)),f(d(a[3]||1,b[3]||1,c))].join(", ")+")"}});d.each("backgroundColor,borderBottomColor,borderLeftColor,borderRightColor,borderTopColor,color,outlineColor".split(","),function(a){k.Factories[a]=e});return e},{requires:["dom","./base","./fx"]});
KISSY.add("anim/easing",function(){function d(a){return a}function b(a,b,e,d){var f=3*a-3*e+1,g=3*e-6*a,h=3*a,k=3*b-3*d+1,j=3*d-6*b,u=3*b;return function(a){a:{for(var b=a,e,d,p=0;8>p;p++){d=((f*b+g)*b+h)*b-a;if(l(d)<c){a=b;break a}e=(3*f*b+2*g)*b+h;if(l(e)<c)break;b-=d/e}e=1;p=0;for(b=a;e>p;){d=((f*b+g)*b+h)*b-a;if(l(d)<c)break;0<d?e=b:p=b;b=(e+p)/2}a=b}return((k*a+j)*a+u)*a}}var g=Math.PI,k=Math.pow,j=Math.sin,e=parseFloat,h=/^cubic-bezier\(([^,]+),([^,]+),([^,]+),([^,]+)\)$/i,f={swing:function(a){return-Math.cos(a*
g)/2+0.5},easeNone:d,linear:d,easeIn:function(a){return a*a},ease:b(0.25,0.1,0.25,1),"ease-in":b(0.42,0,1,1),"ease-out":b(0,0,0.58,1),"ease-in-out":b(0.42,0,0.58,1),"ease-out-in":b(0,0.42,1,0.58),toFn:function(a){var c;return(c=a.match(h))?b(e(c[1]),e(c[2]),e(c[3]),e(c[4])):f[a]||d},easeOut:function(a){return(2-a)*a},easeBoth:function(a){return 1>(a*=2)?0.5*a*a:0.5*(1- --a*(a-2))},easeInStrong:function(a){return a*a*a*a},easeOutStrong:function(a){return 1- --a*a*a*a},easeBothStrong:function(a){return 1>
(a*=2)?0.5*a*a*a*a:0.5*(2-(a-=2)*a*a*a)},elasticIn:function(a){return 0===a||1===a?a:-(k(2,10*(a-=1))*j((a-0.075)*2*g/0.3))},elasticOut:function(a){return 0===a||1===a?a:k(2,-10*a)*j((a-0.075)*2*g/0.3)+1},elasticBoth:function(a){return 0===a||2===(a*=2)?a:1>a?-0.5*k(2,10*(a-=1))*j((a-0.1125)*2*g/0.45):0.5*k(2,-10*(a-=1))*j((a-0.1125)*2*g/0.45)+1},backIn:function(a){1===a&&(a-=0.0010);return a*a*(2.70158*a-1.70158)},backOut:function(a){return(a-=1)*a*(2.70158*a+1.70158)+1},backBoth:function(a){var b,
c=(b=2.5949095)+1;return 1>(a*=2)?0.5*a*a*(c*a-b):0.5*((a-=2)*a*(c*a+b)+2)},bounceIn:function(a){return 1-f.bounceOut(1-a)},bounceOut:function(a){return a<1/2.75?7.5625*a*a:a<2/2.75?7.5625*(a-=1.5/2.75)*a+0.75:a<2.5/2.75?7.5625*(a-=2.25/2.75)*a+0.9375:7.5625*(a-=2.625/2.75)*a+0.984375},bounceBoth:function(a){return 0.5>a?0.5*f.bounceIn(2*a):0.5*f.bounceOut(2*a-1)+0.5}},c=1.0E-6,l=Math.abs;return f});
KISSY.add("anim/fx",function(d,b,g){function k(b){this.load(b)}function j(e,d){return(!e.style||null==e.style[d])&&null!=b.attr(e,d,g,1)?1:0}k.prototype={constructor:k,load:function(b){d.mix(this,b);this.pos=0;this.unit=this.unit||""},frame:function(b){var g=this.anim,f=0;if(this.finished)return 1;var c=d.now(),l=g._startTime,g=g._duration;b||c>=g+l?f=this.pos=1:this.pos=this.easing((c-l)/g);this.update();this.finished=this.finished||f;return f},interpolate:function(b,h,f){return d.isNumber(b)&&d.isNumber(h)?
(b+(h-b)*f).toFixed(3):g},update:function(){var e=this.prop,d=this.anim.config.el,f=this.to,c=this.interpolate(this.from,f,this.pos);c===g?this.finished||(this.finished=1,b.css(d,e,f)):(c+=this.unit,j(d,e)?b.attr(d,e,c,1):b.css(d,e,c))},cur:function(){var e=this.prop,d=this.anim.config.el;if(j(d,e))return b.attr(d,e,g,1);var f,e=b.css(d,e);return isNaN(f=parseFloat(e))?!e||"auto"===e?0:e:f}};k.Factories={};k.getFx=function(b){return new (k.Factories[b.prop]||k)(b)};return k},{requires:["dom"]});
KISSY.add("anim/manager",function(d){var b=d.stamp;return{interval:15,runnings:{},timer:null,start:function(d){var k=b(d);this.runnings[k]||(this.runnings[k]=d,this.startTimer())},stop:function(b){this.notRun(b)},notRun:function(g){delete this.runnings[b(g)];d.isEmptyObject(this.runnings)&&this.stopTimer()},pause:function(b){this.notRun(b)},resume:function(b){this.start(b)},startTimer:function(){var b=this;b.timer||(b.timer=setTimeout(function(){b.runFrames()?b.stopTimer():(b.timer=0,b.startTimer())},
b.interval))},stopTimer:function(){var b=this.timer;b&&(clearTimeout(b),this.timer=0)},runFrames:function(){var b=1,d,j=this.runnings;for(d in j)b=0,j[d]._frame();return b}}});
KISSY.add("anim/queue",function(d,b){function g(d,c,g){var c=c||e,a,h=b.data(d,j);!h&&!g&&b.data(d,j,h={});h&&(a=h[c],!a&&!g&&(a=h[c]=[]));return a}function k(f,c){var c=c||e,g=b.data(f,j);g&&delete g[c];d.isEmptyObject(g)&&b.removeData(f,j)}var j=d.guid("ks-queue-"+d.now()+"-"),e=d.guid("ks-queue-"+d.now()+"-"),h={queueCollectionKey:j,queue:function(b){var c=g(b.config.el,b.config.queue);c.push(b);"..."!==c[0]&&h.dequeue(b);return c},remove:function(b){var c=g(b.config.el,b.config.queue,1);c&&(b=
d.indexOf(b,c),-1<b&&c.splice(b,1))},removeQueues:function(d){b.removeData(d,j)},removeQueue:k,dequeue:function(b){var c=b.config.el,b=b.config.queue,d=g(c,b,1),a=d&&d.shift();"..."==a&&(a=d.shift());a?(d.unshift("..."),a._runInternal()):k(c,b)}};return h},{requires:["dom"]});
