/*
Copyright 2011, KISSY UI Library v1.30dev
MIT Licensed
build time: Dec 21 10:33
*/
KISSY.add("anim/base",function(d,b,f,i,p,a,m,e){function h(g,j,c,o,l){if(g=b.get(g)){if(!(this instanceof h))return new h(g,j,c,o,l);j=d.isString(j)?d.unparam(j,";",":"):d.clone(j);for(var q in j){var w=k(d.trim(q));if(q!=w){j[w]=j[q];delete j[q]}}c=d.isPlainObject(c)?d.clone(c):{duration:parseFloat(c)||undefined,easing:o,complete:l};this.config=c=d.merge(M,c);c.duration*=1E3;this.elem=this.domEl=g;this.props=j;this._backupProps={};this._fxs={};this.on("complete",r)}}function r(g){var j,c=this.config;
d.isEmptyObject(j=this._backupProps)||b.css(this.elem,j);c.complete&&c.complete.call(this,g)}function s(){var g=this.config,j=this._backupProps,c=this.elem,o,l,q,w=g.specialEasing||{},N=this._fxs,t=this.props;y(this);if(this.fire("start")===false)this.stop(0);else{if(x(c)){o=b.css(c,"display")=="none";for(q in t){l=t[q];if(l=="hide"&&o||l=="show"&&!o){this.stop(1);return}}}d.each(t,function(E,u){if(t.hasOwnProperty(u)){var v;if(d.isArray(E)){v=w[u]=E[1];t[u]=E[0]}else v=w[u]=w[u]||g.easing;if(d.isString(v))v=
w[u]=i[v];w[u]=v||i.easeNone}});d.each(K,function(E,u){var v,H,L;if(L=t[u]){H={};d.each(E,function(J){H[J]=b.css(c,J);w[J]=w[u]});b.css(c,u,L);for(v in H){t[v]=b.css(c,v);b.css(c,v,H[v])}delete t[u]}});for(q in t)if(t.hasOwnProperty(q)){l=d.trim(t[q]);var z,A,F={elem:c,prop:q,duration:g.duration,easing:w[q]},D=m.getFx(F);if(d.inArray(l,B)){j[q]=b.style(c,q);if(l=="toggle")l=o?"show":"hide";if(l=="hide"){z=0;A=D.cur();j.display="none"}else{A=0;z=D.cur();b.css(c,q,A);b.show(c)}l=z}else{z=l;A=D.cur()}l+=
"";var I="",G=l.match(O);if(G){z=parseFloat(G[2]);if((I=G[3])&&I!=="px"){b.css(c,q,l);A=z/D.cur()*A;b.css(c,q,A+I)}if(G[1])z=(G[1]==="-="?-1:1)*z+A}F.from=A;F.to=z;F.unit=I;D.load(F);N[q]=D}if(x(c)&&(t.width||t.height)){d.mix(j,{overflow:b.style(c,"overflow"),"overflow-x":b.style(c,"overflowX"),"overflow-y":b.style(c,"overflowY")});b.css(c,"overflow","hidden");if(b.css(c,"display")==="inline"&&b.css(c,"float")==="none")p.ie?b.css(c,"zoom",1):b.css(c,"display","inline-block")}a.start(this)}}function y(g){var j=
g.elem,c=b.data(j,C);c||b.data(j,C,c={});c[d.stamp(g)]=g}function n(g,j,c,o){c&&o!==false&&e.removeQueue(g,o);g=b.data(g,C);g=d.merge(g);for(var l in g){c=g[l];c.config.queue==o&&c.stop(j)}}var k=b._camelCase,x=b._isElementNode,B=["hide","show","toggle"],K={backgroundPosition:["backgroundPositionX","backgroundPositionY"],background:["backgroundPositionX","backgroundPositionY"],border:["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth"],borderBottom:["borderBottomWidth"],borderLeft:["borderLeftWidth"],
borderTop:["borderTopWidth"],borderRight:["borderRightWidth"],font:["fontSize","fontWeight"],margin:["marginBottom","marginLeft","marginRight","marginTop"],padding:["paddingBottom","paddingLeft","paddingRight","paddingTop"]},M={duration:1,easing:"easeNone"},O=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i;h.SHORT_HANDS=K;d.augment(h,f.Target,{isRunning:function(){var g;g=(g=b.data(this.elem,C))?!!g[d.stamp(this)]:0;return g},_runInternal:s,run:function(){this.config.queue===false?s.call(this):e.queue(this);return this},
_frame:function(){var g,j=this.config,c=1,o,l,q=this._fxs;for(g in q)if(q.hasOwnProperty(g)&&!(l=q[g]).finished){if(j.frame)o=j.frame(l);if(o==1||o==0){l.finished=o;c&=o}else c&=l.frame()}if(this.fire("step")===false||c)this.stop(c)},stop:function(g){var j=this.config.queue,c,o=this._fxs;if(this.isRunning()){if(g){for(c in o)o.hasOwnProperty(c)&&o[c].frame(1);this.fire("complete")}a.stop(this);g=this.elem;if(c=b.data(g,C)){delete c[d.stamp(this)];d.isEmptyObject(c)&&b.removeData(g,C)}j!==false&&e.dequeue(this);
return this}else j!==false&&e.remove(this)}});var C=d.guid("ks-anim-unqueued-"+d.now()+"-");h.stop=function(g,j,c,o){if(o===null||d.isString(o)||o===false)return n.apply(undefined,arguments);c&&e.removeQueues(g);var l=b.data(g,C);l=d.merge(l);for(var q in l)l[q].stop(j)};h.isRunning=function(g){return(g=b.data(g,C))&&!d.isEmptyObject(g)};h.Q=e;return h},{requires:["dom","event","./easing","ua","./manager","./fx","./queue"]});
KISSY.add("anim/color",function(d,b,f,i){function p(n){n+="";var k;if(k=n.match(r))return[parseInt(k[1]),parseInt(k[2]),parseInt(k[3])];else if(k=n.match(s))return[parseInt(k[1]),parseInt(k[2]),parseInt(k[3]),parseInt(k[4])];else if(k=n.match(y)){for(n=1;n<k.length;n++)if(k[n].length<2)k[n]+=k[n];return[parseInt(k[1],m),parseInt(k[2],m),parseInt(k[3],m)]}if(h[n=n.toLowerCase()])return h[n];return[255,255,255]}function a(){a.superclass.constructor.apply(this,arguments)}var m=16,e=Math.floor,h={black:[0,
0,0],silver:[192,192,192],gray:[128,128,128],white:[255,255,255],maroon:[128,0,0],red:[255,0,0],purple:[128,0,128],fuchsia:[255,0,255],green:[0,128,0],lime:[0,255,0],olive:[128,128,0],yellow:[255,255,0],navy:[0,0,128],blue:[0,0,255],teal:[0,128,128],aqua:[0,255,255]},r=/^rgb\(([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\)$/i,s=/^rgba\(([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+),\s*([0-9]+)\)$/i,y=/^#?([0-9A-F]{1,2})([0-9A-F]{1,2})([0-9A-F]{1,2})$/i;b=f.SHORT_HANDS;b.background=b.background||[];b.background.push("backgroundColor");
b.borderColor=["borderBottomColor","borderLeftColor","borderRightColor","borderTopColor"];b.border.push("borderBottomColor","borderLeftColor","borderRightColor","borderTopColor");b.borderBottom.push("borderBottomColor");b.borderLeft.push("borderLeftColor");b.borderRight.push("borderRightColor");b.borderTop.push("borderTopColor");d.extend(a,i,{load:function(){a.superclass.load.apply(this,arguments);if(this.from)this.from=p(this.from);if(this.to)this.to=p(this.to)},interpolate:function(n,k,x){var B=
a.superclass.interpolate;if(n.length==3&&k.length==3)return"rgb("+[e(B(n[0],k[0],x)),e(B(n[1],k[1],x)),e(B(n[2],k[2],x))].join(", ")+")";else if(n.length==4||k.length==4)return"rgba("+[e(B(n[0],k[0],x)),e(B(n[1],k[1],x)),e(B(n[2],k[2],x)),e(B(n[3]||1,k[3]||1,x))].join(", ")+")"}});d.each(["backgroundColor","borderBottomColor","borderLeftColor","borderRightColor","borderTopColor","color","outlineColor"],function(n){i.Factories[n]=a});return a},{requires:["dom","./base","./fx"]});
KISSY.add("anim/easing",function(){var d=Math.PI,b=Math.pow,f=Math.sin,i=1.70158,p={swing:function(a){return-Math.cos(a*d)/2+0.5},easeNone:function(a){return a},easeIn:function(a){return a*a},easeOut:function(a){return(2-a)*a},easeBoth:function(a){return(a*=2)<1?0.5*a*a:0.5*(1- --a*(a-2))},easeInStrong:function(a){return a*a*a*a},easeOutStrong:function(a){return 1- --a*a*a*a},easeBothStrong:function(a){return(a*=2)<1?0.5*a*a*a*a:0.5*(2-(a-=2)*a*a*a)},elasticIn:function(a){if(a===0||a===1)return a;
return-(b(2,10*(a-=1))*f((a-0.075)*2*d/0.3))},elasticOut:function(a){if(a===0||a===1)return a;return b(2,-10*a)*f((a-0.075)*2*d/0.3)+1},elasticBoth:function(a){if(a===0||(a*=2)===2)return a;if(a<1)return-0.5*b(2,10*(a-=1))*f((a-0.1125)*2*d/0.45);return b(2,-10*(a-=1))*f((a-0.1125)*2*d/0.45)*0.5+1},backIn:function(a){if(a===1)a-=0.0010;return a*a*((i+1)*a-i)},backOut:function(a){return(a-=1)*a*((i+1)*a+i)+1},backBoth:function(a){if((a*=2)<1)return 0.5*a*a*(((i*=1.525)+1)*a-i);return 0.5*((a-=2)*a*
(((i*=1.525)+1)*a+i)+2)},bounceIn:function(a){return 1-p.bounceOut(1-a)},bounceOut:function(a){return a<1/2.75?7.5625*a*a:a<2/2.75?7.5625*(a-=1.5/2.75)*a+0.75:a<2.5/2.75?7.5625*(a-=2.25/2.75)*a+0.9375:7.5625*(a-=2.625/2.75)*a+0.984375},bounceBoth:function(a){if(a<0.5)return p.bounceIn(a*2)*0.5;return p.bounceOut(a*2-1)*0.5+0.5}};p.NativeTimeFunction={easeNone:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeBoth:"ease-in-out",easeInStrong:"cubic-bezier(0.9, 0.0, 0.9, 0.5)",easeOutStrong:"cubic-bezier(0.1, 0.5, 0.1, 1.0)",
easeBothStrong:"cubic-bezier(0.9, 0.0, 0.1, 1.0)"};return p});
KISSY.add("anim/fx",function(d,b,f){function i(a){this.load(a)}function p(a,m){if((!a.style||a.style[m]==null)&&b.attr(a,m,f,1)!=null)return 1;return 0}d.augment(i,{load:function(a){d.mix(this,a);this.startTime=d.now();this.pos=0;this.unit=this.unit||""},frame:function(a){var m=0;if(this.finished)return 1;var e=d.now();if(a||e>=this.duration+this.startTime)m=this.pos=1;else{a=e-this.startTime;this.pos=this.easing(a/this.duration)}this.update();this.finished=this.finished||m;return m},interpolate:function(a,
m,e){return d.isNumber(a)&&d.isNumber(m)?(a+(m-a)*e).toFixed(3):f},update:function(){var a=this.prop,m=this.elem,e=this.to,h=this.interpolate(this.from,e,this.pos);if(h===f){if(!this.finished){this.finished=1;b.css(m,a,e)}}else{h+=this.unit;p(m,a)?b.attr(m,a,h,1):b.css(m,a,h)}},cur:function(){var a=this.prop,m=this.elem;if(p(m,a))return b.attr(m,a,f,1);var e;a=b.css(m,a);return isNaN(e=parseFloat(a))?!a||a==="auto"?0:a:e}});i.Factories={};i.getFx=function(a){return new (i.Factories[a.prop]||i)(a)};
return i},{requires:["dom"]});
KISSY.add("anim/manager",function(d){var b=d.stamp;return{interval:15,runnings:{},timer:null,start:function(f){var i=b(f);if(!this.runnings[i]){this.runnings[i]=f;this.startTimer()}},stop:function(f){this.notRun(f)},notRun:function(f){delete this.runnings[b(f)];d.isEmptyObject(this.runnings)&&this.stopTimer()},pause:function(f){this.notRun(f)},resume:function(f){this.start(f)},startTimer:function(){var f=this;if(!f.timer)f.timer=setTimeout(function(){if(f.runFrames())f.stopTimer();else{f.timer=0;
f.startTimer()}},f.interval)},stopTimer:function(){var f=this.timer;if(f){clearTimeout(f);this.timer=0}},runFrames:function(){var f=1,i=this.runnings,p;for(p in i)if(i.hasOwnProperty(p)){f=0;i[p]._frame()}return f}}});
KISSY.add("anim/queue",function(d,b){function f(e,h,r){h=h||a;var s,y=b.data(e,p);if(!y&&!r)b.data(e,p,y={});if(y){s=y[h];if(!s&&!r)s=y[h]=[]}return s}function i(e,h){h=h||a;var r=b.data(e,p);r&&delete r[h];d.isEmptyObject(r)&&b.removeData(e,p)}var p=d.guid("ks-queue-"+d.now()+"-"),a=d.guid("ks-queue-"+d.now()+"-"),m={queueCollectionKey:p,queue:function(e){var h=f(e.elem,e.config.queue);h.push(e);h[0]!=="..."&&m.dequeue(e);return h},remove:function(e){var h=f(e.elem,e.config.queue,1);if(h){e=d.indexOf(e,
h);e>-1&&h.splice(e,1)}},removeQueues:function(e){b.removeData(e,p)},removeQueue:i,dequeue:function(e){var h=e.elem;e=e.config.queue;var r=f(h,e,1),s=r&&r.shift();if(s=="...")s=r.shift();if(s){r.unshift("...");s._runInternal()}else i(h,e)}};return m},{requires:["dom"]});KISSY.add("anim",function(d,b,f){b.Easing=f;return b},{requires:["anim/base","anim/easing","anim/color"]});
