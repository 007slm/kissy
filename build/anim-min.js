/*
Copyright 2012, KISSY UI Library v1.40dev
MIT Licensed
build time: Oct 10 13:56
*/
KISSY.add("anim",function(c,d,b){d.Easing=b;c.mix(c,{Anim:d,Easing:d.Easing});return d},{requires:["anim/base","anim/easing","anim/color","anim/background-position"]});
KISSY.add("anim/background-position",function(c,d,b,f){function a(a){a=a.replace(/left|top/g,"0px").replace(/right|bottom/g,"100%").replace(/([0-9\.]+)(\s|\)|$)/g,"$1px$2");a=a.match(/(-?[0-9\.]+)(px|%|em|pt)\s(-?[0-9\.]+)(px|%|em|pt)/);return[parseFloat(a[1]),a[2],parseFloat(a[3]),a[4]]}function e(){e.superclass.constructor.apply(this,arguments)}c.extend(e,f,{load:function(){e.superclass.load.apply(this,arguments);this.unit=["px","px"];if(this.from){var c=a(this.from);this.from=[c[0],c[2]]}else this.from=
[0,0];this.to?(c=a(this.to),this.to=[c[0],c[2]],this.unit=[c[1],c[3]]):this.to=[0,0]},interpolate:function(a,c,d){var b=this.unit,f=e.superclass.interpolate;return f(a[0],c[0],d)+b[0]+" "+f(a[1],c[1],d)+b[1]},cur:function(){return d.css(this.anim.config.el,"backgroundPosition")},update:function(){var a=this.prop,c=this.anim.config.el,e=this.interpolate(this.from,this.to,this.pos);d.css(c,a,e)}});return f.Factories.backgroundPosition=e},{requires:["dom","./base","./fx"]});
KISSY.add("anim/base",function(c,d,b,f,a,e,q,h){function g(a,e,i,h,b){if(a.el)return i=a.el,e=a.props,delete a.el,delete a.props,new g(i,e,a);if(a=d.get(a)){if(!(this instanceof g))return new g(a,e,i,h,b);e=c.isString(e)?c.unparam(""+e,";",":"):c.clone(e);c.each(e,function(a,d){var i=c.trim(n(d));i?d!=i&&(e[i]=e[d],delete e[d]):delete e[d]});i=c.isPlainObject(i)?c.clone(i):{duration:parseFloat(i)||void 0,easing:h,complete:b};i=c.merge(y,i);i.el=a;i.props=e;this.config=i;this._duration=1E3*i.duration;
this.domEl=a;this._backupProps={};this._fxs={};this.on("complete",s)}}function s(a){var e,i,h=this.config;c.isEmptyObject(e=this._backupProps)||d.css(h.el,e);(i=h.complete)&&i.call(this,a)}function j(){var u=this.config,h=this._backupProps,i=u.el,b,g,l,o=u.specialEasing||{},s=this._fxs,j=u.props;p(this);if(!1===this.fire("beforeStart"))this.stop(0);else{if(i.nodeType==w.ELEMENT_NODE)for(l in g="none"===d.css(i,"display"),j)if(b=j[l],"hide"==b&&g||"show"==b&&!g){this.stop(1);return}if(i.nodeType==
w.ELEMENT_NODE&&(j.width||j.height))b=i.style,c.mix(h,{overflow:b.overflow,"overflow-x":b.overflowX,"overflow-y":b.overflowY}),b.overflow="hidden","inline"===d.css(i,"display")&&"none"===d.css(i,"float")&&(a.ie?b.zoom=1:b.display="inline-block");c.each(j,function(a,d){var e;c.isArray(a)?(e=o[d]=a[1],j[d]=a[0]):e=o[d]=o[d]||u.easing;c.isString(e)&&(e=o[d]=f[e]);o[d]=e||f.easeNone});c.each(x,function(a,e){var b,h;if(h=j[e])b={},c.each(a,function(a){b[a]=d.css(i,a);o[a]=o[e]}),d.css(i,e,h),c.each(b,
function(a,c){j[c]=d.css(i,c);d.css(i,c,a)}),delete j[e]});for(l in j){b=c.trim(j[l]);var n,k,r={prop:l,anim:this,easing:o[l]},m=q.getFx(r);c.inArray(b,z)?(h[l]=d.style(i,l),"toggle"==b&&(b=g?"show":"hide"),"hide"==b?(n=0,k=m.cur(),h.display="none"):(k=0,n=m.cur(),d.css(i,l,k),d.show(i)),b=n):(n=b,k=m.cur());b+="";var v="",t=b.match(A);if(t){n=parseFloat(t[2]);if((v=t[3])&&"px"!==v)d.css(i,l,b),k*=n/m.cur(),d.css(i,l,k+v);t[1]&&(n=("-="===t[1]?-1:1)*n+k)}r.from=k;r.to=n;r.unit=v;m.load(r);s[l]=m}this._startTime=
c.now();e.start(this)}}function p(a){var e=a.config.el,b=d.data(e,k);b||d.data(e,k,b={});b[c.stamp(a)]=a}function o(a){var e=a.config.el,b=d.data(e,k);b&&(delete b[c.stamp(a)],c.isEmptyObject(b)&&d.removeData(e,k))}function l(a,e,b){a=d.data(a,"resume"==b?m:k);a=c.merge(a);c.each(a,function(a){if(void 0===e||a.config.queue==e)a[b]()})}function r(a,e,b,g){b&&!1!==g&&h.removeQueue(a,g);a=d.data(a,k);a=c.merge(a);c.each(a,function(a){a.config.queue==g&&a.stop(e)})}var n=d._camelCase,w=d.NodeType,z=["hide",
"show","toggle"],x={background:["backgroundPosition"],border:["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth"],borderBottom:["borderBottomWidth"],borderLeft:["borderLeftWidth"],borderTop:["borderTopWidth"],borderRight:["borderRightWidth"],font:["fontSize","fontWeight"],margin:["marginBottom","marginLeft","marginRight","marginTop"],padding:["paddingBottom","paddingLeft","paddingRight","paddingTop"]},y={duration:1,easing:"easeNone"},A=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i;g.SHORT_HANDS=
x;g.prototype={constructor:g,isRunning:function(){var a=d.data(this.config.el,k);return a?!!a[c.stamp(this)]:0},isPaused:function(){var a=d.data(this.config.el,m);return a?!!a[c.stamp(this)]:0},pause:function(){if(this.isRunning()){this._pauseDiff=c.now()-this._startTime;e.stop(this);o(this);var a=this.config.el,b=d.data(a,m);b||d.data(a,m,b={});b[c.stamp(this)]=this}return this},resume:function(){if(this.isPaused()){this._startTime=c.now()-this._pauseDiff;var a=this.config.el,b=d.data(a,m);b&&(delete b[c.stamp(this)],
c.isEmptyObject(b)&&d.removeData(a,m));p(this);e.start(this)}return this},_runInternal:j,run:function(){!1===this.config.queue?j.call(this):h.queue(this);return this},_frame:function(){var a,b=this.config,e=1,c,d,h=this._fxs;for(a in h)if(!(d=h[a]).finished)b.frame&&(c=b.frame(d)),1==c||0==c?(d.finished=c,e&=c):(e&=d.frame())&&b.frame&&b.frame(d);(!1===this.fire("step")||e)&&this.stop(e)},stop:function(a){var b=this.config,c=b.queue,d,g=this._fxs;if(!this.isRunning())return!1!==c&&h.remove(this),
this;if(a){for(d in g)if(!(a=g[d]).finished)b.frame?b.frame(a,1):a.frame(1);this.fire("complete")}e.stop(this);o(this);!1!==c&&h.dequeue(this);return this}};c.augment(g,b.Target);var k=c.guid("ks-anim-unqueued-"+c.now()+"-"),m=c.guid("ks-anim-paused-"+c.now()+"-");g.stop=function(a,b,e,g){if(null===g||c.isString(g)||!1===g)return r.apply(void 0,arguments);e&&h.removeQueues(a);var l=d.data(a,k),l=c.merge(l);c.each(l,function(a){a.stop(b)})};c.each(["pause","resume"],function(a){g[a]=function(b,e){if(null===
e||c.isString(e)||!1===e)return l(b,e,a);l(b,void 0,a)}});g.isRunning=function(a){return(a=d.data(a,k))&&!c.isEmptyObject(a)};g.isPaused=function(a){return(a=d.data(a,m))&&!c.isEmptyObject(a)};g.Q=h;return g},{requires:"dom,event,./easing,ua,./manager,./fx,./queue".split(",")});
KISSY.add("anim/color",function(c,d,b,f){function a(a){var a=a+"",b;if(b=a.match(s))return[parseInt(b[1]),parseInt(b[2]),parseInt(b[3])];if(b=a.match(j))return[parseInt(b[1]),parseInt(b[2]),parseInt(b[3]),parseInt(b[4])];if(b=a.match(p)){for(a=1;a<b.length;a++)2>b[a].length&&(b[a]+=b[a]);return[parseInt(b[1],q),parseInt(b[2],q),parseInt(b[3],q)]}return g[a=a.toLowerCase()]?g[a]:[255,255,255]}function e(){e.superclass.constructor.apply(this,arguments)}var q=16,h=Math.floor,g={black:[0,0,0],silver:[192,
192,192],gray:[128,128,128],white:[255,255,255],maroon:[128,0,0],red:[255,0,0],purple:[128,0,128],fuchsia:[255,0,255],green:[0,128,0],lime:[0,255,0],olive:[128,128,0],yellow:[255,255,0],navy:[0,0,128],blue:[0,0,255],teal:[0,128,128],aqua:[0,255,255]},s=/^rgb\(([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\)$/i,j=/^rgba\(([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+),\s*([0-9]+)\)$/i,p=/^#?([0-9A-F]{1,2})([0-9A-F]{1,2})([0-9A-F]{1,2})$/i,d=b.SHORT_HANDS;d.background=d.background||[];d.background.push("backgroundColor");
d.borderColor=["borderBottomColor","borderLeftColor","borderRightColor","borderTopColor"];d.border.push("borderBottomColor","borderLeftColor","borderRightColor","borderTopColor");d.borderBottom.push("borderBottomColor");d.borderLeft.push("borderLeftColor");d.borderRight.push("borderRightColor");d.borderTop.push("borderTopColor");c.extend(e,f,{load:function(){e.superclass.load.apply(this,arguments);this.from&&(this.from=a(this.from));this.to&&(this.to=a(this.to))},interpolate:function(a,b,c){var d=
e.superclass.interpolate;if(3==a.length&&3==b.length)return"rgb("+[h(d(a[0],b[0],c)),h(d(a[1],b[1],c)),h(d(a[2],b[2],c))].join(", ")+")";if(4==a.length||4==b.length)return"rgba("+[h(d(a[0],b[0],c)),h(d(a[1],b[1],c)),h(d(a[2],b[2],c)),h(d(a[3]||1,b[3]||1,c))].join(", ")+")"}});c.each("backgroundColor,borderBottomColor,borderLeftColor,borderRightColor,borderTopColor,color,outlineColor".split(","),function(a){f.Factories[a]=e});return e},{requires:["dom","./base","./fx"]});
KISSY.add("anim/easing",function(){var c=Math.PI,d=Math.pow,b=Math.sin,f={swing:function(a){return-Math.cos(a*c)/2+0.5},easeNone:function(a){return a},easeIn:function(a){return a*a},easeOut:function(a){return(2-a)*a},easeBoth:function(a){return 1>(a*=2)?0.5*a*a:0.5*(1- --a*(a-2))},easeInStrong:function(a){return a*a*a*a},easeOutStrong:function(a){return 1- --a*a*a*a},easeBothStrong:function(a){return 1>(a*=2)?0.5*a*a*a*a:0.5*(2-(a-=2)*a*a*a)},elasticIn:function(a){return 0===a||1===a?a:-(d(2,10*(a-=
1))*b((a-0.075)*2*c/0.3))},elasticOut:function(a){return 0===a||1===a?a:d(2,-10*a)*b((a-0.075)*2*c/0.3)+1},elasticBoth:function(a){return 0===a||2===(a*=2)?a:1>a?-0.5*d(2,10*(a-=1))*b((a-0.1125)*2*c/0.45):0.5*d(2,-10*(a-=1))*b((a-0.1125)*2*c/0.45)+1},backIn:function(a){1===a&&(a-=0.0010);return a*a*(2.70158*a-1.70158)},backOut:function(a){return(a-=1)*a*(2.70158*a+1.70158)+1},backBoth:function(a){var b,c=(b=2.5949095)+1;return 1>(a*=2)?0.5*a*a*(c*a-b):0.5*((a-=2)*a*(c*a+b)+2)},bounceIn:function(a){return 1-
f.bounceOut(1-a)},bounceOut:function(a){return a<1/2.75?7.5625*a*a:a<2/2.75?7.5625*(a-=1.5/2.75)*a+0.75:a<2.5/2.75?7.5625*(a-=2.25/2.75)*a+0.9375:7.5625*(a-=2.625/2.75)*a+0.984375},bounceBoth:function(a){return 0.5>a?0.5*f.bounceIn(2*a):0.5*f.bounceOut(2*a-1)+0.5}};return f});
KISSY.add("anim/fx",function(c,d,b){function f(a){this.load(a)}function a(a,c){return(!a.style||null==a.style[c])&&null!=d.attr(a,c,b,1)?1:0}f.prototype={constructor:f,load:function(a){c.mix(this,a);this.pos=0;this.unit=this.unit||""},frame:function(a){var b=this.anim,d=0;if(this.finished)return 1;var g=c.now(),f=b._startTime,b=b._duration;a||g>=b+f?d=this.pos=1:this.pos=this.easing((g-f)/b);this.update();this.finished=this.finished||d;return d},interpolate:function(a,d,h){return c.isNumber(a)&&c.isNumber(d)?
(a+(d-a)*h).toFixed(3):b},update:function(){var c=this.prop,f=this.anim.config.el,h=this.to,g=this.interpolate(this.from,h,this.pos);g===b?this.finished||(this.finished=1,d.css(f,c,h)):(g+=this.unit,a(f,c)?d.attr(f,c,g,1):d.css(f,c,g))},cur:function(){var c=this.prop,f=this.anim.config.el;if(a(f,c))return d.attr(f,c,b,1);var h,c=d.css(f,c);return isNaN(h=parseFloat(c))?!c||"auto"===c?0:c:h}};f.Factories={};f.getFx=function(a){return new (f.Factories[a.prop]||f)(a)};return f},{requires:["dom"]});
KISSY.add("anim/manager",function(c){var d=c.stamp;return{interval:15,runnings:{},timer:null,start:function(b){var c=d(b);this.runnings[c]||(this.runnings[c]=b,this.startTimer())},stop:function(b){this.notRun(b)},notRun:function(b){delete this.runnings[d(b)];c.isEmptyObject(this.runnings)&&this.stopTimer()},pause:function(b){this.notRun(b)},resume:function(b){this.start(b)},startTimer:function(){var b=this;b.timer||(b.timer=setTimeout(function(){b.runFrames()?b.stopTimer():(b.timer=0,b.startTimer())},
b.interval))},stopTimer:function(){var b=this.timer;b&&(clearTimeout(b),this.timer=0)},runFrames:function(){var b=1,c=this.runnings,a;for(a in c)b=0,c[a]._frame();return b}}});
KISSY.add("anim/queue",function(c,d){function b(b,c,f){var c=c||e,j,p=d.data(b,a);!p&&!f&&d.data(b,a,p={});p&&(j=p[c],!j&&!f&&(j=p[c]=[]));return j}function f(b,g){var g=g||e,f=d.data(b,a);f&&delete f[g];c.isEmptyObject(f)&&d.removeData(b,a)}var a=c.guid("ks-queue-"+c.now()+"-"),e=c.guid("ks-queue-"+c.now()+"-"),q={queueCollectionKey:a,queue:function(a){var c=b(a.config.el,a.config.queue);c.push(a);"..."!==c[0]&&q.dequeue(a);return c},remove:function(a){var d=b(a.config.el,a.config.queue,1);d&&(a=
c.indexOf(a,d),-1<a&&d.splice(a,1))},removeQueues:function(b){d.removeData(b,a)},removeQueue:f,dequeue:function(a){var c=a.config.el,a=a.config.queue,d=b(c,a,1),e=d&&d.shift();"..."==e&&(e=d.shift());e?(d.unshift("..."),e._runInternal()):f(c,a)}};return q},{requires:["dom"]});
