/*
Copyright 2011, KISSY UI Library v1.20dev
MIT Licensed
build time: ${build.time}
*/
KISSY.add("resizable/base",function(i,k,n,r){function s(a,b){for(var c=[],d=0;d<a.length;d++)c[d]=a[d]||b[d];return c}function o(a,b,c){return Math.min(Math.max(a,c),b)}var t=i.require("dd/draggable"),q=i.require("node/node"),m={t:function(a,b,c,d,e,f,g,h,j){a=o(c,d,h-j);return[0,a,e+h-a,0]},b:function(a,b,c,d,e,f,g,h,j){return[0,o(c,d,h+j),0,0]},r:function(a,b,c,d,e,f,g,h,j,l){return[o(a,b,g+l),0,0,0]},l:function(a,b,c,d,e,f,g,h,j,l){a=o(a,b,g-l);return[a,0,0,f+g-a]}};i=["l","r"];k=["t","b"];for(n=
0;n<i.length;n++)for(var p=0;p<k.length;p++)(function(a,b){m[a+b]=m[b+a]=function(){return s(m[a].apply(this,arguments),m[b].apply(this,arguments))}})(i[n],k[p]);return r.create([],{renderUI:function(){var a=this.get("node");this.dds={};a.css("position")=="static"&&a.css("position","relative")},_uiSetHandlers:function(a){var b=this.dds,c=this.get("node");this.destructor();for(var d=0;d<a.length;d++){var e=a[d],f=(new q("<div class='ke-resizehandler ke-resizehandler-"+e+"'>")).prependTo(c);e=b[e]=
new t({node:f,cursor:null});e.on("drag",this._drag,this);e.on("dragstart",this._dragStart,this)}},_dragStart:function(){var a=this.get("node");this._width=a.width();this._top=parseInt(a.css("top"));this._left=parseInt(a.css("left"));this._height=a.height()},_drag:function(a){var b=this.get("node"),c=a.currentTarget||a.target,d=this._getHanderC(c),e=this._width,f=this._height,g=this.get("minWidth"),h=this.get("maxWidth"),j=this.get("minHeight"),l=this.get("maxHeight");a=m[d](g,h,j,l,this._top,this._left,
e,f,a.top-c.startNodePos.top,a.left-c.startNodePos.left);c=["width","height","top","left"];for(d=0;d<c.length;d++)a[d]&&b.css(c[d],a[d])},_getHanderC:function(a){var b=this.dds;for(var c in b){if(!b.hasOwnProperty(c))return;if(b[c]==a)return c}},destructor:function(){var a=this.dds;for(var b in a){if(!a.hasOwnProperty(b))return;a[b].destroy();a[b].get("node").remove();delete a[b]}}},{ATTRS:{node:{setter:function(a){return q.one(a)}},minWidth:{value:0},minHeight:{value:0},maxWidth:{value:Number.MAX_VALUE},
maxHeight:{value:Number.MAX_VALUE},handlers:{value:[]}}})},{requires:["node","dd","uibase"]});KISSY.add("resizable",function(i,k){return i.Resizable=k},{requires:["resizable/base"]});
