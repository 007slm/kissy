/*
Copyright 2013, KISSY UI Library v1.40dev
MIT Licensed
build time: Jan 29 13:39
*/
KISSY.add("resizable",function(s,f,h,i,t){function u(a){var b=a.dds,j=a.get("node"),g=a.get("handlers"),m,n=a.get("prefixCls")+v;for(c=0;c<g.length;c++){var d=g[c],e=p("<div class='"+n+" "+n+"-"+d+"'></div>").prependTo(j,t),e=b[d]=new w({node:e,cursor:null});(function(b,d){d.on("drag",function(d){var j=a.get("node"),e=d.target,g=a._width,n=a._height,f=a.get("minWidth"),k=a.get("maxWidth"),h=a.get("minHeight"),i=a.get("maxHeight"),p=d.top-e.get("startNodePos").top,d=d.left-e.get("startNodePos").left,
g=o[b](f,k,h,i,a._top,a._left,g,n,p,d,m);for(c=0;c<q.length;c++)g[c]&&j.css(q[c],g[c]);a.fire("resize",{handler:b,dd:e})});d.on("dragstart",function(){m=a.get("preserveRatio");a._width=j.width();a._top=parseInt(j.css("top"));a._left=parseInt(j.css("left"));a._height=j.height();a.fire("resizeStart",{handler:b,dd:d})});d.on("dragend",function(){a.fire("resizeEnd",{handler:b,dd:d})})})(d,e)}}var p=f.all,c,w=i.Draggable,v="resizable-handler",i=["l","r"],r=["t","b"],q=["width","height","top","left"],o=
{t:function(a,b,c,g,m,n,d,e,f,k,l){a=Math.min(Math.max(c,e-f),g);b=0;l&&(b=a/e*d);return[b,a,m+e-a,0]},b:function(a,b,c,g,m,f,d,e,h,k,l){a=Math.min(Math.max(c,e+h),g);b=0;l&&(b=a/e*d);return[b,a,0,0]},r:function(a,b,c,g,f,h,d,e,i,k,l){a=Math.min(Math.max(a,d+k),b);b=0;l&&(b=a/d*e);return[a,b,0,0]},l:function(a,b,c,g,f,h,d,e,i,k,l){a=Math.min(Math.max(a,d-k),b);b=0;l&&(b=a/d*e);return[a,b,0,h+d-a]}};for(c=0;c<i.length;c++)for(f=0;f<r.length;f++)(function(a,b){o[a+b]=o[b+a]=function(){var f=o[a].apply(this,
arguments),g=o[b].apply(this,arguments),h=[];for(c=0;c<f.length;c++)h[c]=f[c]||g[c];return h}})(i[c],r[f]);h=h.extend({initializer:function(){this.dds={}},_onSetNode:function(){u(this)},_onSetDisabled:function(a){s.each(this.dds,function(b){b.set("disabled",a)})},destructor:function(){var a,b=this.dds;for(a in b)b[a].destroy(),b[a].get("node").remove(),delete b[a]}},{ATTRS:{node:{setter:function(a){return p(a)}},prefixCls:{value:"ks-"},disabled:{},minWidth:{value:0},minHeight:{value:0},maxWidth:{value:Number.MAX_VALUE},
maxHeight:{value:Number.MAX_VALUE},preserveRatio:{value:!1},handlers:{value:[]}}});h.Handler={B:"b",T:"t",L:"l",R:"r",BL:"bl",TL:"tl",BR:"br",TR:"tr"};return h},{requires:["node","rich-base","dd/base"]});
