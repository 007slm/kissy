/*
Copyright 2012, KISSY UI Library v1.40dev
MIT Licensed
build time: Aug 15 21:54
*/
KISSY.add("tabs/bar",function(c,b){var a=b.extend({createDom:function(){this.get("el").attr("role","tablist")},handleKeyEventInternal:function(){a.superclass.handleKeyEventInternal.apply(this,arguments);"mouse"!=this.get("changeType")&&this.set("selectedTab",this.get("highlightedItem"))},handleFocus:function(){a.superclass.handleFocus.apply(this,arguments);this.set("highlightedItem",this.get("selectedTab"))},renderUI:function(){var a=this,b=a.get("children");c.each(b,function(b){b.get("selected")&&
a.set("selectedTab",b)})},bindUI:function(){var a=this,b=a.get("changeType");a.on("afterSelectedTabChange"+("mouse"==b?" afterHighlightedItemChange":""),function(a){a.newVal&&(a.prevVal&&a.prevVal.set("selected",!1),a.newVal.set("selected",!0))});a.on("afterSelectedChange",function(b){b.newVal&&b.target.isTabsTab&&a.set("selectedTab",b.target)})}},{ATTRS:{selectedTab:{},changeType:{value:"click"}}},{xclass:"tabs-bar",priority:30});a.changeType={CLICK:"click",MOUSE:"mouse"};return a},{requires:["toolbar"]});
KISSY.add("tabs/body",function(c,b){return b.Container.extend({setSelectedPanelByIndexInternal:function(a){this.set("selectedPanel",this.get("children")[a])},renderUI:function(){var a=this,b=a.get("children");c.each(b,function(b){b.get("selected")&&a.set("selectedPanel",b)})},bindUI:function(){this.on("afterSelectedPanelChange",function(a){a.newVal&&(a.prevVal&&a.prevVal.set("selected",!1),a.newVal.set("selected",!0))})}},{ATTRS:{selectedPanel:{},allowTextSelection:{value:!0},focusable:{value:!1},
handleMouseEvents:{value:!1},delegateChildren:{value:!1}}},{xclass:"tabs-body"})},{requires:["component"]});
KISSY.add("tabs/panel-render",function(c,b){return b.Render.extend({createDom:function(){this.get("el").attr("role","tabpanel")},_uiSetSelected:function(a){var b=this.get("el");b[a?"addClass":"removeClass"]("ks-tabs-panel-selected");b.attr("aria-hidden",!a)}},{ATTRS:{selected:{value:!1}},HTML_PARSER:{selected:function(a){return a.hasClass("ks-tabs-panel-selected")}}},{xclass:"tabs-panel"})},{requires:["component"]});
KISSY.add("tabs/panel",function(c,b,a){return b.Controller.extend({},{ATTRS:{selected:{view:1},focusable:{value:!1},allowTextSelection:{value:!0},xrender:{value:a}}},{xclass:"tabs-panel"})},{requires:["component","./panel-render"]});
KISSY.add("tabs/render",function(c,b){return b.Render.extend({_uiSetBarOrientation:function(a){this.get("el").removeClass(this.getCssClassWithPrefix("tabs-top tabs-bottom tabs-left tabs-right")).addClass(this.getCssClassWithPrefix("tabs-"+a))}},{ATTRS:{barOrientation:{value:"top"}},HTML_PARSER:{barOrientation:function(a){return(a=a[0].className.match(/tabs-(top|bottom|left|right)\b/))&&a[1]||"top"}}})},{requires:["component"]});
KISSY.add("tabs/tab-render",function(c,b){return b.Render.extend({createDom:function(){this.get("el").attr("role","tab")},_uiSetSelected:function(a){var b=this.get("el");b[a?"addClass":"removeClass"]("ks-tabs-tab-selected");b.attr("aria-selected",!!a)}},{ATTRS:{selected:{value:!1}},HTML_PARSER:{selected:function(a){return a.hasClass("ks-tabs-tab-selected")}}},{xclass:"tabs-tab"})},{requires:["button"]});
KISSY.add("tabs/tab",function(c,b,a){return b.extend({isTabsTab:!0,bindUI:function(){this.publish("afterSelectedChange",{bubbles:1});this.on("click",function(){this.set("selected",!0)})}},{ATTRS:{handleMouseEvents:{value:!1},focusable:{value:!1},selected:{view:1},xrender:{value:a}}},{xclass:"tabs-tab",priority:30})},{requires:["button","./tab-render"]});
KISSY.add("tabs",function(c,b,a,h,g,j,k){g=b.Controller.extend({initializer:function(){var a,b,d={xclass:"tabs-bar",changeType:this.get("changeType"),children:[]},i={xclass:"tabs-body",children:[]},e=d.children,f=i.children;(b=this.get("items"))&&c.each(b,function(b){a=a||b.selected;e.push({xclass:"tabs-tab",content:b.title,selected:b.selected});f.push({xclass:"tabs-panel",content:b.content,selected:b.selected})});!a&&e.length&&(e[0].selected=!0,f[0].selected=!0);this.set("bar",d);this.set("body",
i)},addItem:function(a,b){var d=this.get("bar"),c,e,f=this.get("body");c=d.addChild({xclass:"tabs-tab",content:a.title},b);e=f.addChild({xclass:"tabs-panel",content:a.content},b);a.selected&&(d.set("selectedTab",c),f.set("selectedPanel",e));return this},removeItemAt:function(a,b){var d=this.get("bar"),c=d.get("children"),e=d.getChildAt(a),f=this.get("body");e.get("selected")&&(1==c.length?d.set("selectedTab",null):0==a?d.set("selectedTab",d.getChildAt(a+1)):d.set("selectedTab",d.getChildAt(a-1)));
d.removeChild(d.getChildAt(a),b);f.removeChild(f.getChildAt(a),b);return this},removeItemByTab:function(a){return this.removeItemAt(c.indexOf(a,this.get("bar").get("children")))},removeItemByPanel:function(a){return this.removeItemAt(c.indexOf(a,this.get("body").get("children")))},getSelectedTab:function(){var a=this.get("bar"),b=null;c.each(a.get("children"),function(a){if(a.get("selected"))return b=a,!1});return b},getTabs:function(){return this.get("bar").get("children")},getPanels:function(){return this.get("body").get("children")},
getTabAt:function(a){return this.get("bar").get("children")[a]},getPanelAt:function(a){return this.get("body").get("children")[a]},getSelectedPanel:function(){var a=this.get("body"),b=null;c.each(a.get("children"),function(a){if(a.get("selected"))return b=a,!1});return b},renderUI:function(){var a=this.get("barOrientation"),b=this.get("el"),d=this.get("body"),c=this.get("bar");c.set("render",b);d.set("render",b);"bottom"==a?(d.render(),c.render()):(c.render(),d.render())},decorateInternal:function(b){var c=
b.one(".ks-tabs-bar"),d=b.one(".ks-tabs-body");this.set("el",b);this.set("bar",new a({srcNode:c}));this.set("body",new h({srcNode:d}))},bindUI:function(){var a=this.get("body"),b=this.get("bar");b.on("afterSelectedTabChange",function(d){a.setSelectedPanelByIndexInternal(c.indexOf(d.newVal,b.get("children")))})}},{ATTRS:{items:{},changeType:{},handleMouseEvents:{value:!1},allowTextSelection:{value:!0},focusable:{value:!1},bar:{setter:function(a){if(!(a instanceof b.Controller))return b.create(a)},
valueFn:function(){return b.create({xclass:"tabs-bar"})}},body:{setter:function(a){if(!(a instanceof b.Controller))return b.create(a)},valueFn:function(){return b.create({xclass:"tabs-body"})}},barOrientation:{view:1},xrender:{value:k}}},{xclass:"tabs"});g.Orientation={TOP:"top",BOTTOM:"bottom",LEFT:"left",RIGHT:"right"};g.Bar=a;g.Body=h;g.Panel=j;return g},{requires:"component,tabs/bar,tabs/body,tabs/tab,tabs/panel,tabs/render".split(",")});
