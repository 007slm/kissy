/*
Copyright 2011, KISSY UI Library v1.1.8dev
MIT Licensed
build time: ${build.time}
*/
KISSY.add("flash",function(g){g.Flash={swfs:{},length:0,version:"1.3"}},{requires:["core"]});
KISSY.add("flash-ua",function(g){function l(){var e;if(navigator.plugins&&navigator.mimeTypes.length)e=(navigator.plugins["Shockwave Flash"]||0).description;else if(window.ActiveXObject)try{e=(new ActiveXObject("ShockwaveFlash.ShockwaveFlash")).GetVariable("$version")}catch(j){}if(e)return n(e)}function n(e){return e.match(/(\d)+/g).splice(0,3)}function k(e){var j=g.isString(e)?n(e):e;e=e;if(g.isArray(j))e=parseFloat(j[0]+"."+o(j[1],3)+o(j[2],5));return e||0}function o(e,j){for(var s=(e+"").length;s++<
j;)e="0"+e;return e}var f=g.UA,p,q,r=true;f.fpv=function(e){if(e||r){r=false;p=l();q=k(p)}return p};f.fpvGEQ=function(e,j){r&&f.fpv(j);return!!q&&q>=k(e)}},{host:"flash"});
KISSY.add("flash-embed",function(g){function l(a,b){return q+a+r+e+b+e}function n(a,b){return'<param name="'+a+'" value="'+b+'" />'}var k=g.UA,o=g.DOM,f=g.Flash,p=/^(?:object|embed)/i,q=" ",r="=",e='"',j=Object.prototype,s=encodeURIComponent,t={wmode:"",allowscriptaccess:"",allownetworking:"",allowfullscreen:"",play:"false",loop:"",menu:"",quality:"",scale:"",salign:"",bgcolor:"",devicefont:"",base:"",swliveconnect:"",seamlesstabbing:""},u={params:{},attrs:{width:215,height:138},version:9};g.mix(f,
{fpv:k.fpv,fpvGEQ:k.fpvGEQ,add:function(a,b,c){var h,i,d,m;b=f._normalize(b);b=g.merge(u,b);b.attrs=g.merge(u.attrs,b.attrs);i=a.replace("#","");if(!(a=g.get(a))){a=o.create("<div id="+i+">");document.body.appendChild(a)}m=a.nodeName.toLowerCase();d=!p.test(m);if(!a.id)a.id=g.guid("ks-flash-container-");i=a.id;if(!b.id)b.id=g.guid("ks-flash-");b.attrs.id=b.id;if(k.fpv()){if(!k.fpvGEQ(b.version)){f._callback(c,0,i,a,d);if(!((h=b.xi)&&g.isString(h)))return;b.src=h}if(d)b.src?f._embed(a,b,c):f._callback(c,
-3,i,a,d);else{if(m=="object")if(k.gecko||k.opera||k.chrome>7)a=g.query("object",a)[0]||a;b.attrs.id=i;f._register(a,b,c,d)}}else f._callback(c,-1,i,a,d)},get:function(a){return f.swfs[a]},remove:function(a){if(a=f.get(a)){o.remove(a);delete f.swfs[a.id];f.length-=1}},contains:function(a){var b=f.swfs,c,h=false;if(g.isString(a))h=a in b;else for(c in b)if(b[c]===a){h=true;break}return h},_register:function(a,b,c,h){b=b.attrs.id;f._addSWF(b,a);f._callback(c,1,b,a,h)},_embed:function(a,b,c){var h=f._stringSWF(b);
a.innerHTML=h;a=g.get("#"+b.id);f._register(a,b,c,true)},_callback:function(a,b,c,h,i){b&&g.isFunction(a)&&a({status:b,id:c,swf:h,dynamic:!!i})},_addSWF:function(a,b){if(a&&b){f.swfs[a]=b;f.length+=1}},_stringSWF:function(a){var b;var c=b="",h=a.src,i=a.attrs;a=a.params;var d,m;if(k.ie){m="object";for(d in i)if(i[d]!=j[d])if(d!="classid"&&d!="data")b+=l(d,i[d]);b+=l("classid","clsid:d27cdb6e-ae6d-11cf-96b8-444553540000");for(d in a)if(d in t)c+=n(d,a[d]);c+=n("movie",h);if(a.flashvars)c+=n("flashvars",
f.toFlashVars(a.flashvars));b="<"+m+b+">"+c+"</"+m+">"}else{m="embed";b+=l("src",h);for(d in i)if(i[d]!=j[d])if(d!="classid"&&d!="data")b+=l(d,i[d]);b+=l("type","application/x-shockwave-flash");for(d in a)if(d in t)c+=l(d,a[d]);if(a.flashvars)c+=l("flashvars",f.toFlashVars(a.flashvars));b="<"+m+b+c+"/>"}return b},_normalize:function(a){var b,c,h,i=a||{};if(g.isPlainObject(a)){i={};for(h in a){b=h.toLowerCase();c=a[h];if(b!=="flashvars")c=f._normalize(c);i[b]=c}}return i},toFlashVars:function(a){if(!g.isPlainObject(a))return"";
var b,c,h=[];for(b in a){c=a[b];if(g.isString(c))c=s(c);else{c=g.JSON.stringify(c);if(!c)continue;c=c.replace(/:"([^"]+)/g,function(i,d){return':"'+s(d)})}h.push(b+"="+c)}return h.join("&").replace(/"/g,"'")}})},{host:"flash"});
