/*
Copyright 2010, KISSY UI Library v1.1.0pre
MIT Licensed
build time: ${build.time}
*/
KISSY.add("flash-ua",function(f){function l(){var c;if(navigator.plugins&&navigator.mimeTypes.length)c=(navigator.plugins["Shockwave Flash"]||0).description;else if(window.ActiveXObject)try{c=(new ActiveXObject("ShockwaveFlash.ShockwaveFlash")).GetVariable("$version")}catch(a){}if(c)return o(c)}function o(c){return c.match(/(\d)+/g)}function i(c){var a=f.isString(c)?o(c):c;c=c;if(f.isArray(a))c=parseFloat(a[0]+"."+h(a[1],3)+h(a[2],5));return c||0}function h(c,a){for(var b=(c+"").length;b++<a;)c="0"+
c;return c}var g=f.UA,m,k,n=true;g.fpv=function(c){if(c||n){n=false;m=l();k=i(m)}return m};g.fpvGEQ=function(c,a){n&&g.fpv(a);return!!k&&k>=i(c)}});KISSY.add("flash",function(f){f.Flash={swfs:{length:0}}});
KISSY.add("flash-embed",function(f){function l(a,b,d){var e=h.create("<param>");h.attr(e,{name:b,value:d});a.appendChild(e)}function o(a){if(f.isString(a))return k(a);return f.JSON.stringify(a).replace(/:"([^"]+)/g,function(b,d){return':"'+k(d)})}var i=f.UA,h=f.DOM,g=f.Flash,m=/object|embed/i,k=encodeURIComponent,n={wmode:"",allowscriptaccess:"",allownetworking:"",allowfullscreen:"",play:"false",loop:"",menu:"",quality:"",scale:"",salign:"",bgcolor:"",devicefont:"",base:"",swliveconnect:"",seamlesstabbing:""},
c={params:{},attrs:{width:215,height:138},version:9};f.mix(g,{fpv:i.fpv,fpvGEQ:i.fpvGEQ,len:function(){return g.swfs.length},add:function(a,b,d){var e,j;b=f.merge(c,b);b.attrs=f.merge(c.attrs,b.attrs);if(a=f.get(a)){if(!a.id)a.id=f.guid("ks-flash-");j=b.attrs.id="#"+a.id;if(i.fpv()){if(!i.fpvGEQ(b.version)){this._callback(d,0,j,a);if(!((e=b.xi)&&f.isString(e)))return;b.src=e}if(m.test(a.nodeName))this._register(a,b,d);else b.src?this._embed(a,b,d):this._callback(d,-3,j,a)}else this._callback(d,-1,
j,a)}else this._callback(d,-2)},get:function(a){return g.swfs[a]},remove:function(a){if(a=g.get(a)){h.remove(a);delete g.swfs["#"+a.id];g.swfs.length-=1}},contains:function(a){var b=g.swfs,d,e=false;if(f.isString(a))e=a in b;else for(d in b)if(b[d]===a){e=true;break}return e},_register:function(a,b,d){b=b.attrs.id;g._addSWF(b,a);g._callback(d,1,b,a)},_embed:function(a,b,d){var e=g._createSWF(b.src,b.attrs,b.params);if(i.ie)a.outerHTML=e.outerHTML;else a.parentNode.replaceChild(e,a);g._register(a,
b,d)},_callback:function(a,b,d,e){b&&f.isFunction(a)&&a({status:b,id:d,swf:e})},_addSWF:function(a,b){if(a&&b){g.swfs[a]=b;g.swfs.length+=1}},_createSWF:function(a,b,d){var e=h.create("<object>"),j;h.attr(e,b);if(i.ie){h.attr(e,"classid","clsid:d27cdb6e-ae6d-11cf-96b8-444553540000");l(e,"movie",a)}else h.attr(e,{type:"application/x-shockwave-flash",data:a,name:b.id});for(j in d)j in n&&l(e,j,d[j]);d.flashvars&&l(e,"flashvars",o(d.flashvars));return e}})});
