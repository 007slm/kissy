/*
Copyright 2011, KISSY UI Library v1.1.8dev
MIT Licensed
build time: ${build.time}
*/
KISSY.add("resizable",function(j){function r(a,b){for(var c=[],d=0;d<a.length;d++)c[d]=a[d]||b[d];return c}function m(a,b,c){return Math.min(Math.max(a,c),b)}for(var s=j.Draggable,t=j.Node,l={t:function(a,b,c,d,e,f,g,h,i){a=m(c,d,h-i);return[0,a,e+h-a,0]},b:function(a,b,c,d,e,f,g,h,i){return[0,m(c,d,h+i),0,0]},r:function(a,b,c,d,e,f,g,h,i,k){return[m(a,b,g+k),0,0,0]},l:function(a,b,c,d,e,f,g,h,i,k){a=m(a,b,g-k);return[a,0,0,f+g-a]}},p=["l","r"],q=["t","b"],n=0;n<p.length;n++)for(var o=0;o<q.length;o++)(function(a,
b){l[a+b]=l[b+a]=function(){return r(l[a].apply(this,arguments),l[b].apply(this,arguments))}})(p[n],q[o]);j.Resizable=j.UIBase.create([],{renderUI:function(){var a=this.get("node");this.dds={};a.css("position")=="static"&&a.css("position","relative")},_uiSetHandlers:function(a){var b=this.dds,c=this.get("node");this.destructor();for(var d=0;d<a.length;d++){var e=a[d],f=(new t("<div class='ke-resizehandler ke-resizehandler-"+e+"'>")).prependTo(c);e=b[e]=new s({node:f});e.on("drag",this._drag,this);
e.on("dragstart",this._dragStart,this)}},_dragStart:function(){var a=this.get("node");this._width=a.width();this._top=parseInt(a.css("top"));this._left=parseInt(a.css("left"));this._height=a.height()},_drag:function(a){var b=this.get("node"),c=a.currentTarget||a.target,d=this._getHanderC(c),e=this._width,f=this._height,g=this.get("minWidth"),h=this.get("maxWidth"),i=this.get("minHeight"),k=this.get("maxHeight");a=l[d](g,h,i,k,this._top,this._left,e,f,a.top-c.startNodePos.top,a.left-c.startNodePos.left);
c=["width","height","top","left"];for(d=0;d<c.length;d++)a[d]&&b.css(c[d],a[d])},_getHanderC:function(a){var b=this.dds;for(var c in b){if(!b.hasOwnProperty(c))return;if(b[c]==a)return c}},destructor:function(){var a=this.dds;for(var b in a){if(!a.hasOwnProperty(b))return;a[b].destroy();a[b].get("node").remove();delete a[b]}}},{ATTRS:{node:{setter:function(a){return j.one(a)}},minWidth:{value:0},minHeight:{value:0},maxWidth:{value:Number.MAX_VALUE},maxHeight:{value:Number.MAX_VALUE},handlers:{value:[]}}})},
{requires:["dd"]});
