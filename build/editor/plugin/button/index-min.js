/*
Copyright 2012, KISSY UI Library v1.30dev
MIT Licensed
build time: May 31 22:01
*/
KISSY.add("editor/plugin/button/index",function(h,f,i){function j(a){return a&&-1==a.indexOf("<")?a:0}var b=i.define([i.UIBase.Box.Render],{_updateHref:function(){this.get("el").attr("href","javascript:void('"+(j(this.get("text"))||j(this.get("title")))+"')")},bindUI:function(){var a=this,g=a.get("keepFocus"),d=a.get("el");d.on("click",a._action,a);g&&d.unselectable();d.on("mousedown",function(b){"off"==a.get("state")&&d.addClass("ks-editor-triplebutton-active");g&&b.halt()});d.on("mouseup mouseleave",
function(){"off"==a.get("state")&&d.hasClass("ks-editor-triplebutton-active")&&setTimeout(function(){d.removeClass("ks-editor-triplebutton-active")},300)})},_uiSetTitle:function(){this.get("el").attr("title",this.get("title"));this._updateHref()},_uiSetContentCls:function(a){var b=this.get("el");void 0!==a&&(b.html("<span class='ks-editor-toolbar-item "+a+"' />"),this.get("keepFocus")&&b.unselectable(void 0))},_uiSetText:function(a){this.get("el").html(a);this._updateHref()},_uiSetState:function(a,
b){this["_"+a](b)},disable:function(){this.set("state","disabled")},enable:function(){"disabled"==this.get("state")&&this.set("state",this._savedState)},_action:function(a){this.fire(this.get("state")+"Click",{TripleEvent:a});this.fire("click",{TripleClickType:this.get("state")+"Click"});this.get("keepFocus")||this.get("el")[0].focus()},bon:function(){this.set("state","on")},boff:function(){this.set("state","off")},_on:function(){this.get("el").removeClass("ks-editor-triplebutton-off ks-editor-triplebutton-disabled").addClass("ks-editor-triplebutton-on")},
_off:function(){this.get("el").removeClass("ks-editor-triplebutton-on ks-editor-triplebutton-disabled").addClass("ks-editor-triplebutton-off")},_disabled:function(a){var b=this.get("el");this._savedState=a.prevVal;b.removeClass("ks-editor-triplebutton-off ks-editor-triplebutton-on").addClass("ks-editor-triplebutton-disabled")}},{name:"editor/plugin/button",ATTRS:{state:{value:"off"},elCls:{value:"ks-editor-triplebutton ks-editor-triplebutton-off"},elTagName:{value:"a"},title:{},contentCls:{},text:{},
keepFocus:{value:!0}}});b.ON="on";b.OFF="off";b.DISABLED="disabled";b.ON_CLASS="ks-editor-triplebutton-on";b.OFF_CLASS="ks-editor-triplebutton-off";b.DISABLED_CLASS="ks-editor-triplebutton-disabled";f.TripleButton=b;f.prototype.addButton=function(a,g,d){var d=d||b,e=this,c=new d(h.mix({render:e.get("toolBarEl"),autoRender:!0,editor:e},a));h.mix(c,g);c.init&&c.init();e.on("selectionChange",function(){e.get("mode")!=f.SOURCE_MODE&&c.selectionChange&&c.selectionChange.apply(c,arguments)});c.on("click",
function(a){var b=a.TripleClickType;c[b]&&c[b].apply(c,arguments)});c.get("mode")==f.WYSIWYG_MODE&&(e.on("wysiwygMode",c.enable,c),e.on("sourceMode",c.disable,c));e.on("destroy",function(){c.destroy()});return c};return b},{requires:["editor","component"]});
