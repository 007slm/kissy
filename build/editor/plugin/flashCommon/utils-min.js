/*
Copyright 2012, KISSY UI Library v1.30dev
MIT Licensed
build time: May 28 19:44
*/
KISSY.add("editor/plugin/flashCommon/utils",function(m){var f=m.DOM,p=m.Node,q=m.UA,j={insertFlash:function(a,c,b,d,h,i){c=j.createSWF(c,{attrs:b},a.get("document")[0]);b=a.createFakeElement(c.el,d||"ke_flash",h||"flash",!0,c.html,b);a.insertElement(b,null,i)},isFlashEmbed:function(a){return"application/x-shockwave-flash"==a.getAttribute("type")||/\.swf(?:$|\?)/i.test(a.getAttribute("src")||"")},getUrl:function(a){var c="";if("object"==a.nodeName())for(var a=a[0].childNodes,b=0;b<a.length;b++)1==
a[b].nodeType&&("movie"==(f.attr(a[b],"name")||"").toLowerCase()?c=f.attr(a[b],"value"):"embed"==f.nodeName(a[b])?c=f.attr(a[b],"src"):"object"==f.nodeName(a[b])&&(c=f.attr(a[b],"data")));else"embed"==a.nodeName()&&(c=a.attr("src"));return c},createSWF:function(a,c,b){var d=c.attrs||{},h=c.flashVars,i="",f="",c=c.params||{},e="",b=b||document;m.mix(d,{wmode:"transparent"});for(var g in d)d.hasOwnProperty(g)&&(i+=g+"='"+d[g]+"' ");m.mix(c,{quality:"high",movie:a,wmode:"transparent"});for(var k in c)c.hasOwnProperty(k)&&
(f+="<param name='"+k+"' value='"+c[k]+"'/>");if(h){for(var l in h)h.hasOwnProperty(l)&&(e+="&"+l+"="+encodeURIComponent(h[l]));e=e.substring(1)}a="<object "+i+' classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" >'+f+(e?'<param name="flashVars" value="'+e+'"/>':"")+"<embed "+i+" "+(e?'FlashVars="'+e+'"':"")+' pluginspage="http://www.macromedia.com/go/getflashplayer"  quality="high"  src="'+a+'"  type="application/x-shockwave-flash"/></object>';return{el:new p(a,null,b),html:a}},createSWFRuntime2:function(a,
c,b){var b=b||document,d=(new p("<div style='width:0;height:0;overflow:hidden;'>",null,b)).appendTo(b.body),d=j.createSWF.apply(this,arguments).el.appendTo(d);q.ie||(d=d.one("object"));return d[0]},createSWFRuntime:function(a,c,b){var d=c.attrs||{},h=c.flashVars||{},i=c.params||{},n="",e="",g="",b=b||document;d.id=d.id||m.guid("ke-runtimeflash-");for(var k in d)d.hasOwnProperty(k)&&(n+=k+"='"+d[k]+"' ");for(var l in i)i.hasOwnProperty(l)&&(e+="<param name='"+l+"' value='"+i[l]+"'/>");for(var j in h)h.hasOwnProperty(j)&&
(g+="&"+j+"="+encodeURIComponent(h[j]));var g=g.substring(1),a=q.ie?"<object "+n+' classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" >'+e+'<param name="movie" value="'+a+'" />'+(g?'<param name="flashVars" value="'+g+'" />':"")+"</object>":"<object type='application/x-shockwave-flash' data='"+a+"' "+n+">"+e+(g?'<param name="flashVars" value="'+g+'"/>':"")+"</object>",o=c.holder;o||(o=(new p("<div style='"+(c.style?c.style:"width:1px;height:1px;position:absolute;NaN")+"'>",null,b)).appendTo(b.body),
setTimeout(function(){o.offset({left:f.scrollLeft(),top:f.scrollTop()})},100));o.html(a);return b.getElementById(d.id)}};return j});
